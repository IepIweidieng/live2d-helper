!function webpackUniversalModuleDefinition(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Live2dHelper=e():t.Live2dHelper=e()}(window,function(){return r=[function(o,t,at){!function(it,nt,ot){var t;!function(t){_csm.getVersion=function(){return c.ccall("csmGetVersion","number",[],[])},_csm.getLatestMocVersion=function(){return c.ccall("csmGetLatestMocVersion","number",[],[])},_csm.getMocVersion=function(t){return c.ccall("csmGetMocVersion","number",["number"],[t])},_csm.getSizeofModel=function(t){return c.ccall("csmGetSizeofModel","number",["number"],[t])},_csm.reviveMocInPlace=function(t,e){return c.ccall("csmReviveMocInPlace","number",["number","number"],[t,e])},_csm.initializeModelInPlace=function(t,e,r){return c.ccall("csmInitializeModelInPlace","number",["number","number","number"],[t,e,r])},_csm.getParameterCount=function(t){return c.ccall("csmGetParameterCount","number",["number"],[t])},_csm.getParameterIds=function(t){return c.ccall("csmGetParameterIds","number",["number"],[t])},_csm.getParameterMinimumValues=function(t){return c.ccall("csmGetParameterMinimumValues","number",["number"],[t])},_csm.getParameterMaximumValues=function(t){return c.ccall("csmGetParameterMaximumValues","number",["number"],[t])},_csm.getParameterDefaultValues=function(t){return c.ccall("csmGetParameterDefaultValues","number",["number"],[t])},_csm.getParameterValues=function(t){return c.ccall("csmGetParameterValues","number",["number"],[t])},_csm.getPartCount=function(t){return c.ccall("csmGetPartCount","number",["number"],[t])},_csm.getPartIds=function(t){return c.ccall("csmGetPartIds","number",["number"],[t])},_csm.getPartOpacities=function(t){return c.ccall("csmGetPartOpacities","number",["number"],[t])},_csm.getPartParentPartIndices=function(t){return c.ccall("csmGetPartParentPartIndices","number",["number"],[t])},_csm.getDrawableCount=function(t){return c.ccall("csmGetDrawableCount","number",["number"],[t])},_csm.getDrawableIds=function(t){return c.ccall("csmGetDrawableIds","number",["number"],[t])},_csm.getDrawableConstantFlags=function(t){return c.ccall("csmGetDrawableConstantFlags","number",["number"],[t])},_csm.getDrawableDynamicFlags=function(t){return c.ccall("csmGetDrawableDynamicFlags","number",["number"],[t])},_csm.getDrawableTextureIndices=function(t){return c.ccall("csmGetDrawableTextureIndices","number",["number"],[t])},_csm.getDrawableDrawOrders=function(t){return c.ccall("csmGetDrawableDrawOrders","number",["number"],[t])},_csm.getDrawableRenderOrders=function(t){return c.ccall("csmGetDrawableRenderOrders","number",["number"],[t])},_csm.getDrawableOpacities=function(t){return c.ccall("csmGetDrawableOpacities","number",["number"],[t])},_csm.getDrawableMaskCounts=function(t){return c.ccall("csmGetDrawableMaskCounts","number",["number"],[t])},_csm.getDrawableMasks=function(t){return c.ccall("csmGetDrawableMasks","number",["number"],[t])},_csm.getDrawableVertexCounts=function(t){return c.ccall("csmGetDrawableVertexCounts","number",["number"],[t])},_csm.getDrawableVertexPositions=function(t){return c.ccall("csmGetDrawableVertexPositions","number",["number"],[t])},_csm.getDrawableVertexUvs=function(t){return c.ccall("csmGetDrawableVertexUvs","number",["number"],[t])},_csm.getDrawableIndexCounts=function(t){return c.ccall("csmGetDrawableIndexCounts","number",["number"],[t])},_csm.getDrawableIndices=function(t){return c.ccall("csmGetDrawableIndices","number",["number"],[t])},_csm.mallocMoc=function(t){return c.ccall("csmMallocMoc","number",["number"],[t])},_csm.mallocModelAndInitialize=function(t){return c.ccall("csmMallocModelAndInitialize","number",["number"],[t])},_csm.malloc=function(t){return c.ccall("csmMalloc","number",["number"],[t])},_csm.setLogFunction=function(t){c.ccall("csmSetLogFunction",null,["number"],[t])},_csm.updateModel=function(t){c.ccall("csmUpdateModel",null,["number"],[t])},_csm.readCanvasInfo=function(t,e,r,i){c.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[t,e,r,i])},_csm.resetDrawableDynamicFlags=function(t){c.ccall("csmResetDrawableDynamicFlags",null,["number"],[t])},_csm.free=function(t){c.ccall("csmFree",null,["number"],[t])};var l=_csm;function Version(){}function _csm(){}function Logging(){}function Moc(t){var e=l.mallocMoc(t.byteLength);e&&(new Uint8Array(c.HEAPU8.buffer,e,t.byteLength).set(new Uint8Array(t)),this._ptr=l.reviveMocInPlace(e,t.byteLength),this._ptr||l.free(e))}function Model(t){this._ptr=l.mallocModelAndInitialize(t._ptr),this._ptr&&(this.parameters=new r(this._ptr),this.parts=new i(this._ptr),this.drawables=new n(this._ptr),this.canvasinfo=new e(this._ptr))}Version.csmGetVersion=function(){return l.getVersion()},Version.csmGetLatestMocVersion=function(){return l.getLatestMocVersion()},Version.csmGetMocVersion=function(t){return l.getMocVersion(t._ptr)},t.Version=Version,Logging.csmSetLogFunction=function(t){Logging.logFunction=t;t=c.addFunction(Logging.wrapLogFunction,"vi");l.setLogFunction(t)},Logging.csmGetLogFunction=function(){return Logging.logFunction},Logging.wrapLogFunction=function(t){t=c.UTF8ToString(t);Logging.logFunction(t)},t.Logging=Logging,Moc.fromArrayBuffer=function(t){if(!t)return null;t=new Moc(t);return t._ptr?t:null},Moc.prototype._release=function(){l.free(this._ptr),this._ptr=0},t.Moc=Moc,Model.fromMoc=function(t){t=new Model(t);return t._ptr?t:null},Model.prototype.update=function(){l.updateModel(this._ptr)},Model.prototype.release=function(){l.free(this._ptr),this._ptr=0},t.Model=Model;var e=function(t){var e,r,i,n,o,a,s;t&&(i=(e=new Float32Array(2)).length*e.BYTES_PER_ELEMENT,r=l.malloc(i),(r=new Uint8Array(c.HEAPU8.buffer,r,i)).set(new Uint8Array(e.buffer)),o=(i=new Float32Array(2)).length*i.BYTES_PER_ELEMENT,n=l.malloc(o),(n=new Uint8Array(c.HEAPU8.buffer,n,o)).set(new Uint8Array(i.buffer)),a=(o=new Float32Array(1)).length*o.BYTES_PER_ELEMENT,s=l.malloc(a),(s=new Uint8Array(c.HEAPU8.buffer,s,a)).set(new Uint8Array(o.buffer)),l.readCanvasInfo(t,r.byteOffset,n.byteOffset,s.byteOffset),e=new Float32Array(r.buffer,r.byteOffset,r.length),i=new Float32Array(n.buffer,n.byteOffset,n.length),o=new Float32Array(s.buffer,s.byteOffset,s.length),this.CanvasWidth=e[0],this.CanvasHeight=e[1],this.CanvasOriginX=i[0],this.CanvasOriginY=i[1],this.PixelsPerUnit=o[0],l.free(r.byteOffset),l.free(n.byteOffset),l.free(s.byteOffset))},r=(t.CanvasInfo=e,function(t){var e;this.count=l.getParameterCount(t),e=l.getParameterCount(t),this.ids=new Array(e);for(var r=new Uint32Array(c.HEAPU32.buffer,l.getParameterIds(t),e),i=0;i<r.length;i++)this.ids[i]=c.UTF8ToString(r[i]);e=l.getParameterCount(t),this.minimumValues=new Float32Array(c.HEAPF32.buffer,l.getParameterMinimumValues(t),e),e=l.getParameterCount(t),this.maximumValues=new Float32Array(c.HEAPF32.buffer,l.getParameterMaximumValues(t),e),e=l.getParameterCount(t),this.defaultValues=new Float32Array(c.HEAPF32.buffer,l.getParameterDefaultValues(t),e),e=l.getParameterCount(t),this.values=new Float32Array(c.HEAPF32.buffer,l.getParameterValues(t),e)}),i=(t.Parameters=r,function(t){var e;this.count=l.getPartCount(t),e=l.getPartCount(t),this.ids=new Array(e);for(var r=new Uint32Array(c.HEAPU32.buffer,l.getPartIds(t),e),i=0;i<r.length;i++)this.ids[i]=c.UTF8ToString(r[i]);e=l.getPartCount(t),this.opacities=new Float32Array(c.HEAPF32.buffer,l.getPartOpacities(t),e),e=l.getPartCount(t),this.parentIndices=new Int32Array(c.HEAP32.buffer,l.getPartParentPartIndices(t),e)}),n=(t.Parts=i,Drawables.prototype.resetDynamicFlags=function(){l.resetDrawableDynamicFlags(this._modelPtr)},Drawables);function Drawables(t){this._modelPtr=t;var e,r=null;this.count=l.getDrawableCount(t),e=l.getDrawableCount(t),this.ids=new Array(e);for(var i=new Uint32Array(c.HEAPU32.buffer,l.getDrawableIds(t),e),n=0;n<i.length;n++)this.ids[n]=c.UTF8ToString(i[n]);e=l.getDrawableCount(t),this.constantFlags=new Uint8Array(c.HEAPU8.buffer,l.getDrawableConstantFlags(t),e),e=l.getDrawableCount(t),this.dynamicFlags=new Uint8Array(c.HEAPU8.buffer,l.getDrawableDynamicFlags(t),e),e=l.getDrawableCount(t),this.textureIndices=new Int32Array(c.HEAP32.buffer,l.getDrawableTextureIndices(t),e),e=l.getDrawableCount(t),this.drawOrders=new Int32Array(c.HEAP32.buffer,l.getDrawableDrawOrders(t),e),e=l.getDrawableCount(t),this.renderOrders=new Int32Array(c.HEAP32.buffer,l.getDrawableRenderOrders(t),e),e=l.getDrawableCount(t),this.opacities=new Float32Array(c.HEAPF32.buffer,l.getDrawableOpacities(t),e),e=l.getDrawableCount(t),this.maskCounts=new Int32Array(c.HEAP32.buffer,l.getDrawableMaskCounts(t),e),e=l.getDrawableCount(t),this.vertexCounts=new Int32Array(c.HEAP32.buffer,l.getDrawableVertexCounts(t),e),e=l.getDrawableCount(t),this.indexCounts=new Int32Array(c.HEAP32.buffer,l.getDrawableIndexCounts(t),e),e=l.getDrawableCount(t),r=new Int32Array(c.HEAP32.buffer,l.getDrawableMaskCounts(t),e),this.masks=new Array(e);for(var o=new Uint32Array(c.HEAPU32.buffer,l.getDrawableMasks(t),e),n=0;n<o.length;n++)this.masks[n]=new Int32Array(c.HEAP32.buffer,o[n],r[n]);e=l.getDrawableCount(t),r=new Int32Array(c.HEAP32.buffer,l.getDrawableVertexCounts(t),e),this.vertexPositions=new Array(e);var a=new Uint32Array(c.HEAPU32.buffer,l.getDrawableVertexPositions(t),e);for(n=0;n<a.length;n++)this.vertexPositions[n]=new Float32Array(c.HEAPF32.buffer,a[n],2*r[n]);e=l.getDrawableCount(t),r=new Int32Array(c.HEAP32.buffer,l.getDrawableVertexCounts(t),e),this.vertexUvs=new Array(e);var s=new Uint32Array(c.HEAPU32.buffer,l.getDrawableVertexUvs(t),e);for(n=0;n<s.length;n++)this.vertexUvs[n]=new Float32Array(c.HEAPF32.buffer,s[n],2*r[n]);e=l.getDrawableCount(t),r=new Int32Array(c.HEAP32.buffer,l.getDrawableIndexCounts(t),e),this.indices=new Array(e);var u=new Uint32Array(c.HEAPU32.buffer,l.getDrawableIndices(t),e);for(n=0;n<u.length;n++)this.indices[n]=new Uint16Array(c.HEAPU16.buffer,u[n],r[n])}function Utils(){}t.Drawables=n,Utils.hasBlendAdditiveBit=function(t){return 1==(1&t)},Utils.hasBlendMultiplicativeBit=function(t){return 2==(2&t)},Utils.hasIsDoubleSidedBit=function(t){return 4==(4&t)},Utils.hasIsInvertedMaskBit=function(t){return 8==(8&t)},Utils.hasIsVisibleBit=function(t){return 1==(1&t)},Utils.hasVisibilityDidChangeBit=function(t){return 2==(2&t)},Utils.hasOpacityDidChangeBit=function(t){return 4==(4&t)},Utils.hasDrawOrderDidChangeBit=function(t){return 8==(8&t)},Utils.hasRenderOrderDidChangeBit=function(t){return 16==(16&t)},Utils.hasVertexPositionsDidChangeBit=function(t){return 32==(32&t)},t.Utils=Utils;function Ha(t){t=t||{};var h,e,r={};for(e in h=h||(void 0!==t?t:{}))h.hasOwnProperty(e)&&(r[e]=h[e]);var i,n,o,s,u=!1,l="object"==typeof window,f="function"==typeof importScripts,u="object"==typeof it&&"object"==typeof it.versions&&"string"==typeof it.versions.node&&!l&&!f,g=!l&&!u&&!f,p="",L=(u?(p=nt+"/",i=function(t,e){var r;return(r=z(t))?e?r:r.toString():(o=o||at(7),t=(s=s||at(8)).normalize(t),o.readFileSync(t,e?null:"utf8"))},n=function(t){return assert((t=(t=i(t,!0)).buffer?t:new Uint8Array(t)).buffer),t},1<it.argv.length&&it.argv[1].replace(/\\/g,"/"),it.argv.slice(2),it.on("uncaughtException",function(t){throw t}),it.on("unhandledRejection",B),h.inspect=function(){return"[Emscripten Module object]"}):g?("undefined"!=typeof read&&(i=function(t){var e=z(t);return e?C(e):read(t)}),n=function(t){var e;return(e=z(t))?e:"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(assert("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof print&&((console="undefined"==typeof console?{}:console).log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(l||f)&&(f?p=self.location.href:document.currentScript&&(p=document.currentScript.src),p=0!==(p=rt?rt:p).indexOf("blob:")?p.substr(0,p.lastIndexOf("/")+1):"",i=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(t){if(e=z(e))return C(e);throw t}},f&&(n=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){if(e=z(e))return e;throw t}})),h.print||console.log.bind(console)),m=h.printErr||console.warn.bind(console);for(e in r)r.hasOwnProperty(e)&&(h[e]=r[e]);function da(){return{exports:function(r,o,a){var t=new ArrayBuffer(8),s=new Int32Array(t),u=new Float32Array(t),l=new Float64Array(t);function e(t){return s[t]}function f(t,e){s[t]=e}function g(){return l[0]}function h(t){l[0]=t}function j(t){u[0]=t}function k(){return u[0]}function uc(t,e){var r,i;if(void 0===ot)for(r=atob(e),i=0;i<r.length;i++)c[t+i]=r.charCodeAt(i);else for(r=ot.from(e,"base64"),i=0;i<r.length;i++)c[t+i]=r[i]}var c,i,n,m,ft,gt,v,pt,dt,mt,p,_t,tt,yt,bt,At,d,Ct,Mt,S,y,b,A,et,V;t=o.buffer,c=new Uint8Array(t);return uc(1024,"CgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAE1PQzMAW0NTTV0gW0VdJXM6ICVzCgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgAlcwoAICAAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIENvcnJ1cHRlZCAgbW9jMyBmaWxlLgoAImFkZHJlc3MiIGlzIG51bGwuAFtDU01dIFtXXVJvdGF0aW9uRGVmb3JtZXI6IE5vdCBmb3VuZCB0cmFuc2Zvcm1lZCBEaXJlY3Rpb24uCgAlMDJYIABbQ1NNXSBbRV1jc21SZXZpdmVNb2NJblBsYWNlIGlzIGZhaWxlZC4gVGhlIENvcmUgdW5zdXBwb3J0IGxhdGVyIHRoYW4gbW9jMyB2ZXI6WyVkXS4gVGhpcyBtb2MzIHZlciBpcyBbJWRdLgoAImFkZHJlc3MiIGFsaWdubWVudCBpcyBpbnZhbGlkLgBbQ1NNXSBbRV1VcGRhdGVEZWZvcm1lckhpZXJhcmNoeSgpOiBVbmtub3duIERlZm9ybWVyIFR5cGUuCgBbQ1NNXSBbRV1jc21HZXRNb2NWZXJzaW9uIGlzIGZhaWxlZC4gQ29ycnVwdGVkIG1vYzMgZmlsZS4KACJzaXplIiBpcyBpbnZhbGlkLgBMaXZlMkQgQ3ViaXNtIFNESyBDb3JlIFZlcnNpb24gJWQuJWQuJWQAIm1vZGVsIiBpcyBpbnZhbGlkLgBjc21HZXRNb2NWZXJzaW9uAGNzbVJldml2ZU1vY0luUGxhY2UAY3NtUmVhZENhbnZhc0luZm8AIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AY3NtR2V0U2l6ZW9mTW9kZWwAIm1vYyIgaXMgaW52YWxpZC4AY3NtSW5pdGlhbGl6ZU1vZGVsSW5QbGFjZQAic2l6ZSIgaXMgaW52YWxpZABjc21VcGRhdGVNb2RlbABjc21HZXRQYXJhbWV0ZXJDb3VudABjc21HZXRQYXJhbWV0ZXJJZHMAY3NtR2V0UGFyYW1ldGVyTWluaW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJNYXhpbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlckRlZmF1bHRWYWx1ZXMAY3NtR2V0UGFyYW1ldGVyVmFsdWVzAGNzbUdldFBhcnRDb3VudABjc21HZXRQYXJ0SWRzAGNzbUdldFBhcnRPcGFjaXRpZXMAY3NtR2V0UGFydFBhcmVudFBhcnRJbmRpY2VzAGNzbUdldERyYXdhYmxlQ291bnQAY3NtR2V0RHJhd2FibGVJZHMAY3NtR2V0RHJhd2FibGVDb25zdGFudEZsYWdzAGNzbUdldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldERyYXdhYmxlVGV4dHVyZUluZGljZXMAY3NtR2V0RHJhd2FibGVEcmF3T3JkZXJzAGNzbUdldERyYXdhYmxlUmVuZGVyT3JkZXJzAGNzbUdldERyYXdhYmxlT3BhY2l0aWVzAGNzbUdldERyYXdhYmxlTWFza0NvdW50cwBjc21HZXREcmF3YWJsZU1hc2tzAGNzbUdldERyYXdhYmxlVmVydGV4Q291bnRzAGNzbUdldERyYXdhYmxlVmVydGV4UG9zaXRpb25zAGNzbUdldERyYXdhYmxlVmVydGV4VXZzAGNzbUdldERyYXdhYmxlSW5kZXhDb3VudHMAY3NtR2V0RHJhd2FibGVJbmRpY2VzAGNzbVJlc2V0RHJhd2FibGVEeW5hbWljRmxhZ3M="),uc(2572,"Cw=="),uc(2611,"//////8="),uc(2680,"GBgAAC0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAAL"),uc(2736,"EQAPChEREQMKBwABEwkLCwAACQYLAAALAAYRAAAAERER"),uc(2785,"Cw=="),uc(2794,"EQAKChEREQAKAAACAAkLAAAACQALAAAL"),uc(2843,"DA=="),uc(2855,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),uc(2901,"Dg=="),uc(2913,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),uc(2959,"EA=="),uc(2971,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),uc(3026,"EgAAABISEgAAAAAAAAk="),uc(3075,"Cw=="),uc(3087,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),uc(3133,"DA=="),uc(3145,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGLTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAu"),uc(3232,"AwAAAAQAAAAEAAAABgAAAIP5ogBETm4A/CkVANFXJwDdNPUAYtvAADyZlQBBkEMAY1H+ALveqwC3YcUAOm4kANJNQgBJBuAACeouAByS0QDrHf4AKbEcAOg+pwD1NYIARLsuAJzphAC0JnAAQX5fANaROQBTgzkAnPQ5AItfhAAo+b0A+B87AN7/lwAPmAUAES/vAApaiwBtH20Az342AAnLJwBGT7cAnmY/AC3qXwC6J3UA5evHAD178QD3OQcAklKKAPtr6gAfsV8ACF2NADADVgB7/EYA8KtrACC8zwA29JoA46kdAF5hkQAIG+YAhZllAKAUXwCNQGgAgNj/ACdzTQAGBjEAylYVAMmocwB74mAAa4zAABnERwDNZ8MACejcAFmDKgCLdsQAphyWAESv3QAZV9EApT4FAAUH/wAzfj8AwjLoAJhP3gC7fTIAJj3DAB5r7wCf+F4ANR86AH/yygDxhx0AfJAhAGokfADVbvoAMC13ABU7QwC1FMYAwxmdAK3EwgAsTUEADABdAIZ9RgDjcS0Am8aaADNiAAC00nwAtKeXADdV1QDXPvYAoxAYAE12/ABknSoAcNerAGN8+AB6sFcAFxXnAMBJVgA71tkAp4Q4ACQjywDWincAWlQjAAAfuQDxChsAGc7fAJ8x/wBmHmoAmVdhAKz7RwB+f9gAImW3ADLoiQDmv2AA78TNAGw2CQBdP9QAFt7XAFg73gDem5IA0iIoACiG6ADiWE0AxsoyAAjjFgDgfcsAF8BQAPMdpwAY4FsALhM0AIMSYgCDSAEA9Y5bAK2wfwAe6fIASEpDABBn0wCq3dgArl9CAGphzgAKKKQA05m0AAam8gBcd38Ao8KDAGE8iACKc3gAr4xaAG/XvQAtpmMA9L/LAI2B7wAmwWcAVcpFAMrZNgAoqNIAwmGNABLJdwAEJhQAEkabAMRZxADIxUQATbKRAAAX8wDUQ60AKUnlAP3VEAAAvvwAHpTMAHDO7gATPvUA7PGAALPnwwDH+CgAkwWUAMFxPgAuCbMAC0XzAIgSnACrIHsALrWfAEeSwgB7Mi8ADFVtAHKnkABr5x8AMcuWAHkWSgBBeeIA9N+JAOiUlwDi5oQAmTGXAIjtawBfXzYAu/0OAEiatABnpGwAcXJCAI1dMgCfFbgAvOUJAI0xJQD3dDkAMAUcAA0MAQBLCGgALO5YAEeqkAB05wIAvdYkAPd9pgBuSHIAnxbvAI6UpgC0kfYA0VNRAM8K8gAgmDMA9Ut+ALJjaADdPl8AQF0DAIWJfwBVUikAN2TAAG3YEAAySDIAW0x1AE5x1ABFVG4ACwnBACr1aQAUZtUAJwedAF0EUAC0O9sA6nbFAIf5FwBJa30AHSe6AJZpKQDGzKwArRRUAJDiagCI2YkALHJQAASkvgB3B5QA8zBwAAD8JwDqcagAZsJJAGTgPQCX3YMAoz+XAEOU/QANhowAMUHeAJI5nQDdcIwAF7fnAAjfOwAVNysAXICgAFqAkwAQEZIAD+jYAGyArwDb/0sAOJAPAFkYdgBipRUAYcu7AMeJuQAQQL0A0vIEAEl1JwDrtvYA2yK7AAoUqgCJJi8AZIN2AAk7MwAOlBoAUTqqAB2jwgCv7a4AXCYSAG3CTQAtepwAwFaXAAM/gwAJ8PYAK0CMAG0xmQA5tAcADCAVANjDWwD1ksQAxq1LAE7KpQCnN80A5qk2AKuSlADdQmgAGWPeAHaM7wBoi1IA/Ns3AK6hqwDfFTEAAK6hAAz72gBkTWYA7QW3ACllMABXVr8AR/86AGr5uQB1vvMAKJPfAKuAMABmjPYABMsVAPoiBgDZ5B0APbOkAFcbjwA2zQkATkLpABO+pAAzI7UA8KoaAE9lqADSwaUACz8PAFt4zQAj+XYAe4sEAIkXcgDGplMAb27iAO/rAACbSlgAxNq3AKpmugB2z88A0QIdALHxLQCMmcEAw613AIZI2gD3XaAAxoD0AKzwLwDd7JoAP1y8ANDebQCQxx8AKtu2AKMlOgAAr5oArVOTALZXBAApLbQAS4B+ANoHpwB2qg4Ae1mhABYSKgDcty0A+uX9AInb/gCJvv0A5HZsAAap/AA+gHAAhW4VAP2H/wAoPgcAYWczACoYhgBNveoAs+evAI9tbgCVZzkAMb9bAITXSAAw3xYAxy1DACVhNQDJcM4AMMu4AL9s/QCkAKIABWzkAFrdoAAhb0cAYhLSALlchABwYUkAa1bgAJlSAQBQVTcAHtW3ADPxxAATbl8AXTDkAIUuqQAdssMAoTI2AAi3pADqsdQAFvchAI9p5AAn/3cADAOAAI1ALQBPzaAAIKWZALOi0wAvXQoAtPlCABHaywB9vtAAm9vBAKsXvQDKooEACGpcAC5VFwAnAFUAfxTwAOEHhgAUC2QAlkGNAIe+3gDa/SoAayW2AHuJNAAF8/4Aub+eAGhqTwBKKqgAT8RaAC34vADXWpgA9MeVAA1NjQAgOqYApFdfABQ/sQCAOJUAzCABAHHdhgDJ3rYAv2D1AE1lEQABB2sAjLCsALLA0ABRVUgAHvsOAJVywwCjBjsAwEA1AAbcewDgRcwATin6ANbKyADo80EAfGTeAJtk2ADZvjEApJfDAHdY1ABp48UA8NoTALo6PABGGEYAVXVfANK99QBuksYArC5dAA5E7QAcPkIAYcSHACn96QDn1vMAInzKAG+RNQAI4MUA/9eNAG5q4gCw/cYAkwjBAHxddABrrbIAzW6dAD5yewDGEWoA98+pAClz3wC1yboAtwBRAOKyDQB0uiQA5X1gAHTYigANFSwAgRgMAH5mlAABKRYAn3p2AP39vgBWRe8A2X42AOzZEwCLurkAxJf8ADGoJwDxbsMAlMU2ANioVgC0qLUAz8wOABKJLQBvVzQALFaJAJnO4wDWILkAa16qAD4qnAARX8wA/QtKAOH0+wCOO20A4oYsAOnUhAD8tKkA7+7RAC41yQAvOWEAOCFEABvZyACB/AoA+0pqAC8c2ABTtIQATpmMAFQizAAqVdwAwMbWAAsZlgAacLgAaZVkACZaYAA/Uu4AfxEPAPS1EQD8y/UANLwtADS87gDoXcwA3V5gAGeOmwCSM+8AyRe4AGFYmwDhV7wAUYPGANg+EADdcUgALRzdAK8YoQAhLEYAWfPXANl6mACeVMAAT4b6AFYG/ADlea4AiSI2ADitIgBnk9wAVeiqAIImOADK55sAUQ2kAJkzsQCp1w4AaQVIAGWy8AB/iKcAiEyXAPnRNgAhkrMAe4JKAJjPIQBAn9wA3EdVAOF0OgBn60IA/p3fAF7UXwB7Z6QAuqx6AFX2ogAriCMAQbpVAFluCAAhKoYAOUeDAInj5gDlntQASftAAP9W6QAcD8oAxVmKAJT6KwDTwcUAD8XPANtargBHxYYAhUNiACGGOwAseZQAEGGHACpMewCALBoAQ78SAIgmkAB4PIkAqMTkAOXbewDEOsIAJvTqAPdnigANkr8AZaMrAD2TsQC9fAsApFHcACfdYwBp4d0AmpQZAKgplQBozigACe20AESfIABOmMoAcIJjAH58IwAPuTIAp/WOABRW5wAh8QgAtZ0qAG9+TQClGVEAtfmrAILf1gCW3WEAFjYCAMQ6nwCDoqEAcu1tADmNegCCuKkAazJcAEYnWwAANO0A0gB3APz0VQABWU0A4HGA"),uc(6019,"QPsh+T8AAAAALUR0PgAAAICYRvg8AAAAYFHMeDsAAACAgxvwOQAAAEAgJXo4AAAAgCKC4zYAAAAAHfNpNThj7T7aD0k/Xph7P9oPyT9pN6wxaCEiM7QPFDNoIaIz2w9JP9sPSb/kyxZA5MsWwAAAAAAAAACA2w9JQNsPScAAAIA/AADAPwAAAADcz9E1AAAAAADAFT8="),uc(6168,"BQ=="),uc(6180,"DA=="),uc(6204,"DQAAAA4AAADIGQAAAAQ="),uc(6228,"AQ=="),uc(6243,"Cv////8="),uc(6500,"9B0="),i={Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,Math:Math},n=o.buffer,m=(t=r).memory,ft=a,gt=new i.Int8Array(n),v=new i.Int16Array(n),pt=new i.Int32Array(n),dt=new i.Uint8Array(n),mt=new i.Uint16Array(n),p=new i.Uint32Array(n),_t=new i.Float32Array(n),tt=new i.Float64Array(n),yt=i.Math.imul,bt=i.Math.fround,At=i.Math.abs,d=i.Math.clz32,Ct=i.Math.min,i.Math.max,Mt=i.Math.floor,i.Math.ceil,i.Math.sqrt,t.abort,i.NaN,S=i.Infinity,y=t.a,b=t.b,A=t.c,et=5251088,V=0,ft[1]=function(t,F,e,r){t|=0,F|=0,e|=0,r|=0;var i,n,o,a,s,u,l,c,h,f,D,U,N,O,X,z,G,J,j,W,H,Q,q,Z,K,g=0,p=bt(0),d=bt(0),m=0,_=bt(0),y=bt(0),b=bt(0),A=bt(0),C=bt(0),M=bt(0),v=bt(0),S=bt(0),w=bt(0),x=bt(0),B=bt(0),P=bt(0),I=bt(0),V=bt(0),E=bt(0),k=bt(0),T=bt(0),R=bt(0),L=bt(0),$=(bt(0),bt(0),bt(0),bt(0),bt(0),bt(0),bt(0),bt(0),bt(0),0);if(et=i=et-32|0,1<=(0|r))for(N=(o=pt[t+4>>2])+-1|0,O=(u=pt[t>>2])+-1|0,X=f=(n=pt[t+20>>2])+(o<<3)|0,z=D=((h=yt(u,a=o+1|0))<<3)+n|0,G=U=(o+h<<3)+n|0,l=bt(0|u),c=bt(0|o),K=pt[t+8>>2],t=0;b=_t[4+(g=(s=t<<3)+F|0)>>2],d=bt(b*l),A=_t[g>>2],p=bt(A*c),g=b>=bt(1),d=b<bt(0)^1&&!(g|A>=bt(1)|A<bt(0))?(g=bt(At(w=d))<bt(2147483648)?~~d:-2147483648,y=bt(w-bt(0|g)),m=bt(At(d=p))<bt(2147483648)?~~p:-2147483648,_=bt(d-bt(0|m)),g=m+yt(g,a)|0,K?(p=bt(bt(1)-y),d=bt(bt(1)-_),m=(g<<3)+n|0,g=(g+a<<3)+n|0,_t[e+s>>2]=bt(bt(bt(p*bt(d*_t[m>>2]))+bt(p*bt(_*_t[m+8>>2])))+bt(y*bt(d*_t[g>>2])))+bt(y*bt(_*_t[g+8>>2])),p=bt(bt(bt(p*bt(d*_t[m+4>>2]))+bt(p*bt(_*_t[m+12>>2])))+bt(y*bt(d*_t[g+4>>2]))),bt(y*bt(_*_t[g+12>>2]))):bt(_+y)<=bt(1)?(p=bt(bt(bt(1)-_)-y),m=(g<<3)+n|0,g=(g+a<<3)+n|0,_t[e+s>>2]=bt(bt(p*_t[m>>2])+bt(_*_t[m+8>>2]))+bt(y*_t[g>>2]),p=bt(bt(p*_t[m+4>>2])+bt(_*_t[m+12>>2])),bt(y*_t[g+4>>2])):(p=bt(bt(_+bt(-1))+y),m=(g+a<<3)+n|0,d=bt(bt(1)-_),b=bt(bt(1)-y),g=(g<<3)+n|0,_t[e+s>>2]=bt(bt(p*_t[m+8>>2])+bt(d*_t[m>>2]))+bt(b*_t[g+8>>2]),p=bt(bt(p*_t[m+12>>2])+bt(d*_t[m+4>>2])),bt(b*_t[g+12>>2]))):($||(w=_t[4+G>>2],J=_t[n+4>>2],C=bt(w-J),j=_t[4+X>>2],W=_t[4+z>>2],M=bt(j-W),x=bt(bt(C-M)*bt(.5)),H=_t[U>>2],Q=_t[n>>2],v=bt(H-Q),q=_t[f>>2],Z=_t[D>>2],S=bt(q-Z),B=bt(bt(v-S)*bt(.5)),M=bt(bt(M+C)*bt(.5)),S=bt(bt(S+v)*bt(.5)),$=1,C=bt(bt(bt(bt(bt(J+j)+W)+w)*bt(.25))-bt(C*bt(.5))),v=bt(bt(bt(bt(bt(Q+q)+Z)+H)*bt(.25))-bt(v*bt(.5)))),b<bt(3)^1|A>bt(-2)^1|A<bt(3)^1|b>bt(-2)^1?(_t[e+s>>2]=bt(b*B)+bt(bt(A*S)+v),p=bt(b*x),bt(bt(A*M)+C)):(A<=bt(0)?b<=bt(0)?(y=bt(bt(b+bt(2))*bt(.5)),_=bt(bt(A+bt(2))*bt(.5)),p=bt(x+x),R=bt(C-p),d=bt(B+B),L=bt(v-d),k=bt(C-bt(M+M)),P=bt(k-p),T=bt(v-bt(S+S)),I=bt(T-d),V=_t[n+4>>2],E=_t[n>>2]):g?(p=bt(x*bt(3)),d=bt(C-bt(M+M)),k=bt(p+d),P=bt(B*bt(3)),I=bt(v-bt(S+S)),T=bt(P+I),y=bt(bt(b+bt(-1))*bt(.5)),_=bt(bt(A+bt(2))*bt(.5)),V=bt(p+C),E=bt(P+v),P=bt(x+d),I=bt(B+I),R=_t[4+z>>2],L=_t[D>>2]):(p=bt(C-bt(M+M)),g=O,m=bt(At(d))<bt(2147483648)?~~d:-2147483648,y=bt(0|(g=(0|m)==(0|u)?g:m)),_=bt(y/l),P=bt(bt(_*x)+p),w=bt(_*B),_=bt(v-bt(S+S)),I=bt(w+_),b=bt(bt(0|(m=g+1|0))/l),k=bt(bt(b*x)+p),T=bt(bt(b*B)+_),_=bt(bt(A+bt(2))*bt(.5)),y=bt(d-y),g=(yt(g,a)<<3)+n|0,R=_t[g+4>>2],L=_t[g>>2],g=(yt(m,a)<<3)+n|0,V=_t[g+4>>2],E=_t[g>>2]):A>=bt(1)?b<=bt(0)?(y=bt(bt(b+bt(2))*bt(.5)),_=bt(bt(A+bt(-1))*bt(.5)),p=bt(x+x),P=bt(bt(M+C)-p),d=bt(B+B),I=bt(bt(S+v)-d),V=bt(bt(M*bt(3))+C),R=bt(V-p),E=bt(bt(S*bt(3))+v),L=bt(E-d),k=_t[4+X>>2],T=_t[f>>2]):g?(p=bt(x*bt(3)),k=bt(p+bt(M+C)),d=bt(B*bt(3)),T=bt(d+bt(S+v)),w=p,p=bt(bt(M*bt(3))+C),V=bt(w+p),w=d,d=bt(bt(S*bt(3))+v),E=bt(w+d),y=bt(bt(b+bt(-1))*bt(.5)),_=bt(bt(A+bt(-1))*bt(.5)),R=bt(x+p),L=bt(B+d),P=_t[4+G>>2],I=_t[U>>2]):(p=bt(bt(M*bt(3))+C),g=O,m=bt(At(d))<bt(2147483648)?~~d:-2147483648,y=bt(0|(g=(0|m)==(0|u)?g:m)),_=bt(y/l),R=bt(bt(_*x)+p),w=bt(_*B),_=bt(bt(S*bt(3))+v),L=bt(w+_),b=bt(bt(0|(m=g+1|0))/l),V=bt(bt(b*x)+p),E=bt(bt(b*B)+_),_=bt(bt(A+bt(-1))*bt(.5)),y=bt(d-y),g=(yt(g,a)+o<<3)+n|0,P=_t[g+4>>2],I=_t[g>>2],g=(yt(m,a)+o<<3)+n|0,k=_t[g+4>>2],T=_t[g>>2]):b<=bt(0)?(y=bt(bt(b+bt(2))*bt(.5)),g=N,m=bt(At(d=p))<bt(2147483648)?~~p:-2147483648,p=bt(0|(g=(0|m)==(0|o)?g:m)),_=bt(d-p),p=bt(p/c),d=bt(x+x),P=bt(bt(bt(p*M)+C)-d),w=bt(bt(p*S)+v),p=bt(B+B),I=bt(w-p),b=bt(bt(0|(m=g+1|0))/c),R=bt(bt(bt(b*M)+C)-d),L=bt(bt(bt(b*S)+v)-p),k=_t[4+(g=(g<<3)+n|0)>>2],T=_t[g>>2],V=_t[4+(g=(m<<3)+n|0)>>2],E=_t[g>>2]):g?(w=d=bt(x*bt(3)),g=N,m=bt(At(p))<bt(2147483648)?~~p:-2147483648,_=bt(0|(g=(0|m)==(0|o)?g:m)),y=bt(_/c),k=bt(w+bt(bt(y*M)+C)),A=bt(B*bt(3)),T=bt(A+bt(bt(y*S)+v)),w=d,d=bt(bt(0|(m=g+1|0))/c),V=bt(w+bt(bt(d*M)+C)),E=bt(A+bt(bt(d*S)+v)),y=bt(bt(b+bt(-1))*bt(.5)),_=bt(p-_),P=_t[4+(g=(g+h<<3)+n|0)>>2],I=_t[g>>2],R=_t[4+(g=(m+h<<3)+n|0)>>2],L=_t[g>>2]):(tt[16+i>>3]=b,pt[i>>2]=t,tt[8+i>>3]=A,Y(4,1104,i)),bt(_+y)<=bt(1)?(_t[e+s>>2]=bt(I+bt(bt(L-I)*_))+bt(bt(T-I)*y),p=bt(P+bt(bt(R-P)*_)),bt(bt(k-P)*y)):(p=bt(bt(1)-_),d=bt(bt(1)-y),_t[e+s>>2]=bt(E+bt(bt(T-E)*p))+bt(bt(L-E)*d),p=bt(V+bt(bt(k-V)*p)),bt(bt(R-V)*d)))),_t[4+(e+s|0)>>2]=p+d,(0|r)!=(0|(t=t+1|0)););et=32+i|0},ft[2]=function(t,e,r){e|=0;var i,n,o,a;n=pt[140+(r|=0)>>2],o=pt[r+136>>2],i=pt[(t|=0)+24>>2],-1==(0|(a=pt[t+4>>2]))?(pt[(t=e<<2)+o>>2]=pt[i+16>>2],pt[t+n>>2]=1065353216):(r=pt[r+4>>2]+(a<<5)|0,a=pt[i+20>>2],ft[pt[r+20>>2]](pt[r+24>>2],a,a,pt[i+12>>2]),t=pt[t+4>>2]<<2,_t[(e<<=2)+o>>2]=_t[i+16>>2]*_t[t+o>>2],pt[e+n>>2]=pt[t+n>>2])},ft[3]=function(t,r,i,n){t|=0,r|=0,i|=0,n|=0;bt(0),bt(0),bt(0),bt(0);var o,a,s,u,l,c=0,h=(bt(0),0),c=(bt(0),bt(0),bt(0),pt[t+28>>2]),f=function(t){var r,i,n,o=bt(0),a=0;et=r=et-16|0,j(t);t:if((a=2147483647&(i=e(0)))>>>0<=1061752794)o=bt(1),a>>>0<964689920||(o=aa(+t));else if(a>>>0<=1081824209)n=+t,o=1075235812<=a>>>0?bt(-aa(((0|i)<0?3.141592653589793:-3.141592653589793)+n)):$((0|i)<=-1?1.5707963267948966+n:1.5707963267948966-n);else if(a>>>0<=1088565717)o=1085271520<=a>>>0?aa(+t+((0|i)<0?6.283185307179586:-6.283185307179586)):$((0|i)<=-1?-4.71238898038469-t:t-4.71238898038469);else if(o=bt(t-t),!(2139095040<=a>>>0))if((a=3&la(t,8+r|0))>>>0<=2){switch(a-1|0){default:o=aa(tt[8+r>>3]);break t;case 0:o=$(-tt[8+r>>3]);break t;case 1:}o=bt(-aa(tt[8+r>>3]))}else o=$(tt[8+r>>3]);return et=16+r|0,o}(d=bt(bt(bt(_t[t>>2]+_t[t+20>>2])*bt(3.1415927410125732))/bt(180))),g=_t[t+8>>2],p=pt[t+24>>2],d=function(t){var r,i,n=0,o=0;et=r=et-16|0,j(t);t:if((n=2147483647&(i=e(0)))>>>0<=1061752794)n>>>0<964689920||(t=$(+t));else if(n>>>0<=1081824209)o=+t,t=n>>>0<=1075235811?(0|i)<=-1?bt(-aa(o+1.5707963267948966)):aa(o+-1.5707963267948966):$(-(((0|i)<0?3.141592653589793:-3.141592653589793)+o));else if(n>>>0<=1088565717)o=+t,t=n>>>0<=1085271519?(0|i)<=-1?aa(o+4.71238898038469):bt(-aa(o+-4.71238898038469)):$(((0|i)<0?6.283185307179586:-6.283185307179586)+o);else if(2139095040<=n>>>0)t=bt(t-t);else if((n=3&la(t,8+r|0))>>>0<=2){switch(n-1|0){default:t=$(tt[8+r>>3]);break t;case 0:t=aa(tt[8+r>>3]);break t;case 1:}t=$(-tt[8+r>>3])}else t=bt(-aa(tt[8+r>>3]));return et=16+r|0,t}(d);if(0<(0|n))for(f=bt(g*f),a=bt(c?-1:1),u=bt(f*a),o=bt(p?-1:1),l=bt(o*bt(g*d)),f=bt(o*f),g=bt(bt(g*bt(-d))*a),d=_t[t+16>>2],a=_t[t+12>>2];c=(t=h<<3)+i|0,o=_t[(t=t+r|0)>>2],s=_t[t+4>>2],_t[c+4>>2]=d+bt(bt(l*o)+bt(u*s)),_t[c>>2]=a+bt(bt(f*o)+bt(g*s)),(0|(h=h+1|0))!=(0|n););},ft[4]=function(t,e,r){t|=0,e|=0,r|=0;var i,n,o,a,s,u,l,c,h,f,g=bt(0),p=(bt(0),0),d=bt(0);bt(0),bt(0),bt(0);if(et=i=et+-64|0,o=pt[r+140>>2],a=pt[r+136>>2],n=pt[t+24>>2],-1!=(0|(s=pt[t+4>>2]))){u=pt[r+4>>2],p=pt[n+12>>2],pt[24+i>>2]=p,r=pt[n+16>>2],pt[28+i>>2]=r,pt[16+i>>2]=0,c=1==pt[8+(u=u+(s<<5)|0)>>2]?bt(-10):bt(-.10000000149011612),_t[20+i>>2]=c,pt[60+i>>2]=r,pt[56+i>>2]=p,ft[pt[20+u>>2]](pt[24+u>>2],56+i|0,48+i|0,1),d=bt(1),p=9;t:{for(;;){if(r=p,h=bt(d*bt(0)),_t[32+i>>2]=h+_t[56+i>>2],f=bt(c*d),_t[36+i>>2]=f+_t[60+i>>2],ft[pt[20+u>>2]](pt[24+u>>2],32+i|0,40+i|0,1),l=bt(_t[44+i>>2]-_t[52+i>>2]),_t[44+i>>2]=l,g=bt(_t[40+i>>2]-_t[48+i>>2]),_t[40+i>>2]=g,l!=bt(0)||g!=bt(0)){r=pt[44+i>>2],pt[8+i>>2]=pt[40+i>>2],pt[12+i>>2]=r;break t}if(_t[32+i>>2]=_t[56+i>>2]-h,_t[36+i>>2]=_t[60+i>>2]-f,ft[pt[20+u>>2]](pt[24+u>>2],32+i|0,40+i|0,1),l=bt(_t[40+i>>2]-_t[48+i>>2]),_t[40+i>>2]=l,g=bt(_t[44+i>>2]-_t[52+i>>2]),(_t[44+i>>2]=g)!=bt(0)||l!=bt(0)){_t[12+i>>2]=-g,_t[8+i>>2]=-l;break t}if(p=r+-1|0,d=bt(d*bt(.10000000149011612)),!r)break}Y(3,1265,0)}g=function(t,e){var r=bt(0);if((r=bt(Aa(_t[4+t>>2],_t[t>>2])-Aa(_t[4+e>>2],_t[e>>2])))<bt(-3.1415927410125732))for(;(r=bt(r+bt(6.2831854820251465)))<bt(-3.1415927410125732););if(r>bt(3.1415927410125732))for(;(r=bt(r+bt(-6.2831854820251465)))>bt(3.1415927410125732););return r}(16+i|0,8+i|0),ft[pt[20+u>>2]](pt[24+u>>2],24+i|0,24+i|0,1),pt[n+12>>2]=pt[24+i>>2],pt[n+16>>2]=pt[28+i>>2],_t[n+20>>2]=_t[n+20>>2]+bt(bt(g*bt(-180))/bt(3.1415927410125732)),t=pt[t+4>>2]<<2,_t[(e<<=2)+a>>2]=_t[n+4>>2]*_t[t+a>>2],g=bt(_t[n+8>>2]*_t[t+o>>2]),_t[e+o>>2]=g,_t[n+8>>2]=g}else pt[(t=e<<2)+a>>2]=pt[n+4>>2],pt[t+o>>2]=pt[n+8>>2];et=64+i|0},ft[5]=function(t){t|=0;var e,r,i,n,o,a,s,u,l=0,c=0,h=0,f=0,g=0,p=bt(0),d=0,m=0,_=0,_=pt[t+248>>2],y=pt[t+204>>2],b=pt[t+200>>2];if(!((0|(g=pt[t+220>>2]))<1)){for(d=pt[t+236>>2],f=pt[t+216>>2],h=pt[t+224>>2];_t[(c=l<<2)+d>>2]=_t[c+h>>2]*_t[c+f>>2],(0|g)!=(0|(l=l+1|0)););if(!((0|g)<1))for(d=pt[t+240>>2],f=pt[t+216>>2],h=pt[t+228>>2],l=0;_t[(c=l<<2)+d>>2]=_t[c+h>>2]*_t[c+f>>2],(0|g)!=(0|(l=l+1|0)););}if(1<=(0|b))for(o=pt[t+208>>2],g=d=0;;){if(pt[_>>2]){e=(h=pt[(c=d<<2)+pt[t+212>>2]>>2])+g|0;t:{if((0|h)<=0)pt[c+pt[t+276>>2]>>2]=0;else{for(f=pt[t+236>>2],p=bt(0),l=g;p=bt(p+_t[f+(l<<2)>>2]),(0|(l=l+1|0))<(0|e););if(_t[c+pt[t+276>>2]>>2]=p,!((0|h)<1)){for(f=pt[t+240>>2],p=bt(0),l=g;p=bt(p+_t[f+(l<<2)>>2]),(0|(l=l+1|0))<(0|e););break t}}p=bt(0)}if(l=c+pt[t+268>>2]|0,p=bt(p+bt(.0010000000474974513)),f=bt(At(p))<bt(2147483648)?~~p:-2147483648,pt[l>>2]=f,f=(l=pt[12+((d<<4)+y|0)>>2])<<1,r=pt[c+pt[t+272>>2]>>2],(l=(0|l)<1)||ba(r,0,(1<(0|f)?f:1)<<2),!(l|(0|h)<1))for(i=pt[t+244>>2],a=pt[t+216>>2],s=pt[t+232>>2],c=g;;){for(m=(l=c<<2)+a|0,u=pt[l+s>>2],h=l=0;_t[i+(n=h<<2)>>2]=_t[u+n>>2]*_t[m>>2],(0|(h=h+1|0))<(0|f););for(;_t[(m=(h=l<<2)+r|0)>>2]=_t[h+i>>2]+_t[m>>2],(0|(l=l+1|0))<(0|f););if(!((0|(c=c+1|0))<(0|e)))break}}if(_=_+4|0,g=pt[(d<<2)+o>>2]+g|0,(0|b)==(0|(d=d+1|0)))break}},ft[6]=function(t){t|=0;var e,r,i,n,o,a,s,u,l=0,c=0,h=0,f=0,g=0,p=0,d=bt(0),m=0,_=0,_=pt[t+172>>2],y=pt[t- -64>>2],b=pt[t+68>>2];if(1<=(0|(h=pt[t+92>>2])))for(g=pt[t+104>>2],p=pt[t+88>>2],c=pt[t+96>>2];_t[(f=l<<2)+g>>2]=_t[c+f>>2]*_t[p+f>>2],(0|h)!=(0|(l=l+1|0)););if(1<=(0|y))for(n=pt[t+80>>2],f=g=0;;){if(pt[_>>2]){if(e=(l=pt[pt[t+84>>2]+(g<<2)>>2])+f|0,h=(0|l)<1)d=bt(0);else for(p=pt[t+104>>2],d=bt(0),l=f;d=bt(d+_t[p+(l<<2)>>2]),(0|(l=l+1|0))<(0|e););if(l=yt(g,24)+b|0,_t[l+16>>2]=d,p=(c=pt[l+12>>2])<<1,(c=(0|c)<1)||ba(pt[l+20>>2],0,(1<(0|p)?p:1)<<2),!(c|h))for(o=pt[l+20>>2],r=pt[t+108>>2],a=pt[t+88>>2],s=pt[t+100>>2],h=f;;){for(m=(l=h<<2)+a|0,u=pt[l+s>>2],c=l=0;_t[(i=c<<2)+r>>2]=_t[u+i>>2]*_t[m>>2],(0|(c=c+1|0))<(0|p););for(;_t[(m=(c=l<<2)+o|0)>>2]=_t[c+r>>2]+_t[m>>2],(0|(l=l+1|0))<(0|p););if(!((0|(h=h+1|0))<(0|e)))break}}if(_=_+4|0,f=pt[(g<<2)+n>>2]+f|0,(0|y)==(0|(g=g+1|0)))break}},ft[7]=function(t){t|=0;var e=0,r=bt(0),i=0,n=0,o=0,a=0,s=0,u=0,l=0,s=pt[t+36>>2],c=pt[t+4>>2];if(1<=(0|(n=pt[t+24>>2])))for(u=pt[t+32>>2],l=pt[t+20>>2],i=pt[t+28>>2];_t[(o=e<<2)+u>>2]=_t[i+o>>2]*_t[o+l>>2],(0|n)!=(0|(e=e+1|0)););if(1<=(0|c))for(o=pt[t+12>>2],i=0;;){if(pt[s>>2]){if((0|(e=pt[(n=a<<2)+pt[t+16>>2]>>2]))<1)r=bt(0);else for(u=e+i|0,l=pt[t+32>>2],r=bt(0),e=i;r=bt(r+_t[l+(e<<2)>>2]),(0|(e=e+1|0))<(0|u););e=n+pt[t+44>>2]|0,r=bt(r+bt(.0010000000474974513)),bt(At(r))<bt(2147483648)?pt[e>>2]=~~r:pt[e>>2]=-2147483648}if(s=s+4|0,i=pt[o+(a<<2)>>2]+i|0,(0|c)==(0|(a=a+1|0)))break}},ft[8]=function(t){t|=0;var e,r=0,i=0,n=bt(0),o=0,a=0,s=0,u=0,l=0,c=0,c=pt[t+176>>2],h=pt[t+72>>2],f=pt[t+76>>2];if(!((0|(s=pt[t+124>>2]))<1)){for(u=pt[t+148>>2],o=pt[t+120>>2],a=pt[t+128>>2];_t[(i=r<<2)+u>>2]=_t[i+a>>2]*_t[i+o>>2],(0|s)!=(0|(r=r+1|0)););if(!((0|s)<1)){for(u=pt[t+152>>2],o=pt[t+120>>2],a=pt[t+132>>2],r=0;_t[(i=r<<2)+u>>2]=_t[i+a>>2]*_t[i+o>>2],(0|s)!=(0|(r=r+1|0)););if(!((0|s)<1)){for(u=pt[t+156>>2],o=pt[t+120>>2],a=pt[t+136>>2],r=0;_t[(i=r<<2)+u>>2]=_t[i+a>>2]*_t[i+o>>2],(0|s)!=(0|(r=r+1|0)););if(!((0|s)<1)){for(u=pt[t+160>>2],o=pt[t+120>>2],a=pt[t+140>>2],r=0;_t[(i=r<<2)+u>>2]=_t[i+a>>2]*_t[i+o>>2],(0|s)!=(0|(r=r+1|0)););if(!((0|s)<1))for(u=pt[t+164>>2],o=pt[t+120>>2],a=pt[t+144>>2],r=0;_t[(i=r<<2)+u>>2]=_t[i+a>>2]*_t[i+o>>2],(0|s)!=(0|(r=r+1|0)););}}}}if(1<=(0|h))for(u=pt[t+112>>2],a=0;;){if(pt[c>>2]){t:{e:{r:{i:{if((0|(i=pt[pt[t+116>>2]+(l<<2)>>2]))<=0)pt[4+((l<<5)+f|0)>>2]=0;else{for(e=i+a|0,o=pt[t+148>>2],n=bt(0),r=a;n=bt(n+_t[o+(r<<2)>>2]),(0|(r=r+1|0))<(0|e););if(_t[4+(s=(l<<5)+f|0)>>2]=n,!(i=(0|i)<1)){for(o=pt[t+152>>2],n=bt(0),r=a;n=bt(n+_t[o+(r<<2)>>2]),(0|(r=r+1|0))<(0|e););if(_t[s+20>>2]=n,i)break i;for(o=pt[t+156>>2],n=bt(0),r=a;n=bt(n+_t[o+(r<<2)>>2]),(0|(r=r+1|0))<(0|e););if(_t[s+12>>2]=n,i)break r;for(o=pt[t+160>>2],n=bt(0),r=a;n=bt(n+_t[o+(r<<2)>>2]),(0|(r=r+1|0))<(0|e););if(_t[s+16>>2]=n,i)break e;for(o=pt[t+164>>2],n=bt(0),r=a;n=bt(n+_t[o+(r<<2)>>2]),(0|(r=r+1|0))<(0|e););break t}}pt[20+((l<<5)+f|0)>>2]=0}pt[12+((l<<5)+f|0)>>2]=0}pt[16+((l<<5)+f|0)>>2]=0}n=bt(0)}_t[8+((l<<5)+f|0)>>2]=n}if(c=c+4|0,a=pt[u+(l<<2)>>2]+a|0,(0|h)==(0|(l=l+1|0)))break}},ft[9]=function(t){t|=0;var e,r,i=0,n=0,o=0,a=0,s=0,u=bt(0),l=0,c=0,h=pt[t+340>>2];if(1<=(0|(o=pt[t+360>>2])))for(l=pt[t+368>>2],c=pt[t+356>>2],n=pt[t+364>>2];_t[(a=i<<2)+l>>2]=_t[n+a>>2]*_t[a+c>>2],(0|o)!=(0|(i=i+1|0)););if(1<=(0|h))for(e=pt[t+348>>2],r=pt[t+344>>2],a=pt[t+352>>2],n=0;;){if((0|(i=pt[(o=s<<2)+a>>2]))<1)u=bt(0);else for(l=i+n|0,c=pt[t+368>>2],u=bt(0),i=n;u=bt(u+_t[c+(i<<2)>>2]),(0|(i=i+1|0))<(0|l););if(_t[20+(yt(s,24)+r|0)>>2]=u,n=pt[o+e>>2]+n|0,(0|h)==(0|(s=s+1|0)))break}},ft[10]=function(t){var e,r,i,n=0,o=0,a=0,s=0;if(!(pt[380+(t|=0)>>2]||(0|(n=pt[t+200>>2]))<1))for(r=(o=pt[t+204>>2])+(n<<4)|0,n=pt[t+248>>2],s=pt[t+272>>2];;){if(pt[n>>2]&&!((0|(a=pt[o+12>>2]))<(t=1)))for(a<<=1,i=pt[s>>2];_t[(e=(t<<2)+i|0)>>2]=-_t[e>>2],(0|(t=t+2|0))<(0|a););if(s=s+4|0,n=n+4|0,!((o=o+16|0)>>>0<r>>>0))break}},ft[11]=function(t,e,r){var i,n=0;return fa(i=pt[20+(t|=0)>>2],e|=0,n=(r|=0)>>>0<(n=pt[t+16>>2]-i|0)>>>0?r:n),pt[t+20>>2]=n+pt[t+20>>2],0|r},ft[12]=function(t){return 0},ft[13]=function(t,e,r){e|=0,r|=0;var i,n,o=0,a=0,s=0,u=0;for(et=i=et-32|0,o=pt[28+(t|=0)>>2],pt[16+i>>2]=o,s=pt[t+20>>2],pt[28+i>>2]=r,pt[24+i>>2]=e,s=(pt[20+i>>2]=e=s-o|0)+r|0,u=2,e=16+i|0;;){t:{if((a=(o=0)|A(pt[t+60>>2],0|e,0|u,12+i|0))&&(pt[1906]=a,o=-1),(0|(o=o?pt[12+i>>2]=-1:pt[12+i>>2]))!=(0|s)){if(-1<(0|o))break t;pt[t+28>>2]=0,pt[t+16>>2]=0,pt[t+20>>2]=0,pt[t>>2]=32|pt[t>>2],2!=((t=0)|u)&&(t=r-pt[e+4>>2]|0)}else e=pt[t+44>>2],pt[t+28>>2]=e,pt[t+20>>2]=e,pt[t+16>>2]=e+pt[t+48>>2],t=r;return et=32+i|0,0|t}a=o-((n=(a=pt[e+4>>2])>>>0<o>>>0)?a:0)|0,pt[(e=n?e+8|0:e)>>2]=a+pt[e>>2],pt[e+4>>2]=pt[e+4>>2]-a,s=s-o|0,u=u-n|0}},ft[14]=function(t,e,r,i){return V=0},ft[15]=function(t,r,i,n,o,a){t|=0,r=+r,i|=0,n|=0,o|=0,a|=0;var s,u,l,c,p=0,d=0,m=0,y=0,b=0,A=0,C=0,M=0,v=0,S=0,w=0,x=0,B=0,P=0,I=0;if(pt[44+(et=s=et-560|0)>>2]=0,h(+r),p=0|e(1),u=4294967295<e(0)>>>0?0:1,u=(0|p)<-1||(0|p)<=-1&&u?(h(r=-r),p=0|e(1),e(0),P=1,3184):2048&o?(P=1,3187):(P=1&o)?3190:3185,2146435072!=(2146435072&p))if(r=function na(t,r){var i,n,o=0;if(h(+t),o=0|e(1),i=0|e(0),2047!=(0|(o=(n=o)>>>20&2047))){if(!o)return o=r,r=0==t?0:(t=na(0x10000000000000000*t,r),pt[r>>2]+-64|0),pt[o>>2]=r,t;pt[r>>2]=o+-1022,f(0,0|i),f(1,-2146435073&n|1071644672),t=+g()}return t}(r,44+s|0),0!=(r+=r)&&(pt[44+s>>2]=pt[44+s>>2]+-1),l=16+s|0,97!=(0|(c=32|a))){for(p=(0|n)<0,0!=r?(y=pt[44+s>>2]+-28|0,pt[44+s>>2]=y,r*=268435456):y=pt[44+s>>2],C=p?6:n,m=S=(0|y)<0?48+s|0:336+s|0;m=(n=m)+4|0,0!=(r=1e9*(r-((pt[n>>2]=p=r<4294967296&0<=r?~~r>>>0:0)>>>0))););if((0|y)<1)p=m,d=S;else for(d=S;;){if(v=(0|y)<29?y:29,!((p=m+-4|0)>>>0<d>>>0)){for(n=v,M=0;I=M,M=pt[(w=p)>>2],b=31&n,b=32<=(63&n)>>>(A=0)?(y=M<<b,0):(y=(1<<b)-1&M>>>32-b,M<<b),A=y+A|0,A=(M=I+b|0)>>>0<b>>>0?A+1|0:A,I=w,w=gc(M=hc(b=M,A,1e9),V,1e9),pt[I>>2]=b-w,d>>>0<=(p=p+-4|0)>>>0;);(n=M)&&(pt[(d=d+-4|0)>>2]=n)}for(;d>>>0<(p=m)>>>0&&!pt[(m=p+-4|0)>>2];);if(y=pt[44+s>>2]-v|0,m=p,!(0<(0|(pt[44+s>>2]=y))))break}if((0|y)<=-1)for(B=1+((C+25|0)/9|0)|0,v=102==(0|c);;){if(M=(0|y)<-9?9:0-y|0,p>>>0<=d>>>0)d=pt[d>>2]?d:d+4|0;else{for(w=1e9>>>M,b=-1<<M^-1,y=0,m=d;n=pt[m>>2],pt[m>>2]=(n>>>M)+y,y=yt(w,n&b),(m=m+4|0)>>>0<p>>>0;);d=pt[d>>2]?d:d+4|0,y&&(pt[p>>2]=y,p=p+4|0)}if(y=M+pt[44+s>>2]|0,p=(0|B)<p-(n=v?S:d)>>2?n+(B<<2)|0:p,!((0|(pt[44+s>>2]=y))<0))break}if(!(p>>>(m=0)<=d>>>0||(m=yt(S-d>>2,9),(n=pt[d>>2])>>>0<(y=10))))for(;m=m+1|0,(y=yt(y,10))>>>0<=n>>>0;);if((0|(n=(C-(102==(0|c)?0:m)|0)-(103==(0|c)&0!=(0|C))|0))<(yt(p-S>>2,9)+-9|0)){if(A=(S+((n=(0|(b=n+9216|0))/9|0)<<2)|0)-4092|0,y=10,(0|(n=1+(b-yt(n,9)|0)|0))<=8)for(;y=yt(y,10),9!=(0|(n=n+1|0)););if(B=A+4|0,((v=(w=pt[A>>2])-yt(y,b=(w>>>0)/(y>>>0)|0)|0)||(0|B)!=(0|p))&&(x=v>>>0<(n=y>>>1)>>>0?.5:(0|p)==(0|B)&&(0|n)==(0|v)?1:1.5,r=1&b?9007199254740994:9007199254740992,!P|45!=dt[0|u]||(x=-x,r=-r),pt[A>>2]=n=w-v|0,r+x!=r)){if(1e9<=(pt[A>>2]=n=n+y|0)>>>0)for(;(A=A+-4|(pt[A>>2]=0))>>>0<d>>>0&&(pt[(d=d+-4|0)>>2]=0),n=pt[A>>2]+1|0,999999999<(pt[A>>2]=n)>>>0;);if(m=yt(S-d>>2,9),!((n=pt[d>>2])>>>0<(y=10)))for(;m=m+1|0,(y=yt(y,10))>>>0<=n>>>0;);}p=(n=A+4|0)>>>0<p>>>0?n:p}t:{for(;;){if((v=p)>>>(w=0)<=d>>>0)break t;if(pt[(p=v+-4|0)>>2])break}w=1}if(103==(0|c)){if(C=((n=(0|m)<(0|(p=C||1))&-5<(0|m))?-1^m:-1)+p|0,a=(n?-1:-2)+a|0,!(b=8&o)){if(p=9,w&&(b=pt[v+-4>>2])&&!((b>>>(p=0))%(n=10)))for(;p=p+1|0,!((b>>>0)%((n=yt(n,10))>>>0)););n=yt(v-S>>2,9)+-9|0,C=102!=(32|a)?((b=0)|C)<(0|(n=0<(0|(n=(n+m|0)-p|0))?n:0))?C:n:((b=0)|C)<(0|(n=0<(0|(n=n-p|0))?n:0))?C:n}}else b=8&o;if(A=0!=(0|(y=C|b)),n=t,I=i,p=0<(0|m)?m:0,102!=(0|(M=32|a))){if((l-(p=ea((p=m>>31)+m^p,0,l))|0)<=1)for(;gt[0|(p=p+-1|0)]=48,(l-p|0)<2;);gt[0|(B=p+-2|0)]=a,gt[p+-1|0]=(0|m)<0?45:43,p=l-B|0}if(_(n,32,I,A=1+(p+(A+(C+P|0)|0)|0)|0,o),Z(t,u,P),_(t,48,i,A,65536^o),102!=(0|M)){t:if(!((0|C)<0))for(a=w?v:d+4|0,n=16+s|8,S=16+s|9,m=d;;){if((0|S)==(0|(p=ea(pt[m>>2],0,S)))&&(gt[24+s|0]=48,p=n),(0|d)==(0|m))Z(t,p,1),p=p+1|0,(0|C)<1&&!b||Z(t,3219,1);else if(!(p>>>0<=16+s>>>0))for(;gt[0|(p=p+-1|0)]=48,16+s>>>0<p>>>0;);if(Z(t,M=p,(0|(p=S-p|0))<(0|C)?p:C),C=C-p|0,a>>>0<=(m=m+4|0)>>>0)break t;if(!(-1<(0|C)))break}_(t,48,C+18|0,18,0),Z(t,B,l-B|0)}else{for(n=16+s|8,m=16+s|9,d=a=S>>>0<d>>>0?S:d;;){if(p=ea(pt[d>>2],0,m),(0|a)==(0|d))(0|p)==(0|m)&&(gt[24+s|0]=48,p=n);else if(!(p>>>0<=16+s>>>0))for(;gt[0|(p=p+-1|0)]=48,16+s>>>0<p>>>0;);if(Z(t,p,m-p|0),!((d=d+4|0)>>>0<=S>>>0))break}y&&Z(t,3219,1);t:if(!((0|C)<1|v>>>0<=d>>>0))for(;;){if(16+s>>>0<(p=ea(pt[d>>2],0,m))>>>0)for(;gt[0|(p=p+-1|0)]=48,16+s>>>0<p>>>0;);if(Z(t,p,(0|C)<9?C:9),C=C+-9|0,v>>>0<=(d=d+4|0)>>>0)break t;if(!(0<(0|C)))break}_(t,48,C+9|0,9,0)}}else{if(w=(S=32&a)?9+u|0:u,!(11<n>>>0)&&(p=12-n|0)){for(x=8;x*=16,p=p+-1|0;);r=45!=dt[0|w]?r+x-x:-(x+(-r-x))}for((0|l)==(0|(p=ea((m=(p=pt[44+s>>2])>>31)^p+m,0,l)))&&(gt[15+s|0]=48,p=15+s|0),b=2|P,m=pt[44+s>>2],gt[0|(v=p+-2|0)]=a+15,gt[p+-1|0]=(0|m)<0?45:43,p=8&o,d=16+s|0;a=d,M=S,m=At(r)<2147483648?~~r:-2147483648,gt[0|d]=M|dt[m+3168|0],1!=((d=a+1|0)-(16+s|0)|0)|(0==(r=16*(r-(0|m)))?!(p|0<(0|n)):0)||(gt[a+1|0]=46,d=a+2|0),0!=r;);_(t,32,i,A=(a=!n|(0|n)<=((d-s|0)-18|0)?((l-(16+s|0)|0)-v|0)+d|0:2+((n+l|0)-v|0)|0)+b|0,o),Z(t,w,b),_(t,48,i,A,65536^o),Z(t,16+s|0,n=d-(16+s|0)|0),_(t,48,a-((p=n)+(n=l-v|0)|0)|0,0,0),Z(t,v,n)}else _(t,32,i,A=P+3|0,-65537&o),Z(t,u,P),n=a>>>5&1,Z(t,r!=r?n?3211:3215:n?3203:3207,3);return _(t,32,i,A,8192^o),et=560+s|0,0|((0|A)<(0|i)?i:A)},ft[16]=function(t,e){var r,i,n,o,a,s,u,l,c,h,p,d,m,_,y,b;t|=0,e=pt[(r=e|=0)>>2]+15&-16,pt[r>>2]=e+16,r=t,t=pt[e>>2],i=pt[e+4>>2],n=pt[e+8>>2],e=pt[e+12>>2],et=o=et-32|(b=y=_=0),_=(s=2147483647&e)-1006698496|0,(y=b=n)>>>0<0&&(_=_+1|0),a=y,y=_,_=s-1140785152|0,(0|(_=b>>>0<0?_+1|0:_))==(0|y)&a>>>0<b>>>0|y>>>0<_>>>0?(_=e<<4|n>>>28,n=n<<4|i>>>28,134217728==(0|(b=i&=268435455))&1<=t>>>0|134217728<i>>>0?(_=_+1073741824|0,(t=n+1|0)>>>0<1&&(_=_+1|0),y=t):(_=_-(((y=n)>>>0<0)+-1073741824|0)|0,t|134217728^b||((t=y+(1&y)|0)>>>0<y>>>0&&(_=_+1|0),y=t))):(!b&2147418112==(0|s)?!(t|i):2147418112==(0|s)&b>>>0<0|s>>>0<2147418112)?(_=2146435072,1140785151==((y=0)|s)&4294967295<b>>>0|1140785151<s>>>0||(b=s>>>16)>>>(_=0)<15249||(a=t,s=i,u=n,l=_=65535&e|65536,m=d=p=0,64&(c=15361-b|0)?(a=31&(s=c-64|0),a=32<=(63&s)>>>0?(s=0,l>>>a):(s=l>>>a,((1<<a)-1&l)<<32-a|u>>>a),l=u=0):c&&(d=l,m=u,p=31&(h=64-c|0),h=32<=(63&h)>>>0?(d=u<<p,0):(d=(1<<p)-1&u>>>32-p|d<<p,u<<p),m=a,a=31&(p=c),a=32<=(63&p)>>>0?(p=0,s>>>a):(p=s>>>a,((1<<a)-1&s)<<32-a|m>>>a),a|=h,s=p|d,p=u,u=31&c,u=32<=(63&c)>>>0?(d=0,l>>>u):(d=l>>>u,((1<<u)-1&l)<<32-u|p>>>u),l=d),pt[(m=o)>>2]=a,pt[4+m>>2]=s,pt[8+m>>2]=u,pt[12+m>>2]=l,h=t,c=i,p=n,d=_,s=a=0,64&(u=b+-15233|0)?(p=h,h=31&(d=u+-64|0),32<=(63&d)>>>0?(d=p<<h,p=0):(d=(1<<h)-1&p>>>32-h|c<<h,p<<=h),c=h=0):u&&(a=p,p=31&(m=u),l=32<=(63&u)>>>0?(s=a<<p,0):(s=(1<<p)-1&a>>>32-p|d<<p,a<<p),p=c,a=h,d=31&(u=64-u|0),32<=(63&u)>>>0?(u=0,p>>>=d):(u=p>>>d,p=((1<<d)-1&p)<<32-d|a>>>d),p|=l,d=u|s,u=h,h=31&m,h=32<=(63&m)>>>0?(s=u<<h,0):(s=(1<<h)-1&u>>>32-h|c<<h,u<<h),c=s),pt[(b=16+o|0)>>2]=h,pt[4+b>>2]=c,pt[8+b>>2]=p,pt[12+b>>2]=d,n=pt[4+o>>2],t=pt[8+o>>2],_=pt[12+o>>2]<<4|t>>>28,y=t<<4|n>>>28,134217728==(0|(n=t=268435455&n))&1<=(i=pt[o>>2]|0!=(pt[16+o>>2]|pt[24+o>>2])|0!=(pt[20+o>>2]|pt[28+o>>2]))>>>0|134217728<t>>>0?((t=y+1|0)>>>0<1&&(_=_+1|0),y=t):i|134217728^n||((t=y+(1&y)|0)>>>0<y>>>0&&(_=_+1|0),y=t))):(y=n<<4|i>>>28,_=524287&(e<<4|n>>>28)|2146959360),et=32+o|0,f(0,0|y),f(1,-2147483648&e|_),a=+g(),tt[r>>3]=a},{d:function(){},e:function(){return 67108864},f:function(){return 3},g:function(t,e){return e|=0,et=e=et-16|0,t=(t|=0)?ma(t)?(Y(4,1533,0),0):dt[t+4|0]:(pt[e+4>>2]=1246,pt[e>>2]=1671,Y(4,1087,e),0),et=e+16|0,0|t},h:function(t){pt[1641]=t|=0},i:function(t,e){var r;return e|=0,et=r=et-48|0,t=(t|=0)?(t+63&-64)==(0|t)?(e+63&-64)==(0|e)&&e?function(t){var e,r,i,n,o,a,s,u=0,l=0,c=0,h=0,f=0,g=0,p=0;if(pt[24+(et=e=et-32|0)>>2]=0,pt[16+e>>2]=4,o=16+e|(pt[20+e>>2]=0),sa(16+(et=a=et-272|0)|0,1611,pt[12+a>>2]=o),pt[(et=o=et-16|0)>>2]=16+a|0,ra(pt[670],1176,pt[12+(et=s=et-16|0)>>2]=o,0,0),et=16+s|0,et=16+o|0,et=272+a|0,ma(t))Y(4,1183,0),t=0;else if(4<=(l=dt[t+4|0])>>>0)pt[4+e>>2]=l,pt[e>>2]=3,Y(4,1332,e),t=0;else{for(1!=(0|(h=!dt[t+5|0]))&&(ca(t+4|0,1),X(t- -64|0,4,160),gt[t+5|0]=0),u=t- -64|0,c=102,l=t+704|0;pt[l>>2]=pt[u>>2]+t,l=l+4|0,u=u+4|0,c=c+-1|0;);if(1!=(0|h)&&(l=dt[t+4|0],X(pt[t+704>>2],4,32),ca(pt[t+708>>2],4),ca(pt[t+708>>2]+4|0,4),ca(pt[t+708>>2]+8|0,4),ca(pt[t+708>>2]+12|0,4),ca(pt[t+708>>2]+16|0,4),ca(pt[t+708>>2]+20|0,1),X(pt[t+720>>2],4,pt[pt[t+704>>2]>>2]),X(pt[t+724>>2],4,pt[pt[t+704>>2]>>2]),X(pt[t+728>>2],4,pt[pt[t+704>>2]>>2]),X(pt[t+732>>2],4,pt[pt[t+704>>2]>>2]),X(pt[t+736>>2],4,pt[pt[t+704>>2]>>2]),X(pt[t+740>>2],4,pt[pt[t+704>>2]>>2]),X(pt[t+752>>2],4,pt[pt[t+704>>2]+4>>2]),X(pt[t+756>>2],4,pt[pt[t+704>>2]+4>>2]),X(pt[t+760>>2],4,pt[pt[t+704>>2]+4>>2]),X(pt[t+764>>2],4,pt[pt[t+704>>2]+4>>2]),X(pt[t+768>>2],4,pt[pt[t+704>>2]+4>>2]),X(pt[t+772>>2],4,pt[pt[t+704>>2]+4>>2]),X(pt[t+776>>2],4,pt[pt[t+704>>2]+4>>2]),X(pt[t+780>>2],4,pt[pt[t+704>>2]+8>>2]),X(pt[t+784>>2],4,pt[pt[t+704>>2]+8>>2]),X(pt[t+788>>2],4,pt[pt[t+704>>2]+8>>2]),X(pt[t+792>>2],4,pt[pt[t+704>>2]+8>>2]),X(pt[t+796>>2],4,pt[pt[t+704>>2]+8>>2]),X(pt[t+800>>2],4,pt[pt[t+704>>2]+8>>2]),X(pt[t+804>>2],4,pt[pt[t+704>>2]+12>>2]),X(pt[t+808>>2],4,pt[pt[t+704>>2]+12>>2]),X(pt[t+812>>2],4,pt[pt[t+704>>2]+12>>2]),X(pt[t+816>>2],4,pt[pt[t+704>>2]+12>>2]),X(pt[t+840>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+844>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+848>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+852>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+856>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+860>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+864>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+868>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+872>>2],1,pt[pt[t+704>>2]+16>>2]),X(pt[t+876>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+880>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+884>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+888>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+892>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+896>>2],4,pt[pt[t+704>>2]+16>>2]),X(pt[t+908>>2],4,pt[pt[t+704>>2]+20>>2]),X(pt[t+912>>2],4,pt[pt[t+704>>2]+20>>2]),X(pt[t+916>>2],4,pt[pt[t+704>>2]+20>>2]),X(pt[t+920>>2],4,pt[pt[t+704>>2]+20>>2]),X(pt[t+924>>2],4,pt[pt[t+704>>2]+20>>2]),X(pt[t+928>>2],4,pt[pt[t+704>>2]+20>>2]),X(pt[t+932>>2],4,pt[pt[t+704>>2]+20>>2]),X(pt[t+936>>2],4,pt[pt[t+704>>2]+24>>2]),X(pt[t+940>>2],4,pt[pt[t+704>>2]+28>>2]),X(pt[t+944>>2],4,pt[pt[t+704>>2]+28>>2]),X(pt[t+948>>2],4,pt[pt[t+704>>2]+32>>2]),X(pt[t+952>>2],4,pt[pt[t+704>>2]+32>>2]),X(pt[t+956>>2],4,pt[pt[t+704>>2]+32>>2]),X(pt[t+960>>2],4,pt[pt[t+704>>2]+32>>2]),X(pt[t+964>>2],4,pt[pt[t+704>>2]+32>>2]),X(pt[t+968>>2],4,pt[pt[t+704>>2]+32>>2]),X(pt[t+972>>2],4,pt[pt[t+704>>2]+32>>2]),X(pt[t+976>>2],4,pt[pt[t+704>>2]+36>>2]),X(pt[t+980>>2],4,pt[pt[t+704>>2]+36>>2]),X(pt[t+984>>2],4,pt[pt[t+704>>2]+36>>2]),X(pt[t+988>>2],4,pt[pt[t+704>>2]+40>>2]),X(pt[t+992>>2],4,pt[pt[t+704>>2]+44>>2]),X(pt[t+996>>2],4,pt[pt[t+704>>2]+48>>2]),X(pt[t+1e3>>2],4,pt[pt[t+704>>2]+48>>2]),X(pt[t+1004>>2],4,pt[pt[t+704>>2]+52>>2]),X(pt[t+1008>>2],4,pt[pt[t+704>>2]+52>>2]),X(pt[t+1012>>2],4,pt[pt[t+704>>2]+56>>2]),X(pt[t+1016>>2],4,pt[pt[t+704>>2]+60>>2]),X(pt[t+1020>>2],2,pt[pt[t+704>>2]+64>>2]),X(pt[t+1024>>2],4,pt[pt[t+704>>2]+68>>2]),X(pt[t+1028>>2],4,pt[pt[t+704>>2]+72>>2]),X(pt[t+1032>>2],4,pt[pt[t+704>>2]+72>>2]),X(pt[t+1036>>2],4,pt[pt[t+704>>2]+72>>2]),X(pt[t+1040>>2],4,pt[pt[t+704>>2]+72>>2]),X(pt[t+1044>>2],4,pt[pt[t+704>>2]+72>>2]),X(pt[t+1048>>2],4,pt[pt[t+704>>2]+76>>2]),X(pt[t+1052>>2],4,pt[pt[t+704>>2]+76>>2]),X(pt[t+1056>>2],4,pt[pt[t+704>>2]+76>>2]),X(pt[t+1068>>2],4,pt[pt[t+704>>2]+80>>2]),X(pt[t+1072>>2],4,pt[pt[t+704>>2]+80>>2]),X(pt[t+1076>>2],4,pt[pt[t+704>>2]+80>>2]),X(pt[t+1080>>2],4,pt[pt[t+704>>2]+80>>2]),X(pt[t+1084>>2],4,pt[pt[t+704>>2]+80>>2]),X(pt[t+1088>>2],4,pt[pt[t+704>>2]+80>>2]),X(pt[t+1092>>2],4,pt[pt[t+704>>2]+80>>2]),X(pt[t+1096>>2],4,pt[pt[t+704>>2]+84>>2]),X(pt[t+1100>>2],2,pt[pt[t+704>>2]+84>>2]),X(pt[t+1104>>2],4,pt[pt[t+704>>2]+88>>2]),l>>>0<2||X(pt[t+1108>>2],4,pt[pt[t+704>>2]+8>>2])),pt[1643]=5,pt[1642]=6,pt[1644]=7,pt[1645]=8,pt[1646]=9,pt[1647]=10,u=pt[t+704>>2],1<=pt[u>>2])for(l=0;pt[pt[t+712>>2]+(l<<2)>>2]=pt[t+716>>2]+(l<<6),u=pt[t+704>>2],(0|(l=l+1|0))<pt[u>>2];);if(1<=pt[u+4>>2])for(l=0;pt[pt[t+744>>2]+(l<<2)>>2]=pt[t+748>>2]+(l<<6),u=pt[t+704>>2],(0|(l=l+1|0))<pt[u+4>>2];);if(1<=pt[u+16>>2])for(l=0;pt[(u=l<<2)+pt[t+820>>2]>>2]=pt[t+836>>2]+(l<<6),pt[u+pt[t+824>>2]>>2]=pt[t+1016>>2]+(pt[u+pt[t+880>>2]>>2]<<2),pt[u+pt[t+828>>2]>>2]=pt[t+1020>>2]+(pt[u+pt[t+884>>2]>>2]<<1),pt[u+pt[t+832>>2]>>2]=pt[t+1024>>2]+(pt[u+pt[t+892>>2]>>2]<<2),u=pt[t+704>>2],(0|(l=l+1|0))<pt[u+16>>2];);if(1<=pt[u+20>>2])for(l=0;pt[pt[t+900>>2]+(l<<2)>>2]=pt[t+904>>2]+(l<<6),u=pt[t+704>>2],(0|(l=l+1|0))<pt[u+20>>2];);if(1<=pt[u+80>>2])for(l=0;pt[pt[t+1060>>2]+(l<<2)>>2]=pt[t+1064>>2]+(l<<6),u=pt[t+704>>2],(0|(l=l+1|0))<pt[u+80>>2];);if(!(1&gt[pt[t+708>>2]+20|0]||(0|(h=pt[u+16>>2]))<1)){for(g=pt[t+888>>2],p=pt[t+884>>2],f=pt[t+1020>>2],l=0;;){if(0<(0|(r=pt[(u=l<<2)+g>>2]+-1|0)))for(i=f+(pt[u+p>>2]<<1)|0,u=0;n=mt[(c=(u<<1)+i|0)>>1],v[c>>1]=mt[c+4>>1],v[c+4>>1]=n,(0|(u=u+3|0))<(0|r););if((0|h)==(0|(l=l+1|0)))break}for(l=pt[t+876>>2],g=pt[t+880>>2],p=pt[t+1016>>2],c=0;;){if(1<=(0|(f=pt[(u=c<<2)+l>>2])))for(f=(u=p+(pt[u+g>>2]<<2)|0)+(f<<3)|0,u=u+4|0;_t[u>>2]=bt(1)-_t[u>>2],(u=u+8|0)>>>0<f>>>0;);if((0|h)==(0|(c=c+1|0)))break}}}return et=32+e|0,t}(t):(pt[20+r>>2]=1592,pt[16+r>>2]=1688,Y(4,1087,16+r|0),0):(pt[36+r>>2]=1441,pt[32+r>>2]=1688,Y(4,1087,32+r|0),0):(pt[4+r>>2]=1246,pt[r>>2]=1688,Y(4,1087,r),0),et=48+r|0,0|t},j:function(t,e,r,i){var n;e|=0,r|=0,i|=0,et=n=et+-64|0,(t|=0)?e?r?i?(t=pt[pt[t>>2]+708>>2],pt[e>>2]=pt[t+12>>2],pt[e+4>>2]=pt[t+16>>2],pt[r>>2]=pt[t+4>>2],pt[r+4>>2]=pt[t+8>>2],pt[i>>2]=pt[t>>2]):(pt[52+n>>2]=1782,pt[48+n>>2]=1708,Y(4,1087,48+n|0)):(pt[36+n>>2]=1753,pt[32+n>>2]=1708,Y(4,1087,32+n|0)):(pt[20+n>>2]=1726,pt[16+n>>2]=1708,Y(4,1087,16+n|0)):(pt[4+n>>2]=1651,pt[n>>2]=1708,Y(4,1087,n)),et=64+n|0},k:wa,l:va,m:function(t){var e;et=e=et-16|0,(t|=0)?ta(t):(pt[4+e>>2]=1651,pt[e>>2]=1890,Y(4,1087,e)),et=16+e|0},n:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+292>>2]:(pt[4+e>>2]=1651,pt[e>>2]=1905,Y(4,1087,e),-1),et=16+e|0,0|t},o:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+900>>2]:(pt[4+e>>2]=1651,pt[e>>2]=1926,Y(4,1087,e),0),et=16+e|0,0|t},p:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+912>>2]:(pt[4+e>>2]=1651,pt[e>>2]=1945,Y(4,1087,e),0),et=16+e|0,0|t},q:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+908>>2]:(pt[4+e>>2]=1651,pt[e>>2]=1974,Y(4,1087,e),0),et=16+e|0,0|t},r:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+916>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2003,Y(4,1087,e),0),et=16+e|0,0|t},s:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+300>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2032,Y(4,1087,e),0),et=16+e|0,0|t},t:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+4>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2054,Y(4,1087,e),-1),et=16+e|0,0|t},u:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+712>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2070,Y(4,1087,e),0),et=16+e|0,0|t},v:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+52>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2084,Y(4,1087,e),0),et=16+e|0,0|t},w:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+740>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2104,Y(4,1087,e),0),et=16+e|0,0|t},x:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+200>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2132,Y(4,1087,e),-1),et=16+e|0,0|t},y:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+820>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2152,Y(4,1087,e),0),et=16+e|0,0|t},z:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+872>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2170,Y(4,1087,e),0),et=16+e|0,0|t},A:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+260>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2198,Y(4,1087,e),0),et=16+e|0,0|t},B:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+868>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2225,Y(4,1087,e),0),et=16+e|0,0|t},C:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+268>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2254,Y(4,1087,e),0),et=16+e|0,0|t},D:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+264>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2279,Y(4,1087,e),0),et=16+e|0,0|t},E:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+276>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2306,Y(4,1087,e),0),et=16+e|0,0|t},F:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+896>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2330,Y(4,1087,e),0),et=16+e|0,0|t},G:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+832>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2355,Y(4,1087,e),0),et=16+e|0,0|t},H:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+876>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2375,Y(4,1087,e),0),et=16+e|0,0|t},I:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[t+272>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2402,Y(4,1087,e),0),et=16+e|0,0|t},J:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+824>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2432,Y(4,1087,e),0),et=16+e|0,0|t},K:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+888>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2456,Y(4,1087,e),0),et=16+e|0,0|t},L:function(t){var e;return et=e=et-16|0,t=(t|=0)?pt[pt[t>>2]+828>>2]:(pt[4+e>>2]=1651,pt[e>>2]=2482,Y(4,1087,e),0),et=16+e|0,0|t},M:function(t){var e;et=e=et-16|0,(t|=0)?pt[t+256>>2]=1:(pt[4+e>>2]=1651,pt[e>>2]=2504,Y(4,1087,e)),et=16+e|0},N:function(t){var e;return ya(12+(et=e=et-16|0)|0,64,t|=0),et=16+e|0,pt[12+e>>2]},O:function(t){var e,r,i=0;return et=e=et-16|0,!(t|=0)||ya(12+e|0,16,r=wa(t))||(i=va(t,pt[12+e>>2],r))||(za(pt[12+e>>2]),i=0),et=16+e|0,0|i},P:function(t){return 0|ja(t|=0)},Q:function(t){za(t|=0)},R:function(){return 0|et},S:function(t){return 0|(et=et-(0|t)&-16)},T:function(t){et=0|t},U:function(t){return 0|(t=0|(t|=0),r=0|N(),t=r+(t|=0)|0,r<t&&t<65536&&(t=new ArrayBuffer(yt(t,65536)),(e=new i.Int8Array(t)).set(gt),gt=e,gt=new i.Int8Array(t),v=new i.Int16Array(t),pt=new i.Int32Array(t),dt=new i.Uint8Array(t),mt=new i.Uint16Array(t),p=new i.Uint32Array(t),_t=new i.Float32Array(t),tt=new i.Float64Array(t),n=t,m.buffer=t),r);var e,r},V:function(t,e){ft[t|=0](e|=0)}};function X(t,e,r){var i,n,o=0;if(r)for(;;){if(r=r+-1|0,t>>>0<(o=(i=t+e|0)-1|0)>>>0)for(;n=dt[0|t],gt[0|t]=dt[0|o],gt[0|o]=n,(t=t+1|0)>>>0<(o=o+-1|0)>>>0;);if(t=i,!r)break}}function Y(t,e,r){var i;et=i=et-272|0,p[1640]>t>>>0||(t=pt[1641])&&(sa(16+i|0,e,pt[12+i>>2]=r),ft[t](16+i|0)),et=272+i|0}function Z(t,e,r){if(!(32&dt[0|t])){var i,n,o=e,a=r,s=t,u=0,l=0,c=0;t:{if(!(u=pt[s+16>>2])){if(n=dt[(i=s)+74|(n=0)],gt[i+74|0]=n+-1|n,8&(n=pt[i>>2])?(pt[i>>2]=32|n,-1):(pt[i+4>>2]=0,pt[i+8>>2]=0,n=pt[i+44>>2],pt[i+28>>2]=n,pt[i+20>>2]=n,pt[i+16>>2]=n+pt[i+48>>2],0))break t;u=pt[s+16>>2]}if(u-(c=pt[s+20>>2])>>>0<a>>>0)return void ft[pt[s+36>>2]](s,o,a);e:if(!(gt[s+75|0]<0)){for(u=a;;){if(!(l=u))break e;if(10==dt[(u=l+-1|0)+o|0])break}if(ft[pt[s+36>>2]](s,o,l)>>>0<l>>>0)break t;a=a-l|0,o=o+l|0,c=pt[s+20>>2]}fa(c,o,a),pt[s+20>>2]=pt[s+20>>2]+a}}}function _(t,e,r,i,n){var o,a,s;if(et=o=et-256|0,!(73728&n|(0|r)<=(0|i))){if(ba(o,e,(a=(n=r-i|0)>>>0<256)?n:256),e=t,s=o,!a){for(r=r-i|0;Z(t,o,256),255<(n=n+-256|0)>>>0;);n=255&r}Z(e,s,n)}et=256+o|0}function $(t){var e,r;return bt((e=t*t)*e*(r=e*t)*(2718311493989822e-21*e-.00019839334836096632)+(r*(.008333329385889463*e-.16666666641626524)+t))}function aa(t){var e;return bt(-.499999997251031*(t*=t)+1+.04166662332373906*(e=t*t)+t*e*(2439044879627741e-20*t-.001388676377460993))}function ba(t,e,r){var i,n=0,o=0,a=0;if(r&&(gt[(n=t+r|0)-1|0]=e,gt[0|t]=e,!(r>>>0<3||(gt[n+-2|0]=e,gt[t+1|0]=e,gt[n+-3|0]=e,gt[t+2|0]=e,r>>>0<7||(gt[n+-4|0]=e,gt[t+3|0]=e,r>>>0<9||(o=(n=0-t&3)+t|0,e=yt(255&e,16843009),pt[o>>2]=e,pt[(n=(r=r-n&-4)+o|0)-4>>2]=e,r>>>0<9||(pt[o+8>>2]=e,pt[o+4>>2]=e,pt[n+-8>>2]=e,pt[n+-12>>2]=e,r>>>0<25||(pt[o+24>>2]=e,pt[o+20>>2]=e,pt[o+16>>2]=e,pt[o+12>>2]=e,pt[n+-16>>2]=e,pt[n+-20>>2]=e,pt[n+-24>>2]=e,pt[n+-28>>2]=e,(r=r-(a=4&o|24)|0)>>>0<32))))))))for(i=n=e,e=o+a|0;pt[e+24>>2]=i,pt[e+28>>2]=n,pt[e+16>>2]=i,pt[e+20>>2]=n,pt[e+8>>2]=i,pt[e+12>>2]=n,pt[e>>2]=i,pt[e+4>>2]=n,e=e+32|0,31<(r=r+-32|0)>>>0;);return t}function ca(t,e){var r;if(t>>>0<(e=(t+e|0)-1|0)>>>0)for(;r=dt[0|t],gt[0|t]=dt[0|e],gt[0|e]=r,(t=t+1|0)>>>0<(e=e+-1|0)>>>0;);}function da(t){var e,r=N();return(t=(e=pt[2052])+t|0)>>>0<=r<<16>>>0||b(0|t)?(pt[2052]=t,e):(pt[1906]=48,-1)}function ea(t,e,r){var i,n,o=0;if(1==(0|e)&t>>>0<0|e>>>0<1)o=t;else for(;i=gc(o=hc(t,e,10),n=V,10),gt[0|(r=r+-1|0)]=t-i|48,i=9==(0|e)&4294967295<t>>>0|9<e>>>0,t=o,e=n,i;);if(o)for(;gt[0|(r=r+-1|0)]=o-yt(t=(o>>>0)/10|0,10)|48,e=9<o>>>0,o=t,e;);return r}function fa(t,e,r){var i,n=0;if(8192<=r>>>0)y(0|t,0|e,0|r);else{if(i=t+r|0,3&(t^e))if(i>>>0<4)r=t;else if((n=i-4|0)>>>0<t>>>0)r=t;else for(r=t;gt[0|r]=dt[0|e],gt[r+1|0]=dt[e+1|0],gt[r+2|0]=dt[e+2|0],gt[r+3|0]=dt[e+3|0],e=e+4|0,(r=r+4|0)>>>0<=n>>>0;);else{t:if((0|r)<1)r=t;else if(3&t)for(r=t;;){if(gt[0|r]=dt[0|e],e=e+1|0,i>>>0<=(r=r+1|0)>>>0)break t;if(!(3&r))break}else r=t;if(!((t=-4&i)>>>0<64||(n=t+-64|0)>>>0<r>>>0))for(;pt[r>>2]=pt[e>>2],pt[r+4>>2]=pt[e+4>>2],pt[r+8>>2]=pt[e+8>>2],pt[r+12>>2]=pt[e+12>>2],pt[r+16>>2]=pt[e+16>>2],pt[r+20>>2]=pt[e+20>>2],pt[r+24>>2]=pt[e+24>>2],pt[r+28>>2]=pt[e+28>>2],pt[r+32>>2]=pt[e+32>>2],pt[r+36>>2]=pt[e+36>>2],pt[r+40>>2]=pt[e+40>>2],pt[r+44>>2]=pt[e+44>>2],pt[r+48>>2]=pt[e+48>>2],pt[r+52>>2]=pt[e+52>>2],pt[r+56>>2]=pt[e+56>>2],pt[r+60>>2]=pt[e+60>>2],e=e- -64|0,(r=r- -64|0)>>>0<=n>>>0;);if(!(t>>>0<=r>>>0))for(;pt[r>>2]=pt[e>>2],e=e+4|0,(r=r+4|0)>>>0<t>>>0;);}if(r>>>0<i>>>0)for(;gt[0|r]=dt[0|e],e=e+1|0,(0|i)!=(0|(r=r+1|0)););}}function ga(t){return t+-48>>>0<10}function ha(t,e){var r=0;return 1024<=(0|e)?(t*=898846567431158e293,e=(0|(r=e+-1023|0))<1024?r:(t*=898846567431158e293,((0|e)<3069?e:3069)+-2046|0)):-1023<(0|e)||(t*=22250738585072014e-324,e=-1023<(0|(r=e+1022|0))?r:(t*=22250738585072014e-324,(-3066<(0|e)?e:-3066)+2044|0)),f(0,0),f(1,e+1023<<20),t*g()}function ia(t,e,r,i,n,o,a){var s,u,l,c=0,h=0,f=0,g=0,p=0,d=0,m=0,y=0,b=0,A=0,C=0,M=0;pt[76+(et=s=et-80|0)>>2]=e,l=55+s|0,u=56+s|0,e=0;t:{e:{r:for(;;){(0|b)<0||(b=(2147483647-b|0)<(0|e)?(pt[1906]=61,-1):e+b|0);i:{n:{o:{a:{s:{u:{l:{c:{h:{f:{g:{p:{d:{if(g=pt[76+s>>2],f=dt[0|(e=g)]){for(;;){m:{_:{y:if(c=255&f){if(37!=(0|c))break _;for(f=e;;){if(37!=dt[e+1|0])break y;if(pt[76+s>>2]=c=e+2|0,f=f+1|0,h=dt[e+2|0],e=c,37!=(0|h))break}}else f=e;if(e=f-g|0,t&&Z(t,g,e),e)continue r;A=-1,p=!ga(gt[pt[76+(c=s)>>2]+(f=1)|0]),e=pt[76+s>>2],p|36!=dt[e+2|0]||(A=gt[e+1|0]+-48|0,C=1,f=3),pt[c+76>>2]=e=f+e|0;y:if(31<(h=(m=gt[(f=0)|e])+-32|0)>>>0)c=e;else if(c=e,75913&(h=1<<h))for(;;){if(pt[76+s>>2]=c=e+1|0,f|=h,31<(h=(m=gt[e+1|0])+-32|0)>>>0)break y;if(e=c,!(75913&(h=1<<h)))break}if(42!=(0|m)){if((0|(y=qa(76+s|0)))<0)break e;e=pt[76+s>>2]}else{if(p=s,ga(gt[c+1|0])&&(e=pt[76+s>>2],36==dt[e+2|0]))pt[((gt[e+1|0]<<2)+n|0)-192>>2]=10,y=pt[((gt[e+1|0]<<3)+i|0)-384>>2],C=1,e=e+3|0;else{if(C)break e;y=C=0,t&&(e=pt[r>>2],pt[r>>2]=e+4,y=pt[e>>2]),e=pt[76+s>>2]+1|0}pt[p+76>>2]=e,-1<(0|y)||(y=0-y|0,f|=8192)}if(h=-1,46==dt[0|e])if(42!=dt[e+1|0])pt[76+s>>2]=e+1,h=qa(76+s|0),e=pt[76+s>>2];else if(ga(gt[e+2|0])&&(e=pt[76+s>>2],36==dt[e+3|0]))pt[((gt[e+2|0]<<2)+n|0)-192>>2]=10,h=pt[((gt[e+2|0]<<3)+i|0)-384>>2],pt[76+s>>2]=e=e+4|0;else{if(C)break e;h=t?(e=pt[r>>2],pt[r>>2]=e+4,pt[e>>2]):0,e=pt[76+s>>2]+2|0,pt[76+s>>2]=e}for(c=0;;){if(M=c,d=-1,57<gt[0|e]+-65>>>0)break t;if(pt[76+s>>2]=m=e+1|0,c=gt[0|e],e=m,!((c=dt[2639+(c+yt(M,58)|0)|0])+-1>>>0<8))break}if(!c)break t;y:{b:{A:{if(19==(0|c)){if((0|A)<=-1)break A;break t}if((0|A)<0)break b;pt[(A<<2)+n>>2]=c,c=pt[4+(e=(A<<3)+i|0)>>2],pt[64+s>>2]=pt[e>>2],pt[68+s>>2]=c}if(e=0,t)break y;continue r}if(!t)break i;pa(64+s|0,c,r,a),m=pt[76+s>>2]}if(p=-65537&f,f=8192&f?p:f,A=2684,c=u,e=gt[m+-1|(d=0)],(m=(e=M&&3==(15&e)?-33&e:e)+-88|0)>>>0<=32)break m;y:{b:{A:{C:{if(6<(p=e+-65|0)>>>0){if(83!=(0|e))break n;if(!h)break C;c=pt[64+s>>2];break b}switch(p-1|0){case 1:break A;case 0:case 2:break n;default:break d}}_(t,32,y,e=0,f);break y}pt[12+s>>2]=0,pt[8+s>>2]=pt[64+s>>2],pt[64+s>>2]=8+s,h=-1,c=8+s|0}e=0;b:{for(;;){if(!(g=pt[c>>2]))break b;if((p=(0|(g=oa(4+s|0,g)))<0)|h-e>>>0<g>>>0)break;if(c=c+4|0,!((e=e+g|0)>>>0<h>>>0))break b}if(d=-1,p)break t}if(_(t,32,y,e,f),e)for(h=0,c=pt[64+s>>2];;){if(!(g=pt[c>>2]))break y;if((0|e)<(0|(h=(g=oa(4+s|0,g))+h|0)))break y;if(Z(t,4+s|0,g),c=c+4|0,!(h>>>0<e>>>0))break}else e=0}_(t,32,y,e,8192^f),e=(0|e)<(0|y)?y:e;continue r}pt[76+s>>2]=c=e+1|0,f=dt[e+1|0],e=c;continue}break}switch(m-1|0){case 28:break s;case 21:break u;case 23:break c;case 22:break h;case 11:case 16:break f;case 10:break g;case 26:break p;case 8:case 12:case 13:case 14:break d;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 9:case 15:case 17:case 18:case 19:case 20:case 24:case 25:case 27:case 29:case 30:break n;default:break l}}if(d=b,t)break t;if(!C)break i;for(e=1;;){if(t=pt[(e<<2)+n>>2]){if(pa((e<<3)+i|0,t,r,a),10!=(0|(e=e+(d=1)|0)))continue;break t}break}if(d=1,9<e>>>0)break t;if(d=-1,pt[(e<<2)+n>>2])break t;for(;!pt[((e=e+1|0)<<2)+n>>2]&&10!=(0|e););d=e>>>0<10?-1:1;break t}e=0|ft[o](t,tt[64+s>>3],y,h,f,e);continue}c=(e=function Ia(t,e){var r=0,i=0,n=0;r=0!=(0|e);p:{d:{m:{_:if(!(!e|!(3&t)))for(;;){if(!dt[0|t])break m;if(t=t+1|0,r=0!=(0|(e=e+-1|0)),!e)break _;if(!(3&t))break}if(!r)break d}if(!dt[0|t])break p;m:{if(4<=e>>>0){for(r=(r=e+-4|0)-(i=-4&r)|0,i=4+(t+i|0)|0;;){if((-1^(n=pt[t>>2]))&n+-16843009&-2139062144)break m;if(t=t+4|0,!(3<(e=e+-4|0)>>>0))break}e=r,t=i}if(!e)break d}for(;;){if(!dt[0|t])break p;if(t=t+1|0,!(e=e+-1|0))break}}return 0}return t}(g=(e=pt[64+s>>2])||2694,h))||h+g|0,f=p,h=e?e-g|0:h;break n}gt[55+s|0]=pt[64+s>>2],h=1,g=l,f=p;break n}if(e=p=pt[68+s>>2],g=pt[64+s>>2],(0|e)<-1||(0|e)<=-1&&!(4294967295<g>>>0)){e=0-(e+(0<g>>>0)|0)|0,pt[64+s>>2]=g=0-g|0,pt[68+s>>2]=e,d=1,A=2684;break a}if(2048&f){d=1,A=2685;break a}A=(d=1&f)?2686:2684;break a}if(g=function Oa(t,e,r){if(t|e)for(;gt[0|(r=r+-1|0)]=7&t|48,(t=(7&e)<<29|t>>>3)|(e>>>=3););return r}(pt[64+s>>2],pt[68+s>>2],u),!(8&f))break o;h=(0|(e=u-g|0))<(0|h)?h:e+1|0;break o}h=8<h>>>0?h:8,f|=8,e=120}if(g=function Na(t,e,r,i){if(t|e)for(;gt[0|(r=r+-1|0)]=dt[3168+(15&t)|0]|i,(t=(15&e)<<28|t>>>4)|(e>>>=4););return r}(pt[64+s>>2],pt[68+s>>2],u,32&e),!(8&f)|!(pt[64+s>>2]|pt[68+s>>2]))break o;A=2684+(e>>>4)|0,d=2;break o}if(7<(c=255&M)>>>(e=0))continue;switch(c-1|0){default:case 0:pt[pt[64+s>>2]>>2]=b;continue;case 1:c=pt[64+s>>2],pt[c>>2]=b,pt[c+4>>2]=b>>31;continue;case 2:v[pt[64+s>>2]>>1]=b;continue;case 3:gt[pt[64+s>>2]]=b;continue;case 5:pt[pt[64+s>>2]>>2]=b;continue;case 4:continue;case 6:}c=pt[64+s>>2],pt[c>>2]=b,pt[c+4>>2]=b>>31;continue}g=pt[64+s>>2],e=pt[68+s>>2],A=2684}g=ea(g,e,u)}f=-1<(0|h)?-65537&f:f,h=!!((p=e=pt[68+s>>2])|(m=pt[64+s>>2]))|h?(0|(e=!(p|m)+(u-g|0)|0))<(0|h)?h:e:(g=u,0)}_(t,32,e=(0|y)<(0|(c=(h=(0|h)<(0|(p=c-g|0))?p:h)+d|0))?c:y,c,f),Z(t,A,d),_(t,48,e,c,65536^f),_(t,48,h,p,0),Z(t,g,p),_(t,32,e,c,8192^f);continue}break}d=0;break t}d=-1}return et=80+s|0,d}function ja(t){var e,r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0,c=0,h=0,f=0;et=e=et-16|0;t:{e:{r:{i:{n:{o:{a:{s:{u:{l:{c:{if(t>>>0<=244){if(3&(r=(a=pt[1923])>>>(t=(s=t>>>0<11?16:t+11&-8)>>>3))){t=(r=pt[7740+(o=(i=t+(1&(-1^r))|0)<<3)>>2])+8|0,(0|(n=pt[r+8>>2]))!=(0|(o=o+7732|0))?(pt[n+12>>2]=o,pt[o+8>>2]=n):(f=jc(i)&a,pt[7692>>2]=f),pt[r+4>>2]=3|(i<<=3),pt[4+(r=r+i|0)>>2]=1|pt[r+4>>2];break t}if(s>>>0<=(l=pt[1925])>>>0)break c;if(r){i=(i=r=(t=(0-(t=(0-(i=2<<t)|i)&r<<t)&t)-1|0)>>>12&16)|(r=(t>>>=r)>>>5&8)|(r=(t>>>=r)>>>2&4),r=pt[7740+(n=(i=((i|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)|0)<<3)>>2],(0|(t=pt[r+8>>2]))!=(0|(n=n+7732|0))?(pt[t+12>>2]=n,pt[n+8>>2]=t):(a=jc(i)&a,pt[1923]=a),t=r+8|0,pt[r+4>>2]=3|s,o=(i<<=3)-s|0,pt[4+(u=r+s|0)>>2]=1|o,pt[r+i>>2]=o,l&&(r=7732+((i=l>>>3)<<3)|0,n=pt[1928],i=(i=1<<i)&a?pt[r+8>>2]:(pt[1923]=i|a,r),pt[r+8>>2]=n,pt[i+12>>2]=n,pt[n+12>>2]=r,pt[n+8>>2]=i),pt[1928]=u,pt[1925]=o;break t}if(!(h=pt[1924]))break c;for(i=(i=r=(t=(h&0-h)-1|0)>>>12&16)|(r=(t>>>=r)>>>5&8)|(r=(t>>>=r)>>>2&4),r=pt[7996+(((i|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)<<2)>>2],n=(-8&pt[r+4>>2])-s|0,i=r;t=(t=pt[i+16>>2])||pt[i+20>>2];)n=(i=(o=(-8&pt[t+4>>2])-s|0)>>>0<n>>>0)?o:n,r=i?t:r,i=t;if(c=pt[r+24>>2],(0|(o=pt[r+12>>2]))!=(0|r)){t=pt[r+8>>2],pt[t+12>>2]=o,pt[o+8>>2]=t;break e}if(!(t=pt[(i=r+20|0)>>2])){if(!(t=pt[r+16>>2]))break l;i=r+16|0}for(;u=i,(t=pt[(i=(o=t)+20|0)>>2])||(i=o+16|0,t=pt[o+16>>2]););pt[u>>2]=0;break e}if(s=-1,!(4294967231<t>>>0)&&(s=-8&(r=t+11|0),l=pt[1924])){i=0-s|0,a=0,(r>>>=8)&&(a=31,16777215<s>>>0||(a=28+((t=((a=(r<<=n=r+1048320>>>16&8)<<(t=r+520192>>>16&4))<<(r=a+245760>>>16&2)>>>15)-(r|t|n)|0)<<1|s>>>t+21&1)|0));h:{f:{if(n=pt[7996+(a<<2)>>2])for(r=s<<(31==(0|a)?0:25-(a>>>1)|0),t=0;;){if(!(i>>>0<=(u=(-8&pt[n+4>>2])-s|0)>>>0||(o=n,i=u))){i=0,t=n;break f}if(u=pt[n+20>>2],n=pt[16+((r>>>29&4)+n|0)>>2],t=!u||(0|u)==(0|n)?t:u,r<<=0!=(0|n),!n)break}else t=0;if(!(t|o)){if(!(t=(0-(t=2<<a)|t)&l))break c;n=(n=r=(t=(t&0-t)-1|0)>>>12&16)|(r=(t>>>=r)>>>5&8)|(r=(t>>>=r)>>>2&4),t=pt[7996+(((n|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)<<2)>>2]}if(!t)break h}for(;i=(r=(n=(-8&pt[t+4>>2])-s|0)>>>0<i>>>0)?n:i,o=r?t:o,t=(r=pt[t+16>>2])||pt[t+20>>2];);}if(!(!o|i>>>0>=pt[1925]-s>>>0)){if(u=pt[o+24>>2],(0|o)!=(0|(r=pt[o+12>>2]))){t=pt[o+8>>2],pt[t+12>>2]=r,pt[r+8>>2]=t;break r}if(!(t=pt[(n=o+20|0)>>2])){if(!(t=pt[o+16>>2]))break u;n=o+16|0}for(;a=n,(t=pt[(n=(r=t)+20|0)>>2])||(n=r+16|0,t=pt[r+16>>2]););pt[a>>2]=0;break r}}}if(s>>>0<=(r=pt[1925])>>>0){t=pt[1928],16<=(i=r-s|0)>>>0?(pt[1925]=i,pt[1928]=n=t+s|0,pt[n+4>>2]=1|i,pt[t+r>>2]=i,pt[t+4>>2]=3|s):(pt[1928]=0,pt[1925]=0,pt[t+4>>2]=3|r,pt[4+(r=t+r|0)>>2]=1|pt[r+4>>2]),t=t+8|0;break t}if(s>>>0<(n=pt[1926])>>>0){pt[1926]=r=n-s|0,i=(t=pt[1929])+s|0,pt[1929]=i,pt[i+4>>2]=1|r,pt[t+4>>2]=3|s,t=t+8|0;break t}if((i=(a=(i=o=s+47|(t=0))+(r=pt[2041]?pt[2043]:(pt[2044]=-1,pt[2045]=-1,pt[2042]=4096,pt[2043]=4096,pt[2041]=12+e&-16^1431655768,pt[2046]=0,pt[2034]=0,4096))|0)&(u=0-r|0))>>>0<=s>>>0)break t;if((r=pt[2033])&&(c=(l=pt[2031])+i|0)>>>0<=l>>>0|r>>>0<c>>>0)break t;if(4&dt[8136])break o;c:{h:{if(r=pt[1929])for(t=8140;;){if((l=pt[t>>2])+pt[t+4>>2]>>>0>r>>>0&&l>>>0<=r>>>0)break h;if(!(t=pt[t+8>>2]))break}if(-1==(0|(r=da(0))))break a;if(a=i,(a=(n=(t=pt[2042])+-1|0)&r?(i-r|0)+(r+n&0-t)|0:a)>>>0<=s>>>0|2147483646<a>>>0)break a;if((t=pt[2033])&&(u=(n=pt[2031])+a|0)>>>0<=n>>>0|t>>>0<u>>>0)break a;if((0|r)!=(0|(t=da(a))))break c;break n}if(2147483646<(a=u&a-n)>>>0)break a;if((0|(r=da(a)))==(pt[t>>2]+pt[t+4>>2]|0))break s;t=r}if(!(s+48>>>0<=a>>>0|2147483646<a>>>0|-1==(0|(r=t)))){if(2147483646<(t=(t=pt[2043])+(o-a|0)&0-t)>>>0)break n;if(-1!=(0|da(t))){a=t+a|0;break n}da(0-a|0);break a}if(-1!=(0|r))break n;break a}o=0;break e}r=0;break r}if(-1!=(0|r))break n}pt[2034]=4|pt[2034]}if(2147483646<i>>>0)break i;if(r=da(i),(t=da(0))>>>0<=r>>>0|-1==(0|r)|-1==(0|t))break i;if((a=t-r|0)>>>0<=s+40>>>0)break i}t=pt[2031]+a|0,(pt[2031]=t)>>>0>p[2032]&&(pt[2032]=t);n:{o:{a:{if(i=pt[1929]){for(t=8140;;){if(((n=pt[t>>2])+(o=pt[t+4>>2])|0)==(0|r))break a;if(!(t=pt[t+8>>2]))break}break o}for((t=pt[1927])>>>0<=r>>>0&&t||(pt[1927]=r),t=0,pt[2036]=a,pt[2035]=r,pt[1931]=-1,pt[1932]=pt[2041],pt[2038]=0;n=7732+(i=t<<3)|0,pt[i+7740>>2]=n,pt[i+7744>>2]=n,32!=(0|(t=t+1|0)););n=(t=a+-40|0)-(i=r+8&7?-8-r&7:0)|0,pt[1926]=n,pt[1929]=i=r+i|0,pt[i+4>>2]=1|n,pt[4+(t+r|0)>>2]=40,pt[1930]=pt[2045];break n}if(!(8&dt[t+12|0]|r>>>0<=i>>>0|i>>>0<n>>>0)){pt[t+4>>2]=o+a,r=(t=i+8&7?-8-i&7:0)+i|0,pt[1929]=r,t=(n=pt[1926]+a|0)-t|0,pt[1926]=t,pt[r+4>>2]=1|t,pt[4+(i+n|0)>>2]=40,pt[1930]=pt[2045];break n}}r>>>0<(o=pt[1927])>>>0&&(pt[1927]=r,o=0),n=r+a|0,t=8140;o:{a:{s:{u:{l:{c:{for(;(0|n)!=pt[t>>2];)if(!(t=pt[t+8>>2]))break c;if(!(8&dt[t+12|0]))break l}for(t=8140;;){if((n=pt[t>>2])>>>0<=i>>>0&&i>>>0<(o=n+pt[t+4>>2]|0)>>>0)break u;t=pt[t+8>>2]}}if(pt[t>>2]=r,pt[t+4>>2]=pt[t+4>>2]+a,pt[4+(c=(r+8&7?-8-r&7:0)+r|0)>>2]=3|s,t=((r=n+(n+8&7?-8-n&7:0)|0)-c|0)-s|0,u=s+c|0,(0|r)==(0|i)){pt[1929]=u,t=pt[1926]+t|0,pt[1926]=t,pt[u+4>>2]=1|t;break a}if(pt[1928]==(0|r)){pt[1928]=u,t=pt[1925]+t|0,pt[1925]=t,pt[u+4>>2]=1|t,pt[t+u>>2]=t;break a}if(1==(3&(i=pt[r+4>>2]))){h=-8&i;l:if(i>>>0<=255)o=i>>>3,i=pt[r+8>>2],(0|(n=pt[r+12>>2]))==(0|i)?(f=pt[1923]&jc(o),pt[7692>>2]=f):(pt[i+12>>2]=n,pt[n+8>>2]=i);else{if(l=pt[r+24>>2],(0|(a=pt[r+12>>2]))==(0|r))if((s=pt[(n=r+20|0)>>2])||(s=pt[(n=r+16|0)>>2])){for(;i=n,(s=pt[(n=(a=s)+20|0)>>2])||(n=a+16|0,s=pt[a+16>>2]););pt[i>>2]=0}else a=0;else i=pt[r+8>>2],pt[i+12>>2]=a,pt[a+8>>2]=i;if(l){i=pt[r+28>>2];c:{if(pt[(n=7996+(i<<2)|0)>>2]==(0|r)){if(pt[n>>2]=a)break c;f=pt[1924]&jc(i),pt[7696>>2]=f;break l}if(!(pt[l+(pt[l+16>>2]==(0|r)?16:20)>>2]=a))break l}pt[a+24>>2]=l,(i=pt[r+16>>2])&&(pt[a+16>>2]=i,pt[i+24>>2]=a),(i=pt[r+20>>2])&&(pt[a+20>>2]=i,pt[i+24>>2]=a)}}r=r+h|0,t=t+h|0}if(pt[r+4>>2]=-2&pt[r+4>>2],pt[u+4>>2]=1|t,(pt[t+u>>2]=t)>>>0<=255){t=7732+((r=t>>>3)<<3)|0,r=(i=pt[1923])&(r=1<<r)?pt[t+8>>2]:(pt[1923]=r|i,t),pt[t+8>>2]=u,pt[r+12>>2]=u,pt[u+12>>2]=t,pt[u+8>>2]=r;break a}if(r=0,(n=t>>>8)&&(r=31,16777215<t>>>0||(r=28+((r=((s=(n<<=o=n+1048320>>>16&8)<<(r=n+520192>>>16&4))<<(n=s+245760>>>16&2)>>>15)-(n|r|o)|0)<<1|t>>>r+21&1)|0)),pt[(i=u)+28>>2]=r,pt[u+16>>2]=0,i=7996+(r<<2)|(pt[u+20>>2]=0),(n=pt[1924])&(o=1<<r)){for(n=t<<(31==(0|r)?0:25-(r>>>1)|0),r=pt[i>>2];;){if((-8&pt[(i=r)+4>>2])==(0|t))break s;if(r=n>>>29,n<<=1,!(r=pt[16+(o=(4&r)+i|0)>>2]))break}pt[o+16>>2]=u}else pt[1924]=n|o,pt[i>>2]=u;pt[u+24>>2]=i,pt[u+12>>2]=u,pt[u+8>>2]=u;break a}for(u=(t=a+-40|0)-(n=r+8&7?-8-r&7:0)|0,pt[1926]=u,pt[1929]=n=r+n|0,pt[n+4>>2]=1|u,pt[4+(t+r|0)>>2]=40,pt[1930]=pt[2045],pt[(n=(t=(o+(o+-39&7?39-o&7:0)|0)-47|0)>>>0<i+16>>>0?i:t)+4>>2]=27,t=pt[2038],pt[n+16>>2]=pt[2037],pt[n+20>>2]=t,t=pt[2036],pt[n+8>>2]=pt[2035],pt[n+12>>2]=t,pt[2037]=n+8,pt[2036]=a,pt[2035]=r,t=n+24|(pt[2038]=0);pt[t+4>>2]=7,r=t+8|0,t=t+4|0,r>>>0<o>>>0;);if((0|i)==(0|n))break n;if(pt[n+4>>2]=-2&pt[n+4>>2],pt[i+4>>2]=1|(o=n-i|0),(pt[n>>2]=o)>>>0<=255){t=7732+((r=o>>>3)<<3)|0,r=(n=pt[1923])&(r=1<<r)?pt[t+8>>2]:(pt[1923]=r|n,t),pt[t+8>>2]=i,pt[r+12>>2]=i,pt[i+12>>2]=t,pt[i+8>>2]=r;break n}if(pt[i+16>>2]=0,t=pt[i+20>>2]=0,(n=o>>>8)&&(t=31,16777215<o>>>0||(t=28+((t=((u=(n<<=a=n+1048320>>>16&8)<<(t=n+520192>>>16&4))<<(n=u+245760>>>16&2)>>>15)-(n|t|a)|0)<<1|o>>>t+21&1)|0)),r=7996+((pt[(r=i)+28>>2]=t)<<2)|0,(n=pt[1924])&(a=1<<t)){for(t=o<<(31==(0|t)?0:25-(t>>>1)|0),r=pt[r>>2];;){if((0|o)==(-8&pt[(n=r)+4>>2]))break o;if(r=t>>>29,t<<=1,!(r=pt[16+(a=n+(4&r)|0)>>2]))break}pt[a+16>>2]=i,pt[i+24>>2]=n}else pt[1924]=n|a,pt[r>>2]=i,pt[i+24>>2]=r;pt[i+12>>2]=i,pt[i+8>>2]=i;break n}t=pt[i+8>>2],pt[t+12>>2]=u,pt[i+8>>2]=u,pt[u+24>>2]=0,pt[u+12>>2]=i,pt[u+8>>2]=t}t=c+8|0;break t}t=pt[n+8>>2],pt[t+12>>2]=i,pt[n+8>>2]=i,pt[i+24>>2]=0,pt[i+12>>2]=n,pt[i+8>>2]=t}if(!((t=pt[1926])>>>0<=s>>>0)){pt[1926]=r=t-s|0,i=(t=pt[1929])+s|0,pt[1929]=i,pt[i+4>>2]=1|r,pt[t+4>>2]=3|s,t=t+8|0;break t}}pt[1906]=48,t=0;break t}r:if(u){t=pt[o+28>>2];i:{if(pt[(n=7996+(t<<2)|0)>>2]==(0|o)){if(pt[n>>2]=r)break i;l=jc(t)&l,pt[1924]=l;break r}if(!(pt[u+(pt[u+16>>2]==(0|o)?16:20)>>2]=r))break r}pt[r+24>>2]=u,(t=pt[o+16>>2])&&(pt[r+16>>2]=t,pt[t+24>>2]=r),(t=pt[o+20>>2])&&(pt[r+20>>2]=t,pt[t+24>>2]=r)}r:if(i>>>0<=15)pt[o+4>>2]=3|(t=i+s|0),pt[4+(t=t+o|0)>>2]=1|pt[t+4>>2];else if(pt[o+4>>2]=3|s,pt[4+(n=o+s|0)>>2]=1|i,(pt[i+n>>2]=i)>>>0<=255)t=7732+((r=i>>>3)<<3)|0,r=(i=pt[1923])&(r=1<<r)?pt[t+8>>2]:(pt[1923]=r|i,t),pt[t+8>>2]=n,pt[r+12>>2]=n,pt[n+12>>2]=t,pt[n+8>>2]=r;else{t=0,(s=i>>>8)&&(t=31,16777215<i>>>0||(t=28+((t=((u=(s<<=a=s+1048320>>>16&8)<<(t=s+520192>>>16&4))<<(s=u+245760>>>16&2)>>>15)-(s|t|a)|0)<<1|i>>>t+21&1)|0)),pt[(r=n)+28>>2]=t,pt[n+16>>2]=0,r=7996+(t<<2)|(pt[n+20>>2]=0);i:{if((s=1<<t)&l){for(t=i<<(31==(0|t)?0:25-(t>>>1)|0),s=pt[r>>2];;){if((-8&pt[(r=s)+4>>2])==(0|i))break i;if(s=t>>>29,t<<=1,!(s=pt[16+(a=(4&s)+r|0)>>2]))break}pt[a+16>>2]=n}else pt[1924]=s|l,pt[r>>2]=n;pt[n+24>>2]=r,pt[n+12>>2]=n,pt[n+8>>2]=n;break r}t=pt[r+8>>2],pt[t+12>>2]=n,pt[r+8>>2]=n,pt[n+24>>2]=0,pt[n+12>>2]=r,pt[n+8>>2]=t}t=o+8|0;break t}e:if(c){t=pt[r+28>>2];r:{if(pt[(i=7996+(t<<2)|0)>>2]==(0|r)){if(pt[i>>2]=o)break r;f=jc(t)&h,pt[7696>>2]=f;break e}if(!(pt[c+(pt[c+16>>2]==(0|r)?16:20)>>2]=o))break e}pt[o+24>>2]=c,(t=pt[r+16>>2])&&(pt[o+16>>2]=t,pt[t+24>>2]=o),(t=pt[r+20>>2])&&(pt[o+20>>2]=t,pt[t+24>>2]=o)}n>>>0<=15?(pt[r+4>>2]=3|(t=n+s|0),pt[4+(t=t+r|0)>>2]=1|pt[t+4>>2]):(pt[r+4>>2]=3|s,pt[4+(s=r+s|0)>>2]=1|n,pt[n+s>>2]=n,l&&(t=7732+((i=l>>>3)<<3)|0,o=pt[1928],i=(i=1<<i)&a?pt[t+8>>2]:(pt[1923]=i|a,t),pt[t+8>>2]=o,pt[i+12>>2]=o,pt[o+12>>2]=t,pt[o+8>>2]=i),pt[1928]=s,pt[1925]=n),t=r+8|0}return et=16+e|0,t}function ka(t){var r,i,n,o,a=0,s=(bt(0),0);bt(0),bt(0);j(t);t:{if(1283457024<=(a=2147483647&(i=e(0)))>>>0){if(2139095040<a>>>0)break t;return bt((0|i)<0?-1.570796251296997:1.570796251296997)}e:{if(a>>>0<=1054867455){if(s=-1,964689920<=a>>>0)break e;break t}t=bt(At(t)),s=a>>>0<=1066926079?a>>>0<=1060110335?(t=bt(bt(bt(t+t)+bt(-1))/bt(t+bt(2))),0):(t=bt(bt(t+bt(-1))/bt(t+bt(1))),1):a>>>0<=1075576831?(t=bt(bt(t+bt(-1.5))/bt(bt(t*bt(1.5))+bt(1))),2):(t=bt(bt(-1)/t),3)}if(a=s,n=bt(t*t),r=bt(n*n),o=bt(r*bt(bt(r*bt(-.106480173766613))+bt(-.19999158382415771))),r=bt(n*bt(bt(r*bt(bt(r*bt(.06168760731816292))+bt(.14253635704517365)))+bt(.333333283662796))),(0|a)<=-1)return bt(t-bt(t*bt(o+r)));t=bt(_t[6080+(a<<=2)>>2]-bt(bt(bt(t*bt(o+r))-_t[a+6096>>2])-t)),t=(0|i)<0?bt(-t):t}return t}function la(t,r){var i,n,o,a=0,s=0;return et=i=et-16|0,j(t),(a=2147483647&(n=e(0)))>>>0<=1305022426?(s=.6366197723675814*(o=+t)+6755399441055744-6755399441055744,tt[r>>3]=o+-1.5707963109016418*s+-1.5893254773528196e-8*s,a=At(s)<2147483648?~~s:-2147483648):2139095040<=a>>>0?(tt[r>>3]=bt(t-t),a=0):(a=((o=a)>>>23)-150|0,tt[8+i>>3]=(f(0,o-(a<<23)|0),k()),a=function Da(t,e,r){var i,n,o,a,s,u=0,l=0,c=0,h=0,f=0,g=0,p=0,d=0,m=0,_=0,y=0,b=0;if(et=i=et-560|0,p=(l=r)+yt(o=0<(0|(r=(r+-3|0)/24|0))?r:0,-24)|0,0<=(0|(n=pt[808])))for(l=n+1|0,r=o;tt[(320+i|0)+(c<<3)>>3]=(0|r)<0?0:+pt[3248+(r<<2)>>2],r=r+1|0,(0|l)!=(0|(c=c+1|0)););for(f=p+-24|0,l=0;;){for(u=r=0;u+=tt[(r<<3)+t>>3]*tt[(320+i|0)+(l-r<<3)>>3],1!=(0|(r=r+1|0)););if(tt[(l<<3)+i>>3]=u,r=(0|l)<(0|n),l=l+1|0,!r)break}s=23-f|0,a=24-f|0,l=n;t:{for(;;){if(u=tt[(l<<3)+i>>3],!(m=((r=0)|(c=l))<1))for(;g=(480+i|0)+(r<<2)|0,d=u,h=At(u*=5.960464477539063e-8)<2147483648?~~u:-2147483648,h=At(d+=-16777216*(u=0|h))<2147483648?~~d:-2147483648,pt[g>>2]=h,u=tt[((c=c+-1|0)<<3)+i>>3]+u,(0|l)!=(0|(r=r+1|0)););u=ha(u,f),u=(u+=-8*Mt(.125*u))-(0|(g=At(u)<2147483648?~~u:-2147483648));e:{r:{i:{if(y=(0|f)<1){if(f)break i;h=pt[476+((l<<2)+i|0)>>2]>>23}else _=c=(l<<2)+i|0,c=(h=pt[c+476>>2])-((r=h>>a)<<a)|0,g=r+g|0,h=(pt[_+476>>2]=c)>>s;if((0|h)<1)break e;break r}if(h=2,!(.5<=u)){h=0;break e}}if(c=r=0,!m)for(;;){m=pt[(b=(480+i|0)+(r<<2)|0)>>2],_=16777215;r:{i:{if(!c){if(!m)break i;_=16777216,c=1}pt[b>>2]=_-m;break r}c=0}if((0|l)==(0|(r=r+1|0)))break}y||1<(r=f+-1|0)>>>0||(pt[476+(r=(l<<2)+i|0)>>2]=r-1?8388607&pt[r+476>>2]:4194303&pt[r+476>>2]),g=g+1|0,2==(0|h)&&(u=1-u,h=2,c&&(u-=ha(1,f)))}if(0!=u)break;if(!(((c=0)|(r=l))<=(0|n))){for(;c=pt[(480+i|0)+((r=r+-1|0)<<2)>>2]|c,(0|n)<(0|r););if(c){for(p=f;p=p+-24|0,!pt[(480+i|0)+((l=l+-1|0)<<2)>>2];);break t}}for(r=1;r=(c=r)+1|0,!pt[(480+i|0)+(n-c<<2)>>2];);for(c=l+c|0;;){for(l=g=l+1|0,tt[(320+i|0)+(g<<3)>>3]=pt[3248+(o+l<<2)>>2],u=r=0;u+=tt[(r<<3)+t>>3]*tt[(320+i|0)+(g-r<<3)>>3],1!=(0|(r=r+1|0)););if(tt[(l<<3)+i>>3]=u,!((0|l)<(0|c)))break}l=c}16777216<=(u=ha(u,0-f|0))?(t=(480+i|0)+(l<<2)|0,d=u,r=At(u*=5.960464477539063e-8)<2147483648?~~u:-2147483648,c=At(u=d+-16777216*(0|r))<2147483648?~~u:-2147483648,pt[t>>2]=c,l=l+1|0):(r=At(u)<2147483648?~~u:-2147483648,p=f),pt[(480+i|0)+(l<<2)>>2]=r}if(u=ha(1,p),!((0|l)<=-1)){for(r=l;tt[(r<<3)+i>>3]=u*pt[(480+i|0)+(r<<2)>>2],u*=5.960464477539063e-8,t=0<(0|r),r=r+-1|0,t;);if(!((0|l)<=-1))for(r=l;;){for(f=l-(t=r)|0,r=u=0;u+=tt[6016+(r<<3)>>3]*tt[(t+r<<3)+i>>3],!((0|n)<=(0|r))&&(p=r>>>0<f>>>0,r=r+1|0,p););if(tt[(160+i|0)+(f<<3)>>3]=u,r=t+-1|0,!(0<(0|t)))break}}if((u=0)<=(0|l))for(;u+=tt[(160+i|0)+(l<<3)>>3],t=0<(0|l),l=l+-1|0,t;);return tt[e>>3]=h?-u:u,et=560+i|0,7&g}(8+i|0,i,a),s=tt[i>>3],(0|n)<=-1?(tt[r>>3]=-s,a=0-a|0):tt[r>>3]=s),et=16+i|0,a}function ma(t){var e,r=0,i=0,n=0,o=0,n=4,i=1082;t:if(r=dt[0|t]){for(;!((0|(e=dt[0|i]))!=(0|r)||!(n=n+-1|0)|!e);)if(i=i+1|0,r=dt[t+1|0],t=t+1|0,!r)break t;o=r}return(255&o)-dt[0|i]|0}function oa(t,e){if(t){var r=t,i=e;t:{if(r){if(i>>>0<=127)break t;if(pt[pt[1625]>>2]){if(i>>>0<=2047)return gt[r+1|0]=63&i|128,gt[0|r]=i>>>6|192,2;if(!(57344!=(-8192&i)&&55296<=i>>>0))return gt[r+2|0]=63&i|128,gt[0|r]=i>>>12|224,gt[r+1|0]=i>>>6&63|128,3;if(i+-65536>>>0<=1048575)return gt[r+3|0]=63&i|128,gt[0|r]=i>>>18|240,gt[r+2|0]=i>>>6&63|128,gt[r+1|0]=i>>>12&63|128,4}else if(57216==(-128&i))break t;pt[1906]=25,r=-1}else r=1;return r}return gt[0|r]=i,1}return 0}function pa(t,e,r,i){t:{if(!(20<e>>>0||9<(e=e+-9|0)>>>0)){switch(e-1|0){default:return e=pt[r>>2],pt[r>>2]=e+4,pt[t>>2]=pt[e>>2];case 0:return e=pt[r>>2],pt[r>>2]=e+4,e=pt[e>>2],pt[t>>2]=e,pt[t+4>>2]=e>>31;case 1:return e=pt[r>>2],pt[r>>2]=e+4,pt[t>>2]=pt[e>>2],pt[t+4>>2]=0;case 3:return e=pt[r>>2],pt[r>>2]=e+4,e=v[e>>1],pt[t>>2]=e,pt[t+4>>2]=e>>31;case 4:return e=pt[r>>2],pt[r>>2]=e+4,pt[t>>2]=mt[e>>1],pt[t+4>>2]=0;case 5:return e=pt[r>>2],pt[r>>2]=e+4,e=gt[0|e],pt[t>>2]=e,pt[t+4>>2]=e>>31;case 6:return e=pt[r>>2],pt[r>>2]=e+4,pt[t>>2]=dt[0|e],pt[t+4>>2]=0;case 2:case 7:break t;case 8:}ft[i](t,r)}return}e=pt[r>>2]+7&-8,pt[r>>2]=e+8,r=pt[e+4>>2],pt[t>>2]=pt[e>>2],pt[t+4>>2]=r}function qa(t){var e,r,i=0;if(ga(gt[pt[t>>2]]))for(;e=pt[t>>2],r=gt[0|e],pt[t>>2]=e+1,i=(yt(i,10)+r|0)-48|0,ga(gt[e+1|0]););return i}function ra(t,e,r,i,n){var o,a=0;pt[204+(et=o=et-208|0)>>2]=r,ba(160+o|(r=0),0,40),pt[200+o>>2]=pt[204+o>>2],(0|ia(0,e,200+o|0,80+o|0,160+o|0,i,n))<0||(r=0<=pt[t+76>>2]?1:r,a=pt[t>>2],gt[t+74|0]<=0&&(pt[t>>2]=-33&a),r=32&a,pt[t+48>>2]?ia(t,e,200+o|0,80+o|0,160+o|0,i,n):(pt[t+48>>2]=80,pt[t+16>>2]=80+o,pt[t+28>>2]=o,pt[t+20>>2]=o,a=pt[t+44>>2],ia(t,e,200+(pt[t+44>>2]=o)|0,80+o|0,160+o|0,i,n),a&&(ft[pt[t+36>>2]](t,0,0),pt[t+48>>2]=0,pt[t+44>>2]=a,pt[t+28>>2]=0,pt[t+16>>2]=0,pt[t+20>>2]=0)),pt[t>>2]=pt[t>>2]|r),et=208+o|0}function sa(t,e,r){var i,n=0;fa(8+(et=i=et-160|0)|0,2536,144),pt[52+i>>2]=t,n=(n=-2-(pt[28+i>>2]=t)|0)>>>0<256?n:256,t=t+(pt[56+i>>2]=n)|0,pt[36+i>>2]=t,pt[24+i>>2]=t,ra(8+i|0,e,r,15,16),n&&(t=pt[28+i>>2],gt[t-((0|t)==pt[24+i>>2])|0]=0),et=160+i|0}function ta(t){var e,r,i,n=0,o=0,a=0,s=0,u=0,l=0,c=0,h=bt(0),f=0,g=0,p=0,d=0,m=0,_=0,y=0,b=bt(0),A=0,C=bt(0),M=0,v=0,S=bt(0),w=(bt(0),bt(0)),x=0,B=0,P=0,F=0,D=0;if(pt[t+256>>2]&&(n=pt[t+200>>2]<<2,fa(pt[t+280>>2],pt[t+264>>2],n),fa(pt[t+284>>2],pt[t+268>>2],n),fa(pt[t+288>>2],pt[t+276>>2],n)),!((0|(u=pt[t+292>>2]))<1)){for(f=(c=pt[t+296>>2])+yt(u,40)|0,a=pt[t+300>>2],n=c;w=_t[a>>2],(C=_t[n+32>>2])==(h=(o=pt[n+12>>2])?(S=_t[n>>2],h=bt(w-S),w=_t[n+8>>2],b=bt(h/w),h=bt(Mt(b)),s=bt(At(h))<bt(2147483648)?~~h:-2147483648,bt(S+bt(w*bt(b-bt(0|s))))):(b=_t[n>>2],h=_t[n+4>>2],w<b?b:h<w?h:w))?pt[n+36>>2]=0:(_t[n+32>>2]=h,pt[n+36>>2]=1),o||(_t[a>>2]=h),a=a+4|0,(n=n+40|0)>>>0<f>>>0;);if(!((0|u)<1))for(A=pt[t+308>>2],y=pt[t+376>>2];;){t:if(!((0|(o=pt[c+28>>2]))<1))if(g=(n=A+yt(pt[c+24>>2],28)|0)+yt(o,28)|0,w=_t[c+20>>2],e=_t[c+16>>2],C=_t[c+32>>2],y)for(;;){S=bt(u=0);e:{r:{i:{if((0|(l=pt[n>>2]))<1)a=s=0;else if(o=pt[n+4>>2],b=_t[o>>2],h=bt(b-e),1!=(0|l)){if(C<h){s=1,a=0;break r}if(s=0,C<bt(e+b))a=0;else{if(a=1,h=_t[o+4>>2],!(C<bt(e+h)))for(;;){if((0|l)==(0|(a=a+1|0)))break i;if(b=h,h=_t[o+(a<<2)>>2],C<bt(e+h))break}bt(h-e)<C||(a=a+-1|0,(h=bt(h-b))<w||(S=bt(bt(C-b)/h)))}}else s=C<bt(e+b)^1|h<C^1,a=0;if(s)break r;if(_=l=1,pt[n+16>>2])break e;break r}a=l+-1|0,s=1}_=(l=(h=_t[n+12>>2])!=S)&(S==bt(0)|h==bt(0))|pt[n+8>>2]!=(0|a),u=s}if(pt[n+20>>2]=_,pt[n+24>>2]=l,_t[n+12>>2]=S,pt[n+16>>2]=u,pt[n+8>>2]=a,!((n=n+28|0)>>>0<g>>>0))break}else{if(!pt[c+36>>2])for(;;)if(pt[n+20>>2]=0,!((n=n+28|(pt[n+24>>2]=0))>>>0<g>>>0))break t;for(;;){S=bt(u=0);e:{r:{i:{n:if(!(((s=0)|(a=pt[(o=n)>>2]))<1)){if(d=pt[n+4>>2],b=_t[d>>2],h=bt(b-e),1!=(0|a)){if(!(C<h)){if(s=0,C<bt(e+b))break n;l=1;o:if(h=_t[d+4>>2],!(C<bt(e+h))){for(a=a+-1|0;b=h,(0|a)!=(0|l);)if(h=_t[d+((l=l+1|0)<<2)>>2],C<bt(e+h))break o;s=1;break r}if(s=0,bt(h-e)<C){a=l;break i}if(a=l+-1|0,(h=bt(h-b))<w)break i;S=bt(bt(C-b)/h);break i}s=1,a=0;break r}s=C<bt(e+b)^1|h<C^1}a=0}if(!s&&(d=l=1,pt[n+16>>2]))break e}u=s,d=(l=(h=_t[n+12>>2])!=S)&(S==bt(0)|h==bt(0))|pt[n+8>>2]!=(0|a)}if(pt[o+20>>2]=d,pt[n+24>>2]=l,_t[n+12>>2]=S,pt[n+16>>2]=u,pt[n+8>>2]=a,!((n=n+28|0)>>>0<g>>>0))break}}if(!((c=c+40|0)>>>0<f>>>0))break}}if(1<=(0|(n=pt[t+312>>2])))for(d=(p=pt[t+316>>2])+yt(n,36)|0,f=pt[t+376>>2];;){F=(o=pt[p+12>>2])+((c=pt[p>>2])<<2)|0,M=pt[t+308>>2],n=o;t:{if(!(c=((l=s=u=0)|c)<1))for(;;){if(a=M+yt(pt[n>>2],28)|0,pt[a+16>>2]){_=1,v=P=0;break t}if(u=u||pt[a+24>>2],l=l||pt[a+20>>2],s=(_t[a+12>>2]!=bt(0))+s|0,!((n=n+4|0)>>>0<F>>>0))break}if(_=0,(v=f?1:l)|(P=f?1:u)&&(pt[p+8>>2]=B=1<<s,31!=(0|s))){for(u=pt[p+20>>2],a=(n=pt[p+16>>2])+(l=B<<2)|0,x=ba(m=n,0,4+((g=-1^n)+((n=n+4|0)>>>0<a>>>0?a:n)|0)&-4),l=u+l|0,n=u;pt[n>>2]=1065353216,(n=n+4|0)>>>0<l>>>0;);if(!c)if(l=c=1,s)for(;;){if(m=M+yt(pt[o>>2],28)|0,s=pt[m+8>>2],g=yt(s,c),(h=_t[m+12>>2])==bt(n=0))for(;pt[(s=x+(n<<2)|0)>>2]=g+pt[s>>2],(0|B)!=(0|(n=n+1|0)););else{for(pt[x>>2]=g+pt[x>>2],_t[u>>2]=bt(bt(1)-h)*_t[u>>2],A=yt(s+(n=1)|0,c);h=_t[m+12>>2],pt[(s=(y=n<<2)+x|0)>>2]=pt[s>>2]+((a=n&l)?A:g),_t[(s=u+y|0)>>2]=(a?h:bt(bt(1)-h))*_t[s>>2],(0|B)!=(0|(n=n+1|0)););l<<=1}if(c=yt(pt[m>>2],c),!((o=o+4|0)>>>0<F>>>0))break}else for(;;){if(a=M+yt(pt[o>>2],28)|0,l=yt(pt[a+8>>2],c),(h=_t[a+12>>2])==bt(n=0))for(;pt[(s=x+(n<<2)|0)>>2]=l+pt[s>>2],(0|B)!=(0|(n=n+1|0)););else pt[x>>2]=l+pt[x>>2],_t[u>>2]=bt(bt(1)-h)*_t[u>>2];if(c=yt(pt[a>>2],c),!((o=o+4|0)>>>0<F>>>0))break}}}if(pt[p+32>>2]=_,pt[p+24>>2]=v,pt[p+28>>2]=P,!((p=p+36|0)>>>0<d>>>0))break}if(!((0|(s=pt[t+4>>2]))<=0)){for(o=(n=pt[t+52>>2])+(s<<2)|0;h=_t[n>>2],_t[n>>2]=h<bt(0)?bt(0):bt(Ct(h,bt(1))),(n=n+4|0)>>>0<o>>>0;);if(!((0|s)<1)){for(c=(n=pt[t+8>>2])+(s<<3)|0,g=pt[t+316>>2],u=pt[t+40>>2],a=l=pt[t+36>>2];s=0,pt[n+4>>2]&&(o=pt[n>>2],!pt[l+(o<<2)>>2]&&-1!=(0|o)||(s=!pt[32+(g+yt(pt[u>>2],36)|0)>>2])),pt[a>>2]=s,u=u+4|0,a=a+4|0,(n=n+8|0)>>>0<c>>>0;);if(!((0|(f=pt[t+4>>2]))<1))for(d=pt[t>>2],A=pt[d+724>>2],o=pt[t+40>>2],l=c=0;;){if(m=g+yt(pt[o>>2],36)|0,(pt[m+28>>2]||pt[m+24>>2])&&(pt[(u=c<<2)+pt[t+16>>2]>>2]=pt[m+8>>2],pt[m+24>>2]&&!((0|(s=pt[m+8>>2]))<1)))for(y=(n=pt[m+16>>2])+(s<<2)|0,u=pt[u+A>>2],a=pt[t+28>>2]+(l<<2)|0,s=pt[d+936>>2];pt[a>>2]=pt[s+(u+pt[n>>2]<<2)>>2],a=a+4|0,(n=n+4|0)>>>0<y>>>0;);if(pt[m+28>>2]&&!((0|(s=pt[m+8>>2]))<1))for(s=(n=pt[m+20>>2])+(s<<2)|0,a=pt[t+20>>2]+(l<<2)|0;pt[a>>2]=pt[n>>2],a=a+4|0,(n=n+4|0)>>>0<s>>>0;);if(o=o+4|0,l=pt[m+4>>2]+l|0,(0|f)==(0|(c=c+1|0)))break}}}if(ft[pt[1644]](t),D=pt[t+316>>2],1<=(0|(o=pt[t+56>>2]))){for(f=(n=pt[t+60>>2])+(o<<5)|0,d=pt[t+176>>2],A=pt[t+172>>2],y=pt[t+36>>2],s=pt[t+180>>2],u=a=pt[t+168>>2];l=u,o=0,!pt[n+28>>2]||-1!=(0|(c=pt[n>>2]))&&(o=0,!pt[y+(c<<2)>>2])||-1!=(0|(c=pt[n+4>>2]))&&(o=0,!pt[a+(c<<2)>>2])||(o=!pt[32+(yt(pt[s>>2],36)+D|0)>>2]),pt[l>>2]=o,(l=pt[n+8>>2])>>>0<=1?l-1?pt[A+(pt[n+12>>2]<<2)>>2]=o:pt[d+(pt[n+12>>2]<<2)>>2]=o:Y(4,1473,0),s=s+4|0,u=u+4|0,(n=n+32|0)>>>0<f>>>0;);D=pt[t+316>>2]}if(c=pt[t>>2],1<=(0|(f=pt[t- -64>>2]))){for(d=pt[c+988>>2],A=pt[c+784>>2],_=pt[t+184>>2],p=o=0;;){if(g=yt(pt[_>>2],36)+D|0,(pt[g+28>>2]||pt[g+24>>2])&&(pt[(u=o<<2)+pt[t+84>>2]>>2]=pt[g+8>>2],pt[g+24>>2]&&!((0|(s=pt[g+8>>2]))<1)))for(y=(n=pt[g+16>>2])+(s<<2)|0,l=pt[u+A>>2],a=(s=p<<2)+pt[t+100>>2]|0,u=s+pt[t+96>>2]|0;s=l+pt[n>>2]<<2,pt[a>>2]=d+(pt[s+pt[c+944>>2]>>2]<<2),pt[u>>2]=pt[s+pt[c+940>>2]>>2],u=u+4|0,a=a+4|0,(n=n+4|0)>>>0<y>>>0;);if(pt[g+28>>2]&&!((0|(s=pt[g+8>>2]))<1))for(s=(n=pt[g+20>>2])+(s<<2)|0,a=pt[t+88>>2]+(p<<2)|0;pt[a>>2]=pt[n>>2],a=a+4|0,(n=n+4|0)>>>0<s>>>0;);if(_=_+4|0,p=pt[g+4>>2]+p|0,(0|f)==(0|(o=o+1|0)))break}D=pt[t+316>>2],c=pt[t>>2]}if(1<=(0|(B=pt[t+72>>2])))for(F=pt[t+76>>2],M=pt[c+808>>2],P=pt[t+188>>2],v=p=0;;){if(r=yt(pt[P>>2],36)+D|0,(pt[28+r>>2]||pt[24+r>>2])&&(pt[(o=p<<2)+pt[t+116>>2]>>2]=pt[8+r>>2],pt[24+r>>2])){if(n=pt[16+r>>2],x=pt[o+M>>2],1<=(0|(o=pt[8+r>>2])))for(m=n+(o<<2)|0,a=(o=v<<2)+pt[t+132>>2]|0,u=o+pt[t+136>>2]|0,s=o+pt[t+140>>2]|0,l=o+pt[t+144>>2]|0,_=o+pt[t+128>>2]|0,g=pt[c+948>>2],f=pt[c+964>>2],d=pt[c+960>>2],A=pt[c+956>>2],y=pt[c+952>>2],o=n;i=x+pt[o>>2]<<2,pt[a>>2]=pt[i+y>>2],pt[u>>2]=pt[A+i>>2],pt[s>>2]=pt[d+i>>2],pt[l>>2]=pt[f+i>>2],pt[_>>2]=pt[g+i>>2],_=_+4|0,l=l+4|0,s=s+4|0,u=u+4|0,a=a+4|0,(o=o+4|0)>>>0<m>>>0;);n=x+pt[n>>2]<<2,pt[(o=F+(p<<5)|0)+24>>2]=pt[n+pt[c+968>>2]>>2],pt[o+28>>2]=pt[n+pt[c+972>>2]>>2]}if(pt[28+r>>2]&&!((0|(o=pt[8+r>>2]))<1))for(o=(n=pt[20+r>>2])+(o<<2)|0,a=pt[t+120>>2]+(v<<2)|0;pt[a>>2]=pt[n>>2],a=a+4|0,(n=n+4|0)>>>0<o>>>0;);if(P=P+4|0,v=pt[4+r>>2]+v|0,(0|B)==(0|(p=p+1|0)))break}if(ft[pt[1642]](t),ft[pt[1645]](t),!((0|(o=pt[t+200>>2]))<1)){for(y=(n=pt[t+204>>2])+(o<<4)|0,c=pt[t+168>>2],l=pt[t+36>>2],g=pt[t+316>>2],u=pt[t+252>>2],a=pt[t+248>>2];s=0,pt[n+8>>2]&&(o=pt[n>>2],!pt[l+(o<<2)>>2]&&-1!=(0|o)||(o=pt[n+4>>2],!pt[c+(o<<2)>>2]&&-1!=(0|o)||(s=!pt[32+(g+yt(pt[u>>2],36)|0)>>2]))),pt[a>>2]=s,u=u+4|0,a=a+4|0,(n=n+16|0)>>>0<y>>>0;);if(!((0|(d=pt[t+200>>2]))<1))for(m=pt[t>>2],A=pt[m+988>>2],y=pt[m+844>>2],o=pt[t+252>>2],_=p=0;;){if(M=g+yt(pt[o>>2],36)|0,(pt[M+28>>2]||pt[M+24>>2])&&(pt[(u=p<<2)+pt[t+212>>2]>>2]=pt[M+8>>2],pt[M+24>>2]&&!((0|(s=pt[M+8>>2]))<1)))for(c=(n=pt[M+16>>2])+(s<<2)|0,l=pt[u+y>>2],a=(s=_<<2)+pt[t+232>>2]|0,u=s+pt[t+224>>2]|0,s=s+pt[t+228>>2]|0;f=l+pt[n>>2]<<2,pt[a>>2]=A+(pt[f+pt[m+984>>2]>>2]<<2),pt[u>>2]=pt[f+pt[m+976>>2]>>2],pt[s>>2]=pt[f+pt[m+980>>2]>>2],s=s+4|0,u=u+4|0,a=a+4|0,(n=n+4|0)>>>0<c>>>0;);if(pt[M+28>>2]&&!((0|(s=pt[M+8>>2]))<1))for(s=(n=pt[M+20>>2])+(s<<2)|0,a=pt[t+216>>2]+(_<<2)|0;pt[a>>2]=pt[n>>2],a=a+4|0,(n=n+4|0)>>>0<s>>>0;);if(o=o+4|0,_=pt[M+4>>2]+_|0,(0|d)==(0|(p=p+1|0)))break}}ft[pt[1643]](t);var U,I,N,O,X,z,G,V=t,E=0,k=0,J=0,j=0,W=0,H=0;if(1<=(0|(U=pt[V+340>>2])))for(O=pt[V+316>>2],N=pt[V>>2],X=pt[N+1072>>2],j=pt[V+372>>2];;){if(I=yt(pt[j>>2],36)+O|0,(pt[28+I>>2]||pt[24+I>>2])&&(pt[(E=W<<2)+pt[V+352>>2]>>2]=pt[8+I>>2],pt[24+I>>2]&&!((0|(J=pt[8+I>>2]))<1)))for(J=(k=pt[16+I>>2])+(J<<2)|0,z=pt[E+X>>2],E=pt[V+364>>2]+(H<<2)|0,G=pt[N+1104>>2];pt[E>>2]=pt[(pt[k>>2]+z<<2)+G>>2],E=E+4|0,(k=k+4|0)>>>0<J>>>0;);if(pt[28+I>>2]&&!((0|(E=pt[8+I>>2]))<1))for(J=(k=pt[20+I>>2])+(E<<2)|0,E=pt[V+356>>2]+(H<<2)|0;pt[E>>2]=pt[k>>2],E=E+4|0,(k=k+4|0)>>>0<J>>>0;);if(j=j+4|0,H=pt[4+I>>2]+H|0,(0|U)==(0|(W=W+1|0)))break}if(ft[pt[1646]](t),o=pt[t+48>>2],1<=(0|(n=pt[t+4>>2])))for(c=(u=pt[t+8>>2])+(n<<3)|0,s=pt[t+52>>2],a=pt[t+36>>2],n=o;pt[a>>2]&&(h=_t[s>>2],_t[n>>2]=h,-1!=(0|(l=pt[u>>2]))&&(_t[n>>2]=h*_t[(l<<2)+o>>2])),n=n+4|0,s=s+4|0,a=a+4|0,(u=u+8|0)>>>0<c>>>0;);if(1<=(0|(s=pt[t+56>>2]))){for(o=t+56|0,n=pt[t+60>>2],a=pt[t+168>>2],u=0;pt[a>>2]&&ft[pt[n+16>>2]](n,u,o),a=a+4|0,n=n+32|0,(0|s)!=(0|(u=u+1|0)););o=pt[t+48>>2]}if(1<=(0|(s=pt[t+200>>2])))for(d=(n=pt[t+204>>2])+(s<<4)|0,A=pt[t+192>>2],y=pt[t+60>>2],u=pt[t+248>>2],a=pt[t+276>>2],s=pt[t+272>>2];pt[u>>2]&&(-1!=(0|(l=pt[n>>2]))&&(_t[a>>2]=_t[(l<<2)+o>>2]*_t[a>>2]),-1!=(0|(l=pt[n+4>>2]))&&(_t[a>>2]=_t[A+(l<<2)>>2]*_t[a>>2],c=y+(l<<5)|0,l=pt[s>>2],ft[pt[c+20>>2]](pt[c+24>>2],l,l,pt[n+12>>2]))),s=s+4|0,a=a+4|0,u=u+4|0,(n=n+16|0)>>>0<d>>>0;);var T,Q,q,Z,K,$,tt,et,rt,it,nt,ot,at,st,ut,lt,ct,ht,R=t,L=0;if(bt(0),bt(0),bt(0),bt(0),bt(0),bt(0),bt(0),1<=(0|(Q=pt[R+340>>2])))for(ht=(L=pt[R+344>>2])+yt(Q,24)|0,Q=pt[R+272>>2];;){if((R=0)<(0|(rt=pt[L+8>>2])))for(it=pt[Q+(pt[L+4>>2]<<2)>>2],nt=pt[Q+(pt[L>>2]<<2)>>2],Z=_t[L+20>>2],ot=pt[L+16>>2],at=pt[L+12>>2];st=_t[((T=1|R)<<2)+at>>2],q=mt[(R<<1)+ot>>1]<<3&262136,K=_t[(ut=(4|q)+nt|0)>>2],T=mt[(T<<1)+ot>>1]<<3&262136,$=_t[(lt=(4|T)+it|0)>>2],tt=_t[(q=q+nt|0)>>2],ct=_t[(R<<2)+at>>2],et=_t[(T=T+it|0)>>2],_t[q>>2]=tt+bt(Z*bt(ct*bt(et-tt))),_t[ut>>2]=K+bt(Z*bt(ct*bt($-K))),_t[T>>2]=et+bt(Z*bt(st*bt(tt-et))),_t[lt>>2]=$+bt(Z*bt(st*bt(K-$))),(0|(R=R+2|0))<(0|rt););if(!((L=L+24|0)>>>0<ht>>>0))break}if(ft[pt[1647]](t),_=pt[t+248>>2],p=pt[t+268>>2],1<=(0|(g=pt[t+320>>2]))){for(d=(s=pt[t+324>>2])+yt(g,28)|0,A=pt[t+44>>2],y=pt[t+36>>2],o=s;;){if(1<=(0|(a=pt[o+4>>2])))for(c=o+20|0,l=pt[o+12>>2],n=0;f=pt[4+(u=l+(n<<4)|0)>>2]<<2,u=1==pt[(m=u)>>2],pt[m+12>>2]=pt[(pt[f+(u?y:_)>>2]?f+(u?A:p)|0:c)>>2],(0|a)!=(0|(n=n+1|0)););if(!((o=o+28|0)>>>0<d>>>0))break}for(A=pt[t+264>>2],v=0;;){if(f=s+yt(v,28)|0,!(pt[(d=f)+24>>2]<1)){for(u=pt[t+328>>2],n=0;pt[u+(n<<2)>>2]=-1,(0|(n=n+1|0))<(0|(o=pt[d+24>>2])););if(!((0|o)<1))for(o=pt[t+336>>2],n=0;pt[o+(n<<2)>>2]=-1,(0|(n=n+1|0))<pt[d+24>>2];);}if(!(pt[f+4>>2]<1)){for(y=pt[t+332>>2],n=0;pt[y+(n<<2)>>2]=-1,(0|(n=n+1|0))<(0|(o=pt[f+4>>2])););if(!((0|o)<1))for(a=pt[f+12>>2],c=pt[t+336>>2],n=0;l=pt[12+(a+(n<<4)|0)>>2]-pt[f+20>>2]<<2,o=-1!=(0|(o=pt[(u=l+c|0)>>2]))?y+(o<<2)|0:l+pt[t+328>>2]|0,pt[o>>2]=n,(0|(n=(pt[u>>2]=n)+1|0))<pt[f+4>>2];);}if(1<=(0|(u=pt[d+24>>2])))for(a=pt[f+8>>2],y=pt[t+328>>2],c=0;;){if(-1!=(0|(n=pt[y+(c<<2)>>2]))){for(l=pt[t+332>>2],u=pt[f+12>>2];a=(o=1!=pt[(o=u+(n<<4)|0)>>2]?(pt[A+(pt[o+4>>2]<<2)>>2]=a,1):(o=s+yt(pt[o+8>>2],28)|0,pt[o+8>>2]=a,pt[o>>2]))+a|0,(0|n)<(0|(o=pt[l+(n<<2)>>2]))&&-1!=(0|(n=o)););u=pt[d+24>>2]}if(!((0|(c=c+1|0))<(0|u)))break}if((0|g)==(0|(v=v+1|0)))break}}l=pt[t+200>>2];t:{if(pt[t+376>>2]){if(((pt[t+256>>2]=n=0)|l)<1)break t;for(;;){if(a=62,u=pt[t+260>>2]+n|0,!pt[(o=n<<2)+_>>2]|_t[o+pt[t+276>>2]>>2]==bt(0)||(a=63),gt[0|u]=a,(0|l)==(0|(n=n+1|0)))break t;_=pt[t+248>>2]}}if(!pt[t+256>>2]){if((0|l)<1)break t;for(n=0;;){if(!pt[(o=n<<2)+_>>2]|_t[o+pt[t+276>>2]>>2]==bt(0)?(o=pt[t+260>>2]+n|0,gt[0|o]=254&dt[0|o]):(o=pt[t+260>>2]+n|0,gt[0|o]=1|dt[0|o]),(0|l)==(0|(n=n+1|0)))break t;_=pt[t+248>>2]}}if(!(((pt[t+256>>2]=0)|l)<1))for(a=0;;){if(h=_t[(u=a<<2)+pt[t+276>>2]>>2],s=pt[u+_>>2],n=h!=bt(0)&0!=(0|s),o=pt[t+260>>2]+a|0,n=(0|n)==(1&gt[0|o])?n:2|n,n=h!=_t[u+pt[t+288>>2]>>2]?4|n:n,n=pt[u+p>>2]==pt[u+pt[t+284>>2]>>2]?n:8|n,n=pt[u+pt[t+264>>2]>>2]==pt[u+pt[t+280>>2]>>2]?n:16|n,gt[0|o]=s?32|n:n,(0|l)==(0|(a=a+1|0)))break t;p=pt[t+268>>2],_=pt[t+248>>2]}}pt[t+376>>2]=0}function ua(t,e,r){var i,n=0,o=0,a=0,s=0,u=0,l=0,c=0,h=0,f=0,g=0;if(pt[e>>2]=384,i=pt[t>>2],1<=(0|(a=pt[i>>2]))){for(u=pt[t+16>>2],l=pt[t+296>>2];o=(1<<pt[l+(pt[u+(n<<2)>>2]<<2)>>2])+o|0,(0|a)!=(0|(n=n+1|0)););n=o<<2}if(pt[e+4>>2]=a<<3,pt[e+8>>2]=pt[i>>2]<<2,pt[e+12>>2]=pt[i>>2]<<2,pt[e+16>>2]=pt[i>>2]<<2,pt[e+20>>2]=pt[i>>2]<<2,pt[e+24>>2]=pt[i>>2]<<2,o=pt[i>>2],pt[e+40>>2]=n,pt[e+36>>2]=n,pt[e+32>>2]=n,pt[e+28>>2]=o<<2,1<=((o=n=0)|(l=pt[i+8>>2]))){for(h=pt[t+296>>2],f=pt[t+88>>2],c=pt[t+76>>2],a=0;n=(0|n)<(0|(u=pt[(g=o<<2)+f>>2]))?u:n,s=(15+(u<<3)&-16)+s|0,a=(1<<pt[h+(pt[c+g>>2]<<2)>>2])+a|0,(0|l)!=(0|(o=o+1|0)););o=n<<3,n=a<<2}if(pt[e+44>>2]=pt[i+4>>2]<<5,pt[e+48>>2]=yt(pt[i+8>>2],24),pt[e+52>>2]=pt[i+12>>2]<<5,pt[e+56>>2]=pt[i+4>>2]<<2,pt[e+60>>2]=pt[i+8>>2]<<2,pt[e+64>>2]=pt[i+12>>2]<<2,pt[e+68>>2]=pt[i+4>>2]<<2,a=pt[i+4>>2],pt[e+76>>2]=s,pt[e+72>>2]=a<<2,pt[e+80>>2]=pt[i+8>>2]<<2,a=pt[i+8>>2],pt[e+104>>2]=o,pt[e+100>>2]=n,pt[e+96>>2]=n,pt[e+92>>2]=n,pt[e+88>>2]=n,pt[e+84>>2]=a<<2,1<=((n=s=0)|(a=pt[i+12>>2]))){for(u=pt[t+296>>2],l=pt[t+100>>2],o=0;o=(1<<pt[u+(pt[l+(n<<2)>>2]<<2)>>2])+o|0,(0|a)!=(0|(n=n+1|0)););n=o<<2}if(pt[e+108>>2]=a<<2,o=pt[i+12>>2],pt[e+156>>2]=n,pt[e+152>>2]=n,pt[e+148>>2]=n,pt[e+144>>2]=n,pt[e+140>>2]=n,pt[e+136>>2]=n,pt[e+132>>2]=n,pt[e+128>>2]=n,pt[e+124>>2]=n,pt[e+120>>2]=n,pt[e+116>>2]=n,pt[e+112>>2]=o<<2,1<=((o=n=0)|(u=pt[i+16>>2]))){for(h=pt[t+136>>2],f=pt[t+296>>2],c=pt[t+172>>2],a=0;n=(0|n)<(0|(l=pt[(g=o<<2)+c>>2]))?l:n,s=(15+(l<<3)&-16)+s|0,a=(1<<pt[f+(pt[h+g>>2]<<2)>>2])+a|0,(0|u)!=(0|(o=o+1|0)););o=n<<3,n=a<<2}if(pt[e+160>>2]=u<<4,pt[e+164>>2]=pt[i+16>>2]<<2,pt[e+168>>2]=pt[i+16>>2],pt[e+172>>2]=pt[i+16>>2]<<2,pt[e+176>>2]=pt[i+16>>2]<<2,a=pt[i+16>>2],pt[e+184>>2]=s,pt[e+180>>2]=a<<2,pt[e+188>>2]=pt[i+16>>2]<<2,pt[e+192>>2]=pt[i+16>>2]<<2,pt[e+196>>2]=pt[i+16>>2]<<2,pt[e+200>>2]=pt[i+16>>2]<<2,pt[e+204>>2]=pt[i+16>>2]<<2,a=pt[i+16>>2],pt[e+236>>2]=o,pt[e+232>>2]=n,pt[e+228>>2]=n,pt[e+224>>2]=n,pt[e+220>>2]=n,pt[e+216>>2]=n,pt[e+212>>2]=n,pt[e+208>>2]=a<<2,pt[e+240>>2]=yt(pt[i+20>>2],40),pt[e+244>>2]=pt[i+20>>2]<<2,pt[e+248>>2]=yt(pt[i+52>>2],28),1<=((n=a=0)|(s=pt[i+48>>2]))){for(u=pt[t+296>>2],o=0;o=(1<<pt[u+(n<<2)>>2])+o|0,(0|s)!=(0|(n=n+1|0)););n=o<<2}if(pt[e+260>>2]=n,pt[e+256>>2]=n,pt[e+252>>2]=yt(s,36),pt[e+264>>2]=yt(pt[i+72>>2],28),1<=((n=0)|(u=pt[i+72>>2]))){for(l=pt[t+340>>2],h=pt[t+336>>2],f=pt[t+328>>2],o=0;o=(0|(c=pt[(s=a<<2)+h>>2]-pt[s+l>>2]|0))<(0|o)?o:c+1|0,n=(0|n)<(0|(s=pt[s+f>>2]))?s:n,(0|u)!=(0|(a=a+1|0)););a=o<<2,n<<=2}if(o=pt[i+76>>2],pt[e+280>>2]=a,pt[e+276>>2]=n,pt[e+272>>2]=a,pt[e+268>>2]=o<<4,1<=((n=0)|(a=pt[i+80>>2]))){for(s=pt[t+364>>2],t=pt[t+296>>2],o=0;o=(1<<pt[t+(pt[s+(n<<2)>>2]<<2)>>2])+o|0,(0|a)!=(0|(n=n+1|0)););n=o<<2}for(pt[e+284>>2]=yt(a,24),pt[e+288>>2]=pt[i+80>>2]<<2,t=pt[i+80>>2],pt[e+304>>2]=n,pt[e+300>>2]=n,pt[e+296>>2]=n,pt[e>>2]=0,pt[e+292>>2]=t<<2,n=384,o=1;n=(pt[(t=(o<<2)+e|0)>>2]+15&-16)+(pt[t>>2]=n)|0,77!=(0|(o=o+1|0)););pt[r>>2]=n}function va(t,r,i){var n;r|=0,et=n=et+-64|0;t:{if(t|=0)if(r)if((r+15&-16)==(0|r)){if(r=function(t,r,i){var n,o,a=0,s=0,u=0,l=0,c=0,h=0,g=0,p=0,d=0,m=0,_=0,y=0,b=0,A=0,C=0,M=0,v=0;bt(0);if(ba(16+(et=n=et-336|0)|0,0,308),ua(t+704|0,16+n|0,12+n|0),(s=pt[12+n>>2])>>>0<=i>>>0){if(a=(r=ba(r,i=0,s))+pt[16+n>>2]|0,pt[a+8>>2]=r+pt[20+n>>2],pt[a+36>>2]=r+pt[24+n>>2],pt[a+44>>2]=r+pt[28+n>>2],pt[a+48>>2]=r+pt[32+n>>2],pt[a+52>>2]=r+pt[36+n>>2],pt[a+12>>2]=r+pt[40+n>>2],pt[a+16>>2]=r+pt[44+n>>2],pt[a+20>>2]=r+pt[48+n>>2],pt[a+28>>2]=r+pt[52+n>>2],pt[a+32>>2]=r+pt[56+n>>2],s=pt[t+704>>2],pt[a+60>>2]=r+pt[60+n>>2],h=r+pt[64+n>>2]|0,pt[a+68>>2]=h,pt[a+76>>2]=r+pt[68+n>>2],pt[a+168>>2]=r+pt[72+n>>2],pt[a+172>>2]=r+pt[76+n>>2],pt[a+176>>2]=r+pt[80+n>>2],pt[a+192>>2]=r+pt[84+n>>2],pt[a+196>>2]=r+pt[88+n>>2],1<=(0|(s=pt[s+8>>2])))for(u=r+pt[92+n>>2]|0,g=pt[t+792>>2];pt[20+(h+yt(i,24)|0)>>2]=u,u=(15+(pt[g+(i<<2)>>2]<<3)&-16)+u|0,(0|s)!=(0|(i=i+1|0)););if(pt[a+80>>2]=r+pt[96+n>>2],pt[a+84>>2]=r+pt[100+n>>2],pt[a+88>>2]=r+pt[104+n>>2],pt[a+96>>2]=r+pt[108+n>>2],pt[a+100>>2]=r+pt[112+n>>2],pt[a+104>>2]=r+pt[116+n>>2],pt[a+108>>2]=r+pt[120+n>>2],pt[a+112>>2]=r+pt[124+n>>2],pt[a+116>>2]=r+pt[128+n>>2],pt[a+120>>2]=r+pt[132+n>>2],pt[a+128>>2]=r+pt[136+n>>2],pt[a+132>>2]=r+pt[140+n>>2],pt[a+136>>2]=r+pt[144+n>>2],pt[a+140>>2]=r+pt[148+n>>2],pt[a+144>>2]=r+pt[152+n>>2],pt[a+148>>2]=r+pt[156+n>>2],pt[a+152>>2]=r+pt[160+n>>2],pt[a+156>>2]=r+pt[164+n>>2],pt[a+160>>2]=r+pt[168+n>>2],pt[a+164>>2]=r+pt[172+n>>2],i=pt[t+704>>2],pt[a+204>>2]=r+pt[176+n>>2],pt[a+248>>2]=r+pt[180+n>>2],pt[a+260>>2]=r+pt[184+n>>2],pt[a+264>>2]=r+pt[188+n>>2],pt[a+268>>2]=r+pt[192+n>>2],s=r+pt[196+n>>2]|0,pt[a+272>>2]=s,!((0|(h=pt[i+16>>2]))<1)&&(u=r+pt[200+n>>2]|0,pt[s>>2]=u,(i=1)!=(0|h)))for(s=0;u=(15+(pt[pt[t+876>>2]+(s<<2)>>2]<<3)&-16)+u|0,pt[pt[a+272>>2]+(i<<2)>>2]=u,(0|h)!=(0|(i=(s=i)+1|0)););if(pt[a+276>>2]=r+pt[204+n>>2],pt[a+280>>2]=r+pt[208+n>>2],pt[a+284>>2]=r+pt[212+n>>2],pt[a+288>>2]=r+pt[216+n>>2],pt[a+208>>2]=r+pt[220+n>>2],pt[a+212>>2]=r+pt[224+n>>2],pt[a+216>>2]=r+pt[228+n>>2],pt[a+224>>2]=r+pt[232+n>>2],pt[a+228>>2]=r+pt[236+n>>2],pt[a+232>>2]=r+pt[240+n>>2],pt[a+236>>2]=r+pt[244+n>>2],pt[a+240>>2]=r+pt[248+n>>2],pt[a+244>>2]=r+pt[252+n>>2],i=pt[256+n>>2],c=r+pt[260+n>>2]|0,pt[a+300>>2]=c,pt[a+296>>2]=p=r+i|0,m=r+pt[264+n>>2]|0,pt[a+308>>2]=m,i=pt[t+704>>2],s=pt[276+n>>2],u=pt[272+n>>2],g=r+pt[268+n>>2]|0,pt[a+316>>2]=g,1<=(0|(h=pt[i+48>>2])))for(u=r+u|0,s=r+s|0,l=pt[t+1e3>>2],i=0;d=g+yt(i,36)|0,pt[d+20>>2]=s,pt[d+16>>2]=u,s=(d=1<<pt[l+(i<<2)>>2]<<2)+s|0,u=u+d|0,(0|h)!=(0|(i=i+1|0)););if(i=pt[t+704>>2],s=r+pt[280+n>>2]|0,pt[a+324>>2]=s,1<=(0|(h=pt[i+72>>2])))for(u=r+pt[284+n>>2]|0,l=pt[t+1032>>2],i=0;pt[12+(s+yt(i,28)|0)>>2]=u,u=(pt[l+(i<<2)>>2]<<4)+u|0,(0|h)!=(0|(i=i+1|0)););if(pt[a+328>>2]=r+pt[288+n>>2],pt[a+332>>2]=r+pt[292+n>>2],pt[a+336>>2]=r+pt[296+n>>2],pt[a+344>>2]=r+pt[300+n>>2],pt[a+348>>2]=r+pt[304+n>>2],pt[a+352>>2]=r+pt[308+n>>2],pt[a+356>>2]=r+pt[312+n>>2],pt[a+364>>2]=r+pt[316+n>>2],i=pt[320+n>>2],pt[a+376>>2]=1,pt[a+368>>2]=r+i,pt[a+380>>2]=1&gt[pt[t+708>>2]+20|0],h=pt[t+704>>2],s=pt[h+20>>2],1<=(0|(pt[a+292>>2]=s))){for(d=pt[t+932>>2],_=pt[t+928>>2],C=pt[t+924>>2],l=pt[t+916>>2],y=pt[t+920>>2],M=pt[t+908>>2],v=pt[t+912>>2],u=s;r=p+yt(u=u+-1|0,40)|0,b=(i=u<<2)+v|0,pt[r>>2]=pt[b>>2],pt[r+4>>2]=pt[(A=i+M|0)>>2],_t[r+8>>2]=_t[A>>2]-_t[b>>2],pt[r+12>>2]=pt[i+y>>2],pt[r+32>>2]=pt[i+l>>2],o=function $b(t){var r=bt(0),i=bt(0),n=0,o=0,a=bt(0),s=bt(0),u=bt(0),l=bt(0),c=0,h=bt(0),g=bt(0),p=0;e:{r:{if(j(t),o=2147483647&(n=e(0))){if(!(o>>>0<2139095041))return bt(bt(.10000000149011612)+t);if(1065353216==(0|o))return bt(-1<(0|n)?.10000000149011612:10);if(2139095040==(0|o))return bt(-1<(0|n)?0:-t);if(1073741824==(0|n))return bt(.010000000707805157);if(1056964608==(0|n))return bt(.3162277638912201);if(1291845633<=o>>>0)return bt((0|n)<0?S:0);if(a=_t[1537],s=bt(bt(1.600000023841858)-a),u=bt(bt(1)/bt(a+bt(1.600000023841858))),f(0,-4096&(j(i=bt(s*u)),e(0))),r=k(),l=bt(r*r),g=_t[1541],a=bt(u*bt(bt(s-bt((h=r)*bt(3.099609375)))-bt(r*bt(bt(1.600000023841858)-bt(bt(3.099609375)-a))))),u=bt(bt(i+r)*a),r=bt(i*i),s=bt(u+bt(bt(r*r)*bt(bt(r*bt(bt(r*bt(bt(r*bt(bt(r*bt(bt(r*bt(.20697501301765442))+bt(.23066075146198273)))+bt(.2727281153202057)))+bt(.3333333432674408)))+bt(.4285714328289032)))+bt(.6000000238418579)))),f(0,-4096&(j(bt(bt(l+bt(3))+s)),e(0))),r=k(),u=bt(h*r),i=bt(bt(a*r)+bt(i*bt(s-bt(bt(r+bt(-3))-l)))),f(0,-4096&(j(bt(u+i)),e(0))),r=k(),a=bt(r*bt(.9619140625)),l=bt(_t[1539]+bt(bt(bt(i-bt(r-u))*bt(.9617967009544373))+bt(r*bt(-.00011736857413779944)))),f(0,-4096&(j(bt(bt(g+bt(a+l))+bt(-4))),e(0))),i=k(),f(0,-4096&n),s=k(),r=bt(i*s),t=bt(bt(bt(l-bt(bt(bt(i-bt(-4))-g)-a))*t)+bt(bt(t-s)*i)),j(i=bt(r+t)),1124073473<=(0|(n=e(0))))break r;i:{if((o=1124073472)==(0|n)){if(bt(t+bt(4.299566569443414e-8))>bt(i-r))break r}else{if(o=2147483647&n,!(t<=bt(i-r)^1|-1021968384!=(0|n))|1125515265<=o>>>0)break e;if(o>>>0<1056964609)break i}c=(8388607&(o=(8388608>>>(o>>>23)-126)+n|0)|8388608)>>>150-(p=o>>>23&255),c=(0|n)<0?0-c|0:c,r=bt(r-(f(0,o&-8388608>>p-127),k())),j(bt(t+r)),n=e(0)}f(0,-32768&n),i=k(),a=bt(i*bt(.693145751953125)),i=bt(bt(i*bt(14286065379565116e-22))+bt(bt(t-bt(i-r))*bt(.6931471824645996))),t=bt(a+i),r=bt(t*t),r=bt(t-bt(r*bt(bt(r*bt(bt(r*bt(bt(r*bt(bt(r*bt(4.138136944220605e-8))+bt(-16533901998627698e-22)))+bt(661375597701408e-19)))+bt(-.0027777778450399637)))+bt(.1666666716337204)))),h=bt(bt(t*r)/bt(r+bt(-2))),r=bt(i-bt(t-a)),t=(0|(n=0|(j(t=bt(bt(t-bt(h-bt(r+bt(t*r))))+bt(1))),e(0)+(c<<23))))<=8388607?function(t,e){var r=0;return 128<=(0|e)?(t=bt(t*bt(17014118346046923e22)),e=(0|(r=e+-127|0))<128?r:(t=bt(t*bt(17014118346046923e22)),((0|e)<381?e:381)+-254|0)):-127<(0|e)||(t=bt(t*bt(11754943508222875e-54)),e=-127<(0|(r=e+126|0))?r:(t=bt(t*bt(11754943508222875e-54)),(-378<(0|e)?e:-378)+252|0)),bt(t*(f(0,1065353216+(e<<23)|0),k()))}(t,c):(f(0,n),k()),t=bt(bt(1)*t)}else t=bt(1);return t}return bt(S)}return bt(0)}(bt(pt[i+C>>2])),_t[r+16>>2]=o,_t[r+20>>2]=o*bt(1.5),pt[r+24>>2]=pt[i+_>>2],i=pt[i+d>>2],pt[r+36>>2]=1,pt[r+28>>2]=i,0<(0|u););for(;pt[(r=(s=s+-1|0)<<2)+c>>2]=pt[r+l>>2],0<(0|s););}if(i=pt[h+52>>2],1<=(0|(pt[a+304>>2]=i)))for(s=pt[t+1004>>2],u=pt[t+1012>>2],l=pt[t+1008>>2];r=m+yt(i=i+-1|0,28)|0,pt[r>>2]=pt[(c=i<<2)+l>>2],c=pt[s+c>>2],pt[r+20>>2]=1,pt[r+24>>2]=1,pt[r+12>>2]=0,pt[r+4>>2]=u+(c<<2),0<(0|i););if(i=pt[h+48>>2],1<=(0|(pt[a+312>>2]=i)))for(s=pt[t+996>>2],u=pt[t+992>>2],l=pt[t+1e3>>2];r=g+yt(i=i+-1|0,36)|0,p=pt[(c=i<<2)+l>>2],pt[r>>2]=p,pt[r+4>>2]=1<<p,c=pt[s+c>>2],pt[r+24>>2]=1,pt[r+28>>2]=1,pt[r+12>>2]=u+(c<<2),0<(0|i););if(u=pt[h>>2],pt[a+4>>2]=u,s=pt[t+720>>2],pt[a+40>>2]=s,(0|u)<1)i=0;else{for(l=pt[t+732>>2],c=pt[t+736>>2],p=pt[t+740>>2],m=pt[a+52>>2],d=pt[a+8>>2],i=u;r=(i=i+-1|0)<<2,pt[(_=d+(i<<3)|0)>>2]=pt[r+p>>2],pt[_+4>>2]=pt[r+c>>2],_t[r+m>>2]=pt[r+l>>2]?bt(1):bt(0),0<(0|i););for(l=pt[a+12>>2],i=0;r=pt[4+(g+yt(pt[(c=(u=u+-1|0)<<2)+s>>2],36)|0)>>2],i=(pt[l+c>>2]=r)+i|0,0<(0|u););}if(pt[a+24>>2]=i,u=pt[h+4>>2],pt[a+56>>2]=u,pt[a+180>>2]=pt[t+752>>2],pt[a+184>>2]=pt[t+780>>2],pt[a+188>>2]=pt[t+804>>2],1<=(0|u)){for(;r=pt[a+60>>2]+((u=u+-1|0)<<5)|0,pt[r>>2]=pt[(i=u<<2)+pt[t+764>>2]>>2],pt[r+4>>2]=pt[i+pt[t+768>>2]>>2],s=pt[i+pt[t+772>>2]>>2],pt[r+8>>2]=s,h=pt[i+pt[t+776>>2]>>2],pt[r+12>>2]=h,pt[r+28>>2]=pt[i+pt[t+760>>2]>>2],s>>>0<=1?s-1?(pt[r+20>>2]=1,pt[r+16>>2]=2,pt[r+24>>2]=pt[a+68>>2]+yt(h,24)):(pt[r+20>>2]=3,pt[r+16>>2]=4,pt[r+24>>2]=pt[a+76>>2]+(h<<5)):Y(4,1026,0),0<(0|u););h=pt[t+704>>2]}u=pt[h+8>>2];e:if(!((0|(pt[a+64>>2]=u))<1)){if(i=u+-1|0,g=pt[t+792>>2],l=pt[t+800>>2],c=pt[t+796>>2],p=pt[a+68>>2],dt[t+4|0]<2)for(;;)if(r=p+yt(i,24)|0,pt[r>>2]=pt[(s=i<<2)+c>>2],pt[r+4>>2]=pt[s+l>>2],s=pt[s+g>>2],pt[r+8>>2]=0,pt[r+12>>2]=s,r=0<(0|i),i=i+-1|0,!r)break e;for(m=pt[t+1108>>2];r=p+yt(i,24)|0,pt[r>>2]=pt[(s=i<<2)+c>>2],pt[r+4>>2]=pt[s+l>>2],pt[r+12>>2]=pt[s+g>>2],pt[r+8>>2]=pt[s+m>>2],r=0<(0|i),i=i+-1|0,r;);}if(r=pt[h+12>>2],1<=(0|(pt[a+72>>2]=r)))for(s=pt[t+816>>2],g=pt[a+76>>2],i=r;pt[g+((i=i+-1|0)<<5)>>2]=pt[s+(i<<2)>>2],0<(0|i););if(1<=((s=i=0)|u)){for(g=pt[a+80>>2],l=pt[a+184>>2],c=pt[a+316>>2];r=pt[4+(c+yt(pt[(p=(u=u+-1|0)<<2)+l>>2],36)|0)>>2],s=(pt[g+p>>2]=r)+s|0,0<(0|u););r=pt[a+72>>2]}if(pt[a+92>>2]=s,1<=(0|r))for(u=pt[a+112>>2],g=pt[a+188>>2],l=pt[a+316>>2];s=pt[4+(l+yt(pt[(c=(r=r+-1|0)<<2)+g>>2],36)|0)>>2],i=i+(pt[u+c>>2]=s)|0,0<(0|r););if(pt[a+124>>2]=i,s=pt[h+16>>2],pt[a+200>>2]=s,g=pt[t+840>>2],pt[a+252>>2]=g,(0|s)<1)i=0;else{for(l=pt[t+856>>2],c=pt[t+876>>2],p=pt[t+864>>2],m=pt[t+860>>2],d=pt[a+204>>2],i=s;u=(i=i+-1|0)<<2,pt[(r=d+(i<<4)|0)>>2]=pt[u+m>>2],pt[r+4>>2]=pt[u+p>>2],pt[r+12>>2]=pt[u+c>>2],pt[r+8>>2]=pt[u+l>>2],0<(0|i););for(u=pt[a+208>>2],l=pt[a+316>>2],i=0;r=pt[4+(l+yt(pt[(c=(s=s+-1|0)<<2)+g>>2],36)|0)>>2],i=(pt[u+c>>2]=r)+i|0,0<(0|s););}if(pt[a+220>>2]=i,u=pt[h+72>>2],1<=(0|(pt[a+320>>2]=u)))for(c=pt[t+1028>>2],p=pt[t+1044>>2],m=pt[t+1040>>2],d=pt[t+1036>>2],_=pt[t+1032>>2],C=pt[a+324>>2],s=0;;){if(r=C+yt(s,28)|0,g=pt[(i=s<<2)+_>>2],pt[r+4>>2]=g,pt[r>>2]=pt[i+d>>2],l=pt[i+m>>2],pt[r+16>>2]=l,y=pt[i+p>>2],pt[r+20>>2]=y,pt[r+8>>2]=0,pt[r+24>>2]=1+(l-y|0),1<=(0|g))for(y=pt[i+c>>2],M=pt[r+12>>2],v=pt[t+1056>>2],b=pt[t+1048>>2],A=pt[t+1052>>2],i=0;pt[4+(r=M+(i<<4)|0)>>2]=pt[(l=i+y<<2)+A>>2],pt[r>>2]=pt[l+b>>2],l=pt[l+v>>2],pt[r+12>>2]=0,pt[r+8>>2]=l,(0|g)!=(0|(i=i+1|0)););if((0|u)==(0|(s=s+1|0)))break}if(r=pt[h+80>>2],pt[a+340>>2]=r,u=pt[t+1068>>2],pt[a+372>>2]=u,(0|r)<1)r=0;else{for(h=pt[t+1100>>2],g=pt[t+1088>>2],l=pt[t+1096>>2],c=pt[t+1092>>2],p=pt[t+1084>>2],m=pt[t+1080>>2],d=pt[a+344>>2];i=d+yt(r=r+-1|0,24)|0,pt[i>>2]=pt[(s=r<<2)+m>>2],pt[i+4>>2]=pt[s+p>>2],pt[i+8>>2]=pt[s+c>>2],s=pt[s+g>>2],pt[i+16>>2]=h+(s<<1),pt[i+12>>2]=l+(s<<2),0<(0|r););if((0|(i=pt[a+340>>2]))<1)r=0;else for(h=pt[a+348>>2],g=pt[a+316>>2],r=0;s=pt[4+(g+yt(pt[(l=(i=i+-1|0)<<2)+u>>2],36)|0)>>2],r=r+(pt[l+h>>2]=s)|0,0<(0|i););}pt[a>>2]=t,pt[a+360>>2]=r,ta(a)}return et=336+n|0,a}(t,r,i|=0))break t;pt[36+n>>2]=1872,pt[32+n>>2]=1846,Y(4,1087,32+n|0)}else pt[52+n>>2]=1441,pt[48+n>>2]=1846,Y(4,1087,48+n|0);else pt[20+n>>2]=1246,pt[16+n>>2]=1846,Y(4,1087,16+n|0);else pt[4+n>>2]=1828,pt[n>>2]=1846,Y(4,1087,n);r=0}return et=64+n|0,0|r}function wa(t){var e,r,i;return et=e=et-16|0,t=(t|=0)?(r=t,ba(16+(et=i=et-336|0)|0,0,308),ua(r+704|0,16+i|0,12+i|0),et=336+i|0,pt[12+i>>2]):(pt[4+e>>2]=1828,pt[e>>2]=1810,Y(4,1087,e),0),et=16+e|0,0|t}function xa(t,e){var r=0,i=0,n=0,o=0,a=0,s=0,u=0,o=t+e|0;t:{e:if(!(1&(r=pt[t+4>>2]))){if(!(3&r))break t;if(e=(r=pt[t>>2])+e|0,(0|(t=t-r|0))==pt[1928]){if(3==(3&(r=pt[o+4>>2])))return pt[1925]=e,pt[o+4>>2]=-2&r,pt[t+4>>2]=1|e,pt[o>>2]=e}else if(r>>>0<=255)n=r>>>3,r=pt[t+8>>2],(0|(i=pt[t+12>>2]))==(0|r)?(u=pt[1923]&jc(n),pt[7692>>2]=u):(pt[r+12>>2]=i,pt[i+8>>2]=r);else{if(s=pt[t+24>>2],(0|(r=pt[t+12>>2]))==(0|t))if((n=pt[(i=t+20|0)>>2])||(n=pt[(i=t+16|0)>>2])){for(;a=i,(n=pt[(i=(r=n)+20|0)>>2])||(i=r+16|0,n=pt[r+16>>2]););pt[a>>2]=0}else r=0;else i=pt[t+8>>2],pt[i+12>>2]=r,pt[r+8>>2]=i;if(s){i=pt[t+28>>2];r:{if(pt[(n=7996+(i<<2)|0)>>2]==(0|t)){if(pt[n>>2]=r)break r;u=pt[1924]&jc(i),pt[7696>>2]=u;break e}if(!(pt[s+(pt[s+16>>2]==(0|t)?16:20)>>2]=r))break e}pt[r+24>>2]=s,(i=pt[t+16>>2])&&(pt[r+16>>2]=i,pt[i+24>>2]=r),(i=pt[t+20>>2])&&(pt[r+20>>2]=i,pt[i+24>>2]=r)}}}e:{if(!(2&(r=pt[o+4>>2]))){if(pt[1929]==(0|o)){if(pt[1929]=t,e=pt[1926]+e|0,pt[1926]=e,pt[t+4>>2]=1|e,pt[1928]!=(0|t))break t;return pt[1925]=0,pt[1928]=0}if(pt[1928]==(0|o))return pt[1928]=t,e=pt[1925]+e|0,pt[1925]=e,pt[t+4>>2]=1|e,pt[t+e>>2]=e;e=(-8&r)+e|0;r:if(r>>>0<=255)n=r>>>3,r=pt[o+8>>2],(0|(i=pt[o+12>>2]))==(0|r)?(u=pt[1923]&jc(n),pt[7692>>2]=u):(pt[r+12>>2]=i,pt[i+8>>2]=r);else{if(s=pt[o+24>>2],(0|o)==(0|(r=pt[o+12>>2])))if((n=pt[(i=o+20|0)>>2])||(n=pt[(i=o+16|0)>>2])){for(;a=i,(n=pt[(i=(r=n)+20|0)>>2])||(i=r+16|0,n=pt[r+16>>2]););pt[a>>2]=0}else r=0;else i=pt[o+8>>2],pt[i+12>>2]=r,pt[r+8>>2]=i;if(s){i=pt[o+28>>2];i:{if(pt[(n=7996+(i<<2)|0)>>2]==(0|o)){if(pt[n>>2]=r)break i;u=pt[1924]&jc(i),pt[7696>>2]=u;break r}if(!(pt[s+(pt[s+16>>2]==(0|o)?16:20)>>2]=r))break r}pt[r+24>>2]=s,(i=pt[o+16>>2])&&(pt[r+16>>2]=i,pt[i+24>>2]=r),(i=pt[o+20>>2])&&(pt[r+20>>2]=i,pt[i+24>>2]=r)}}if(pt[t+4>>2]=1|e,pt[t+e>>2]=e,pt[1928]!=(0|t))break e;return pt[1925]=e}pt[o+4>>2]=-2&r,pt[t+4>>2]=1|e,pt[t+e>>2]=e}if(e>>>0<=255)return e=7732+((r=e>>>3)<<3)|0,r=(i=pt[1923])&(r=1<<r)?pt[e+8>>2]:(pt[1923]=r|i,e),pt[e+8>>2]=t,pt[r+12>>2]=t,pt[t+12>>2]=e,pt[t+8>>2]=r;pt[t+16>>2]=0,r=pt[t+20>>2]=0,(n=e>>>8)&&(r=31,16777215<e>>>0||(r=28+((r=((o=(n<<=a=n+1048320>>>16&8)<<(r=n+520192>>>16&4))<<(n=o+245760>>>16&2)>>>15)-(n|r|a)|0)<<1|e>>>r+21&1)|0)),n=7996+((pt[(i=t)+28>>2]=r)<<2)|0;e:{if((i=pt[1924])&(a=1<<r)){for(i=e<<(31==(0|r)?0:25-(r>>>1)|0),r=pt[n>>2];;){if((-8&pt[(n=r)+4>>2])==(0|e))break e;if(r=i>>>29,i<<=1,!(r=pt[16+(a=n+(4&r)|0)>>2]))break}pt[a+16>>2]=t}else pt[1924]=i|a,pt[n>>2]=t;return pt[t+24>>2]=n,pt[t+12>>2]=t,pt[t+8>>2]=t}e=pt[n+8>>2],pt[e+12>>2]=t,pt[n+8>>2]=t,pt[t+24>>2]=0,pt[t+12>>2]=n,pt[t+8>>2]=e}}function ya(t,e,r){var i=0;t:{if(8!=(0|e)){if(i=28,3&e|1!=(0|function(t){for(var e=0,r=0;r=e,t;)t&=t-1,e=e+1|0;return r}(e>>>2)))break t;if(i=48,-64-e>>>0<r>>>0)break t;e=function(t,e){var r,i,n=0,o=0,a=0;if((o=t>>>0>(n=16)?t:16)+-1&o)for(;n=(t=n)<<1,t>>>0<o>>>0;);else t=o;return-64-t>>>0<=e>>>0?(pt[1906]=48,0):(n=ja(12+((o=e>>>0<11?16:e+11&-8)+t|0)|0))?(e=n+-8|0,n&t+-1?(a=(-8&(i=pt[(r=n+-4|0)>>2]))-(n=(t=15<(n=((t+n|0)-1&0-t)-8|0)-e>>>0?n:t+n|0)-e|0)|0,3&i?(pt[t+4>>2]=a|1&pt[t+4>>2]|2,pt[4+(a=t+a|0)>>2]=1|pt[a+4>>2],pt[r>>2]=n|1&pt[r>>2]|2,pt[t+4>>2]=1|pt[t+4>>2],xa(e,n)):(e=pt[e>>2],pt[t+4>>2]=a,pt[t>>2]=e+n)):t=e,3&(e=pt[t+4>>2])&&((n=-8&e)>>>0<=o+16>>>0||(pt[t+4>>2]=o|1&e|2,pt[(e=t+o|0)+4>>2]=3|(o=n-o|0),pt[4+(n=t+n|0)>>2]=1|pt[n+4>>2],xa(e,o))),t+8|0):0}(16<e>>>0?e:16,r)}else e=ja(r);if(!e)return 1;pt[t>>2]=e,i=0}return i}function za(t){var e,r=0,i=0,n=0,o=0,a=0,s=0,u=0;t:if(t){e=(n=t+-8|0)+(t=-8&(i=pt[t+-4>>2]))|0;e:if(!(1&i)){if(!(3&i))break t;if((n=n-(i=pt[n>>2])|0)>>>0<p[1927])break t;if(t=t+i|0,pt[1928]==(0|n)){if(3==(3&(i=pt[4+e>>2])))return pt[1925]=t,pt[4+e>>2]=-2&i,pt[n+4>>2]=1|t,pt[t+n>>2]=t}else if(i>>>0<=255)o=pt[n+8>>2],i>>>=3,(0|(r=pt[n+12>>2]))==(0|o)?(u=pt[1923]&jc(i),pt[7692>>2]=u):(pt[o+12>>2]=r,pt[r+8>>2]=o);else{if(s=pt[n+24>>2],(0|n)==(0|(i=pt[n+12>>2])))if((r=pt[(o=n+20|0)>>2])||(r=pt[(o=n+16|0)>>2])){for(;a=o,(r=pt[(o=(i=r)+20|0)>>2])||(o=i+16|0,r=pt[i+16>>2]););pt[a>>2]=0}else i=0;else r=pt[n+8>>2],pt[r+12>>2]=i,pt[i+8>>2]=r;if(s){o=pt[n+28>>2];r:{if(pt[(r=7996+(o<<2)|0)>>2]==(0|n)){if(pt[r>>2]=i)break r;u=pt[1924]&jc(o),pt[7696>>2]=u;break e}if(!(pt[s+(pt[s+16>>2]==(0|n)?16:20)>>2]=i))break e}pt[i+24>>2]=s,(r=pt[n+16>>2])&&(pt[i+16>>2]=r,pt[r+24>>2]=i),(r=pt[n+20>>2])&&(pt[i+20>>2]=r,pt[r+24>>2]=i)}}}if(!(e>>>0<=n>>>0)&&1&(i=pt[4+e>>2])){e:{if(!(2&i)){if(pt[1929]==(0|e)){if(pt[1929]=n,t=pt[1926]+t|0,pt[1926]=t,pt[n+4>>2]=1|t,pt[1928]!=(0|n))break t;return pt[1925]=0,pt[1928]=0}if(pt[1928]==(0|e))return pt[1928]=n,t=pt[1925]+t|0,pt[1925]=t,pt[n+4>>2]=1|t,pt[t+n>>2]=t;t=(-8&i)+t|0;r:if(i>>>0<=255)i>>>=3,(0|(r=pt[8+e>>2]))==(0|(o=pt[12+e>>2]))?(u=pt[1923]&jc(i),pt[7692>>2]=u):(pt[r+12>>2]=o,pt[o+8>>2]=r);else{if(s=pt[24+e>>2],(0|e)==(0|(i=pt[12+e>>2])))if((r=pt[(o=20+e|0)>>2])||(r=pt[(o=16+e|0)>>2])){for(;a=o,(r=pt[(o=(i=r)+20|0)>>2])||(o=i+16|0,r=pt[i+16>>2]););pt[a>>2]=0}else i=0;else r=pt[8+e>>2],pt[r+12>>2]=i,pt[i+8>>2]=r;if(s){o=pt[28+e>>2];i:{if(pt[(r=7996+(o<<2)|0)>>2]==(0|e)){if(pt[r>>2]=i)break i;u=pt[1924]&jc(o),pt[7696>>2]=u;break r}if(!(pt[s+(pt[s+16>>2]==(0|e)?16:20)>>2]=i))break r}pt[i+24>>2]=s,(r=pt[16+e>>2])&&(pt[i+16>>2]=r,pt[r+24>>2]=i),(r=pt[20+e>>2])&&(pt[i+20>>2]=r,pt[r+24>>2]=i)}}if(pt[n+4>>2]=1|t,pt[t+n>>2]=t,pt[1928]!=(0|n))break e;return pt[1925]=t}pt[4+e>>2]=-2&i,pt[n+4>>2]=1|t,pt[t+n>>2]=t}if(t>>>0<=255)return i=7732+((t>>>=3)<<3)|0,t=(r=pt[1923])&(t=1<<t)?pt[i+8>>2]:(pt[1923]=t|r,i),pt[i+8>>2]=n,pt[t+12>>2]=n,pt[n+12>>2]=i,pt[n+8>>2]=t;pt[n+16>>2]=0,r=pt[n+20>>2]=0,(o=t>>>8)&&(r=31,16777215<t>>>0||(r=o,r=28+((r=((r=(r<<=o=o+1048320>>>16&8)<<(s=r+520192>>>16&4))<<(a=r+245760>>>16&2)>>>15)-(a|o|s)|0)<<1|t>>>r+21&1)|0)),a=7996+((pt[(i=n)+28>>2]=r)<<2)|0;e:if((o=pt[1924])&(i=1<<r)){o=t<<(31==(0|r)?0:25-(r>>>1)|0),i=pt[a>>2];r:{for(;;){if((-8&pt[(r=i)+4>>2])==(0|t))break r;if(i=o>>>29,o<<=1,!(i=pt[16+(a=r+(4&i)|0)>>2]))break}pt[a+16>>2]=n,pt[n+12>>2]=n,pt[n+24>>2]=r,pt[n+8>>2]=n;break e}t=pt[r+8>>2],pt[t+12>>2]=n,pt[r+8>>2]=n,pt[n+24>>2]=0,pt[n+12>>2]=r,pt[n+8>>2]=t}else pt[1924]=i|o,pt[a>>2]=n,pt[n+12>>2]=n,pt[n+24>>2]=a,pt[n+8>>2]=n;if(t=pt[1931]+-1|0,!(pt[1931]=t)){for(n=8148;n=(t=pt[n>>2])+8|0,t;);pt[1931]=-1}}}}function Aa(t,r){var i,n,o,a=0,s=0,u=bt(0);if(j(r),!((n=2147483647&(o=e(0)))>>>0<=2139095040&&(j(t),(a=2147483647&(s=e(0)))>>>0<2139095041)))return bt(t+r);if(1065353216==(0|o))return ka(t);o=(i=o>>>30&2)|s>>>31;t:{e:{r:{i:{if(!a){switch(o-2|0){case 0:break i;case 1:break;default:break r}return bt(-3.1415927410125732)}if(2139095040!=(0|n)){if(!n|!(a>>>0<=218103808+n>>>0&&2139095040!=(0|a)))break t;if(t=u=a+218103808>>>0<n>>>0&&(u=bt(0),i)?u:ka(bt(At(bt(t/r)))),o>>>0<=2){switch(o-1|0){case 0:return bt(-t);case 1:break;default:break r}return bt(bt(3.1415927410125732)-bt(t+bt(8.742277657347586e-8)))}return bt(bt(t+bt(8.742277657347586e-8))+bt(-3.1415927410125732))}if(2139095040==(0|a))break e;return _t[6128+(o<<2)>>2]}t=bt(3.1415927410125732)}return t}return _t[6112+(o<<2)>>2]}return bt((0|s)<0?-1.5707963705062866:1.5707963705062866)}function dc(t,e){e|=0;s[0]=0|t,s[1]=e}function gc(t,e,r){return e=e,s=yt(i=(r=r)>>>16,a=(t=t)>>>16),t=(65535&(a=((o=yt(n=65535&r,t&=65535))>>>16)+yt(a,n)|0))+yt(t,i)|0,V=((s+yt(e,r)|0)+(a>>>16)|0)+(t>>>16)|0,65535&o|t<<16;var i,n,o,a,s}function hc(t,e,r){var i,n,o=t,a=e,s=r,u=0,l=0,c=0,h=0,f=0,g=0,p=0;t:{e:{r:{i:{n:{if(!(l=a))return dc((a=o)-yt(o=(o>>>0)/(s>>>0)|0,s)|0,0),V=0,o;if(u=s){if(!((h=u+-1|0)&u))break n;f=0-(h=(d(u)+33|0)-d(l)|0)|0;break r}if(!o)return dc(0,l-yt(o=(l>>>0)/0|0,0)|0),V=0,o;if((u=32-d(l)|0)>>>0<31)break i;break e}if(dc(o&h,0),1==(0|u))break t;return s=31&(u=u?31-d(u+-1^u)|0:32),o=32<=(63&u)>>>0?(l=0,a>>>s):(l=a>>>s,((1<<s)-1&a)<<32-s|o>>>s),V=l,o}h=u+1|0,f=63-u|0}if(u=a,c=31&(l=63&h),c=32<=l>>>0?(l=0,u>>>c):(l=u>>>c,((1<<c)-1&u)<<32-c|o>>>c),u=31&(f&=63),32<=f>>>0?(a=o<<u,o=0):(a=(1<<u)-1&o>>>32-u|a<<u,o<<=u),h)for((f=s+(u=-1)|0)>>>0<4294967295&&(u=0);c=(i=g=c<<1|a>>>31)-(n=s&(g=u-((l=l<<1|c>>>31)+(f>>>0<g>>>0)|0)>>31))|0,l=l-(i>>>0<n>>>0)|0,a=a<<1|o>>>31,o=p|o<<1,p=g&=1,h=h+-1|0;);return dc(c,l),V=a<<1|o>>>31,g|o<<1}dc(o,a),a=o=0}return V=a,o}function jc(t){var e;return(-1>>>(e=31&t)&-2)<<e|(-1<<(t=0-t&31)&-2)>>>t}function N(){return n.byteLength/65536|0}}(T,b,A)}}r=null,h.wasmBinary&&(y=h.wasmBinary);var F=Error,_={},y=[];"object"!=typeof _&&m("no native wasm support detected");var b,A=new function(t){var r=Array(17);return r.grow=function(){18<=r.length&&B("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),r.push(null)},r.set=function(t,e){r[t]=e},r.get=function(t){return r[t]},r},D=!1;function assert(t,e){t||B("Assertion failed: "+e)}var M,v,S,w,U="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function ja(t,e,r){var i=e+r;for(r=e;t[r]&&!(i<=r);)++r;if(16<r-e&&t.subarray&&U)return U.decode(t.subarray(e,r));for(i="";e<r;){var n,o,a=t[e++];128&a?(n=63&t[e++],192==(224&a)?i+=String.fromCharCode((31&a)<<6|n):(o=63&t[e++],(a=224==(240&a)?(15&a)<<12|n<<6|o:(7&a)<<18|n<<12|o<<6|63&t[e++])<65536?i+=String.fromCharCode(a):(a-=65536,i+=String.fromCharCode(55296|a>>10,56320|1023&a)))):i+=String.fromCharCode(a)}return i}function ka(t,e){return t?ja(S,t,e):""}function la(t){return 0<t%65536&&(t+=65536-t%65536),t}function ma(t){M=t,h.HEAP8=v=new Int8Array(t),h.HEAP16=new Int16Array(t),h.HEAP32=w=new Int32Array(t),h.HEAPU8=S=new Uint8Array(t),h.HEAPU16=new Uint16Array(t),h.HEAPU32=new Uint32Array(t),h.HEAPF32=new Float32Array(t),h.HEAPF64=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var N=h.TOTAL_MEMORY||16777216;function O(t){for(;0<t.length;){var e,r=t.shift();"function"==typeof r?r():"number"==typeof(e=r.X)?void 0===r.W?h.dynCall_v(e):h.dynCall_vi(e,r.W):e(void 0===r.W?null:r.W)}}(b=h.wasmMemory||new function(){return{buffer:new ArrayBuffer(N/65536*65536),grow:function(t){return et(t)}}})&&(M=b.buffer),N=M.byteLength,ma(M),w[2052]=5251248;var x,X=[],Y=[],G=[],J=[],P=(Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(t,e){var r=65535&t,i=65535&e;return r*i+((t>>>16)*i+r*(e>>>16)<<16)|0}),Math.fround||(x=new Float32Array(1),Math.fround=function(t){return x[0]=t,x[0]}),Math.clz32||(Math.clz32=function(t){var e=32,r=t>>16;return r&&(e-=16,t=r),(r=t>>8)&&(e-=8,t=r),(r=t>>4)&&(e-=4,t=r),(r=t>>2)&&(e-=2,t=r),t>>1?e-2:e-t}),Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),0),I=null,V=null;function B(t){throw h.onAbort&&h.onAbort(t),L(t),m(t),D=!0,new F("abort("+t+"). Build with -s ASSERTIONS=1 for more info.")}h.preloadedImages={},h.preloadedAudios={};var E="data:application/octet-stream;base64,";function W(t){return String.prototype.startsWith?t.startsWith(E):0===t.indexOf(E)}var k="_em_module.wasm";function ua(){try{if(y)return new Uint8Array(y);var t=z(k);if(t)return t;if(n)return n(k);throw"both async and sync fetching of the wasm failed"}catch(t){B(t)}}W(k)||(g=k,k=h.locateFile?h.locateFile(g,p):p+g),Y.push({X:function(){q()}});var j=[null,[],[]],H=!1;function C(t){for(var e=[],r=0;r<t.length;r++){var i=t[r];255<i&&(H&&assert(!1,"Character code "+i+" ("+String.fromCharCode(i)+")  at offset "+r+" not in 0x00-0xFF."),i&=255),e.push(String.fromCharCode(i))}return e.join("")}var Q="function"==typeof atob?atob:function(t){var e="",r=0;t=t.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),i=i<<2|n>>4,n=(15&n)<<4|o>>2,s=(3&o)<<6|a}while(e+=String.fromCharCode(i),64!==o&&(e+=String.fromCharCode(n)),64!==a&&(e+=String.fromCharCode(s)),r<t.length);return e};function z(e){if(W(e)){if(e=e.slice(E.length),"boolean"==typeof u&&u){try{var r=ot.from(e,"base64")}catch(t){r=new ot(e,"base64")}var t=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}else try{for(var i=Q(e),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);t=n}catch(t){throw Error("Converting base64 string to bytes failed.")}return t}}var T={a:function(t,e,r){S.set(S.subarray(e,e+r),t)},b:function(t){if(2147418112<t)return!1;for(var e=Math.max(v.length,16777216);e<t;)e=e<=536870912?la(2*e):Math.min(la((3*e+2147483648)/4),2147418112);t:{try{b.grow(e-M.byteLength+65535>>16),ma(b.buffer);var r=1;break t}catch(t){}r=void 0}return!!r},c:function(t,e,r,i){try{for(var n=0,o=0;o<r;o++){for(var a=w[e+8*o>>2],s=w[e+(8*o+4)>>2],u=0;u<s;u++){var l=S[a+u],c=j[t];0===l||10===l?((1===t?L:m)(ja(c,0)),c.length=0):c.push(l)}n+=s}return w[i>>2]=n,0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.Y||B(t),t.Z}},memory:b,table:A},p=function(){function a(t){h.asm=t.exports,P--,h.monitorRunDependencies&&h.monitorRunDependencies(P),0==P&&(null!==I&&(clearInterval(I),I=null),V&&(t=V,V=null,t()))}function c(t){a(t.instance)}function d(t){return(y||!l&&!f||"function"!=typeof fetch?new Promise(function(t){t(ua())}):fetch(k,{credentials:"same-origin"}).then(function(t){if(t.ok)return t.arrayBuffer();throw"failed to load wasm binary file at '"+k+"'"}).catch(ua)).then(function(){return{then:function(t){t({instance:new da})}}}).then(t,function(t){m("failed to asynchronously prepare wasm: "+t),B(t)})}var e={env:T,wasi_unstable:T};if(P++,h.monitorRunDependencies&&h.monitorRunDependencies(P),h.instantiateWasm)try{return h.instantiateWasm(e,a)}catch(t){return m("Module.instantiateWasm callback failed with error: "+t),!1}return y||"function"!=typeof _.instantiateStreaming||W(k)||"function"!=typeof fetch?d(c):fetch(k,{credentials:"same-origin"}).then(function(t){return _.instantiateStreaming(t,e).then(c,function(t){m("wasm streaming compile failed: "+t),m("falling back to ArrayBuffer instantiation"),d(c)})}),{}}(),q=(h.asm=p,h.___wasm_call_ctors=function(){return h.asm.d.apply(null,arguments)});h._csmGetVersion=function(){return h.asm.e.apply(null,arguments)},h._csmGetLatestMocVersion=function(){return h.asm.f.apply(null,arguments)},h._csmGetMocVersion=function(){return h.asm.g.apply(null,arguments)},h._csmSetLogFunction=function(){return h.asm.h.apply(null,arguments)},h._csmReviveMocInPlace=function(){return h.asm.i.apply(null,arguments)},h._csmReadCanvasInfo=function(){return h.asm.j.apply(null,arguments)},h._csmGetSizeofModel=function(){return h.asm.k.apply(null,arguments)},h._csmInitializeModelInPlace=function(){return h.asm.l.apply(null,arguments)},h._csmUpdateModel=function(){return h.asm.m.apply(null,arguments)},h._csmGetParameterCount=function(){return h.asm.n.apply(null,arguments)},h._csmGetParameterIds=function(){return h.asm.o.apply(null,arguments)},h._csmGetParameterMinimumValues=function(){return h.asm.p.apply(null,arguments)},h._csmGetParameterMaximumValues=function(){return h.asm.q.apply(null,arguments)},h._csmGetParameterDefaultValues=function(){return h.asm.r.apply(null,arguments)},h._csmGetParameterValues=function(){return h.asm.s.apply(null,arguments)},h._csmGetPartCount=function(){return h.asm.t.apply(null,arguments)},h._csmGetPartIds=function(){return h.asm.u.apply(null,arguments)},h._csmGetPartOpacities=function(){return h.asm.v.apply(null,arguments)},h._csmGetPartParentPartIndices=function(){return h.asm.w.apply(null,arguments)},h._csmGetDrawableCount=function(){return h.asm.x.apply(null,arguments)},h._csmGetDrawableIds=function(){return h.asm.y.apply(null,arguments)},h._csmGetDrawableConstantFlags=function(){return h.asm.z.apply(null,arguments)},h._csmGetDrawableDynamicFlags=function(){return h.asm.A.apply(null,arguments)},h._csmGetDrawableTextureIndices=function(){return h.asm.B.apply(null,arguments)},h._csmGetDrawableDrawOrders=function(){return h.asm.C.apply(null,arguments)},h._csmGetDrawableRenderOrders=function(){return h.asm.D.apply(null,arguments)},h._csmGetDrawableOpacities=function(){return h.asm.E.apply(null,arguments)},h._csmGetDrawableMaskCounts=function(){return h.asm.F.apply(null,arguments)},h._csmGetDrawableMasks=function(){return h.asm.G.apply(null,arguments)},h._csmGetDrawableVertexCounts=function(){return h.asm.H.apply(null,arguments)},h._csmGetDrawableVertexPositions=function(){return h.asm.I.apply(null,arguments)},h._csmGetDrawableVertexUvs=function(){return h.asm.J.apply(null,arguments)},h._csmGetDrawableIndexCounts=function(){return h.asm.K.apply(null,arguments)},h._csmGetDrawableIndices=function(){return h.asm.L.apply(null,arguments)},h._csmResetDrawableDynamicFlags=function(){return h.asm.M.apply(null,arguments)},h._csmMallocMoc=function(){return h.asm.N.apply(null,arguments)},h._csmMallocModelAndInitialize=function(){return h.asm.O.apply(null,arguments)},h._csmMalloc=function(){return h.asm.P.apply(null,arguments)},h._csmFree=function(){return h.asm.Q.apply(null,arguments)};var R,K=h.stackSave=function(){return h.asm.R.apply(null,arguments)},$=h.stackAlloc=function(){return h.asm.S.apply(null,arguments)},tt=h.stackRestore=function(){return h.asm.T.apply(null,arguments)},et=h.__growWasmMemory=function(){return h.asm.U.apply(null,arguments)};function Z(){function a(){if(!R&&(R=!0,!D)){if(O(Y),O(G),h.onRuntimeInitialized&&h.onRuntimeInitialized(),h.postRun)for("function"==typeof h.postRun&&(h.postRun=[h.postRun]);h.postRun.length;){var t=h.postRun.shift();J.unshift(t)}O(J)}}if(!(0<P)){if(h.preRun)for("function"==typeof h.preRun&&(h.preRun=[h.preRun]);h.preRun.length;)!function ra(){var t=h.preRun.shift();X.unshift(t)}();O(X),0<P||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),a()},1)):a())}}if(h.dynCall_vi=function(){return h.asm.V.apply(null,arguments)},h.asm=p,h.ccall=function(t,e,r,i){var n,o={string:function(t){var e=0;if(null!=t&&0!==t){var r=1+(t.length<<2),i=e=$(r),n=S;if(0<r){for(var r=i+r-1,o=0;o<t.length;++o){var a=t.charCodeAt(o);if((a=55296<=a&&a<=57343?65536+((1023&a)<<10)|1023&t.charCodeAt(++o):a)<=127){if(r<=i)break;n[i++]=a}else{if(a<=2047){if(r<=i+1)break;n[i++]=192|a>>6}else{if(a<=65535){if(r<=i+2)break;n[i++]=224|a>>12}else{if(r<=i+3)break;n[i++]=240|a>>18,n[i++]=128|a>>12&63}n[i++]=128|a>>6&63}n[i++]=128|63&a}}n[i]=0}}return e},array:function(t){var e=$(t.length);return v.set(t,e),e}},a=(assert(n=h["_"+(a=t)],"Cannot call unknown function "+a+", make sure it is exported"),n),s=[];if(t=0,i)for(var u=0;u<i.length;u++){var l=o[r[u]];l?(0===t&&(t=K()),s[u]=l(i[u])):s[u]=i[u]}return n=r=a.apply(null,s),r="string"===e?ka(n):"boolean"===e?!!n:n,0!==t&&tt(t),r},h.UTF8ToString=ka,h.addFunction=function(e,r){var i=A.length;try{A.grow(1)}catch(t){if(!t instanceof RangeError)throw t;throw"Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."}try{A.set(i,e)}catch(t){if(!t instanceof TypeError)throw t;assert(void 0!==r,"Missing signature argument to addFunction"),A.set(i,e)}return i},h.then=function(t){var e;return R?t(h):(e=h.onRuntimeInitialized,h.onRuntimeInitialized=function(){e&&e(),t(h)}),h},V=function Ea(){R||Z(),R||(V=Ea)},h.run=Z,h.preInit)for("function"==typeof h.preInit&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return Z(),t}rt="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;var rt,c=(o.exports=Ha)()}(t={}),o.exports=t}.call(this,at(1),"/",at(2).Buffer)},function(t,e){var r,i,t=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){r=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){i=defaultClearTimeout}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return(r=setTimeout)(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var n,o=[],a=!1,s=-1;function cleanUpNextTick(){a&&n&&(a=!1,n.length?o=n.concat(o):s=-1,o.length&&drainQueue())}function drainQueue(){if(!a){for(var t=runTimeout(cleanUpNextTick),e=(a=!0,o.length);e;){for(n=o,o=[];++s<e;)n&&n[s].run();s=-1,e=o.length}n=null,a=!1,!function runClearTimeout(e){if(i===clearTimeout)return clearTimeout(e);if((i===defaultClearTimeout||!i)&&clearTimeout)return(i=clearTimeout)(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];o.push(new Item(t,e)),1!==o.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=noop,t.addListener=noop,t.once=noop,t.off=noop,t.removeListener=noop,t.removeAllListeners=noop,t.emit=noop,t.prependListener=noop,t.prependOnceListener=noop,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,r,i){"use strict";!function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=i(4),o=i(5),a=i(6);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=Buffer.prototype:(t=null===t?new Buffer(e):t).length=e,t}function Buffer(t,e,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,r);if("number"!=typeof t)return from(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}function from(t,e,r,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function fromArrayBuffer(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i);Buffer.TYPED_ARRAY_SUPPORT?(t=e).__proto__=Buffer.prototype:t=fromArrayLike(t,e);return t}(t,e,r,i):"string"==typeof e?function fromString(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|byteLength(e,r),e=(t=createBuffer(t,i)).write(e,r);e!==i&&(t=t.slice(0,e));return t}(t,e,r):function fromObject(t,e){{var r;if(Buffer.isBuffer(e))return r=0|checked(e.length),0!==(t=createBuffer(t,r)).length&&e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function isnan(t){return t!=t}(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&a(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(t,e){if(assertSize(e),t=createBuffer(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function fromArrayLike(t,e){var r=e.length<0?0:0|checked(e.length);t=createBuffer(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function byteLength(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var r=(t="string"!=typeof t?""+t:t).length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(i)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),i=!0}}function slowToString(t,e,r){var i=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function hexSlice(t,e,r){var i=t.length;(!e||e<0)&&(e=0);(!r||r<0||i<r)&&(r=i);for(var n="",o=e;o<r;++o)n+=function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return n}(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return function asciiSlice(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}(this,e,r);case"latin1":case"binary":return function latin1Slice(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}(this,e,r);case"base64":return function base64Slice(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function utf16leSlice(t,e,r){for(var i=t.slice(e,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function swap(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function bidirectionalIndexOf(t,e,r,i,n){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?n?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,i)),Buffer.isBuffer(e))return 0===e.length?-1:arrayIndexOf(t,e,r,i,n);if("number"==typeof e)return e&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(n?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):arrayIndexOf(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,r,i,n){var o=1,a=t.length,s=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a/=o=2,s/=2,r/=2}function read(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n)for(var u=-1,l=r;l<a;l++)if(read(t,l)===read(e,-1===u?0:l-u)){if(l-(u=-1===u?l:u)+1===s)return u*o}else-1!==u&&(l-=l-u),u=-1;else for(l=r=a<r+s?a-s:r;0<=l;l--){for(var c=!0,h=0;h<s;h++)if(read(t,l+h)!==read(e,h)){c=!1;break}if(c)return l}return-1}function asciiWrite(t,e,r,i){return blitBuffer(function asciiToBytes(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,i)}function ucs2Write(t,e,r,i){return blitBuffer(function utf16leToBytes(t,e){for(var r,i,n=[],o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),r=i>>8,i=i%256,n.push(i),n.push(r);return n}(e,t.length-r),t,r,i)}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var o,a,s,u,l=t[n],c=null,h=239<l?4:223<l?3:191<l?2:1;if(n+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[n+1]))&&127<(u=(31&l)<<6|63&o)&&(c=u);break;case 3:o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&2047<(u=(15&l)<<12|(63&o)<<6|63&a)&&(u<55296||57343<u)&&(c=u);break;case 4:o=t[n+1],a=t[n+2],s=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)&&u<1114112&&(c=u)}null===c?(c=65533,h=1):65535<c&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),n+=h}return function decodeCodePointsArray(t){var e=t.length;if(e<=f)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=f));return r}(i)}r.Buffer=Buffer,r.SlowBuffer=function SlowBuffer(t){+t!=t&&(t=0);return Buffer.alloc(+t)},r.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),r.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,r){return from(null,t,e,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,r){return function alloc(t,e,r,i){return assertSize(e),!(e<=0)&&void 0!==r?"string"==typeof i?createBuffer(t,e).fill(r,i):createBuffer(t,e).fill(r):createBuffer(t,e)}(null,t,e,r)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function isBuffer(t){return!(null==t||!t._isBuffer)},Buffer.compare=function compare(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,n=0,o=Math.min(r,i);n<o;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},Buffer.isEncoding=function isEncoding(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;for(var r=Buffer.allocUnsafe(e),i=0,n=0;n<t.length;++n){var o=t[n];if(!Buffer.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)swap(this,e,e+1);return this},Buffer.prototype.swap32=function swap32(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)swap(this,e,e+3),swap(this,e+1,e+2);return this},Buffer.prototype.swap64=function swap64(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)swap(this,e,e+7),swap(this,e+1,e+6),swap(this,e+2,e+5),swap(this,e+3,e+4);return this},Buffer.prototype.toString=function toString(){var t=0|this.length;return 0==t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(t){if(Buffer.isBuffer(t))return this===t||0===Buffer.compare(this,t);throw new TypeError("Argument must be a Buffer")},Buffer.prototype.inspect=function inspect(){var t="",e=r.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function compare(t,e,r,i,n){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),(e=void 0===e?0:e)<0||r>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(n<=i&&r<=e)return 0;if(n<=i)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(i>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(i,n),l=t.slice(e,r),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},Buffer.prototype.includes=function includes(t,e,r){return-1!==this.indexOf(t,e,r)},Buffer.prototype.indexOf=function indexOf(t,e,r){return bidirectionalIndexOf(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(t,e,r){return bidirectionalIndexOf(this,t,e,r,!1)},Buffer.prototype.write=function write(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-e;if((void 0===r||n<r)&&(r=n),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var o=!1;;)switch(i){case"hex":return function hexWrite(t,e,r,i){r=Number(r)||0;var n=t.length-r;if((!i||n<(i=Number(i)))&&(i=n),(n=e.length)%2!=0)throw new TypeError("Invalid hex string");n/2<i&&(i=n/2);for(var o=0;o<i;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[r+o]=a}return o}(this,t,e,r);case"utf8":case"utf-8":return function utf8Write(t,e,r,i){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,i)}(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"latin1":case"binary":return asciiWrite(this,t,e,r);case"base64":return function base64Write(t,e,r,i){return blitBuffer(base64ToBytes(e),t,r,i)}(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var f=4096;function checkOffset(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,i,n,o){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<e||e<o)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-r,2);n<o;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function objectWriteUInt32(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-r,4);n<o;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function checkIEEE754(t,e,r,i){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(t,e,r,i,n){return n||checkIEEE754(t,0,r,4),o.write(t,e,r,i,23,4),r+4}function writeDouble(t,e,r,i,n){return n||checkIEEE754(t,0,r,8),o.write(t,e,r,i,52,8),r+8}Buffer.prototype.slice=function slice(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),Buffer.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=Buffer.prototype;else for(var i=e-t,n=new Buffer(i,void 0),o=0;o<i;++o)n[o]=this[o+t];return n},Buffer.prototype.readUIntLE=function readUIntLE(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i},Buffer.prototype.readUIntBE=function readUIntBE(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var i=this[t+--e],n=1;0<e&&(n*=256);)i+=this[t+--e]*n;return i},Buffer.prototype.readUInt8=function readUInt8(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function readUInt16LE(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function readIntLE(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return(n*=128)<=i&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readIntBE=function readIntBE(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var i=e,n=1,o=this[t+--i];0<i&&(n*=256);)o+=this[t+--i]*n;return(n*=128)<=o&&(o-=Math.pow(2,8*e)),o},Buffer.prototype.readInt8=function readInt8(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function readInt16LE(t,e){e||checkOffset(t,2,this.length);e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},Buffer.prototype.readInt16BE=function readInt16BE(t,e){e||checkOffset(t,2,this.length);e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},Buffer.prototype.readInt32LE=function readInt32LE(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function readFloatLE(t,e){return e||checkOffset(t,4,this.length),o.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(t,e){return e||checkOffset(t,4,this.length),o.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(t,e){return e||checkOffset(t,8,this.length),o.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(t,e){return e||checkOffset(t,8,this.length),o.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(t,e,r,i){t=+t,e|=0,r|=0,i||checkInt(this,t,e,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[e]=255&t;++o<r&&(n*=256);)this[e+o]=t/n&255;return e+r},Buffer.prototype.writeUIntBE=function writeUIntBE(t,e,r,i){t=+t,e|=0,r|=0,i||checkInt(this,t,e,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[e+n]=255&t;0<=--n&&(o*=256);)this[e+n]=t/o&255;return e+r},Buffer.prototype.writeUInt8=function writeUInt8(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function writeIntLE(t,e,r,i){t=+t,e|=0,i||checkInt(this,t,e,r,(i=Math.pow(2,8*r-1))-1,-i);var n=0,o=1,a=0;for(this[e]=255&t;++n<r&&(o*=256);)t<0&&0===a&&0!==this[e+n-1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+r},Buffer.prototype.writeIntBE=function writeIntBE(t,e,r,i){t=+t,e|=0,i||checkInt(this,t,e,r,(i=Math.pow(2,8*r-1))-1,-i);var n=r-1,o=1,a=0;for(this[e+n]=255&t;0<=--n&&(o*=256);)t<0&&0===a&&0!==this[e+n+1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+r},Buffer.prototype.writeInt8=function writeInt8(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},Buffer.prototype.writeInt16LE=function writeInt16LE(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function writeInt16BE(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function writeInt32LE(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function writeInt32BE(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function writeFloatLE(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function writeFloatBE(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function copy(t,e,r,i){if(r=r||0,i||0===i||(i=this.length),e>=t.length&&(e=t.length),(i=0<i&&i<r?r:i)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var n,o=(i=t.length-e<i-r?t.length-e+r:i)-r;if(this===t&&r<e&&e<i)for(n=o-1;0<=n;--n)t[n+e]=this[n+r];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},Buffer.prototype.fill=function fill(t,e,r,i){if("string"==typeof t){var n;if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1!==t.length||(n=t.charCodeAt(0))<256&&(t=n),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(!(r<=e))if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(s=e;s<r;++s)this[s]=t;else for(var o=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,i).toString()),a=o.length,s=0;s<r-e;++s)this[s+e]=o[s%a];return this};var e=/[^+\/0-9A-Za-z-_]/g;function base64clean(t){if((t=function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(e,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function utf8ToBytes(t,e){e=e||1/0;for(var r,i=t.length,n=null,o=[],a=0;a<i;++a){if(55295<(r=t.charCodeAt(a))&&r<57344){if(!n){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===i){-1<(e-=3)&&o.push(239,191,189);continue}n=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&-1<(e-=3)&&o.push(239,191,189);if(n=null,r<128){if(--e<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function base64ToBytes(t){return n.toByteArray(base64clean(t))}function blitBuffer(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}}.call(this,i(3))},function(t,e){var r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.byteLength=function byteLength(t){var t=getLens(t),e=t[0],t=t[1];return 3*(e+t)/4-t},e.toByteArray=function toByteArray(t){var e,r,i=getLens(t),n=i[0],i=i[1],o=new l(function _byteLength(t,e,r){return 3*(e+r)/4-r}(0,n,i)),a=0,s=0<i?n-4:n;for(r=0;r<s;r+=4)e=u[t.charCodeAt(r)]<<18|u[t.charCodeAt(r+1)]<<12|u[t.charCodeAt(r+2)]<<6|u[t.charCodeAt(r+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;2===i&&(e=u[t.charCodeAt(r)]<<2|u[t.charCodeAt(r+1)]>>4,o[a++]=255&e);1===i&&(e=u[t.charCodeAt(r)]<<10|u[t.charCodeAt(r+1)]<<4|u[t.charCodeAt(r+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e);return o},e.fromByteArray=function fromByteArray(t){for(var e,r=t.length,i=r%3,n=[],o=0,a=r-i;o<a;o+=16383)n.push(function encodeChunk(t,e,r){for(var i,n=[],o=e;o<r;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),n.push(function tripletToBase64(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}(i));return n.join("")}(t,o,a<o+16383?a:o+16383));1==i?(e=t[r-1],n.push(s[e>>2]+s[e<<4&63]+"==")):2==i&&(e=(t[r-2]<<8)+t[r-1],n.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return n.join("")};for(var s=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=i.length;n<o;++n)s[n]=i[n],u[i.charCodeAt(n)]=n;function getLens(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("="),e=(t=-1===t?e:t)===e?0:4-t%4;return[t,e]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,i,n){var o,a,s=8*n-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?n-1:0,f=r?-1:1,n=t[e+h];for(h+=f,o=n&(1<<-c)-1,n>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;0<c;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(n?-1:1);a+=Math.pow(2,i),o-=l}return(n?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,r,i,n,o){var a,s,u=8*o-n-1,l=(1<<u)-1,c=l>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,g=i?1:-1,o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(i=Math.pow(2,-a))<1&&(a--,i*=2),2<=(e+=1<=a+c?h/i:h*Math.pow(2,1-c))*i&&(a++,i/=2),l<=a+c?(s=0,a=l):1<=a+c?(s=(e*i-1)*Math.pow(2,n),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,n),a=0));8<=n;t[r+f]=255&s,f+=g,s/=256,n-=8);for(a=a<<n|s,u+=n;0<u;t[r+f]=255&a,f+=g,a/=256,u-=8);t[r+f-g]|=128*o}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){},function(t,u,e){!function(n){function normalizeArray(t,e){for(var r=0,i=t.length-1;0<=i;i--){var n=t[i];"."===n?t.splice(i,1):".."===n?(t.splice(i,1),r++):r&&(t.splice(i,1),r--)}if(e)for(;r--;)t.unshift("..");return t}function filter(t,e){if(t.filter)return t.filter(e);for(var r=[],i=0;i<t.length;i++)e(t[i],i,t)&&r.push(t[i]);return r}u.resolve=function(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){var i=0<=r?arguments[r]:n.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,e="/"===i.charAt(0))}return(e?"/":"")+(t=normalizeArray(filter(t.split("/"),function(t){return!!t}),!e).join("/"))||"."},u.normalize=function(t){var e=u.isAbsolute(t),r="/"===i(t,-1);return(t=(t=normalizeArray(filter(t.split("/"),function(t){return!!t}),!e).join("/"))||e?t:".")&&r&&(t+="/"),(e?"/":"")+t},u.isAbsolute=function(t){return"/"===t.charAt(0)},u.join=function(){var t=Array.prototype.slice.call(arguments,0);return u.normalize(filter(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},u.relative=function(t,e){function trim(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;0<=r&&""===t[r];r--);return r<e?[]:t.slice(e,r-e+1)}t=u.resolve(t).substr(1),e=u.resolve(e).substr(1);for(var r=trim(t.split("/")),i=trim(e.split("/")),n=Math.min(r.length,i.length),o=n,a=0;a<n;a++)if(r[a]!==i[a]){o=a;break}for(var s=[],a=o;a<r.length;a++)s.push("..");return(s=s.concat(i.slice(o))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=47===t.charCodeAt(0),r=-1,i=!0,n=t.length-1;1<=n;--n)if(47===t.charCodeAt(n)){if(!i){r=n;break}}else i=!1;return-1===r?e?"/":".":e&&1===r?"/":t.slice(0,r)},u.basename=function(t,e){t=function basename(t){"string"!=typeof t&&(t+="");for(var e=0,r=-1,i=!0,n=t.length-1;0<=n;--n)if(47===t.charCodeAt(n)){if(!i){e=n+1;break}}else-1===r&&(i=!1,r=n+1);return-1===r?"":t.slice(e,r)}(t);return t=e&&t.substr(-1*e.length)===e?t.substr(0,t.length-e.length):t},u.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,r=0,i=-1,n=!0,o=0,a=t.length-1;0<=a;--a){var s=t.charCodeAt(a);if(47===s){if(n)continue;r=a+1;break}-1===i&&(n=!1,i=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1)}return-1===e||-1===i||0===o||1===o&&e===i-1&&e===r+1?"":t.slice(e,i)};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}.call(this,e(1))},function(y,b,A){"use strict";A.r(b);Logger.init=function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!0),this.canLog=t=void 0===t?!0:t,this.canWarn=e,this.canError=r},Logger.log=function(t,e){void 0===e&&(e=!1),Logger.canLog&&console.log("[live2d-helper] "+t)},Logger.warn=function(t,e){void 0===e&&(e=!1),Logger.canWarn&&console.warn("[live2d-helper] "+t)},Logger.error=function(t,e){void 0===e&&(e=!1),Logger.canError&&console.error("[live2d-helper] "+t)},Logger.canLog=!0,Logger.canWarn=!0,Logger.canError=!0;var S=Logger;function Logger(){}var v=function(t,i,n,o){return new(n=n||Promise)(function(e,r){function fulfilled(t){try{step(o.next(t))}catch(t){r(t)}}function rejected(t){try{step(o.throw(t))}catch(t){r(t)}}function step(t){t.done?e(t.value):function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,i||[])).next())})},x=function(r,i){var n,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(r,s)}catch(t){e=[6,t],o=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},w=(Utils.xhr=function(i,n,o){return new Promise(function(t,e){var r=new XMLHttpRequest;r.open(n,i),r.responseType=o,r.onreadystatechange=function(){4===r.readyState&&(200===r.status?t(r.response):e({status:r.status,message:r.responseText}))},r.send()})},Utils.getJson=function(e){return v(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.xhr(e,"get","json")];case 1:return[2,t.sent()]}})})},Utils.getBlob=function(e){return v(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.xhr(e,"get","blob")];case 1:return[2,t.sent()]}})})},Utils.getArraybuffer=function(e){return v(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.xhr(e,"get","arraybuffer")];case 1:return[2,t.sent()]}})})},Utils.arrayBuffer2String=function(t){return String.fromCharCode.apply(null,new Uint8Array(t))},Utils.getRandomItem=function(t){return t[Math.floor(Math.random()*t.length)]},Utils);function Utils(){}var B=function(t,i,n,o){return new(n=n||Promise)(function(e,r){function fulfilled(t){try{step(o.next(t))}catch(t){r(t)}}function rejected(t){try{step(o.throw(t))}catch(t){r(t)}}function step(t){t.done?e(t.value):function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,i||[])).next())})},P=function(r,i){var n,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(r,s)}catch(t){e=[6,t],o=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},I=(Setting.prototype.init=function(M,v){return B(this,void 0,void 0,function(){var e,r,i,n,o,a,s,u,l,c,h,f,g,p,d,m,_,y,b,A,C;return P(this,function(t){switch(t.label){case 0:if(("string"==typeof M||M instanceof HTMLCanvasElement)&&"string"==typeof v)if(this.baseUrl=/\/$/.test(v)?v:v+"/","string"==typeof M){if(this.canvas=document.querySelector(M),!this.canvas)throw S.error("Not Found HTMLCanvasElement"),new Error("Not Found HTMLCanvasElement")}else this.canvas=M;else{if(e=M.canvas,r=M.baseUrl,i=M.model,n=M.imageUrl,o=M.soundUrl,a=M.interval,s=M.width,u=M.height,l=M.layout,c=M.debug,h=M.idle,f=M.view,g=M.initModelCallback,p=M.scaling,d=M.globalFollowPointer,m=M.binding,_=M.autoLoadAudio,y=M.allowSound,b=M.motionLoadMode,this.canvas=e instanceof HTMLElement?e:document.querySelector(e),this.baseUrl=/\/$/.test(r)?r:r+"/",this.imageUrl=n||this.baseUrl,this.imageUrl=/\/$/.test(this.imageUrl)?this.imageUrl:this.imageUrl+"/",this.soundUrl=o||this.baseUrl,this.soundUrl=/\/$/.test(this.soundUrl)?this.soundUrl:this.soundUrl+"/",this.interval=a||15e3,this.width=isNaN(Number(s))?800:Number(s),this.height=isNaN(Number(u))?800:Number(u),this.canvas.width=this.width,this.canvas.height=this.height,this.layout=l,this.debug=c||this.debug,this.idle=h,this.motionLoadMode=b||"lazy",f)for(A in this.view)f[A]&&(this.view[A]=f[A]);this.initModelCallback="function"==typeof g?g:function(t){},this.scaling="boolean"==typeof p&&p,this.globalFollowPointer="boolean"==typeof d&&d,"function"==typeof _?this.autoLoadAudio={canLoad:!0,callback:_}:"boolean"==typeof _&&(this.autoLoadAudio={canLoad:_,callback:function(){}}),this.model=i,e=m,this.allowSound="boolean"!=typeof y||y}return void 0!==this.model&&"string"!=typeof this.model?[3,2]:(this.model=this.model||this.baseUrl+"model.json",C=this,[4,w.getArraybuffer(this.model)]);case 1:return C.modelBuffer=t.sent(),this.model=JSON.parse(w.arrayBuffer2String(this.modelBuffer)),[3,3];case 2:this.model=this.model,t.label=3;case 3:if(this.initBind(e||{}),this.canvas&&this.baseUrl)return[2];throw S.error("Not Found HTMLCanvasElement OR baseUrl"),new Error("Not Found HTMLCanvasElement OR baseUrl")}})})},Setting.prototype.initBind=function(t){var e,r=this;for(e in t){var i=[],n=function(t){t.hitArea,t.motionPath,t.motionName,t.priority};"string"==typeof t[e]?i.push(t[e]):Array.isArray(t[e])?i.push.apply(i,t[e]):"function"==typeof t[e]?n=t[e]:"object"==typeof t[e]&&(Array.isArray(t[e].motion)?i.push.apply(i,t[e].motion):i.push(t[e].motion),"function"==typeof t[e].callback&&(n=t[e].callback)),this.binding[name]={motion:i,callback:n}}if(this.model.HitAreas)for(var o=JSON.parse(JSON.stringify(this.model.HitAreas)),a=this,s=0,u=o;s<u.length;s++)!function(e){var t=[];e.Motion&&("string"==typeof e.Motion?t.push(e.Motion):Array.isArray(e.Motion)&&t.push.apply(t,e.Motion)),a.binding[e.Id]?t.forEach(function(t){r.binding[e.Id].motion.includes(t)||r.binding[e.Id].motion.push(t)}):a.binding[e.Id]={motion:t,callback:function(t){t.hitArea,t.motionPath,t.motionName,t.priority}}}(u[s]);else S.warn("Not Found HitAreas In model.json")},Setting);function Setting(){this.model="",this.imageUrl="",this.soundUrl="",this.interval=15e3,this.width=300,this.height=300,this.layout={width:null,height:null,x:null,y:null,center_x:null,center_y:null,top:null,bottom:null,left:null,right:null},this.idle="idle",this.view={VIEW_MAX_SCALE:2,VIEW_MIN_SCALE:.8,VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:-2,VIEW_LOGICAL_MAX_TOP:2},this.initModelCallback=function(t){},this.scaling=!1,this.globalFollowPointer=!1,this.binding={},this.autoLoadAudio={canLoad:!0,callback:function(){}},this.allowSound=!0,this.Priority={None:0,Idle:1,Normal:2,Force:3}}!function(t){function csmString(t){this.s=t}csmString.prototype.append=function(t,e){return this.s+=void 0!==e?t.substr(0,e):t,this},csmString.prototype.expansion=function(t,e){for(var r=0;r<t;r++)this.append(e);return this},csmString.prototype.getBytes=function(){return encodeURIComponent(this.s).replace(/%../g,"x").length},csmString.prototype.getLength=function(){return this.s.length},csmString.prototype.isLess=function(t){return this.s<t.s},csmString.prototype.isGreat=function(t){return this.s>t.s},csmString.prototype.isEqual=function(t){return this.s==t},csmString.prototype.isEmpty=function(){return 0==this.s.length},t.csmString=csmString}(cr=cr||{});function _v(t,e,r){k(t,e+"\n",r)}function aw(t){console.assert(t)}var V,E,t,k=function(t,e,r){V.CubismDebug.print(t,"[CSM]"+e,r)},T=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},R=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},L=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},F=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},T=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];_v(tt.LogLevel_Debug,"[D]"+t,e)},R=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];_v(tt.LogLevel_Info,"[I]"+t,e)},L=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];_v(tt.LogLevel_Warning,"[W]"+t,e)},F=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];_v(tt.LogLevel_Error,"[E]"+t,e)},e=(!function(t){function CubismDebug(){}CubismDebug.print=function(t,e,r){t<n.CubismFramework.getLoggingLevel()||(t=n.CubismFramework.coreLogFunction)&&t(e.replace(/\{(\d+)\}/g,function(t,e){return r[e]}))},CubismDebug.dumpBytes=function(t,e,r){for(var i=0;i<r;i++)i%16==0&&0<i?this.print(t,"\n"):i%8==0&&0<i&&this.print(t,"  "),this.print(t,"{0} ",[255&e[i]]);this.print(t,"\n")},t.CubismDebug=CubismDebug}(V=V||{}),E=E||{}),D=function csmPair(t,e){this.first=null==t?null:t,this.second=null==e?null:e},U=(e.csmPair=D,csmMap.prototype.release=function(){this.clear()},csmMap.prototype.appendKey=function(t){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new D(t),this._size+=1},csmMap.prototype.getValue=function(t){for(var e=-1,r=0;r<this._size;r++)if(this._keyValues[r].first==t){e=r;break}return 0<=e?this._keyValues[e].second:(this.appendKey(t),this._keyValues[this._size-1].second)},csmMap.prototype.setValue=function(t,e){for(var r=-1,i=0;i<this._size;i++)if(this._keyValues[i].first==t){r=i;break}0<=r?this._keyValues[r].second=e:(this.appendKey(t),this._keyValues[this._size-1].second=e)},csmMap.prototype.isExist=function(t){for(var e=0;e<this._size;e++)if(this._keyValues[e].first==t)return!0;return!1},csmMap.prototype.clear=function(){this._keyValues=void 0,this._keyValues=null,this._keyValues=new Array,this._size=0},csmMap.prototype.getSize=function(){return this._size},csmMap.prototype.prepareCapacity=function(t,e){t>this._keyValues.length&&(0==this._keyValues.length?this._keyValues.length=t=!e&&t<csmMap.DefaultSize?csmMap.DefaultSize:t:(!e&&t<2*this._keyValues.length&&(t=2*this._keyValues.length),this._keyValues.length=t))},csmMap.prototype.begin=function(){return new N(this,0)},csmMap.prototype.end=function(){return new N(this,this._size)},csmMap.prototype.erase=function(t){var e=t._index;return e<0||this._size<=e?t:(this._keyValues.splice(e,1),--this._size,new N(this,e))},csmMap.prototype.dumpAsInt=function(){for(var t=0;t<this._size;t++)T("{0} ,",this._keyValues[t]),T("\n")},csmMap.DefaultSize=10,csmMap);function csmMap(t){null==t||t<1?(this._keyValues=new Array,this._dummyValue=null,this._size=0):(this._keyValues=new Array(t),this._size=t)}e.csmMap=U,iterator.prototype.set=function(t){return this._index=t._index,this._map=t._map,this},iterator.prototype.preIncrement=function(){return++this._index,this},iterator.prototype.preDecrement=function(){return--this._index,this},iterator.prototype.increment=function(){var t=new iterator(this._map,this._index++);return this._map=t._map,this._index=t._index,this},iterator.prototype.decrement=function(){var t=new iterator(this._map,this._index);return this._map=t._map,this._index=t._index,this},iterator.prototype.ptr=function(){return this._map._keyValues[this._index]},iterator.prototype.notEqual=function(t){return this._index!=t._index||this._map!=t._map};var N=iterator;function iterator(t,e){this._map=null!=t?t:new U,this._index=null!=e?e:0}e.iterator=N,function(t){function csmVector(t){(t=void 0===t?0:t)<1?(this._ptr=new Array,this._capacity=0):(this._ptr=new Array(t),this._capacity=t),this._size=0}csmVector.prototype.at=function(t){return this._ptr[t]},csmVector.prototype.set=function(t,e){this._ptr[t]=e},csmVector.prototype.get=function(t){void 0===t&&(t=0);for(var e=new Array,r=t;r<this._size;r++)e.push(this._ptr[r]);return e},csmVector.prototype.pushBack=function(t){this._size>=this._capacity&&this.prepareCapacity(0==this._capacity?csmVector.s_defaultSize:2*this._capacity),this._ptr[this._size++]=t},csmVector.prototype.clear=function(){this._ptr.length=0,this._size=0},csmVector.prototype.getSize=function(){return this._size},csmVector.prototype.assign=function(t,e){this._size<t&&this.prepareCapacity(t);for(var r=0;r<t;r++)this._ptr[r]=e;this._size=t},csmVector.prototype.resize=function(t,e){this.updateSize(t,e=void 0===e?null:e,!0)},csmVector.prototype.updateSize=function(t,e,r){if(void 0===e&&(e=null),void 0===r&&(r=!0),this._size<t)if(this.prepareCapacity(t),r)for(var i=this._size;i<t;i++)this._ptr[i]="function"==typeof e?JSON.parse(JSON.stringify(new e)):e;else for(i=this._size;i<t;i++)this._ptr[i]=e;else{r=this._size-t;this._ptr.splice(this._size-r,r)}this._size=t},csmVector.prototype.insert=function(t,e,r){var i=t._index,t=e._index,n=r._index,r=n-t,o=(this.prepareCapacity(this._size+r),this._size-i);if(0<o)for(var a=0;a<o;a++)this._ptr.splice(i+a,0,null);for(a=t;a<n;a++,i++)this._ptr[i]=e._vector._ptr[a];this._size=this._size+r},csmVector.prototype.remove=function(t){return!(t<0||this._size<=t)&&(this._ptr.splice(t,1),--this._size,!0)},csmVector.prototype.erase=function(t){var e=t._index;return e<0||this._size<=e?t:(this._ptr.splice(e,1),--this._size,new r(this,e))},csmVector.prototype.prepareCapacity=function(t){t>this._capacity&&(0==this._capacity?this._ptr=new Array(t):this._ptr.length=t,this._capacity=t)},csmVector.prototype.begin=function(){return 0==this._size?this.end():new r(this,0)},csmVector.prototype.end=function(){return new r(this,this._size)},csmVector.prototype.getOffset=function(t){var e=new csmVector;return e._ptr=this.get(t),e._size=this.get(t).length,e._capacity=this.get(t).length,e},csmVector.s_defaultSize=10,t.csmVector=csmVector;iterator.prototype.set=function(t){return this._index=t._index,this._vector=t._vector,this},iterator.prototype.preIncrement=function(){return++this._index,this},iterator.prototype.preDecrement=function(){return--this._index,this},iterator.prototype.increment=function(){var t=new iterator(this._vector,this._index++);return this._vector=t._vector,this._index=t._index,this},iterator.prototype.decrement=function(){var t=new iterator(this._vector,this._index--);return this._vector=t._vector,this._index=t._index,this},iterator.prototype.ptr=function(){return this._vector._ptr[this._index]},iterator.prototype.substitution=function(t){return this._index=t._index,this._vector=t._vector,this},iterator.prototype.notEqual=function(t){return this._index!=t._index||this._vector!=t._vector};var r=iterator;function iterator(t,e){this._vector=null!=t?t:null,this._index=null!=e?e:0}t.iterator=r}(t=t||{});O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var O,r,i,X,n,Y=function(t,e){function __(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},z=t.csmVector,G=E.csmMap,J=cr.csmString,j=(!function(t){var e="Error: type mismatch",i=(Value.prototype.getRawString=function(t,e){return this.getString(t,e)},Value.prototype.toInt=function(t){return t=void 0===t?0:t},Value.prototype.toFloat=function(t){return t=void 0===t?0:t},Value.prototype.toBoolean=function(t){return t=void 0===t?!1:t},Value.prototype.getSize=function(){return 0},Value.prototype.getArray=function(t){return t=void 0===t?null:t},Value.prototype.getVector=function(t){return t},Value.prototype.getMap=function(t){return t},Value.prototype.getValueByIndex=function(t){return Value.errorValue.setErrorNotForClientCall(e)},Value.prototype.getValueByString=function(t){return Value.nullValue.setErrorNotForClientCall(e)},Value.prototype.getKeys=function(){return Value.s_dummyKeys},Value.prototype.isError=function(){return!1},Value.prototype.isNull=function(){return!1},Value.prototype.isBool=function(){return!1},Value.prototype.isFloat=function(){return!1},Value.prototype.isString=function(){return!1},Value.prototype.isArray=function(){return!1},Value.prototype.isMap=function(){return!1},Value.prototype.equals=function(t){return!1},Value.prototype.isStatic=function(){return!1},Value.prototype.setErrorNotForClientCall=function(t){return s.errorValue},Value.staticInitializeNotForClientCall=function(){l.trueValue=new l(!0),l.falseValue=new l(!1),s.errorValue=new s("ERROR",!0),this.nullValue=new f,Value.s_dummyKeys=new z},Value.staticReleaseNotForClientCall=function(){l.trueValue=null,l.falseValue=null,s.errorValue=null,Value.nullValue=null,Value.s_dummyKeys=null,l.trueValue=null,l.falseValue=null,s.errorValue=null,Value.nullValue=null,Value.s_dummyKeys=null},Value);function Value(){}function CubismJson(t,e){this._error=null,this._lineCount=0,(this._root=null)!=t&&this.parseBytes(t,e)}t.Value=i,CubismJson.create=function(t,e){var r=new CubismJson;return r.parseBytes(t,e)?r:(CubismJson.delete(r),null)},CubismJson.delete=function(t){},CubismJson.prototype.getRoot=function(){return this._root},CubismJson.prototype.arrayBufferToString=function(t){for(var e=new Uint8Array(t),r="",i=0,n=e.length;i<n;++i)r+="%"+this.pad(e[i].toString(16));return r=decodeURIComponent(r)},CubismJson.prototype.pad=function(t){return t.length<2?"0"+t:t},CubismJson.prototype.parseBytes=function(t,e){var r=new Array(1),t=this.arrayBufferToString(t);return this._root=this.parseValue(t,e,0,r),this._error?(t="\0",t="Json parse error : @line "+(this._lineCount+1)+"\n",this._root=new c(t),R("{0}",this._root.getRawString()),!1):null!=this._root||(this._root=new s(new J(this._error),!1),!1)},CubismJson.prototype.getParseError=function(){return this._error},CubismJson.prototype.checkEndOfFile=function(){return this._root.getArray()[1].equals("EOF")},CubismJson.prototype.parseValue=function(t,e,r,i){if(!this._error){for(var n=null,o=r;o<e;o++)switch(t[o]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":var a=new Array(1),s=function strtod(t,e){for(var r=0,i=1;;i++){var n=t.slice(i-1,i);if("e"!=n&&"-"!=n&&"E"!=n){n=t.substring(0,i),n=Number(n);if(isNaN(n))break;r=i}}var o=parseFloat(t);isNaN(o)&&(o=NaN);return e[0]=t.slice(r),o}(t.slice(o),a);return i[0]=t.indexOf(a[0]),new u(s);case'"':return new c(this.parseString(t,e,o+1,i));case"[":return n=this.parseArray(t,e,o+1,i);case"{":return n=this.parseObject(t,e,o+1,i);case"n":return o+3<e?(n=new f,i[0]=o+4):this._error="parse null",n;case"t":return o+3<e?(n=l.trueValue,i[0]=o+4):this._error="parse true",n;case"f":return o+4<e?(n=l.falseValue,i[0]=o+5):this._error="illegal ',' position",n;case",":return this._error="illegal ',' position",null;case"]":return i[0]=o,null;case"\n":this._lineCount++}this._error="illegal end of value"}return null},CubismJson.prototype.parseString=function(t,e,r,i){if(!this._error){for(var n=r,o=new J(""),a=r;n<e;n++)switch(t[n]){case'"':return i[0]=n+1,o.append(t.slice(a),n-a),o.s;case"//":if(a<++n-1&&o.append(t.slice(a),n-a),a=n+1,n<e)switch(t[n]){case"\\":o.expansion(1,"\\");break;case'"':o.expansion(1,'"');break;case"/":o.expansion(1,"/");break;case"b":o.expansion(1,"\b");break;case"f":o.expansion(1,"\f");break;case"n":o.expansion(1,"\n");break;case"r":o.expansion(1,"\r");break;case"t":o.expansion(1,"\t");break;case"u":this._error="parse string/unicord escape not supported"}else this._error="parse string/escape error"}this._error="parse string/illegal end"}return null},CubismJson.prototype.parseObject=function(t,e,r,i){if(!this._error){for(var n=new m,o="",a=r,s=Array(1),u=!1;a<e;a++){t:for(;a<e;a++)switch(t[a]){case'"':if(o=this.parseString(t,e,a+1,s),this._error)return null;a=s[0],u=!0;break t;case"}":return i[0]=a+1,n;case":":this._error="illegal ':' position";break;case"\n":this._lineCount++}if(!u)return this._error="key not found",null;u=!1;t:for(;a<e;a++)switch(t[a]){case":":u=!0,a++;break t;case"}":this._error="illegal '}' position";break;case"\n":this._lineCount++}if(!u)return this._error="':' not found",null;var l=this.parseValue(t,e,a,s);if(this._error)return null;a=s[0],n.put(o,l);t:for(;a<e;a++)switch(t[a]){case",":break t;case"}":return i[0]=a+1,n;case"\n":this._lineCount++}}this._error="illegal end of perseObject"}return null},CubismJson.prototype.parseArray=function(t,e,r,i){if(!this._error){for(var n=new p,o=r,a=new Array(1);o<e;o++){var s=this.parseValue(t,e,o,a);if(this._error)return null;o=a[0],s&&n.add(s);t:for(;o<e;o++)switch(t[o]){case",":break t;case"]":return i[0]=o+1,n;case"\n":++this._lineCount}}n=void 0,this._error="illegal end of parseObject"}return null},t.CubismJson=CubismJson;Y(JsonFloat,r=i),JsonFloat.prototype.isFloat=function(){return!0},JsonFloat.prototype.getString=function(t,e){return this._value=parseFloat("\0"),this._stringBuffer="\0",this._stringBuffer},JsonFloat.prototype.toInt=function(t){return void 0===t&&(t=0),parseInt(this._value.toString())},JsonFloat.prototype.toFloat=function(t){return void 0===t&&(t=0),this._value},JsonFloat.prototype.equals=function(t){return"number"==typeof t&&(!Math.round(t)&&t==this._value)};var r,u=JsonFloat;function JsonFloat(t){var e=r.call(this)||this;return e._value=t,e}t.JsonFloat=u;Y(JsonBoolean,n=i),JsonBoolean.prototype.isBool=function(){return!0},JsonBoolean.prototype.toBoolean=function(t){return void 0===t&&(t=!1),this._boolValue},JsonBoolean.prototype.getString=function(t,e){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer},JsonBoolean.prototype.equals=function(t){return"boolean"==typeof t&&t==this._boolValue},JsonBoolean.prototype.isStatic=function(){return!0};var n,l=JsonBoolean;function JsonBoolean(t){var e=n.call(this)||this;return e._boolValue=t,e}t.JsonBoolean=l;Y(JsonString,o=i),JsonString.prototype.isString=function(){return!0},JsonString.prototype.getString=function(t,e){return this._stringBuffer},JsonString.prototype.equals=function(t){return"string"==typeof t?this._stringBuffer==t:t instanceof J&&this._stringBuffer==t.s};var o,c=JsonString;function JsonString(t){var e=o.call(this)||this;return"string"==typeof t&&(e._stringBuffer=t),t instanceof J&&(e._stringBuffer=t.s),e}t.JsonString=c;Y(JsonError,a=c),JsonError.prototype.isStatic=function(){return this._isStatic},JsonError.prototype.setErrorNotForClientCall=function(t){return this._stringBuffer=t,this},JsonError.prototype.isError=function(){return!0};var a,s=JsonError;function JsonError(t,e){var r=this;return(r=a.call(this,t)||this)._isStatic=e,r}t.JsonError=s;Y(JsonNullvalue,h=i),JsonNullvalue.prototype.isNull=function(){return!0},JsonNullvalue.prototype.getString=function(t,e){return this._stringBuffer},JsonNullvalue.prototype.isStatic=function(){return!0};var h,f=JsonNullvalue;function JsonNullvalue(){var t=h.call(this)||this;return t._stringBuffer="NullValue",t}t.JsonNullvalue=f;Y(JsonArray,g=i),JsonArray.prototype.release=function(){for(var t=this._array.begin();t.notEqual(this._array.end());t.preIncrement()){var e=t.ptr();e&&!e.isStatic()&&(e=void 0,e=null)}},JsonArray.prototype.isArray=function(){return!0},JsonArray.prototype.getValueByIndex=function(t){if(t<0||this._array.getSize()<=t)return i.errorValue.setErrorNotForClientCall("Error: index out of bounds");t=this._array.at(t);return null==t?i.nullValue:t},JsonArray.prototype.getValueByString=function(t){return i.errorValue.setErrorNotForClientCall(e)},JsonArray.prototype.getString=function(t,e){for(var r=e+"[\n",i=this._array.begin();i.notEqual(this._array.end());i.increment()){var n=i.ptr();this._stringBuffer+=e+""+n.getString(e+" ")+"\n"}return this._stringBuffer=r+e+"]\n",this._stringBuffer},JsonArray.prototype.add=function(t){this._array.pushBack(t)},JsonArray.prototype.getVector=function(t){return void 0===t&&(t=null),this._array},JsonArray.prototype.getSize=function(){return this._array.getSize()};var g,p=JsonArray;function JsonArray(){var t=g.call(this)||this;return t._array=new z,t}t.JsonArray=p;Y(JsonMap,d=i),JsonMap.prototype.release=function(){for(var t=this._map.begin();t.notEqual(this._map.end());){var e=t.ptr().second;e&&!e.isStatic()&&(e=void 0,e=null),t.preIncrement()}},JsonMap.prototype.isMap=function(){return!0},JsonMap.prototype.getValueByString=function(t){var e;if(t instanceof J)return null==(e=this._map.getValue(t.s))?i.nullValue:e;for(var r=this._map.begin();r.notEqual(this._map.end());r.preIncrement())if(r.ptr().first==t)return null==r.ptr().second?i.nullValue:r.ptr().second;return i.nullValue},JsonMap.prototype.getValueByIndex=function(t){return i.errorValue.setErrorNotForClientCall(e)},JsonMap.prototype.getString=function(t,e){this._stringBuffer=e+"{\n";for(var r=this._map.begin();r.notEqual(this._map.end());){var i=r.ptr().first,n=r.ptr().second;this._stringBuffer+=e+" "+i+" : "+n.getString(e+"   ")+" \n",r.preIncrement()}return this._stringBuffer+=e+"}\n",this._stringBuffer},JsonMap.prototype.getMap=function(t){return this._map},JsonMap.prototype.put=function(t,e){this._map.setValue(t,e)},JsonMap.prototype.getKeys=function(){if(!this._keys){this._keys=new z;for(var t=this._map.begin();t.notEqual(this._map.end());){var e=t.ptr().first;this._keys.pushBack(e),t.preIncrement()}}return this._keys},JsonMap.prototype.getSize=function(){return this._keys.getSize()};var d,m=JsonMap;function JsonMap(){var t=d.call(this)||this;return t._map=new G,t}t.JsonMap=m}(r=r||{}),cr.csmString),W=(!function(t){function CubismId(t){this._id="string"==typeof t?new j(t):t}CubismId.prototype.getString=function(){return this._id},CubismId.prototype.isEqual=function(t){return"string"==typeof t?this._id.isEqual(t):t instanceof j?this._id.isEqual(t.s):t instanceof CubismId&&this._id.isEqual(t._id.s)},CubismId.prototype.isNotEqual=function(t){return"string"==typeof t?!this._id.isEqual(t):t instanceof j?!this._id.isEqual(t.s):t instanceof CubismId&&!this._id.isEqual(t._id.s)},t.CubismId=CubismId}(o=o||{}),o.CubismId),H=t.csmVector,Q=(!function(t){function CubismIdManager(){this._ids=new H}CubismIdManager.prototype.release=function(){for(var t=0;t<this._ids.getSize();++t)this._ids.set(t,void 0);this._ids=null},CubismIdManager.prototype.registerIds=function(t){for(var e=0;e<t.length;e++)this.registerId(t[e])},CubismIdManager.prototype.registerId=function(t){var e=null;return"string"!=typeof t?this.registerId(t.s):(null==(e=this.findId(t))&&(e=new W(t),this._ids.pushBack(e)),e)},CubismIdManager.prototype.getId=function(t){return this.registerId(t)},CubismIdManager.prototype.isExist=function(t){return"string"==typeof t?null!=this.findId(t):this.isExist(t.s)},CubismIdManager.prototype.findId=function(t){for(var e=0;e<this._ids.getSize();++e)if(this._ids.at(e).getString().isEqual(t))return this._ids.at(e);return null},t.CubismIdManager=CubismIdManager}(a=a||{}),!function(t){function CubismMatrix44(){this._tr=new Float32Array(16),this.loadIdentity()}CubismMatrix44.multiply=function(t,e,r){for(var i=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=0;n<4;++n)for(var o=0;o<4;++o)for(var a=0;a<4;++a)i[o+4*n]+=t[a+4*n]*e[o+4*a];for(n=0;n<16;++n)r[n]=i[n]},CubismMatrix44.prototype.loadIdentity=function(){var t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)},CubismMatrix44.prototype.setMatrix=function(t){for(var e=0;e<16;++e)this._tr[e]=t[e]},CubismMatrix44.prototype.getArray=function(){return this._tr},CubismMatrix44.prototype.getScaleX=function(){return this._tr[0]},CubismMatrix44.prototype.getScaleY=function(){return this._tr[5]},CubismMatrix44.prototype.getTranslateX=function(){return this._tr[12]},CubismMatrix44.prototype.getTranslateY=function(){return this._tr[13]},CubismMatrix44.prototype.transformX=function(t){return this._tr[0]*t+this._tr[12]},CubismMatrix44.prototype.transformY=function(t){return this._tr[5]*t+this._tr[13]},CubismMatrix44.prototype.invertTransformX=function(t){return(t-this._tr[12])/this._tr[0]},CubismMatrix44.prototype.invertTransformY=function(t){return(t-this._tr[13])/this._tr[5]},CubismMatrix44.prototype.translateRelative=function(t,e){t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]);CubismMatrix44.multiply(t,this._tr,this._tr)},CubismMatrix44.prototype.translate=function(t,e){this._tr[12]=t,this._tr[13]=e},CubismMatrix44.prototype.translateX=function(t){this._tr[12]=t},CubismMatrix44.prototype.translateY=function(t){this._tr[13]=t},CubismMatrix44.prototype.scaleRelative=function(t,e){t=new Float32Array([t,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1]);CubismMatrix44.multiply(t,this._tr,this._tr)},CubismMatrix44.prototype.scale=function(t,e){this._tr[0]=t,this._tr[5]=e},CubismMatrix44.prototype.multiplyByMatrix=function(t){CubismMatrix44.multiply(t.getArray(),this._tr,this._tr)},CubismMatrix44.prototype.clone=function(){for(var t=new CubismMatrix44,e=0;e<this._tr.length;e++)t._tr[e]=this._tr[e];return t},t.CubismMatrix44=CubismMatrix44}(i=i||{}),i.CubismMatrix44),q=(!function(t){var e;function CubismRenderer(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._model=null,this._modelColor=new r,this._mvpMatrix4x4=new Q,this._mvpMatrix4x4.loadIdentity()}CubismRenderer.create=function(){return null},CubismRenderer.delete=function(t){},CubismRenderer.prototype.initialize=function(t){this._model=t},CubismRenderer.prototype.drawModel=function(){null!=this.getModel()&&this.doDrawModel()},CubismRenderer.prototype.setMvpMatrix=function(t){this._mvpMatrix4x4.setMatrix(t.getArray())},CubismRenderer.prototype.getMvpMatrix=function(){return this._mvpMatrix4x4},CubismRenderer.prototype.setModelColor=function(t,e,r,i){t<0?t=0:1<t&&(t=1),e<0?e=0:1<e&&(e=1),r<0?r=0:1<r&&(r=1),i<0?i=0:1<i&&(i=1),this._modelColor.R=t,this._modelColor.G=e,this._modelColor.B=r,this._modelColor.A=i},CubismRenderer.prototype.getModelColor=function(){return JSON.parse(JSON.stringify(this._modelColor))},CubismRenderer.prototype.setIsPremultipliedAlpha=function(t){this._isPremultipliedAlpha=t},CubismRenderer.prototype.isPremultipliedAlpha=function(){return this._isPremultipliedAlpha},CubismRenderer.prototype.setIsCulling=function(t){this._isCulling=t},CubismRenderer.prototype.isCulling=function(){return this._isCulling},CubismRenderer.prototype.setAnisotropy=function(t){this._anisortopy=t},CubismRenderer.prototype.getAnisotropy=function(){return this._anisortopy},CubismRenderer.prototype.getModel=function(){return this._model},t.CubismRenderer=CubismRenderer,(e=t.CubismBlendMode||(t.CubismBlendMode={}))[e.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",e[e.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",e[e.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative";var r=function CubismTextureColor(){this.R=1,this.G=1,this.B=1,this.A=1};t.CubismTextureColor=r}(X=X||{}),A(0)),Z=r.Value,K=a.CubismIdManager,$=X.CubismRenderer;!function(t){var e,i=!1,r=!1,n=null,o=null;function CubismFramework(){}(e=t.Constant||(t.Constant={})).vertexOffset=0,e.vertexStep=2,t.csmDelete=function csmDelete(t){},CubismFramework.startUp=function(t){var e,r;return void 0===t&&(t=null),i?R("CubismFramework.startUp() is already done."):(null!=(n=t)&&q.Logging.csmSetLogFunction(n.logFunction),(i=!0)&&(e=(16711680&(t=q.Version.csmGetVersion()))>>16,r=65535&t,R("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+((4278190080&(t=t))>>24)).slice(-2),("00"+e).slice(-2),("0000"+r).slice(-4),t)),R("CubismFramework.startUp() is complete.")),i},CubismFramework.cleanUp=function(){r=i=!1,o=n=null},CubismFramework.initialize=function(){aw(i),i?r?L("CubismFramework.initialize() skipped, already initialized."):(Z.staticInitializeNotForClientCall(),o=new K,r=!0,R("CubismFramework.initialize() is complete.")):L("CubismFramework is not started.")},CubismFramework.dispose=function(){aw(i),i?r?(Z.staticReleaseNotForClientCall(),o.release(),o=null,$.staticRelease(),r=!1,R("CubismFramework.dispose() is complete.")):L("CubismFramework.dispose() skipped, not initialized."):L("CubismFramework is not started.")},CubismFramework.isStarted=function(){return i},CubismFramework.isInitialized=function(){return r},CubismFramework.coreLogFunction=function(t){q.Logging.csmGetLogFunction()&&q.Logging.csmGetLogFunction()(t)},CubismFramework.getLoggingLevel=function(){return null!=n?n.loggingLevel:tt.LogLevel_Off},CubismFramework.getIdManager=function(){return o},t.CubismFramework=CubismFramework}(n=n||{});var tt,et=function Option(){},rt=((e=tt=tt||{})[e.LogLevel_Verbose=0]="LogLevel_Verbose",e[e.LogLevel_Debug=1]="LogLevel_Debug",e[e.LogLevel_Info=2]="LogLevel_Info",e[e.LogLevel_Warning=3]="LogLevel_Warning",e[e.LogLevel_Error=4]="LogLevel_Error",e[e.LogLevel_Off=5]="LogLevel_Off",function(t,i,n,o){return new(n=n||Promise)(function(e,r){function fulfilled(t){try{step(o.next(t))}catch(t){r(t)}}function rejected(t){try{step(o.throw(t))}catch(t){r(t)}}function step(t){t.done?e(t.value):function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,i||[])).next())})}),it=function(r,i){var n,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(r,s)}catch(t){e=[6,t],o=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},nt=t.csmVector,ot=(TextureManager.prototype.release=function(){for(var t=this._textures.begin();t.notEqual(this._textures.end());t.preIncrement())this.webgl.gl.deleteTexture(t.ptr().id);this._textures=null},TextureManager.prototype.createTextureFromPngFile=function(u,l){return rt(this,void 0,void 0,function(){var e=this;return it(this,function(t){return[2,new Promise(function(s,t){return rt(e,void 0,void 0,function(){var e,r,i,n,o,a=this;return it(this,function(t){switch(t.label){case 0:for(e=this._textures.begin();e.notEqual(this._textures.end());e.preIncrement())if(e.ptr().fileName==u&&e.ptr().usePremultply==l)return s(e.ptr()),[2];return(r=new Image).onload=function(){var t=a.webgl.gl.createTexture(),e=(a.webgl.gl.bindTexture(a.webgl.gl.TEXTURE_2D,t),a.webgl.gl.texParameteri(a.webgl.gl.TEXTURE_2D,a.webgl.gl.TEXTURE_MIN_FILTER,a.webgl.gl.LINEAR_MIPMAP_LINEAR),a.webgl.gl.texParameteri(a.webgl.gl.TEXTURE_2D,a.webgl.gl.TEXTURE_MAG_FILTER,a.webgl.gl.LINEAR),l&&a.webgl.gl.pixelStorei(a.webgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),a.webgl.gl.texImage2D(a.webgl.gl.TEXTURE_2D,0,a.webgl.gl.RGBA,a.webgl.gl.RGBA,a.webgl.gl.UNSIGNED_BYTE,r),a.webgl.gl.generateMipmap(a.webgl.gl.TEXTURE_2D),a.webgl.gl.bindTexture(a.webgl.gl.TEXTURE_2D,null),new at);e.fileName=u,e.width=r.width,e.height=r.height,e.id=t,e.img=r,e.usePremultply=l,a._textures.pushBack(e),s(e)},i=r,o=(n=URL).createObjectURL,[4,w.getBlob(u)];case 1:return i.src=o.apply(n,[t.sent()]),[2]}})})})]})})},TextureManager.prototype.releaseTextures=function(){for(var t=0;t<this._textures.getSize();t++)this._textures.set(t,null);this._textures.clear()},TextureManager.prototype.releaseTextureByTexture=function(t){for(var e=0;e<this._textures.getSize();e++)if(this._textures.at(e).id==t){this._textures.set(e,null),this._textures.remove(e);break}},TextureManager.prototype.releaseTextureByFilePath=function(t){for(var e=0;e<this._textures.getSize();e++)if(this._textures.at(e).fileName==t){this._textures.set(e,null),this._textures.remove(e);break}},TextureManager);function TextureManager(t){this._textures=new nt,this.webgl=t}var at=function TextureInfo(){this.id=null,this.width=0,this.height=0},st=(Webgl.prototype.createShader=function(){var t=this.gl.createShader(this.gl.VERTEX_SHADER);if(null==t)return null;this.gl.shaderSource(t,"precision mediump float;attribute vec3 position;attribute vec2 uv;varying vec2 vuv;void main(void){   gl_Position = vec4(position, 1.0);   vuv = uv;}"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);if(null==e)return null;this.gl.shaderSource(e,"precision mediump float;varying vec2 vuv;uniform sampler2D texture;void main(void){   gl_FragColor = texture2D(texture, vuv);}"),this.gl.compileShader(e);var r=this.gl.createProgram();return this.gl.attachShader(r,t),this.gl.attachShader(r,e),this.gl.deleteShader(t),this.gl.deleteShader(e),this.gl.linkProgram(r),this.gl.useProgram(r),r},Webgl);function Webgl(t){this.gl=t.getContext("webgl"),this.frameBuffer=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}View.prototype.render=function(){this._webgl.gl.useProgram(this._programId),this._webgl.gl.flush()};var ut,lt=View;function View(t){this._webgl=t}!function(t){function CubismVector2(t,e){this.x=t,this.y=e,this.x=null==t?0:t,this.y=null==e?0:e}CubismVector2.prototype.add=function(t){var e=new CubismVector2(0,0);return e.x=this.x+t.x,e.y=this.y+t.y,e},CubismVector2.prototype.substract=function(t){var e=new CubismVector2(0,0);return e.x=this.x-t.x,e.y=this.y-t.y,e},CubismVector2.prototype.multiply=function(t){var e=new CubismVector2(0,0);return e.x=this.x*t.x,e.y=this.y*t.y,e},CubismVector2.prototype.multiplyByScaler=function(t){return this.multiply(new CubismVector2(t,t))},CubismVector2.prototype.division=function(t){var e=new CubismVector2(0,0);return e.x=this.x/t.x,e.y=this.y/t.y,e},CubismVector2.prototype.divisionByScalar=function(t){return this.division(new CubismVector2(t,t))},CubismVector2.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},CubismVector2.prototype.getDistanceWith=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},CubismVector2.prototype.dot=function(t){return this.x*t.x+this.y*t.y},CubismVector2.prototype.normalize=function(){var t=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/t,this.y=this.y/t},CubismVector2.prototype.isEqual=function(t){return this.x==t.x&&this.y==t.y},CubismVector2.prototype.isNotEqual=function(t){return!this.isEqual(t)},t.CubismVector2=CubismVector2}(ut=ut||{});var ct,ht,ft,gt,pt,dt=ut.CubismVector2,mt=(!function(t){function CubismMath(){}CubismMath.range=function(t,e,r){return t<e?t=e:r<t&&(t=r),t},CubismMath.sin=function(t){return Math.sin(t)},CubismMath.cos=function(t){return Math.cos(t)},CubismMath.abs=function(t){return Math.abs(t)},CubismMath.sqrt=function(t){return Math.sqrt(t)},CubismMath.getEasingSine=function(t){return t<0?0:1<t?1:.5-.5*this.cos(t*Math.PI)},CubismMath.max=function(t,e){return e<t?t:e},CubismMath.min=function(t,e){return e<t?e:t},CubismMath.degreesToRadian=function(t){return t/180*Math.PI},CubismMath.radianToDegrees=function(t){return 180*t/Math.PI},CubismMath.directionToRadian=function(t,e){for(var r=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);r<-Math.PI;)r+=2*Math.PI;for(;r>Math.PI;)r-=2*Math.PI;return r},CubismMath.directionToDegrees=function(t,e){var r=this.directionToRadian(t,e),r=this.radianToDegrees(r);return r=0<e.x-t.x?-r:r},CubismMath.radianToDirection=function(t){var e=new dt;return e.x=this.sin(t),e.y=this.cos(t),e},t.CubismMath=CubismMath}(ri=ri||{}),t.csmVector),_t=ri.CubismMath,yt=(!function(t){function ACubismMotion(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new mt}ACubismMotion.delete=function(t){t.release(),t=void 0},ACubismMotion.prototype.release=function(){this._weight=0},ACubismMotion.prototype.updateParameters=function(t,e,r){var i,n,o;e.isAvailable()&&!e.isFinished()&&(e.isStarted()||(e.setIsStarted(!0),e.setStartTime(r-this._offsetSeconds),e.setFadeInStartTime(r),o=this.getDuration(),e.getEndTime()<0&&e.setEndTime(o<=0?-1:e.getStartTime()+o)),o=this._weight,i=0==this._fadeInSeconds?1:_t.getEasingSine((r-e.getFadeInStartTime())/this._fadeInSeconds),n=0==this._fadeOutSeconds||e.getEndTime()<0?1:_t.getEasingSine((e.getEndTime()-r)/this._fadeOutSeconds),e.setState(r,o=o*i*n),aw(0<=o&&o<=1),this.doUpdateParameters(t,r,o,e),0<e.getEndTime()&&e.getEndTime()<r&&e.setIsFinished(!0))},ACubismMotion.prototype.setFadeInTime=function(t){this._fadeInSeconds=t},ACubismMotion.prototype.setFadeOutTime=function(t){this._fadeOutSeconds=t},ACubismMotion.prototype.getFadeOutTime=function(){return this._fadeOutSeconds},ACubismMotion.prototype.getFadeInTime=function(){return this._fadeInSeconds},ACubismMotion.prototype.setWeight=function(t){this._weight=t},ACubismMotion.prototype.getWeight=function(){return this._weight},ACubismMotion.prototype.getDuration=function(){return-1},ACubismMotion.prototype.getLoopDuration=function(){return-1},ACubismMotion.prototype.setOffsetTime=function(t){this._offsetSeconds=t},ACubismMotion.prototype.getFiredEvent=function(t,e){return this._firedEventValues},t.ACubismMotion=ACubismMotion}(ct=ct||{}),ct.ACubismMotion),bt=(!function(t){function CubismMotionQueueEntry(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this}CubismMotionQueueEntry.prototype.release=function(){this._autoDelete&&this._motion&&yt.delete(this._motion)},CubismMotionQueueEntry.prototype.startFadeout=function(t,e){e+=t;(this._endTimeSeconds<0||e<this._endTimeSeconds)&&(this._endTimeSeconds=e)},CubismMotionQueueEntry.prototype.isFinished=function(){return this._finished},CubismMotionQueueEntry.prototype.isStarted=function(){return this._started},CubismMotionQueueEntry.prototype.getStartTime=function(){return this._startTimeSeconds},CubismMotionQueueEntry.prototype.getFadeInStartTime=function(){return this._fadeInStartTimeSeconds},CubismMotionQueueEntry.prototype.getEndTime=function(){return this._endTimeSeconds},CubismMotionQueueEntry.prototype.setStartTime=function(t){this._startTimeSeconds=t},CubismMotionQueueEntry.prototype.setFadeInStartTime=function(t){this._fadeInStartTimeSeconds=t},CubismMotionQueueEntry.prototype.setEndTime=function(t){this._endTimeSeconds=t},CubismMotionQueueEntry.prototype.setIsFinished=function(t){this._finished=t},CubismMotionQueueEntry.prototype.setIsStarted=function(t){this._started=t},CubismMotionQueueEntry.prototype.isAvailable=function(){return this._available},CubismMotionQueueEntry.prototype.setIsAvailable=function(t){this._available=t},CubismMotionQueueEntry.prototype.setState=function(t,e){this._stateTimeSeconds=t,this._stateWeight=e},CubismMotionQueueEntry.prototype.getStateTime=function(){return this._stateTimeSeconds},CubismMotionQueueEntry.prototype.getStateWeight=function(){return this._stateWeight},CubismMotionQueueEntry.prototype.getLastCheckEventTime=function(){return this._lastEventCheckSeconds},CubismMotionQueueEntry.prototype.setLastCheckEventTime=function(t){this._lastEventCheckSeconds=t},t.CubismMotionQueueEntry=CubismMotionQueueEntry}(s=s||{}),t.csmVector),At=s.CubismMotionQueueEntry,o=(!function(o){function CubismMotionQueueManager(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new bt}CubismMotionQueueManager.prototype.release=function(){for(var t=0;t<this._motions.getSize();++t)this._motions.at(t)&&(this._motions.at(t).release(),this._motions.set(t,void 0),this._motions.set(t,null));this._motions=null},CubismMotionQueueManager.prototype.startMotion=function(t,e,r){if(null==t)return o.InvalidMotionQueueEntryHandleValue;for(var i=null,n=0;n<this._motions.getSize();++n)null!=(i=this._motions.at(n))&&i.startFadeout(i._motion.getFadeOutTime(),r);return(i=new At)._autoDelete=e,i._motion=t,this._motions.pushBack(i),i._motionQueueEntryHandle},CubismMotionQueueManager.prototype.isFinished=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();if(null==e)t=this._motions.erase(t);else if(null==e._motion)e.release(),e=null,t=this._motions.erase(t);else{if(!e.isFinished())return!1;t.preIncrement()}}return!0},CubismMotionQueueManager.prototype.isFinishedByHandle=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.increment()){var r=e.ptr();if(null!=r&&(r._motionQueueEntryHandle==t&&!r.isFinished()))return!1}return!0},CubismMotionQueueManager.prototype.stopAllMotions=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();null==e?t=this._motions.erase(t):(e.release(),e=null,t=this._motions.erase(t))}},CubismMotionQueueManager.prototype.getCubismMotionQueueEntry=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.preIncrement()){var r=e.ptr();if(null!=r&&r._motionQueueEntryHandle==t)return r}return null},CubismMotionQueueManager.prototype.setEventCallback=function(t,e){void 0===e&&(e=null),this._eventCallBack=t,this._eventCustomData=e},CubismMotionQueueManager.prototype.doUpdateMotion=function(t,e){for(var r=!1,i=this._motions.begin();i.notEqual(this._motions.end());){var n=i.ptr();if(null==n)i=this._motions.erase(i);else{var o=n._motion;if(null==o)n.release(),n=null,i=this._motions.erase(i);else{o.updateParameters(t,n,e);for(var r=!0,a=o.getFiredEvent(n.getLastCheckEventTime()-n.getStartTime(),e-n.getStartTime()),s=0;s<a.getSize();++s)this._eventCallBack(this,a.at(s),this._eventCustomData);n.setLastCheckEventTime(e),n.isFinished()?(n.release(),n=null,i=this._motions.erase(i)):i.preIncrement()}}}return r},o.CubismMotionQueueManager=CubismMotionQueueManager,o.InvalidMotionQueueEntryHandleValue=-1}(ht=ht||{}),ft=function(t,e){return(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function __(){this.constructor=t}ft(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),a=ht.CubismMotionQueueManager;function CubismMotionManager(){var t=pt.call(this)||this;return t._currentPriority=0,t._reservePriority=0,t}e=gt=gt||{},o(CubismMotionManager,pt=a),CubismMotionManager.prototype.getCurrentPriority=function(){return this._currentPriority},CubismMotionManager.prototype.getReservePriority=function(){return this._reservePriority},CubismMotionManager.prototype.setReservePriority=function(t){this._reservePriority=t},CubismMotionManager.prototype.startMotionPriority=function(t,e,r){return r==this._reservePriority&&(this._reservePriority=0),this._currentPriority=r,pt.prototype.startMotion.call(this,t,e,this._userTimeSeconds)},CubismMotionManager.prototype.updateMotion=function(t,e){this._userTimeSeconds+=e;e=pt.prototype.doUpdateMotion.call(this,t,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),e},CubismMotionManager.prototype.reserveMotion=function(t){return!(t<=this._reservePriority||t<=this._currentPriority)&&(this._reservePriority=t,!0)},e.CubismMotionManager=CubismMotionManager;var Ct,Mt,vt,St,wt=ri.CubismMath,s=(!function(t){function CubismTargetPoint(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}CubismTargetPoint.prototype.update=function(t){this._userTimeSeconds+=t;var e,r,i,n;0==this._lastTimeSeconds?this._lastTimeSeconds=this._userTimeSeconds:(t=30*(this._userTimeSeconds-this._lastTimeSeconds),this._lastTimeSeconds=this._userTimeSeconds,t=4/30*t/4.5,e=this._faceTargetX-this._faceX,r=this._faceTargetY-this._faceY,wt.abs(e)<=.01&&wt.abs(r)<=.01||(n=4/30*e/(e=wt.sqrt(e*e+r*r))-this._faceVX,r=4/30*r/e-this._faceVY,((i=wt.sqrt(n*n+r*r))<-t||t<i)&&(n*=t/i,r*=t/i),this._faceVX+=n,this._faceVY+=r,(i=.5*(wt.sqrt(t*t+16*t*e-8*t*e)-t))<(n=wt.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY))&&(this._faceVX*=i/n,this._faceVY*=i/n),this._faceX+=this._faceVX,this._faceY+=this._faceVY))},CubismTargetPoint.prototype.getX=function(){return this._faceX},CubismTargetPoint.prototype.getY=function(){return this._faceY},CubismTargetPoint.prototype.set=function(t,e){this._faceTargetX=t,this._faceTargetY=e},t.CubismTargetPoint=CubismTargetPoint}(Ct=Ct||{}),Mt=function(t,e){return(Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function __(){this.constructor=t}Mt(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),o=i.CubismMatrix44;function CubismModelMatrix(t,e){var r=St.call(this)||this;return r._width=void 0!==t?t:0,r._height=void 0!==e?e:0,r.setHeight(1),r}a=vt=vt||{},s(CubismModelMatrix,St=o),CubismModelMatrix.prototype.setWidth=function(t){t/=this._width;this.scale(t,t)},CubismModelMatrix.prototype.setHeight=function(t){t/=this._height;this.scale(t,t)},CubismModelMatrix.prototype.setPosition=function(t,e){this.translate(t,e)},CubismModelMatrix.prototype.setCenterPosition=function(t,e){this.centerX(t),this.centerY(e)},CubismModelMatrix.prototype.top=function(t){this.setY(t)},CubismModelMatrix.prototype.bottom=function(t){var e=this._height*this.getScaleY();this.translateY(t-e)},CubismModelMatrix.prototype.left=function(t){this.setX(t)},CubismModelMatrix.prototype.right=function(t){var e=this._width*this.getScaleX();this.translateX(t-e)},CubismModelMatrix.prototype.centerX=function(t){var e=this._width*this.getScaleX();this.translateX(t-e/2)},CubismModelMatrix.prototype.setX=function(t){this.translateX(t)},CubismModelMatrix.prototype.centerY=function(t){var e=this._height*this.getScaleY();this.translateY(t-e/2)},CubismModelMatrix.prototype.setY=function(t){this.translateY(t)},CubismModelMatrix.prototype.setupFromLayout=function(t){for(var e=t.begin();e.notEqual(t.end());e.preIncrement()){var r=e.ptr().first,i=e.ptr().second;"width"==r?this.setWidth(i):"height"==r&&this.setHeight(i)}for(e=t.begin();e.notEqual(t.end());e.preIncrement()){r=e.ptr().first,i=e.ptr().second;"x"==r?this.setX(i):"y"==r?this.setY(i):"center_x"==r?this.centerX(i):"center_y"==r?this.centerY(i):"top"==r?this.top(i):"bottom"==r?this.bottom(i):"left"==r?this.left(i):"right"==r&&this.right(i)}},a.CubismModelMatrix=CubismModelMatrix;var xt,Bt,Pt,It,Vt,u=A(0),Et=n.CubismFramework,kt=X.CubismBlendMode,Tt=t.csmVector,Rt=E.csmMap,Lt=(!function(t){function CubismModel(t){this._model=t,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new Tt,this._parameterIds=new Tt,this._drawableIds=new Tt,this._partIds=new Tt,this._notExistPartId=new Rt,this._notExistParameterId=new Rt,this._notExistParameterValues=new Rt,this._notExistPartOpacities=new Rt}CubismModel.prototype.update=function(){this._model.update(),this._model.drawables.resetDynamicFlags()},CubismModel.prototype.getCanvasWidth=function(){return null==this._model?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit},CubismModel.prototype.getCanvasHeight=function(){return null==this._model?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit},CubismModel.prototype.saveParameters=function(){for(var t=this._model.parameters.count,e=this._savedParameters.getSize(),r=0;r<t;++r)r<e?this._savedParameters.set(r,this._parameterValues[r]):this._savedParameters.pushBack(this._parameterValues[r])},CubismModel.prototype.getModel=function(){return this._model},CubismModel.prototype.getPartIndex=function(t){for(var e=this._model.parts.count,r=0;r<e;++r)if(t==this._partIds.at(r))return r;return this._notExistPartId.isExist(t)?this._notExistPartId.getValue(t):(r=e+this._notExistPartId.getSize(),this._notExistPartId.setValue(t,r),this._notExistPartOpacities.appendKey(r),r)},CubismModel.prototype.getPartCount=function(){return this._model.parts.count},CubismModel.prototype.setPartOpacityByIndex=function(t,e){this._notExistPartOpacities.isExist(t)?this._notExistPartOpacities.setValue(t,e):(aw(0<=t&&t<this.getPartCount()),this._partOpacities[t]=e)},CubismModel.prototype.setPartOpacityById=function(t,e){t=this.getPartIndex(t);t<0||this.setPartOpacityByIndex(t,e)},CubismModel.prototype.getPartOpacityByIndex=function(t){return this._notExistPartOpacities.isExist(t)?this._notExistPartOpacities.getValue(t):(aw(0<=t&&t<this.getPartCount()),this._partOpacities[t])},CubismModel.prototype.getPartOpacityById=function(t){t=this.getPartIndex(t);return t<0?0:this.getPartOpacityByIndex(t)},CubismModel.prototype.getParameterIndex=function(t){for(var e=this._model.parameters.count,r=0;r<e;++r)if(t==this._parameterIds.at(r))return r;return this._notExistParameterId.isExist(t)?this._notExistParameterId.getValue(t):(r=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(t,r),this._notExistParameterValues.appendKey(r),r)},CubismModel.prototype.getParameterCount=function(){return this._model.parameters.count},CubismModel.prototype.getParameterMaximumValue=function(t){return this._model.parameters.maximumValues[t]},CubismModel.prototype.getParameterMinimumValue=function(t){return this._model.parameters.minimumValues[t]},CubismModel.prototype.getParameterDefaultValue=function(t){return this._model.parameters.defaultValues[t]},CubismModel.prototype.getParameterValueByIndex=function(t){return this._notExistParameterValues.isExist(t)?this._notExistParameterValues.getValue(t):(aw(0<=t&&t<this.getParameterCount()),this._parameterValues[t])},CubismModel.prototype.getParameterValueById=function(t){t=this.getParameterIndex(t);return this.getParameterValueByIndex(t)},CubismModel.prototype.setParameterValueByIndex=function(t,e,r){void 0===r&&(r=1),this._notExistParameterValues.isExist(t)?this._notExistParameterValues.setValue(t,1==r?e:this._notExistParameterValues.getValue(t)*(1-r)+e*r):(aw(0<=t&&t<this.getParameterCount()),this._model.parameters.maximumValues[t]<e&&(e=this._model.parameters.maximumValues[t]),this._model.parameters.minimumValues[t]>e&&(e=this._model.parameters.minimumValues[t]),this._parameterValues[t]=1==r?e:this._parameterValues[t]=this._parameterValues[t]*(1-r)+e*r)},CubismModel.prototype.setParameterValueById=function(t,e,r){void 0===r&&(r=1);t=this.getParameterIndex(t);this.setParameterValueByIndex(t,e,r)},CubismModel.prototype.addParameterValueByIndex=function(t,e,r){void 0===r&&(r=1),this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)+e*r)},CubismModel.prototype.addParameterValueById=function(t,e,r){void 0===r&&(r=1);t=this.getParameterIndex(t);this.addParameterValueByIndex(t,e,r)},CubismModel.prototype.multiplyParameterValueById=function(t,e,r){void 0===r&&(r=1);t=this.getParameterIndex(t);this.multiplyParameterValueByIndex(t,e,r)},CubismModel.prototype.multiplyParameterValueByIndex=function(t,e,r){void 0===r&&(r=1),this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)*(1+(e-1)*r))},CubismModel.prototype.getDrawableIndex=function(t){for(var e=this._model.drawables.count,r=0;r<e;++r)if(this._drawableIds.at(r)==t)return r;return-1},CubismModel.prototype.getDrawableCount=function(){return this._model.drawables.count},CubismModel.prototype.getDrawableId=function(t){var e=this._model.drawables.ids;return Et.getIdManager().getId(e[t])},CubismModel.prototype.getDrawableRenderOrders=function(){return this._model.drawables.renderOrders},CubismModel.prototype.getDrawableTextureIndices=function(t){return this._model.drawables.textureIndices[t]},CubismModel.prototype.getDrawableDynamicFlagVertexPositionsDidChange=function(t){var e=this._model.drawables.dynamicFlags;return u.Utils.hasVertexPositionsDidChangeBit(e[t])},CubismModel.prototype.getDrawableVertexIndexCount=function(t){return this._model.drawables.indexCounts[t]},CubismModel.prototype.getDrawableVertexCount=function(t){return this._model.drawables.vertexCounts[t]},CubismModel.prototype.getDrawableVertices=function(t){return this.getDrawableVertexPositions(t)},CubismModel.prototype.getDrawableVertexIndices=function(t){return this._model.drawables.indices[t]},CubismModel.prototype.getDrawableVertexPositions=function(t){return this._model.drawables.vertexPositions[t]},CubismModel.prototype.getDrawableVertexUvs=function(t){return this._model.drawables.vertexUvs[t]},CubismModel.prototype.getDrawableOpacity=function(t){return this._model.drawables.opacities[t]},CubismModel.prototype.getDrawableCulling=function(t){var e=this._model.drawables.constantFlags;return!u.Utils.hasIsDoubleSidedBit(e[t])},CubismModel.prototype.getDrawableBlendMode=function(t){var e=this._model.drawables.constantFlags;return u.Utils.hasBlendAdditiveBit(e[t])?kt.CubismBlendMode_Additive:u.Utils.hasBlendMultiplicativeBit(e[t])?kt.CubismBlendMode_Multiplicative:kt.CubismBlendMode_Normal},CubismModel.prototype.getDrawableInvertedMaskBit=function(t){var e=this._model.drawables.constantFlags;return u.Utils.hasIsInvertedMaskBit(e[t])},CubismModel.prototype.getDrawableMasks=function(){return this._model.drawables.masks},CubismModel.prototype.getDrawableMaskCounts=function(){return this._model.drawables.maskCounts},CubismModel.prototype.isUsingMasking=function(){for(var t=0;t<this._model.drawables.count;++t)if(!(this._model.drawables.maskCounts[t]<=0))return!0;return!1},CubismModel.prototype.getDrawableDynamicFlagIsVisible=function(t){var e=this._model.drawables.dynamicFlags;return u.Utils.hasIsVisibleBit(e[t])},CubismModel.prototype.getDrawableDynamicFlagVisibilityDidChange=function(t){var e=this._model.drawables.dynamicFlags;return u.Utils.hasVisibilityDidChangeBit(e[t])},CubismModel.prototype.getDrawableDynamicFlagOpacityDidChange=function(t){var e=this._model.drawables.dynamicFlags;return u.Utils.hasOpacityDidChangeBit(e[t])},CubismModel.prototype.getDrawableDynamicFlagRenderOrderDidChange=function(t){var e=this._model.drawables.dynamicFlags;return u.Utils.hasRenderOrderDidChangeBit(e[t])},CubismModel.prototype.loadParameters=function(){var t=this._model.parameters.count,e=this._savedParameters.getSize();e<t&&(t=e);for(var r=0;r<t;++r)this._parameterValues[r]=this._savedParameters.at(r)},CubismModel.prototype.initialize=function(){aw(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;var t=this._model.parameters.ids,e=this._model.parameters.count;this._parameterIds.prepareCapacity(e);for(var r=0;r<e;++r)this._parameterIds.pushBack(Et.getIdManager().getId(t[r]));var i=this._model.parts.ids,n=this._model.parts.count;this._partIds.prepareCapacity(n);for(r=0;r<n;++r)this._partIds.pushBack(Et.getIdManager().getId(i[r]));var o=this._model.drawables.ids,a=this._model.drawables.count;this._drawableIds.prepareCapacity(a);for(r=0;r<a;++r)this._drawableIds.pushBack(Et.getIdManager().getId(o[r]))},CubismModel.prototype.release=function(){this._model.release(),this._model=null},t.CubismModel=CubismModel}(oe=oe||{}),A(0)),Ft=oe.CubismModel,Dt=(!function(t){function CubismMoc(t){this._moc=t,this._modelCount=0}CubismMoc.create=function(t){var e=null,t=Lt.Moc.fromArrayBuffer(t);return e=t?new CubismMoc(t):e},CubismMoc.delete=function(t){t._moc._release(),t._moc=null},CubismMoc.prototype.createModel=function(){var t=null,e=Lt.Model.fromMoc(this._moc);return e&&((t=new Ft(e)).initialize(),++this._modelCount),t},CubismMoc.prototype.deleteModel=function(t){null!=t&&(t.release(),t=null,--this._modelCount)},CubismMoc.prototype.release=function(){aw(0==this._modelCount),this._moc._release(),this._moc=null},t.CubismMoc=CubismMoc}(xt=xt||{}),cr.csmString),Ut=n.CubismFramework,Nt=r.CubismJson,Ot=(!function(t){var e="Meta",r="Curves",i="FadeInTime",n="FadeOutTime",o="Segments",a="UserData";function CubismMotionJson(t,e){this._json=Nt.create(t,e)}CubismMotionJson.prototype.release=function(){Nt.delete(this._json)},CubismMotionJson.prototype.getMotionDuration=function(){return this._json.getRoot().getValueByString(e).getValueByString("Duration").toFloat()},CubismMotionJson.prototype.isMotionLoop=function(){return this._json.getRoot().getValueByString(e).getValueByString("Loop").toBoolean()},CubismMotionJson.prototype.getMotionCurveCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("CurveCount").toInt()},CubismMotionJson.prototype.getMotionFps=function(){return this._json.getRoot().getValueByString(e).getValueByString("Fps").toFloat()},CubismMotionJson.prototype.getMotionTotalSegmentCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalSegmentCount").toInt()},CubismMotionJson.prototype.getMotionTotalPointCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalPointCount").toInt()},CubismMotionJson.prototype.isExistMotionFadeInTime=function(){return!this._json.getRoot().getValueByString(e).getValueByString(i).isNull()},CubismMotionJson.prototype.isExistMotionFadeOutTime=function(){return!this._json.getRoot().getValueByString(e).getValueByString(n).isNull()},CubismMotionJson.prototype.getMotionFadeInTime=function(){return this._json.getRoot().getValueByString(e).getValueByString(i).toFloat()},CubismMotionJson.prototype.getMotionFadeOutTime=function(){return this._json.getRoot().getValueByString(e).getValueByString(n).toFloat()},CubismMotionJson.prototype.getMotionCurveTarget=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Target").getRawString()},CubismMotionJson.prototype.getMotionCurveId=function(t){return Ut.getIdManager().getId(this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Id").getRawString())},CubismMotionJson.prototype.isExistMotionCurveFadeInTime=function(t){return!this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(i).isNull()},CubismMotionJson.prototype.isExistMotionCurveFadeOutTime=function(t){return!this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(n).isNull()},CubismMotionJson.prototype.getMotionCurveFadeInTime=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(i).toFloat()},CubismMotionJson.prototype.getMotionCurveFadeOutTime=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(n).toFloat()},CubismMotionJson.prototype.getMotionCurveSegmentCount=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(o).getVector().getSize()},CubismMotionJson.prototype.getMotionCurveSegment=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(o).getValueByIndex(e).toFloat()},CubismMotionJson.prototype.getEventCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("UserDataCount").toInt()},CubismMotionJson.prototype.getTotalEventValueSize=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalUserDataSize").toInt()},CubismMotionJson.prototype.getEventTime=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString("Time").toInt()},CubismMotionJson.prototype.getEventValue=function(t){return new Dt(this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString("Value").getRawString())},t.CubismMotionJson=CubismMotionJson}(g=g||{}),t.csmVector),o=(e=p=p||{},(s=Bt=e.CubismMotionCurveTarget||(e.CubismMotionCurveTarget={}))[s.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",s[s.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",s[s.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",(s=e.CubismMotionSegmentType||(e.CubismMotionSegmentType={}))[s.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",s[s.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",s[s.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",s[s.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",s=function CubismMotionPoint(){this.time=0,this.value=0},e.CubismMotionPoint=s,s=function CubismMotionSegment(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0},e.CubismMotionSegment=s,s=function CubismMotionCurve(){this.type=Bt.CubismMotionCurveTarget_Model,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0},e.CubismMotionCurve=s,s=function CubismMotionEvent(){this.fireTime=0},e.CubismMotionEvent=s,s=function CubismMotionData(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new Ot,this.segments=new Ot,this.points=new Ot,this.events=new Ot},e.CubismMotionData=s,Pt=function(t,e){return(Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function __(){this.constructor=t}Pt(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),Xt=cr.csmString,Yt=p.CubismMotionData,zt=p.CubismMotionSegment,Gt=p.CubismMotionPoint,Jt=p.CubismMotionEvent,jt=p.CubismMotionSegmentType,Wt=p.CubismMotionCurve,Ht=p.CubismMotionCurveTarget,Qt=ri.CubismMath,qt=n.CubismFramework,a=ct.ACubismMotion,Zt=g.CubismMotionJson;function lerpPoints(t,e,r){var i=new Gt;return i.time=t.time+(e.time-t.time)*r,i.value=t.value+(e.value-t.value)*r,i}function linearEvaluate(t,e){e=(e-t[0].time)/(t[1].time-t[0].time);return t[0].value+(t[1].value-t[0].value)*(e=e<0?0:e)}function bezierEvaluate(t,e){var e=(e-t[0].time)/(t[3].time-t[0].time),r=lerpPoints(t[0],t[1],e=e<0?0:e),i=lerpPoints(t[1],t[2],e),t=lerpPoints(t[2],t[3],e),r=lerpPoints(r,i,e),i=lerpPoints(i,t,e);return lerpPoints(r,i,e).value}function steppedEvaluate(t,e){return t[0].value}function inverseSteppedEvaluate(t,e){return t[1].value}function evaluateCurve(t,e,r){for(var e=t.curves.at(e),i=-1,n=e.baseSegmentIndex+e.segmentCount,o=0,a=e.baseSegmentIndex;a<n;++a)if(o=t.segments.at(a).basePointIndex+(t.segments.at(a).segmentType==jt.CubismMotionSegmentType_Bezier?3:1),t.points.at(o).time>r){i=a;break}if(-1==i)return t.points.at(o).value;e=t.segments.at(i);return e.evaluate(t.points.get(e.basePointIndex),r)}function CubismMotion(){var t=Vt.call(this)||this;return t._sourceFrameRate=30,t._loopDurationSeconds=-1,t._isLoop=!1,t._isLoopFadeIn=!0,t._lastWeight=0,t._motionData=null,t._modelCurveIdEyeBlink=null,t._modelCurveIdLipSync=null,t._eyeBlinkParameterIds=null,t._lipSyncParameterIds=null,t}A=It=It||{},o(CubismMotion,Vt=a),CubismMotion.create=function(t,e){var r=new CubismMotion;return r.parse(t,e),r._sourceFrameRate=r._motionData.fps,r._loopDurationSeconds=r._motionData.duration,r},CubismMotion.prototype.doUpdateParameters=function(t,e,r,i){null==this._modelCurveIdEyeBlink&&(this._modelCurveIdEyeBlink=qt.getIdManager().getId("EyeBlink")),null==this._modelCurveIdLipSync&&(this._modelCurveIdLipSync=qt.getIdManager().getId("LipSync"));var n,o=e-i.getStartTime(),a=(o<0&&(o=0),Number.MAX_VALUE),s=Number.MAX_VALUE,u=0,l=0,c=(64<this._eyeBlinkParameterIds.getSize()&&T("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),64<this._lipSyncParameterIds.getSize()&&T("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize()),this._fadeInSeconds<=0?1:Qt.getEasingSine((e-i.getFadeInStartTime())/this._fadeInSeconds)),h=this._fadeOutSeconds<=0||i.getEndTime()<0?1:Qt.getEasingSine((i.getEndTime()-e)/this._fadeOutSeconds),f=o;if(this._isLoop)for(;f>this._motionData.duration;)f-=this._motionData.duration;for(var g=this._motionData.curves,p=0;p<this._motionData.curveCount&&g.at(p).type==Ht.CubismMotionCurveTarget_Model;++p)m=evaluateCurve(this._motionData,p,f),g.at(p).id==this._modelCurveIdEyeBlink?s=m:g.at(p).id==this._modelCurveIdLipSync&&(a=m);for(;p<this._motionData.curveCount&&g.at(p).type==Ht.CubismMotionCurveTarget_Parameter;++p)if(-1!=(n=t.getParameterIndex(g.at(p).id))){var d=t.getParameterValueByIndex(n),m=evaluateCurve(this._motionData,p,f);if(s!=Number.MAX_VALUE)for(var _=0;_<this._eyeBlinkParameterIds.getSize()&&_<64;++_)if(this._eyeBlinkParameterIds.at(_)==g.at(p).id){m*=s,l|=1<<_;break}if(a!=Number.MAX_VALUE)for(_=0;_<this._lipSyncParameterIds.getSize()&&_<64;++_)if(this._lipSyncParameterIds.at(_)==g.at(p).id){m+=a,u|=1<<_;break}var y,b,A=void 0;A=g.at(p).fadeInTime<0&&g.at(p).fadeOutTime<0?d+(m-d)*r:(b=y=void 0,y=g.at(p).fadeInTime<0?c:0==g.at(p).fadeInTime?1:Qt.getEasingSine((e-i.getFadeInStartTime())/g.at(p).fadeInTime),b=g.at(p).fadeOutTime<0?h:0==g.at(p).fadeOutTime||i.getEndTime()<0?1:Qt.getEasingSine((i.getEndTime()-e)/g.at(p).fadeOutTime),d+(m-d)*(this._weight*y*b)),t.setParameterValueByIndex(n,A,1)}if(s!=Number.MAX_VALUE)for(_=0;_<this._eyeBlinkParameterIds.getSize()&&_<64;++_){d=t.getParameterValueById(this._eyeBlinkParameterIds.at(_));l>>_&1||(A=d+(s-d)*r,t.setParameterValueById(this._eyeBlinkParameterIds.at(_),A))}if(a!=Number.MAX_VALUE)for(_=0;_<this._lipSyncParameterIds.getSize()&&_<64;++_){d=t.getParameterValueById(this._lipSyncParameterIds.at(_));u>>_&1||(A=d+(a-d)*r,t.setParameterValueById(this._lipSyncParameterIds.at(_),A))}for(;p<this._motionData.curveCount&&g.at(p).type==Ht.CubismMotionCurveTarget_PartOpacity;++p)-1!=(n=t.getParameterIndex(g.at(p).id))&&(m=evaluateCurve(this._motionData,p,f),t.setParameterValueByIndex(n,m));o>=this._motionData.duration&&(this._isLoop?(i.setStartTime(e),this._isLoopFadeIn&&i.setFadeInStartTime(e)):i.setIsFinished(!0)),this._lastWeight=r},CubismMotion.prototype.setIsLoop=function(t){this._isLoop=t},CubismMotion.prototype.isLoop=function(){return this._isLoop},CubismMotion.prototype.setIsLoopFadeIn=function(t){this._isLoopFadeIn=t},CubismMotion.prototype.isLoopFadeIn=function(){return this._isLoopFadeIn},CubismMotion.prototype.getDuration=function(){return this._isLoop?-1:this._loopDurationSeconds},CubismMotion.prototype.getLoopDuration=function(){return this._loopDurationSeconds},CubismMotion.prototype.setParameterFadeInTime=function(t,e){for(var r=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(t==r.at(i).id)return void(r.at(i).fadeInTime=e)},CubismMotion.prototype.setParameterFadeOutTime=function(t,e){for(var r=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(t==r.at(i).id)return void(r.at(i).fadeOutTime=e)},CubismMotion.prototype.getParameterFadeInTime=function(t){for(var e=this._motionData.curves,r=0;r<this._motionData.curveCount;++r)if(t==e.at(r).id)return e.at(r).fadeInTime;return-1},CubismMotion.prototype.getParameterFadeOutTime=function(t){for(var e=this._motionData.curves,r=0;r<this._motionData.curveCount;++r)if(t==e.at(r).id)return e.at(r).fadeOutTime;return-1},CubismMotion.prototype.setEffectIds=function(t,e){this._eyeBlinkParameterIds=t,this._lipSyncParameterIds=e},CubismMotion.prototype.release=function(){this._motionData=void 0,this._motionData=null},CubismMotion.prototype.parse=function(t,e){this._motionData=new Yt;for(var r=new Zt(t,e),i=(this._motionData.duration=r.getMotionDuration(),this._motionData.loop=r.isMotionLoop(),this._motionData.curveCount=r.getMotionCurveCount(),this._motionData.fps=r.getMotionFps(),this._motionData.eventCount=r.getEventCount(),r.isExistMotionFadeInTime()?this._fadeInSeconds=r.getMotionFadeInTime()<0?1:r.getMotionFadeInTime():this._fadeInSeconds=1,r.isExistMotionFadeOutTime()?this._fadeOutSeconds=r.getMotionFadeOutTime()<0?1:r.getMotionFadeOutTime():this._fadeOutSeconds=1,0),n=0,o=0;o<this._motionData.curveCount;++o){var a=new Wt;"Model"==r.getMotionCurveTarget(o)?a.type=Ht.CubismMotionCurveTarget_Model:"Parameter"==r.getMotionCurveTarget(o)?a.type=Ht.CubismMotionCurveTarget_Parameter:"PartOpacity"==r.getMotionCurveTarget(o)&&(a.type=Ht.CubismMotionCurveTarget_PartOpacity),a.id=r.getMotionCurveId(o),a.baseSegmentIndex=n,a.fadeInTime=r.isExistMotionCurveFadeInTime(o)?r.getMotionCurveFadeInTime(o):-1,a.fadeOutTime=r.isExistMotionCurveFadeOutTime(o)?r.getMotionCurveFadeOutTime(o):-1;for(var s=0;s<r.getMotionCurveSegmentCount(o);){var u=new zt;switch(0==s?(l=new Gt,u.basePointIndex=i,l.time=r.getMotionCurveSegment(o,s),l.value=r.getMotionCurveSegment(o,s+1),this._motionData.points.pushBack(l),i+=1,s+=2):u.basePointIndex=i-1,r.getMotionCurveSegment(o,s)){case jt.CubismMotionSegmentType_Linear:var l=new Gt;u.segmentType=jt.CubismMotionSegmentType_Linear,u.evaluate=linearEvaluate,l.time=r.getMotionCurveSegment(o,s+1),l.value=r.getMotionCurveSegment(o,s+2),this._motionData.points.pushBack(l),i+=1,s+=3;break;case jt.CubismMotionSegmentType_Bezier:l=void 0;u.segmentType=jt.CubismMotionSegmentType_Bezier,u.evaluate=bezierEvaluate,(l=new Gt).time=r.getMotionCurveSegment(o,s+1),l.value=r.getMotionCurveSegment(o,s+2),this._motionData.points.pushBack(l),(l=new Gt).time=r.getMotionCurveSegment(o,s+3),l.value=r.getMotionCurveSegment(o,s+4),this._motionData.points.pushBack(l),(l=new Gt).time=r.getMotionCurveSegment(o,s+5),l.value=r.getMotionCurveSegment(o,s+6),this._motionData.points.pushBack(l),i+=3,s+=7;break;case jt.CubismMotionSegmentType_Stepped:l=new Gt;u.segmentType=jt.CubismMotionSegmentType_Stepped,u.evaluate=steppedEvaluate,l.time=r.getMotionCurveSegment(o,s+1),l.value=r.getMotionCurveSegment(o,s+2),this._motionData.points.pushBack(l),i+=1,s+=3;break;case jt.CubismMotionSegmentType_InverseStepped:l=new Gt;u.segmentType=jt.CubismMotionSegmentType_InverseStepped,u.evaluate=inverseSteppedEvaluate,l.time=r.getMotionCurveSegment(o,s+1),l.value=r.getMotionCurveSegment(o,s+2),this._motionData.points.pushBack(l),i+=1,s+=3;break;default:aw(0)}++a.segmentCount,++n,this._motionData.segments.pushBack(u)}this._motionData.curves.pushBack(a)}for(var c=0;c<r.getEventCount();++c){var h=new Jt;h.fireTime=r.getEventTime(c),h.value=r.getEventValue(c),this._motionData.events.pushBack(h)}r.release(),r=void 0},CubismMotion.prototype.getFiredEvent=function(t,e){this._firedEventValues.updateSize(0);for(var r=0;r<this._motionData.eventCount;++r)this._motionData.events.at(r).fireTime>t&&this._motionData.events.at(r).fireTime<=e&&this._firedEventValues.pushBack(new Xt(this._motionData.events.at(r).value.s));return this._firedEventValues},A.CubismMotion=CubismMotion;Kt=function(t,e){return(Kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Kt,$t,te,ee,re,ie,ne,oe=function(t,e){function __(){this.constructor=t}Kt(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},ae=t.csmVector,se=n.CubismFramework,ue=r.CubismJson,e=ct.ACubismMotion;function CubismExpressionMotion(){var t=te.call(this)||this;return t._parameters=new ae,t}s=$t=$t||{},re="Parameters",ie="Blend",oe(CubismExpressionMotion,te=e),CubismExpressionMotion.create=function(t,e){var r=new CubismExpressionMotion,t=ue.create(t,e),i=t.getRoot(),n=(r.setFadeInTime(i.getValueByString("FadeInTime").toFloat(1)),r.setFadeOutTime(i.getValueByString("FadeOutTime").toFloat(1)),i.getValueByString(re).getSize());r._parameters.prepareCapacity(n);for(var o=0;o<n;++o){var a=i.getValueByString(re).getValueByIndex(o),s=se.getIdManager().getId(a.getValueByString("Id").getRawString()),u=a.getValueByString("Value").toFloat(),l=void 0,l=a.getValueByString(ie).isNull()||"Add"==a.getValueByString(ie).getString()?ee.ExpressionBlendType_Add:"Multiply"==a.getValueByString(ie).getString()?ee.ExpressionBlendType_Multiply:"Overwrite"==a.getValueByString(ie).getString()?ee.ExpressionBlendType_Overwrite:ee.ExpressionBlendType_Add,a=new ne;a.parameterId=s,a.blendType=l,a.value=u,r._parameters.pushBack(a)}return ue.delete(t),r},CubismExpressionMotion.prototype.doUpdateParameters=function(t,e,r,i){for(var n=0;n<this._parameters.getSize();++n){var o=this._parameters.at(n);switch(o.blendType){case ee.ExpressionBlendType_Add:t.addParameterValueById(o.parameterId,o.value,r);break;case ee.ExpressionBlendType_Multiply:t.multiplyParameterValueById(o.parameterId,o.value,r);break;case ee.ExpressionBlendType_Overwrite:t.setParameterValueById(o.parameterId,o.value,r)}}},p=CubismExpressionMotion,s.CubismExpressionMotion=p,(p=ee=s.ExpressionBlendType||(s.ExpressionBlendType={}))[p.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",p[p.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",p[p.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",ne=function ExpressionParameter(){},s.ExpressionParameter=ne;var le,ce,he,fe=t.csmVector,ge=n.CubismFramework,pe=r.CubismJson,de=(!function(t){var y="FadeInTime";function CubismPose(){this._fadeTimeSeconds=.5,this._lastModel=null,this._partGroups=new fe,this._partGroupCounts=new fe}CubismPose.create=function(t,e){for(var r=new CubismPose,t=pe.create(t,e),e=t.getRoot(),i=(e.getValueByString(y).isNull()||(r._fadeTimeSeconds=e.getValueByString(y).toFloat(.5),r._fadeTimeSeconds<=0&&(r._fadeTimeSeconds=.5)),e.getValueByString("Groups")),n=i.getSize(),o=0;o<n;++o){for(var a=i.getValueByIndex(o),s=a.getSize(),u=0,l=0;l<s;++l){var c=a.getValueByIndex(l),h=new b,f=ge.getIdManager().getId(c.getValueByString("Id").getRawString());if(h.partId=f,!c.getValueByString("Link").isNull())for(var g=c.getValueByString("Link"),p=g.getSize(),d=0;d<p;++d){var m=new b,_=ge.getIdManager().getId(g.getValueByIndex(d).getString());m.partId=_,h.link.pushBack(m)}r._partGroups.pushBack(h.clone()),++u}r._partGroupCounts.pushBack(u)}return pe.delete(t),r},CubismPose.delete=function(t){},CubismPose.prototype.updateParameters=function(t,e){t!=this._lastModel&&this.reset(t),this._lastModel=t,e<0&&(e=0);for(var r=0,i=0;i<this._partGroupCounts.getSize();i++){var n=this._partGroupCounts.at(i);this.doFade(t,e,r,n),r+=n}this.copyPartOpacities(t)},CubismPose.prototype.reset=function(t){for(var e=0,r=0;r<this._partGroupCounts.getSize();++r){for(var i=this._partGroupCounts.at(r),n=e;n<e+i;++n){this._partGroups.at(n).initialize(t);var o=this._partGroups.at(n).partIndex,a=this._partGroups.at(n).parameterIndex;if(!(o<0)){t.setPartOpacityByIndex(o,n==e?1:0),t.setParameterValueByIndex(a,n==e?1:0);for(var s=0;s<this._partGroups.at(n).link.getSize();++s)this._partGroups.at(n).link.at(s).initialize(t)}}e+=i}},CubismPose.prototype.copyPartOpacities=function(t){for(var e=0;e<this._partGroups.getSize();++e){var r=this._partGroups.at(e);if(0!=r.link.getSize())for(var i=this._partGroups.at(e).partIndex,n=t.getPartOpacityByIndex(i),o=0;o<r.link.getSize();++o){var a=r.link.at(o).partIndex;a<0||t.setPartOpacityByIndex(a,n)}}},CubismPose.prototype.doFade=function(t,e,r,i){for(var n=-1,o=1,a=r;a<r+i;++a){var s=this._partGroups.at(a).partIndex,u=this._partGroups.at(a).parameterIndex;if(.001<t.getParameterValueByIndex(u)){if(0<=n)break;n=a,o=t.getPartOpacityByIndex(s),1<(o+=e/this._fadeTimeSeconds)&&(o=1)}}n<0&&(n=0,o=1);for(a=r;a<r+i;++a){var l,c,h=this._partGroups.at(a).partIndex;n==a?t.setPartOpacityByIndex(h,o):(c=void 0,(c=.15<(1-(c=o<.5?-.5*o/.5+1:.5*(1-o)/.5))*(1-o)?1-.15/(1-o):c)<(l=t.getPartOpacityByIndex(h))&&(l=c),t.setPartOpacityByIndex(h,l))}},t.CubismPose=CubismPose;PartData.prototype.assignment=function(t){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement())this.link.pushBack(e.ptr().clone());return this},PartData.prototype.initialize=function(t){this.parameterIndex=t.getParameterIndex(this.partId),this.partIndex=t.getPartIndex(this.partId),t.setParameterValueByIndex(this.parameterIndex,1)},PartData.prototype.clone=function(){var t=new PartData;t.partId=this.partId,t.parameterIndex=this.parameterIndex,t.partIndex=this.partIndex,t.link=new fe;for(var e=this.link.begin();e.notEqual(this.link.end());e.increment())t.link.pushBack(e.ptr().clone());return t};var b=PartData;function PartData(t){if(this.parameterIndex=0,this.partIndex=0,this.link=new fe,null!=t){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement())this.link.pushBack(e.ptr().clone())}}t.PartData=b}(le=le||{}),n.CubismFramework),me=r.CubismJson,_e=(!function(t){var e="UserData";function CubismModelUserDataJson(t,e){this._json=me.create(t,e)}CubismModelUserDataJson.prototype.release=function(){me.delete(this._json)},CubismModelUserDataJson.prototype.getUserDataCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("UserDataCount").toInt()},CubismModelUserDataJson.prototype.getTotalUserDataSize=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalUserDataSize").toInt()},CubismModelUserDataJson.prototype.getUserDataTargetType=function(t){return this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString("Target").getRawString()},CubismModelUserDataJson.prototype.getUserDataId=function(t){return de.getIdManager().getId(this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString("Id").getRawString())},CubismModelUserDataJson.prototype.getUserDataValue=function(t){return this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString("Value").getRawString()},t.CubismModelUserDataJson=CubismModelUserDataJson}(f=f||{}),n.CubismFramework),ye=t.csmVector,be=cr.csmString,Ae=f.CubismModelUserDataJson;function CubismModelUserData(){this._userDataNodes=new ye,this._artMeshUserDataNode=new ye}g=ce=ce||{},he=function CubismModelUserDataNode(){},g.CubismModelUserDataNode=he,CubismModelUserData.create=function(t,e){var r=new CubismModelUserData;return r.parseUserData(t,e),r},CubismModelUserData.delete=function(t){null!=t&&t.release()},CubismModelUserData.prototype.getArtMeshUserDatas=function(){return this._artMeshUserDataNode},CubismModelUserData.prototype.parseUserData=function(t,e){for(var r=new Ae(t,e),i=_e.getIdManager().getId("ArtMesh"),n=r.getUserDataCount(),o=0;o<n;o++){var a=new he;a.targetId=r.getUserDataId(o),a.targetType=_e.getIdManager().getId(r.getUserDataTargetType(o)),a.value=new be(r.getUserDataValue(o)),this._userDataNodes.pushBack(a),a.targetType==i&&this._artMeshUserDataNode.pushBack(a)}r.release()},CubismModelUserData.prototype.release=function(){for(var t=0;t<this._userDataNodes.getSize();++t)this._userDataNodes.set(t,null);this._userDataNodes=null},g.CubismModelUserData=CubismModelUserData;var Ce,Me,ve,Se,we,xe,Be,Pe,Ie=t.csmVector,l=ut.CubismVector2,Ve=(o=_=_||{},(a=o.CubismPhysicsTargetType||(o.CubismPhysicsTargetType={}))[a.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",(a=o.CubismPhysicsSource||(o.CubismPhysicsSource={}))[a.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",a[a.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",a[a.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",a=function PhysicsJsonEffectiveForces(){this.gravity=new l(0,0),this.wind=new l(0,0)},o.PhysicsJsonEffectiveForces=a,Ce=function CubismPhysicsParameter(){},o.CubismPhysicsParameter=Ce,Me=function CubismPhysicsNormalization(){},o.CubismPhysicsNormalization=Me,a=function CubismPhysicsParticle(){this.initialPosition=new l(0,0),this.position=new l(0,0),this.lastPosition=new l(0,0),this.lastGravity=new l(0,0),this.force=new l(0,0),this.velocity=new l(0,0)},o.CubismPhysicsParticle=a,a=function CubismPhysicsSubRig(){this.normalizationPosition=new Me,this.normalizationAngle=new Me},o.CubismPhysicsSubRig=a,a=function CubismPhysicsInput(){this.source=new Ce},o.CubismPhysicsInput=a,a=function CubismPhysicsOutput(){this.destination=new Ce,this.translationScale=new l(0,0)},o.CubismPhysicsOutput=a,a=function CubismPhysicsRig(){this.settings=new Ie,this.inputs=new Ie,this.outputs=new Ie,this.particles=new Ie,this.gravity=new l(0,0),this.wind=new l(0,0)},o.CubismPhysicsRig=a,n.CubismFramework),Ee=ut.CubismVector2,ke=r.CubismJson,Te=(!function(t){var i="Position",e="Angle",r="Meta",n="EffectiveForces",o="Gravity",a="PhysicsSettings",s="Normalization",u="Minimum",l="Maximum",c="Default",h="Reflect",f="Input",g="Output",p="Vertices";function CubismPhysicsJson(t,e){this._json=ke.create(t,e)}CubismPhysicsJson.prototype.release=function(){ke.delete(this._json)},CubismPhysicsJson.prototype.getGravity=function(){var t=new Ee(0,0);return t.x=this._json.getRoot().getValueByString(r).getValueByString(n).getValueByString(o).getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString(r).getValueByString(n).getValueByString(o).getValueByString("Y").toFloat(),t},CubismPhysicsJson.prototype.getWind=function(){var t=new Ee(0,0);return t.x=this._json.getRoot().getValueByString(r).getValueByString(n).getValueByString("Wind").getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString(r).getValueByString(n).getValueByString("Wind").getValueByString("Y").toFloat(),t},CubismPhysicsJson.prototype.getSubRigCount=function(){return this._json.getRoot().getValueByString(r).getValueByString("PhysicsSettingCount").toInt()},CubismPhysicsJson.prototype.getTotalInputCount=function(){return this._json.getRoot().getValueByString(r).getValueByString("TotalInputCount").toInt()},CubismPhysicsJson.prototype.getTotalOutputCount=function(){return this._json.getRoot().getValueByString(r).getValueByString("TotalOutputCount").toInt()},CubismPhysicsJson.prototype.getVertexCount=function(){return this._json.getRoot().getValueByString(r).getValueByString("VertexCount").toInt()},CubismPhysicsJson.prototype.getNormalizationPositionMinimumValue=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(s).getValueByString(i).getValueByString(u).toFloat()},CubismPhysicsJson.prototype.getNormalizationPositionMaximumValue=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(s).getValueByString(i).getValueByString(l).toFloat()},CubismPhysicsJson.prototype.getNormalizationPositionDefaultValue=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(s).getValueByString(i).getValueByString(c).toFloat()},CubismPhysicsJson.prototype.getNormalizationAngleMinimumValue=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(s).getValueByString(e).getValueByString(u).toFloat()},CubismPhysicsJson.prototype.getNormalizationAngleMaximumValue=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(s).getValueByString(e).getValueByString(l).toFloat()},CubismPhysicsJson.prototype.getNormalizationAngleDefaultValue=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(s).getValueByString(e).getValueByString(c).toFloat()},CubismPhysicsJson.prototype.getInputCount=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(f).getVector().getSize()},CubismPhysicsJson.prototype.getInputWeight=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(f).getValueByIndex(e).getValueByString("Weight").toFloat()},CubismPhysicsJson.prototype.getInputReflect=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(f).getValueByIndex(e).getValueByString(h).toBoolean()},CubismPhysicsJson.prototype.getInputType=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(f).getValueByIndex(e).getValueByString("Type").getRawString()},CubismPhysicsJson.prototype.getInputSourceId=function(t,e){return Ve.getIdManager().getId(this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(f).getValueByIndex(e).getValueByString("Source").getValueByString("Id").getRawString())},CubismPhysicsJson.prototype.getOutputCount=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(g).getVector().getSize()},CubismPhysicsJson.prototype.getOutputVertexIndex=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(g).getValueByIndex(e).getValueByString("VertexIndex").toInt()},CubismPhysicsJson.prototype.getOutputAngleScale=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(g).getValueByIndex(e).getValueByString("Scale").toFloat()},CubismPhysicsJson.prototype.getOutputWeight=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(g).getValueByIndex(e).getValueByString("Weight").toFloat()},CubismPhysicsJson.prototype.getOutputDestinationId=function(t,e){return Ve.getIdManager().getId(this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(g).getValueByIndex(e).getValueByString("Destination").getValueByString("Id").getRawString())},CubismPhysicsJson.prototype.getOutputType=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(g).getValueByIndex(e).getValueByString("Type").getRawString()},CubismPhysicsJson.prototype.getOutputReflect=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(g).getValueByIndex(e).getValueByString(h).toBoolean()},CubismPhysicsJson.prototype.getParticleCount=function(t){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(p).getVector().getSize()},CubismPhysicsJson.prototype.getParticleMobility=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(p).getValueByIndex(e).getValueByString("Mobility").toFloat()},CubismPhysicsJson.prototype.getParticleDelay=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(p).getValueByIndex(e).getValueByString("Delay").toFloat()},CubismPhysicsJson.prototype.getParticleAcceleration=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(p).getValueByIndex(e).getValueByString("Acceleration").toFloat()},CubismPhysicsJson.prototype.getParticleRadius=function(t,e){return this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(p).getValueByIndex(e).getValueByString("Radius").toInt()},CubismPhysicsJson.prototype.getParticlePosition=function(t,e){var r=new Ee(0,0);return r.x=this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(p).getValueByIndex(e).getValueByString(i).getValueByString("X").toFloat(),r.y=this._json.getRoot().getValueByString(a).getValueByIndex(t).getValueByString(p).getValueByIndex(e).getValueByString(i).getValueByString("Y").toFloat(),r},t.CubismPhysicsJson=CubismPhysicsJson}(m=m||{}),m.CubismPhysicsJson),C=ri.CubismMath,Re=_.CubismPhysicsRig,Le=_.CubismPhysicsSubRig,Fe=_.CubismPhysicsInput,De=_.CubismPhysicsOutput,Ue=_.CubismPhysicsParticle,Ne=_.CubismPhysicsSource,Oe=_.CubismPhysicsTargetType,M=ut.CubismVector2,Xe=(!function(t){function CubismPhysics(){this._physicsRig=null,this._options=new e,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}CubismPhysics.create=function(t,e){var r=new CubismPhysics;return r.parse(t,e),r._physicsRig.gravity.y=0,r},CubismPhysics.delete=function(t){null!=t&&t.release()},CubismPhysics.prototype.evaluate=function(t,e){for(var r,i,n,o=new M,a=t.getModel().parameters.values,s=t.getModel().parameters.maximumValues,u=t.getModel().parameters.minimumValues,l=t.getModel().parameters.defaultValues,c=0;c<this._physicsRig.subRigCount;++c){r={angle:0},o.x=0,o.y=0;for(var h=this._physicsRig.settings.at(c),f=this._physicsRig.inputs.get(h.baseInputIndex),g=this._physicsRig.outputs.get(h.baseOutputIndex),p=this._physicsRig.particles.get(h.baseParticleIndex),d=0;d<h.inputCount;++d)i=f[d].weight/100,-1==f[d].sourceParameterIndex&&(f[d].sourceParameterIndex=t.getParameterIndex(f[d].source.id)),f[d].getNormalizedParameterValue(o,r,a[f[d].sourceParameterIndex],u[f[d].sourceParameterIndex],s[f[d].sourceParameterIndex],l[f[d].sourceParameterIndex],h.normalizationPosition,h.normalizationAngle,f[0].reflect,i);n=C.degreesToRadian(-r.angle),o.x=o.x*C.cos(n)-o.y*C.sin(n),o.y=o.x*C.sin(n)+o.y*C.cos(n),!function updateParticles(t,e,r,i,n,o,a,s){var u,l,c,h=new M(0,0),f=new M(0,0),g=new M(0,0),p=new M(0,0);t[0].position=new M(r.x,r.y),r=C.degreesToRadian(i),(c=C.radianToDirection(r)).normalize();for(var d=1;d<e;++d)t[d].force=c.multiplyByScaler(t[d].acceleration).add(n),t[d].lastPosition=new M(t[d].position.x,t[d].position.y),u=t[d].delay*a*30,h=t[d].position.substract(t[d-1].position),l=C.directionToRadian(t[d].lastGravity,c)/s,h.x=C.cos(l)*h.x-h.y*C.sin(l),h.y=C.sin(l)*h.x+h.y*C.cos(l),t[d].position=t[d-1].position.add(h),f=t[d].velocity.multiplyByScaler(u),g=t[d].force.multiplyByScaler(u).multiplyByScaler(u),t[d].position=t[d].position.add(f).add(g),(p=t[d].position.substract(t[d-1].position)).normalize(),t[d].position=t[d-1].position.add(p.multiplyByScaler(t[d].radius)),C.abs(t[d].position.x)<o&&(t[d].position.x=0),0!=u&&(t[d].velocity=t[d].position.substract(t[d].lastPosition),t[d].velocity=t[d].velocity.divisionByScalar(u),t[d].velocity=t[d].velocity.multiplyByScaler(t[d].mobility)),t[d].force=new M(0,0),t[d].lastGravity=new M(c.x,c.y)}(p,h.particleCount,o,r.angle,this._options.wind,.001*h.normalizationPosition.maximum,e,5);for(d=0;d<h.outputCount;++d){var m=g[d].vertexIndex;if(m<1||m>=h.particleCount)break;-1==g[d].destinationParameterIndex&&(g[d].destinationParameterIndex=t.getParameterIndex(g[d].destination.id));var _=new M,m=(_.x=p[m].position.x-p[m-1].position.x,_.y=p[m].position.y-p[m-1].position.y,_=g[d].getValue(_,p,m,g[d].reflect,this._options.gravity),g[d].destinationParameterIndex),y=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(a.subarray(m))):a.slice(m);!function updateOutputParameterValue(t,e,r,i,n){var o;o=n.getScale(n.translationScale,n.angleScale),(i=i*o)<e?(i<n.valueBelowMinimum&&(n.valueBelowMinimum=i),i=e):r<i&&(i>n.valueExceededMaximum&&(n.valueExceededMaximum=i),i=r);1<=(o=n.weight/100)||(i=t[0]*(1-o)+i*o),t[0]=i}(y,u[m],s[m],_,g[d]);for(var b=m,A=0;b<a.length;b++,A++)a[b]=y[A]}}},CubismPhysics.prototype.setOptions=function(t){this._options=t},CubismPhysics.prototype.getOption=function(){return this._options},CubismPhysics.prototype.release=function(){this._physicsRig=void 0,this._physicsRig=null},CubismPhysics.prototype.parse=function(t,e){this._physicsRig=new Re;for(var r=new Te(t,e),i=(this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,Le,!0),this._physicsRig.inputs.updateSize(r.getTotalInputCount(),Fe,!0),this._physicsRig.outputs.updateSize(r.getTotalOutputCount(),De,!0),this._physicsRig.particles.updateSize(r.getVertexCount(),Ue,!0),0),n=0,o=0,a=0;a<this._physicsRig.settings.getSize();++a){this._physicsRig.settings.at(a).normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(a),this._physicsRig.settings.at(a).normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(a),this._physicsRig.settings.at(a).normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(a),this._physicsRig.settings.at(a).normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(a),this._physicsRig.settings.at(a).normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(a),this._physicsRig.settings.at(a).normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(a),this._physicsRig.settings.at(a).inputCount=r.getInputCount(a),this._physicsRig.settings.at(a).baseInputIndex=i;for(var s=0;s<this._physicsRig.settings.at(a).inputCount;++s)this._physicsRig.inputs.at(i+s).sourceParameterIndex=-1,this._physicsRig.inputs.at(i+s).weight=r.getInputWeight(a,s),this._physicsRig.inputs.at(i+s).reflect=r.getInputReflect(a,s),"X"==r.getInputType(a,s)?(this._physicsRig.inputs.at(i+s).type=Ne.CubismPhysicsSource_X,this._physicsRig.inputs.at(i+s).getNormalizedParameterValue=getInputTranslationXFromNormalizedParameterValue):"Y"==r.getInputType(a,s)?(this._physicsRig.inputs.at(i+s).type=Ne.CubismPhysicsSource_Y,this._physicsRig.inputs.at(i+s).getNormalizedParameterValue=getInputTranslationYFromNormalizedParamterValue):"Angle"==r.getInputType(a,s)&&(this._physicsRig.inputs.at(i+s).type=Ne.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(i+s).getNormalizedParameterValue=getInputAngleFromNormalizedParameterValue),this._physicsRig.inputs.at(i+s).source.targetType=Oe.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(i+s).source.id=r.getInputSourceId(a,s);i+=this._physicsRig.settings.at(a).inputCount,this._physicsRig.settings.at(a).outputCount=r.getOutputCount(a),this._physicsRig.settings.at(a).baseOutputIndex=n;for(s=0;s<this._physicsRig.settings.at(a).outputCount;++s)this._physicsRig.outputs.at(n+s).destinationParameterIndex=-1,this._physicsRig.outputs.at(n+s).vertexIndex=r.getOutputVertexIndex(a,s),this._physicsRig.outputs.at(n+s).angleScale=r.getOutputAngleScale(a,s),this._physicsRig.outputs.at(n+s).weight=r.getOutputWeight(a,s),this._physicsRig.outputs.at(n+s).destination.targetType=Oe.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(n+s).destination.id=r.getOutputDestinationId(a,s),"X"==r.getOutputType(a,s)?(this._physicsRig.outputs.at(n+s).type=Ne.CubismPhysicsSource_X,this._physicsRig.outputs.at(n+s).getValue=getOutputTranslationX,this._physicsRig.outputs.at(n+s).getScale=getOutputScaleTranslationX):"Y"==r.getOutputType(a,s)?(this._physicsRig.outputs.at(n+s).type=Ne.CubismPhysicsSource_Y,this._physicsRig.outputs.at(n+s).getValue=getOutputTranslationY,this._physicsRig.outputs.at(n+s).getScale=getOutputScaleTranslationY):"Angle"==r.getOutputType(a,s)&&(this._physicsRig.outputs.at(n+s).type=Ne.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(n+s).getValue=getOutputAngle,this._physicsRig.outputs.at(n+s).getScale=getOutputScaleAngle),this._physicsRig.outputs.at(n+s).reflect=r.getOutputReflect(a,s);n+=this._physicsRig.settings.at(a).outputCount,this._physicsRig.settings.at(a).particleCount=r.getParticleCount(a),this._physicsRig.settings.at(a).baseParticleIndex=o;for(s=0;s<this._physicsRig.settings.at(a).particleCount;++s)this._physicsRig.particles.at(o+s).mobility=r.getParticleMobility(a,s),this._physicsRig.particles.at(o+s).delay=r.getParticleDelay(a,s),this._physicsRig.particles.at(o+s).acceleration=r.getParticleAcceleration(a,s),this._physicsRig.particles.at(o+s).radius=r.getParticleRadius(a,s),this._physicsRig.particles.at(o+s).position=r.getParticlePosition(a,s);o+=this._physicsRig.settings.at(a).particleCount}this.initialize(),r.release(),r=void 0},CubismPhysics.prototype.initialize=function(){for(var t,e,r,i=0;i<this._physicsRig.subRigCount;++i){e=this._physicsRig.settings.at(i),(t=this._physicsRig.particles.get(e.baseParticleIndex))[0].initialPosition=new M(0,0),t[0].lastPosition=new M(t[0].initialPosition.x,t[0].initialPosition.y),t[0].lastGravity=new M(0,-1),t[0].lastGravity.y*=-1,t[0].velocity=new M(0,0),t[0].force=new M(0,0);for(var n=1;n<e.particleCount;++n)(r=new M(0,0)).y=t[n].radius,t[n].initialPosition=new M(t[n-1].initialPosition.x+r.x,t[n-1].initialPosition.y+r.y),t[n].position=new M(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastPosition=new M(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastGravity=new M(0,-1),t[n].lastGravity.y*=-1,t[n].velocity=new M(0,0),t[n].force=new M(0,0)}},t.CubismPhysics=CubismPhysics;var e=function Options(){this.gravity=new M(0,0),this.wind=new M(0,0)};function getInputTranslationXFromNormalizedParameterValue(t,e,r,i,n,o,a,s,u,l){t.x+=normalizeParameterValue(r,i,n,0,a.minimum,a.maximum,a.defalut,u)*l}function getInputTranslationYFromNormalizedParamterValue(t,e,r,i,n,o,a,s,u,l){t.y+=normalizeParameterValue(r,i,n,0,a.minimum,a.maximum,a.defalut,u)*l}function getInputAngleFromNormalizedParameterValue(t,e,r,i,n,o,a,s,u,l){e.angle+=normalizeParameterValue(r,i,n,0,s.minimum,s.maximum,s.defalut,u)*l}function getOutputTranslationX(t,e,r,i,n){t=t.x;return i&&(t*=-1),t}function getOutputTranslationY(t,e,r,i,n){t=t.y;return i&&(t*=-1),t}function getOutputAngle(t,e,r,i,n){return n=2<=r?e[r-1].position.substract(e[r-2].position):n.multiplyByScaler(-1),e=C.directionToRadian(n,t),i&&(e*=-1),e}function getDefaultValue(t,e){return C.min(t,e)+function getRangeValue(t,e){var r=C.max(t,e),t=C.min(t,e);return C.abs(r-t)}(t,e)/2}function getOutputScaleTranslationX(t,e){return JSON.parse(JSON.stringify(t.x))}function getOutputScaleTranslationY(t,e){return JSON.parse(JSON.stringify(t.y))}function getOutputScaleAngle(t,e){return JSON.parse(JSON.stringify(e))}function normalizeParameterValue(t,e,r,i,n,o,a,s){var u=0,l=C.max(r,e),c=(l<t&&(t=l),C.min(r,e)),h=(t<c&&(t=c),C.min(n,o)),f=C.max(n,o),g=a,p=getDefaultValue(c,l),d=t-p;switch(function sign(t){var e=0;return 0<t?e=1:t<0&&(e=-1),e}(d)){case 1:var m=f-g;0!=(_=l-p)&&(u=m/_*d,u+=g);break;case-1:var _,m=h-g;0!=(_=c-p)&&(u=m/_*d,u+=g);break;case 0:u=g}return s?u:-1*u}t.Options=e}(ve=ve||{}),!function(t){function CubismBreath(){this._currentTime=0}CubismBreath.create=function(){return new CubismBreath},CubismBreath.delete=function(t){},CubismBreath.prototype.setParameters=function(t){this._breathParameters=t},CubismBreath.prototype.getParameters=function(){return this._breathParameters},CubismBreath.prototype.updateParameters=function(t,e){this._currentTime+=e;for(var r=2*this._currentTime*3.14159,i=0;i<this._breathParameters.getSize();++i){var n=this._breathParameters.at(i);t.addParameterValueById(n.parameterId,n.offset+n.peak*Math.sin(r/n.cycle),n.weight)}},t.CubismBreath=CubismBreath,t.BreathParameterData=function BreathParameterData(t,e,r,i,n){this.parameterId=null==t?null:t,this.offset=null==e?0:e,this.peak=null==r?0:r,this.cycle=null==i?0:i,this.weight=null==n?0:n}}(Se=Se||{}),t.csmVector),A=(!function(t){var o;function CubismEyeBlink(t){if(this._blinkingState=o.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new Xe,null!=t)for(var e=0;e<t.getEyeBlinkParameterCount();++e)this._parameterIds.pushBack(t.getEyeBlinkParameterId(e))}CubismEyeBlink.create=function(t){return new CubismEyeBlink(t=void 0===t?null:t)},CubismEyeBlink.delete=function(t){},CubismEyeBlink.prototype.setBlinkingInterval=function(t){this._blinkingIntervalSeconds=t},CubismEyeBlink.prototype.setBlinkingSetting=function(t,e,r){this._closingSeconds=t,this._closedSeconds=e,this._openingSeconds=r},CubismEyeBlink.prototype.setParameterIds=function(t){this._parameterIds=t},CubismEyeBlink.prototype.getParameterIds=function(){return this._parameterIds},CubismEyeBlink.prototype.updateParameters=function(t,e){this._userTimeSeconds+=e;var r,i=0;switch(this._blinkingState){case o.EyeState_Closing:1<=(i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds)&&(i=1,this._blinkingState=o.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),r=1-i;break;case o.EyeState_Closed:1<=(i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds)&&(this._blinkingState=o.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),r=0;break;case o.EyeState_Opening:1<=(i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds)&&(i=1,this._blinkingState=o.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),r=i;break;case o.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=o.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),r=1;break;default:o.EyeState_First;this._blinkingState=o.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),r=1}CubismEyeBlink.CloseIfZero||(r=-r);for(var n=0;n<this._parameterIds.getSize();++n)t.setParameterValueById(this._parameterIds.at(n),r)},CubismEyeBlink.prototype.determinNextBlinkingTiming=function(){var t=Math.random();return this._userTimeSeconds+t*(2*this._blinkingIntervalSeconds-1)},CubismEyeBlink.CloseIfZero=!0,t.CubismEyeBlink=CubismEyeBlink,(t=o=t.EyeState||(t.EyeState={}))[t.EyeState_First=0]="EyeState_First",t[t.EyeState_Interval=1]="EyeState_Interval",t[t.EyeState_Closing=2]="EyeState_Closing",t[t.EyeState_Closed=3]="EyeState_Closed",t[t.EyeState_Opening=4]="EyeState_Opening"}(we=we||{}),!function(t){function csmRect(t,e,r,i){this.x=t,this.y=e,this.width=r,this.height=i}csmRect.prototype.getCenterX=function(){return this.x+.5*this.width},csmRect.prototype.getCenterY=function(){return this.y+.5*this.height},csmRect.prototype.getRight=function(){return this.x+this.width},csmRect.prototype.getBottom=function(){return this.y+this.height},csmRect.prototype.setRect=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},csmRect.prototype.expand=function(t,e){this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.csmRect=csmRect}(xe=xe||{}),Be=function(t,e){return(Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function __(){this.constructor=t}Be(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),Ye=n.Constant,ze=i.CubismMatrix44,Ge=xe.csmRect,Je=E.csmMap,je=t.csmVector,oe=X.CubismRenderer,We=X.CubismBlendMode,He=X.CubismTextureColor,c=Pe=Pe||{};CubismClippingManager_WebGL.prototype.getChannelFlagAsColor=function(t){return this._channelColors.at(t)},CubismClippingManager_WebGL.prototype.getMaskRenderTexture=function(){var t,e=0;return this._maskTexture&&0!=this._maskTexture.texture&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),0==e&&(t=this._clippingMaskBufferSize,this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Ze),this._maskTexture=new $e(this._currentFrameNo,e)),e},CubismClippingManager_WebGL.prototype.setGL=function(t){this.gl=t},CubismClippingManager_WebGL.prototype.calcClippedDrawTotalBounds=function(t,e){for(var r=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE,o=Number.MIN_VALUE,a=e._clippedDrawableIndexList.length,s=0;s<a;s++){for(var u=e._clippedDrawableIndexList[s],l=t.getDrawableVertexCount(u),c=t.getDrawableVertices(u),h=Number.MAX_VALUE,f=Number.MAX_VALUE,g=Number.MIN_VALUE,p=Number.MIN_VALUE,d=l*Ye.vertexStep,m=Ye.vertexOffset;m<d;m+=Ye.vertexStep){var _=c[m],y=c[m+1];_<h&&(h=_),g<_&&(g=_),y<f&&(f=y),p<y&&(p=y)}h!=Number.MAX_VALUE&&(f<i&&(i=f),n<g&&(n=g),o<p&&(o=p),(r=h<r?h:r)==Number.MAX_VALUE?(e._allClippedDrawRect.x=0,e._allClippedDrawRect.y=0,e._allClippedDrawRect.width=0,e._allClippedDrawRect.height=0,e._isUsing=!1):(e._isUsing=!0,u=n-r,l=o-i,e._allClippedDrawRect.x=r,e._allClippedDrawRect.y=i,e._allClippedDrawRect.width=u,e._allClippedDrawRect.height=l))}},CubismClippingManager_WebGL.prototype.release=function(){for(var t=0;t<this._clippingContextListForMask.getSize();t++)this._clippingContextListForMask.at(t)&&(this._clippingContextListForMask.at(t).release(),this._clippingContextListForMask.set(t,void 0)),this._clippingContextListForMask.set(t,null);this._clippingContextListForMask=null;for(t=0;t<this._clippingContextListForDraw.getSize();t++)this._clippingContextListForDraw.set(t,null);this._clippingContextListForDraw=null,this._maskTexture&&(this.gl.deleteFramebuffer(this._maskTexture.texture),this._maskTexture=null);for(t=0;t<this._channelColors.getSize();t++)this._channelColors.set(t,null);this._channelColors=null,this.gl.deleteTexture(this._colorBuffer),this._colorBuffer=null},CubismClippingManager_WebGL.prototype.initialize=function(t,e,r,i){for(var n,o=0;o<e;o++)i[o]<=0?this._clippingContextListForDraw.pushBack(null):(null==(n=this.findSameClip(r[o],i[o]))&&(n=new tr(this,r[o],i[o]),this._clippingContextListForMask.pushBack(n)),n.addClippedDrawable(o),this._clippingContextListForDraw.pushBack(n))},CubismClippingManager_WebGL.prototype.setupClippingContext=function(t,e){this._currentFrameNo++;for(var r=0,i=0;i<this._clippingContextListForMask.getSize();i++){var n=this._clippingContextListForMask.at(i);this.calcClippedDrawTotalBounds(t,n),n._isUsing&&r++}if(0<r){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture();e.getMvpMatrix();e.preDraw(),this.setupLayoutBounds(r),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(i=0;i<this._clippingContextListForMask.getSize();i++)for(var o=this._clippingContextListForMask.at(i),a=o._allClippedDrawRect,s=o._layoutBounds,a=(this._tmpBoundsOnModel.setRect(a),this._tmpBoundsOnModel.expand(.05*a.width,.05*a.height),s.width/this._tmpBoundsOnModel.width),u=s.height/this._tmpBoundsOnModel.height,l=(this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(s.x,s.y),this._tmpMatrix.scaleRelative(a,u),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(s.x,s.y),this._tmpMatrix.scaleRelative(a,u),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),o._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),o._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray()),o._clippingIdCount),c=0;c<l;c++){var h=o._clippingIdList[c];t.getDrawableDynamicFlagVertexPositionsDidChange(h)&&(e.setIsCulling(0!=t.getDrawableCulling(h)),e.setClippingContextBufferForMask(o),e.drawMesh(t.getDrawableTextureIndices(h),t.getDrawableVertexIndexCount(h),t.getDrawableVertexCount(h),t.getDrawableVertexIndices(h),t.getDrawableVertices(h),t.getDrawableVertexUvs(h),t.getDrawableOpacity(h),We.CubismBlendMode_Normal,!1))}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Ze),e.setClippingContextBufferForMask(null),this.gl.viewport(qe[0],qe[1],qe[2],qe[3])}},CubismClippingManager_WebGL.prototype.findSameClip=function(t,e){for(var r=0;r<this._clippingContextListForMask.getSize();r++){var i=this._clippingContextListForMask.at(r),n=i._clippingIdCount;if(n==e){for(var o=0,a=0;a<n;a++)for(var s=i._clippingIdList[a],u=0;u<n;u++)if(t[u]==s){o++;break}if(o==n)return i}}return null},CubismClippingManager_WebGL.prototype.setupLayoutBounds=function(t){for(var e=~~(t/4),r=~~(t%4),i=0,n=0;n<4;n++){var o=e+(n<r?1:0);if(0!=o)if(1==o){var a=this._clippingContextListForMask.at(i++);a._layoutChannelNo=n,a._layoutBounds.x=0,a._layoutBounds.y=0,a._layoutBounds.width=1,a._layoutBounds.height=1}else if(2==o)for(var s=0;s<o;s++)u=~~(u=s%2),(c=this._clippingContextListForMask.at(i++))._layoutChannelNo=n,c._layoutBounds.x=.5*u,c._layoutBounds.y=0,c._layoutBounds.width=.5,c._layoutBounds.height=1;else if(o<=4)for(s=0;s<o;s++)u=~~(u=s%2),l=~~(l=s/2),(c=this._clippingContextListForMask.at(i++))._layoutChannelNo=n,c._layoutBounds.x=.5*u,c._layoutBounds.y=.5*l,c._layoutBounds.width=.5,c._layoutBounds.height=.5;else if(o<=9)for(var u,l,c,s=0;s<o;s++)u=~~(u=s%3),l=~~(l=s/3),(c=this._clippingContextListForMask.at(i++))._layoutChannelNo=n,c._layoutBounds.x=u/3,c._layoutBounds.y=l/3,c._layoutBounds.width=1/3,c._layoutBounds.height=1/3;else F("not supported mask count : {0}",o)}},CubismClippingManager_WebGL.prototype.getColorBuffer=function(){return this._colorBuffer},CubismClippingManager_WebGL.prototype.getClippingContextListForDraw=function(){return this._clippingContextListForDraw},CubismClippingManager_WebGL.prototype.setClippingMaskBufferSize=function(t){this._clippingMaskBufferSize=t},CubismClippingManager_WebGL.prototype.getClippingMaskBufferSize=function(){return this._clippingMaskBufferSize};var Qe,qe,Ze,Ke=CubismClippingManager_WebGL;function CubismClippingManager_WebGL(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new je,this._clippingContextListForDraw=new je,this._channelColors=new je,this._tmpBoundsOnModel=new Ge,this._tmpMatrix=new ze,this._tmpMatrixForMask=new ze,this._tmpMatrixForDraw=new ze,this._maskTexture=null;var t=new He;t.R=1,t.G=0,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new He).R=0,t.G=1,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new He).R=0,t.G=0,t.B=1,t.A=0,this._channelColors.pushBack(t),(t=new He).R=0,t.G=0,t.B=0,t.A=1,this._channelColors.pushBack(t)}c.CubismClippingManager_WebGL=Ke;var $e=function CubismRenderTextureResource(t,e){this.frameNo=t,this.texture=e},tr=(c.CubismRenderTextureResource=$e,CubismClippingContext.prototype.release=function(){null!=this._layoutBounds&&(this._layoutBounds=null),null!=this._allClippedDrawRect&&(this._allClippedDrawRect=null),null!=this._clippedDrawableIndexList&&(this._clippedDrawableIndexList=null)},CubismClippingContext.prototype.addClippedDrawable=function(t){this._clippedDrawableIndexList.push(t)},CubismClippingContext.prototype.getClippingManager=function(){return this._owner},CubismClippingContext.prototype.setGl=function(t){this._owner.setGL(t)},CubismClippingContext);function CubismClippingContext(t,e,r){this._owner=t,this._clippingIdList=e,this._clippingIdCount=r,this._allClippedDrawRect=new Ge,this._layoutBounds=new Ge,this._clippedDrawableIndexList=new Array,this._matrixForMask=new ze,this._matrixForDraw=new ze}c.CubismClippingContext=tr,CubismShader_WebGL.getInstance=function(){return null==Qe?Qe=new CubismShader_WebGL:Qe},CubismShader_WebGL.deleteInstance=function(){Qe&&(Qe.release(),Qe=null)},CubismShader_WebGL.prototype.release=function(){this.releaseShaderProgram()},CubismShader_WebGL.prototype.setupShaderProgram=function(t,e,r,i,n,o,a,s,u,l,c,h,f){var g,p,d,m;if(c||F("NoPremultipliedAlpha is not allowed"),0==this._shaderSets.getSize()&&this.generateShaders(),null!=t.getClippingContextBufferForMask()){var _=this._shaderSets.at(rr.ShaderNames_SetupMask),y=(this.gl.useProgram(_.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(_.samplerTexture0Location,0),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(_.attributePositionLocation),this.gl.vertexAttribPointer(_.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(_.attributeTexCoordLocation),this.gl.vertexAttribPointer(_.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),t.getClippingContextBufferForMask()._layoutChannelNo),b=t.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(y),c=(this.gl.uniform4f(_.uniformChannelFlagLocation,b.R,b.G,b.B,b.A),this.gl.uniformMatrix4fv(_.uniformClipMatrixLocation,!1,t.getClippingContextBufferForMask()._matrixForMask.getArray()),t.getClippingContextBufferForMask()._layoutBounds);this.gl.uniform4f(_.uniformBaseColorLocation,2*c.x-1,2*c.y-1,2*c.getRight()-1,2*c.getBottom()-1),g=this.gl.ZERO,p=this.gl.ONE_MINUS_SRC_COLOR,d=this.gl.ZERO,m=this.gl.ONE_MINUS_SRC_ALPHA}else{var c=null!=t.getClippingContextBufferForDraw(),A=c?f?2:1:0,_=new nr;switch(u){case We.CubismBlendMode_Normal:default:_=this._shaderSets.at(rr.ShaderNames_NormalPremultipliedAlpha+A),g=this.gl.ONE,p=this.gl.ONE_MINUS_SRC_ALPHA,d=this.gl.ONE,m=this.gl.ONE_MINUS_SRC_ALPHA;break;case We.CubismBlendMode_Additive:_=this._shaderSets.at(rr.ShaderNames_AddPremultipliedAlpha+A),g=this.gl.ONE,p=this.gl.ONE,d=this.gl.ZERO,m=this.gl.ONE;break;case We.CubismBlendMode_Multiplicative:_=this._shaderSets.at(rr.ShaderNames_MultPremultipliedAlpha+A),g=this.gl.DST_COLOR,p=this.gl.ONE_MINUS_SRC_ALPHA,d=this.gl.ZERO,m=this.gl.ONE}this.gl.useProgram(_.shaderProgram),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(_.attributePositionLocation),this.gl.vertexAttribPointer(_.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(_.attributeTexCoordLocation),this.gl.vertexAttribPointer(_.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),c&&(this.gl.activeTexture(this.gl.TEXTURE1),f=t.getClippingContextBufferForDraw().getClippingManager().getColorBuffer(),this.gl.bindTexture(this.gl.TEXTURE_2D,f),this.gl.uniform1i(_.samplerTexture1Location,1),this.gl.uniformMatrix4fv(_.uniformClipMatrixLocation,!1,t.getClippingContextBufferForDraw()._matrixForDraw.getArray()),y=t.getClippingContextBufferForDraw()._layoutChannelNo,b=t.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(y),this.gl.uniform4f(_.uniformChannelFlagLocation,b.R,b.G,b.B,b.A)),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(_.samplerTexture0Location,0),this.gl.uniformMatrix4fv(_.uniformMatrixLocation,!1,h.getArray()),this.gl.uniform4f(_.uniformBaseColorLocation,l.R,l.G,l.B,l.A)}null==a.index&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(g,p,d,m)},CubismShader_WebGL.prototype.releaseShaderProgram=function(){for(var t=0;t<this._shaderSets.getSize();t++)this.gl.deleteProgram(this._shaderSets.at(t).shaderProgram),this._shaderSets.at(t).shaderProgram=0,this._shaderSets.set(t,void 0),this._shaderSets.set(t,null)},CubismShader_WebGL.prototype.generateShaders=function(){for(var t=0;t<10;t++)this._shaderSets.pushBack(new nr);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(c.vertexShaderSrcSetupMask,c.fragmentShaderSrcsetupMask),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(c.vertexShaderSrc,c.fragmentShaderSrcPremultipliedAlpha),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(c.vertexShaderSrcMasked,c.fragmentShaderSrcMaskPremultipliedAlpha),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(c.vertexShaderSrcMasked,c.fragmentShaderSrcMaskInvertedPremultipliedAlpha),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor")},CubismShader_WebGL.prototype.loadShaderProgram=function(t,e){var r=this.gl.createProgram(),t=this.compileShaderSource(this.gl.VERTEX_SHADER,t);if(!t)return F("Vertex shader compile error!"),0;e=this.compileShaderSource(this.gl.FRAGMENT_SHADER,e);return e?(this.gl.attachShader(r,t),this.gl.attachShader(r,e),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.gl.deleteShader(t),this.gl.deleteShader(e),r):(F("Failed to link program: {0}",r),this.gl.deleteShader(t),t=0,this.gl.deleteShader(e),e=0,r&&(this.gl.deleteProgram(r),r=0),0)):(F("Vertex shader compile error!"),0)},CubismShader_WebGL.prototype.compileShaderSource=function(t,e){t=this.gl.createShader(t);return this.gl.shaderSource(t,e),this.gl.compileShader(t),t||(e=this.gl.getShaderInfoLog(t),F("Shader compile log: {0} ",e)),this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS)?t:(this.gl.deleteShader(t),null)},CubismShader_WebGL.prototype.setGl=function(t){this.gl=t};var er=CubismShader_WebGL;function CubismShader_WebGL(){this._shaderSets=new je}c.CubismShader_WebGL=er;var rr,ir,nr=function CubismShaderSet(){},or=(c.CubismShaderSet=nr,(e=rr=c.ShaderNames||(c.ShaderNames={}))[e.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",e[e.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",e[e.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",e[e.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",e[e.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",e[e.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",e[e.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",e[e.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",e[e.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",e[e.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",c.vertexShaderSrcSetupMask="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",c.fragmentShaderSrcsetupMask="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",c.vertexShaderSrc="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",c.vertexShaderSrcMasked="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",c.fragmentShaderSrcPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",c.fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",c.fragmentShaderSrcMaskInvertedPremultipliedAlpha="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}",A(CubismRenderer_WebGL,ir=oe),CubismRenderer_WebGL.prototype.initialize=function(t){t.isUsingMasking()&&(this._clippingManager=new Ke,this._clippingManager.initialize(t,t.getDrawableCount(),t.getDrawableMasks(),t.getDrawableMaskCounts())),this._sortedDrawableIndexList.resize(t.getDrawableCount(),0),ir.prototype.initialize.call(this,t)},CubismRenderer_WebGL.prototype.bindTexture=function(t,e){this._textures.setValue(t,e)},CubismRenderer_WebGL.prototype.getBindedTextures=function(){return this._textures},CubismRenderer_WebGL.prototype.setClippingMaskBufferSize=function(t){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new Ke,this._clippingManager.setClippingMaskBufferSize(t),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())},CubismRenderer_WebGL.prototype.getClippingMaskBufferSize=function(){return this._clippingManager.getClippingMaskBufferSize()},CubismRenderer_WebGL.prototype.release=function(){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null},CubismRenderer_WebGL.prototype.doDrawModel=function(){null!=this._clippingManager&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();for(var t=this.getModel().getDrawableCount(),e=this.getModel().getDrawableRenderOrders(),r=0;r<t;++r){var i=e[r];this._sortedDrawableIndexList.set(i,r)}for(r=0;r<t;++r){var n=this._sortedDrawableIndexList.at(r);this.getModel().getDrawableDynamicFlagIsVisible(n)&&(this.setClippingContextBufferForDraw(null!=this._clippingManager?this._clippingManager.getClippingContextListForDraw().at(n):null),this.setIsCulling(this.getModel().getDrawableCulling(n)),this.drawMesh(this.getModel().getDrawableTextureIndices(n),this.getModel().getDrawableVertexIndexCount(n),this.getModel().getDrawableVertexCount(n),this.getModel().getDrawableVertexIndices(n),this.getModel().getDrawableVertices(n),this.getModel().getDrawableVertexUvs(n),this.getModel().getDrawableOpacity(n),this.getModel().getDrawableBlendMode(n),this.getModel().getDrawableInvertedMaskBit(n)))}},CubismRenderer_WebGL.prototype.drawMesh=function(t,e,r,i,n,o,a,s,u){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);var l=this.getModelColor();null==this.getClippingContextBufferForMask()&&(l.A*=a,this.isPremultipliedAlpha()&&(l.R*=l.A,l.G*=l.A,l.B*=l.A)),t=null!=this._textures.getValue(t)?this._textures.getValue(t):null,er.getInstance().setupShaderProgram(this,t,r,n,i,o,this._bufferData,a,s,l,this.isPremultipliedAlpha(),this.getMvpMatrix(),u),this.gl.drawElements(this.gl.TRIANGLES,e,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)},CubismRenderer_WebGL.doStaticRelease=function(){er.deleteInstance()},CubismRenderer_WebGL.prototype.setRenderState=function(t,e){Ze=t,qe=e},CubismRenderer_WebGL.prototype.preDraw=function(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)},CubismRenderer_WebGL.prototype.setClippingContextBufferForMask=function(t){this._clippingContextBufferForMask=t},CubismRenderer_WebGL.prototype.getClippingContextBufferForMask=function(){return this._clippingContextBufferForMask},CubismRenderer_WebGL.prototype.setClippingContextBufferForDraw=function(t){this._clippingContextBufferForDraw=t},CubismRenderer_WebGL.prototype.getClippingContextBufferForDraw=function(){return this._clippingContextBufferForDraw},CubismRenderer_WebGL.prototype.startUp=function(t){this.gl=t,this._clippingManager.setGL(t),er.getInstance().setGl(t)},CubismRenderer_WebGL);function CubismRenderer_WebGL(){var t=ir.call(this)||this;return t._clippingContextBufferForMask=null,t._clippingContextBufferForDraw=null,t._clippingManager=new Ke,t.firstDraw=!0,t._textures=new Je,t._sortedDrawableIndexList=new je,t._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},t._textures.prepareCapacity(32,!0),t}c.CubismRenderer_WebGL=or,oe.staticRelease=function(){or.doStaticRelease()};var ar,sr,ur,lr,cr,h,hr,fr,gr,pr,dr,mr,_r,f,yr,g,br,Ar=Pe.CubismRenderer_WebGL,Cr=we.CubismEyeBlink,Mr=Se.CubismBreath,vr=n.Constant,Sr=ve.CubismPhysics,wr=ce.CubismModelUserData,xr=le.CubismPose,Br=$t.CubismExpressionMotion,Pr=It.CubismMotion,Ir=xt.CubismMoc,Vr=vt.CubismModelMatrix,Er=Ct.CubismTargetPoint,kr=gt.CubismMotionManager,p=(!function(t){function CubismUserModel(){this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new kr,this._motionManager.setEventCallback(CubismUserModel.cubismDefaultMotionEventCallback,this),this._expressionManager=new kr,this._dragManager=new Er}CubismUserModel.prototype.isInitialized=function(){return this._initialized},CubismUserModel.prototype.setInitialized=function(t){this._initialized=t},CubismUserModel.prototype.isUpdating=function(){return this._updating},CubismUserModel.prototype.setUpdating=function(t){this._updating=t},CubismUserModel.prototype.setDragging=function(t,e){this._dragManager.set(t,e)},CubismUserModel.prototype.setAcceleration=function(t,e,r){this._accelerationX=t,this._accelerationY=e,this._accelerationZ=r},CubismUserModel.prototype.getModelMatrix=function(){return this._modelMatrix},CubismUserModel.prototype.setOpacity=function(t){this._opacity=t},CubismUserModel.prototype.getOpacity=function(){return this._opacity},CubismUserModel.prototype.loadModel=function(t){this._moc=Ir.create(t),this._model=this._moc.createModel(),this._model.saveParameters(),null==this._moc||null==this._model?F("Failed to CreateModel()."):this._modelMatrix=new Vr(this._model.getCanvasWidth(),this._model.getCanvasHeight())},CubismUserModel.prototype.loadMotion=function(t,e,r){return Pr.create(t,e)},CubismUserModel.prototype.loadExpression=function(t,e,r){return Br.create(t,e)},CubismUserModel.prototype.loadPose=function(t,e){this._pose=xr.create(t,e)},CubismUserModel.prototype.loadUserData=function(t,e){this._modelUserData=wr.create(t,e)},CubismUserModel.prototype.loadPhysics=function(t,e){this._physics=Sr.create(t,e)},CubismUserModel.prototype.isHit=function(t,e,r){t=this._model.getDrawableIndex(t);if(t<0)return{hit:!1,area:0};for(var i=this._model.getDrawableVertexCount(t),n=this._model.getDrawableVertices(t),o=n[0],a=n[0],s=n[1],u=n[1],l=1;l<i;++l){var c=n[vr.vertexOffset+l*vr.vertexStep],h=n[vr.vertexOffset+l*vr.vertexStep+1];c<o&&(o=c),a<c&&(a=c),h<s&&(s=h),u<h&&(u=h)}t=this._modelMatrix.invertTransformX(e),e=this._modelMatrix.invertTransformY(r);return{hit:o<=t&&t<=a&&s<=e&&e<=u,area:Math.abs(o-a)*Math.abs(u-s)}},CubismUserModel.prototype.getModel=function(){return this._model},CubismUserModel.prototype.getRenderer=function(){return this._renderer},CubismUserModel.prototype.createRenderer=function(){this._renderer&&this.deleteRenderer(),this._renderer=new Ar,this._renderer.initialize(this._model)},CubismUserModel.prototype.deleteRenderer=function(){null!=this._renderer&&(this._renderer.release(),this._renderer=null)},CubismUserModel.prototype.motionEventFired=function(t){R("{0}",t.s)},CubismUserModel.cubismDefaultMotionEventCallback=function(t,e,r){null!=r&&r.motionEventFired(e)},CubismUserModel.prototype.release=function(){null!=this._motionManager&&(this._motionManager.release(),this._motionManager=null),null!=this._expressionManager&&(this._expressionManager.release(),this._expressionManager=null),null!=this._moc&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,xr.delete(this._pose),Cr.delete(this._eyeBlink),Mr.delete(this._breath),this._dragManager=null,Sr.delete(this._physics),wr.delete(this._modelUserData),this.deleteRenderer()},t.CubismUserModel=CubismUserModel}(ar=ar||{}),(sr||(sr={})).ICubismModelSetting=function ICubismModelSetting(){},ur=function(t,e){return(ur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function __(){this.constructor=t}ur(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),Tr=t.csmVector,Rr=n.CubismFramework,Lr=r.CubismJson,s=sr.ICubismModelSetting;function CubismModelSettingJson(t,e){var r=hr.call(this)||this;return r._json=Lr.create(t,e),r._json&&(r._jsonValue=new Tr,r._jsonValue.pushBack(r._json.getRoot().getValueByString("Groups")),r._jsonValue.pushBack(r._json.getRoot().getValueByString(fr).getValueByString("Moc")),r._jsonValue.pushBack(r._json.getRoot().getValueByString(fr).getValueByString("Motions")),r._jsonValue.pushBack(r._json.getRoot().getValueByString(fr).getValueByString("Expressions")),r._jsonValue.pushBack(r._json.getRoot().getValueByString(fr).getValueByString("Textures")),r._jsonValue.pushBack(r._json.getRoot().getValueByString(fr).getValueByString("Physics")),r._jsonValue.pushBack(r._json.getRoot().getValueByString(fr).getValueByString("Pose")),r._jsonValue.pushBack(r._json.getRoot().getValueByString("HitAreas"))),r}cr=lr=lr||{},fr="FileReferences",gr="Name",pr="FadeInTime",dr="FadeOutTime",mr="LipSync",_r="EyeBlink",(f=h=h||{})[f.FrequestNode_Groups=0]="FrequestNode_Groups",f[f.FrequestNode_Moc=1]="FrequestNode_Moc",f[f.FrequestNode_Motions=2]="FrequestNode_Motions",f[f.FrequestNode_Expressions=3]="FrequestNode_Expressions",f[f.FrequestNode_Textures=4]="FrequestNode_Textures",f[f.FrequestNode_Physics=5]="FrequestNode_Physics",f[f.FrequestNode_Pose=6]="FrequestNode_Pose",f[f.FrequestNode_HitAreas=7]="FrequestNode_HitAreas",p(CubismModelSettingJson,hr=s),CubismModelSettingJson.prototype.release=function(){Lr.delete(this._json),this._jsonValue=null},CubismModelSettingJson.prototype.GetJson=function(){return this._json},CubismModelSettingJson.prototype.getModelFileName=function(){return this.isExistModelFile()?this._jsonValue.at(h.FrequestNode_Moc).getRawString():""},CubismModelSettingJson.prototype.getTextureCount=function(){return this.isExistTextureFiles()?this._jsonValue.at(h.FrequestNode_Textures).getSize():0},CubismModelSettingJson.prototype.getTextureDirectory=function(){return this._jsonValue.at(h.FrequestNode_Textures).getRawString()},CubismModelSettingJson.prototype.getTextureFileName=function(t){return this._jsonValue.at(h.FrequestNode_Textures).getValueByIndex(t).getRawString()},CubismModelSettingJson.prototype.getHitAreasCount=function(){return this.isExistHitAreas()?this._jsonValue.at(h.FrequestNode_HitAreas).getSize():0},CubismModelSettingJson.prototype.getHitAreaId=function(t){return Rr.getIdManager().getId(this._jsonValue.at(h.FrequestNode_HitAreas).getValueByIndex(t).getValueByString("Id").getRawString())},CubismModelSettingJson.prototype.getHitAreaName=function(t){return this._jsonValue.at(h.FrequestNode_HitAreas).getValueByIndex(t).getValueByString(gr).getRawString()},CubismModelSettingJson.prototype.getPhysicsFileName=function(){return this.isExistPhysicsFile()?this._jsonValue.at(h.FrequestNode_Physics).getRawString():""},CubismModelSettingJson.prototype.getPoseFileName=function(){return this.isExistPoseFile()?this._jsonValue.at(h.FrequestNode_Pose).getRawString():""},CubismModelSettingJson.prototype.getExpressionCount=function(){return this.isExistExpressionFile()?this._jsonValue.at(h.FrequestNode_Expressions).getSize():0},CubismModelSettingJson.prototype.getExpressionName=function(t){return this._jsonValue.at(h.FrequestNode_Expressions).getValueByIndex(t).getValueByString(gr).getRawString()},CubismModelSettingJson.prototype.getExpressionFileName=function(t){return this._jsonValue.at(h.FrequestNode_Expressions).getValueByIndex(t).getValueByString("File").getRawString()},CubismModelSettingJson.prototype.getMotionGroupCount=function(){return this.isExistMotionGroups()?this._jsonValue.at(h.FrequestNode_Motions).getKeys().getSize():0},CubismModelSettingJson.prototype.getMotionGroupName=function(t){return this.isExistMotionGroups()?this._jsonValue.at(h.FrequestNode_Motions).getKeys().at(t):null},CubismModelSettingJson.prototype.getMotionCount=function(t){return this.isExistMotionGroupName(t)?this._jsonValue.at(h.FrequestNode_Motions).getValueByString(t).getSize():0},CubismModelSettingJson.prototype.getMotionFileName=function(t,e){return this.isExistMotionGroupName(t)?this._jsonValue.at(h.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString("File").getRawString():""},CubismModelSettingJson.prototype.getMotionSoundFileName=function(t,e){return this.isExistMotionSoundFile(t,e)?this._jsonValue.at(h.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString("Sound").getRawString():""},CubismModelSettingJson.prototype.getMotionFadeInTimeValue=function(t,e){return this.isExistMotionFadeIn(t,e)?this._jsonValue.at(h.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(pr).toFloat():-1},CubismModelSettingJson.prototype.getMotionFadeOutTimeValue=function(t,e){return this.isExistMotionFadeOut(t,e)?this._jsonValue.at(h.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(dr).toFloat():-1},CubismModelSettingJson.prototype.getUserDataFile=function(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(fr).getValueByString("UserData").getRawString():""},CubismModelSettingJson.prototype.getLayoutMap=function(t){var e=this._json.getRoot().getValueByString("Layout").getMap();if(null==e)return!1;for(var r=!1,i=e.begin();i.notEqual(e.end());i.preIncrement())t.setValue(i.ptr().first,i.ptr().second.toFloat()),r=!0;return r},CubismModelSettingJson.prototype.getEyeBlinkParameterCount=function(){if(!this.isExistEyeBlinkParameters())return 0;for(var t=0,e=0;e<this._jsonValue.at(h.FrequestNode_Groups).getSize();e++){var r=this._jsonValue.at(h.FrequestNode_Groups).getValueByIndex(e);if(!r.isNull()&&!r.isError()&&r.getValueByString(gr).getRawString()==_r){t=r.getValueByString("Ids").getVector().getSize();break}}return t},CubismModelSettingJson.prototype.getEyeBlinkParameterId=function(t){if(this.isExistEyeBlinkParameters())for(var e=0;e<this._jsonValue.at(h.FrequestNode_Groups).getSize();e++){var r=this._jsonValue.at(h.FrequestNode_Groups).getValueByIndex(e);if(!r.isNull()&&!r.isError()&&r.getValueByString(gr).getRawString()==_r)return Rr.getIdManager().getId(r.getValueByString("Ids").getValueByIndex(t).getRawString())}return null},CubismModelSettingJson.prototype.getLipSyncParameterCount=function(){if(!this.isExistLipSyncParameters())return 0;for(var t=0,e=0;e<this._jsonValue.at(h.FrequestNode_Groups).getSize();e++){var r=this._jsonValue.at(h.FrequestNode_Groups).getValueByIndex(e);if(!r.isNull()&&!r.isError()&&r.getValueByString(gr).getRawString()==mr){t=r.getValueByString("Ids").getVector().getSize();break}}return t},CubismModelSettingJson.prototype.getLipSyncParameterId=function(t){if(this.isExistLipSyncParameters())for(var e=0;e<this._jsonValue.at(h.FrequestNode_Groups).getSize();e++){var r=this._jsonValue.at(h.FrequestNode_Groups).getValueByIndex(e);if(!r.isNull()&&!r.isError()&&r.getValueByString(gr).getRawString()==mr)return Rr.getIdManager().getId(r.getValueByString("Ids").getValueByIndex(t).getRawString())}return null},CubismModelSettingJson.prototype.isExistModelFile=function(){var t=this._jsonValue.at(h.FrequestNode_Moc);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistTextureFiles=function(){var t=this._jsonValue.at(h.FrequestNode_Textures);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistHitAreas=function(){var t=this._jsonValue.at(h.FrequestNode_HitAreas);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistPhysicsFile=function(){var t=this._jsonValue.at(h.FrequestNode_Physics);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistPoseFile=function(){var t=this._jsonValue.at(h.FrequestNode_Pose);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistExpressionFile=function(){var t=this._jsonValue.at(h.FrequestNode_Expressions);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistMotionGroups=function(){var t=this._jsonValue.at(h.FrequestNode_Motions);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistMotionGroupName=function(t){t=this._jsonValue.at(h.FrequestNode_Motions).getValueByString(t);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistMotionSoundFile=function(t,e){t=this._jsonValue.at(h.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString("Sound");return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistMotionFadeIn=function(t,e){t=this._jsonValue.at(h.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(pr);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistMotionFadeOut=function(t,e){t=this._jsonValue.at(h.FrequestNode_Motions).getValueByString(t).getValueByIndex(e).getValueByString(dr);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistUserDataFile=function(){var t=this._json.getRoot().getValueByString(fr).getValueByString("UserData");return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistEyeBlinkParameters=function(){if(!this._jsonValue.at(h.FrequestNode_Groups).isNull()&&!this._jsonValue.at(h.FrequestNode_Groups).isError())for(var t=0;t<this._jsonValue.at(h.FrequestNode_Groups).getSize();++t)if(this._jsonValue.at(h.FrequestNode_Groups).getValueByIndex(t).getValueByString(gr).getRawString()==_r)return!0;return!1},CubismModelSettingJson.prototype.isExistLipSyncParameters=function(){if(!this._jsonValue.at(h.FrequestNode_Groups).isNull()&&!this._jsonValue.at(h.FrequestNode_Groups).isError())for(var t=0;t<this._jsonValue.at(h.FrequestNode_Groups).getSize();++t)if(this._jsonValue.at(h.FrequestNode_Groups).getValueByIndex(t).getValueByString(gr).getRawString()==mr)return!0;return!1},f=CubismModelSettingJson,cr.CubismModelSettingJson=f,(g=yr=yr||{}).HitAreaPrefix="HitArea",g.HitAreaHead="Head",g.HitAreaBody="Body",g.PartsIdCore="Parts01Core",g.PartsArmPrefix="Parts01Arm_",g.PartsArmLPrefix="Parts01ArmL_",g.PartsArmRPrefix="Parts01ArmR_",g.ParamAngleX="ParamAngleX",g.ParamAngleY="ParamAngleY",g.ParamAngleZ="ParamAngleZ",g.ParamEyeLOpen="ParamEyeLOpen",g.ParamEyeLSmile="ParamEyeLSmile",g.ParamEyeROpen="ParamEyeROpen",g.ParamEyeRSmile="ParamEyeRSmile",g.ParamEyeBallX="ParamEyeBallX",g.ParamEyeBallY="ParamEyeBallY",g.ParamEyeBallForm="ParamEyeBallForm",g.ParamBrowLY="ParamBrowLY",g.ParamBrowRY="ParamBrowRY",g.ParamBrowLX="ParamBrowLX",g.ParamBrowRX="ParamBrowRX",g.ParamBrowLAngle="ParamBrowLAngle",g.ParamBrowRAngle="ParamBrowRAngle",g.ParamBrowLForm="ParamBrowLForm",g.ParamBrowRForm="ParamBrowRForm",g.ParamMouthForm="ParamMouthForm",g.ParamMouthOpenY="ParamMouthOpenY",g.ParamCheek="ParamCheek",g.ParamBodyAngleX="ParamBodyAngleX",g.ParamBodyAngleY="ParamBodyAngleY",g.ParamBodyAngleZ="ParamBodyAngleZ",g.ParamBreath="ParamBreath",g.ParamArmLA="ParamArmLA",g.ParamArmRA="ParamArmRA",g.ParamArmLB="ParamArmLB",g.ParamArmRB="ParamArmRB",g.ParamHandL="ParamHandL",g.ParamHandR="ParamHandR",g.ParamHairFront="ParamHairFront",g.ParamHairSide="ParamHairSide",g.ParamHairBack="ParamHairBack",g.ParamHairFluffy="ParamHairFluffy",g.ParamShoulderY="ParamShoulderY",g.ParamBustX="ParamBustX",g.ParamBustY="ParamBustY",g.ParamBaseX="ParamBaseX",g.ParamBaseY="ParamBaseY",g.ParamNONE="NONE:",function(t){function CubismString(){}CubismString.getFormatedString=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return t.replace(/\{(\d+)\}/g,function(t,e){return r[e]})},CubismString.isStartWith=function(t,e){for(var r=0,i=0;"\0"!=e[i];)if("\0"==t[r]||t[r++]!=e[i++])return!1;return!1},CubismString.stringToFloat=function(t,e,r,i){var n,o=r,a=!1,s=!1,u=0;for(parseInt(t[o])<0&&(a=!0,o++);o<e;o++){var l=t[o];if(!(0<=parseInt(l)&&parseInt(l)<=9)){if("."!=l)break;s=!0,o++;break}u=10*u+ +parseInt(l)}if(s)for(var c=.1;o<e&&0<=(n=255&parseFloat(t[o]))&&n<=9&&(u+=c*n,c*=.1,n);o++);return o==r?(i[0]=-1,0):(a&&(u=-u),i[0]=o,u)},t.CubismString=CubismString}(br=br||{});Fr=function(t,e){return(Fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Fr,d,m,Dr,o=function(t,e){function __(){this.constructor=t}Fr(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},Ur=function(t,i,n,o){return new(n=n||Promise)(function(e,r){function fulfilled(t){try{step(o.next(t))}catch(t){r(t)}}function rejected(t){try{step(o.throw(t))}catch(t){r(t)}}function step(t){t.done?e(t.value):function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,i||[])).next())})},Nr=function(r,i){var n,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(r,s)}catch(t){e=[6,t],o=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},Or=ht.InvalidMotionQueueEntryHandleValue,Xr=br.CubismString,Yr=E.csmMap,zr=t.csmVector,Gr=Se.CubismBreath,Jr=Se.BreathParameterData,jr=we.CubismEyeBlink,Wr=ct.ACubismMotion,Hr=n.CubismFramework,a=ar.CubismUserModel,Qr=lr.CubismModelSettingJson,qr=yr,Zr=i.CubismMatrix44,Kr=((m=d=d||{})[m.LoadAssets=0]="LoadAssets",m[m.LoadModel=1]="LoadModel",m[m.WaitLoadModel=2]="WaitLoadModel",m[m.LoadExpression=3]="LoadExpression",m[m.WaitLoadExpression=4]="WaitLoadExpression",m[m.LoadPhysics=5]="LoadPhysics",m[m.WaitLoadPhysics=6]="WaitLoadPhysics",m[m.LoadPose=7]="LoadPose",m[m.WaitLoadPose=8]="WaitLoadPose",m[m.SetupEyeBlink=9]="SetupEyeBlink",m[m.SetupBreath=10]="SetupBreath",m[m.LoadUserData=11]="LoadUserData",m[m.WaitLoadUserData=12]="WaitLoadUserData",m[m.SetupEyeBlinkIds=13]="SetupEyeBlinkIds",m[m.SetupLipSyncIds=14]="SetupLipSyncIds",m[m.SetupLayout=15]="SetupLayout",m[m.LoadMotion=16]="LoadMotion",m[m.WaitLoadMotion=17]="WaitLoadMotion",m[m.CompleteInitialize=18]="CompleteInitialize",m[m.CompleteSetupModel=19]="CompleteSetupModel",m[m.LoadTexture=20]="LoadTexture",m[m.WaitLoadTexture=21]="WaitLoadTexture",m[m.CompleteSetup=22]="CompleteSetup",o(Model,Dr=a),Model.prototype.loadAssets=function(r){return Ur(this,void 0,void 0,function(){var e;return Nr(this,function(t){return e=r.byteLength,e=new Qr(r,e),this._state=d.LoadModel,this.setupModel(e),[2]})})},Model.prototype.setupModel=function(p){return Ur(this,void 0,void 0,function(){var e,r,i,n,o,a,s,u,l,c,h,f,g;return Nr(this,function(t){switch(t.label){case 0:return(this._updating=!0,this._initialized=!1,this._modelSetting=p,""==this._modelSetting.getModelFileName())?[3,20]:(this._state=d.WaitLoadModel,e=this._modelSetting.getModelFileName(),e=this._setting.baseUrl+e,[4,w.getArraybuffer(e)]);case 1:if(e=t.sent(),this.loadModel(e),this._state=d.LoadExpression,!(0<this._modelSetting.getExpressionCount()))return[3,5];this._state=d.WaitLoadExpression,r=this._modelSetting.getExpressionCount(),f=0,t.label=2;case 2:return f<r?(i=this._modelSetting.getExpressionName(f),n=this._modelSetting.getExpressionFileName(f),n=this._setting.baseUrl+n,[4,w.getArraybuffer(n)]):[3,5];case 3:n=t.sent(),o=n.byteLength,o=this.loadExpression(n,o,i),null!=this._expressions.getValue(i)&&(Wr.delete(this._expressions.getValue(i)),this._expressions.setValue(i,null)),this._expressions.setValue(i,o),this._expressionCount++,t.label=4;case 4:return f++,[3,2];case 5:return(this._state=d.LoadPhysics,""==this._modelSetting.getPhysicsFileName())?[3,7]:(this._state=d.WaitLoadPhysics,o=this._modelSetting.getPhysicsFileName(),o=this._setting.baseUrl+o,[4,w.getArraybuffer(o)]);case 6:a=t.sent(),s=a.byteLength,this.loadPhysics(a,s),t.label=7;case 7:return(this._state=d.LoadPose,""==this._modelSetting.getPoseFileName())?[3,9]:(this._state=d.WaitLoadPose,a=this._modelSetting.getPoseFileName(),a=this._setting.baseUrl+a,[4,w.getArraybuffer(a)]);case 8:s=t.sent(),u=s.byteLength,this.loadPose(s,u),t.label=9;case 9:return(this._state=d.SetupEyeBlink,0<this._modelSetting.getEyeBlinkParameterCount()&&(this._eyeBlink=jr.create(this._modelSetting)),this._state=d.SetupBreath,this._breath=Gr.create(),(u=new zr).pushBack(new Jr(this._idParamAngleX,0,15,6.5345,.5)),u.pushBack(new Jr(this._idParamAngleY,0,8,3.5345,.5)),u.pushBack(new Jr(this._idParamAngleZ,0,10,5.5345,.5)),u.pushBack(new Jr(this._idParamBodyAngleX,0,4,15.5345,.5)),u.pushBack(new Jr(Hr.getIdManager().getId(qr.ParamBreath),0,.5,3.2345,.5)),this._breath.setParameters(u),this._state=d.LoadUserData,""==this._modelSetting.getUserDataFile())?[3,11]:(this._state=d.WaitLoadUserData,l=this._modelSetting.getUserDataFile(),l=this._setting.baseUrl+l,[4,w.getArraybuffer(l)]);case 10:l=t.sent(),g=l.byteLength,this.loadUserData(l,g),t.label=11;case 11:for(this._state=d.SetupEyeBlinkIds,c=this._modelSetting.getEyeBlinkParameterCount(),f=0;f<c;++f)this._eyeBlinkIds.pushBack(this._modelSetting.getEyeBlinkParameterId(f));for(this._state=d.SetupLipSyncIds,h=this._modelSetting.getLipSyncParameterCount(),f=0;f<h;++f)this._lipSyncIds.pushBack(this._modelSetting.getLipSyncParameterId(f));switch(this._state=d.SetupLayout,g=new Yr,this._modelSetting.getLayoutMap(g),this._modelMatrix.setupFromLayout(g),this._setting.motionLoadMode){case"greedy":return[3,12];case"textures_first":return[3,15]}return[3,17];case 12:return this._state=d.LoadMotion,this._state=d.WaitLoadMotion,[4,this.setupMotion()];case 13:return t.sent(),[4,this.setupTextures()];case 14:return t.sent(),this._state=d.CompleteSetup,[3,19];case 15:return[4,this.setupTextures()];case 16:return t.sent(),this._state=d.CompleteSetup,this.setupMotion(),[3,19];case 17:return[4,this.setupTextures()];case 18:t.sent(),this._state=d.CompleteSetup,t.label=19;case 19:return[3,20];case 20:return[2]}})})},Model.prototype.setupMotion=function(){return Ur(this,void 0,void 0,function(){var e,r,i,n,o,a=this;return Nr(this,function(t){switch(t.label){case 0:for(this._model.saveParameters(),e=this._modelSetting.getMotionGroupCount(),r=[],i=0;i<e;i++)for(n=this._modelSetting.getMotionGroupName(i),o=0;o<this._modelSetting.getMotionCount(n);o++)r.push(this.registerMotion(n,o));return[4,Promise.all(r).then(function(){a._motionManager.stopAllMotions()})];case 1:return t.sent(),[2]}})})},Model.prototype.setupTextures=function(){return Ur(this,void 0,void 0,function(){var e,r,i,n;return Nr(this,function(t){switch(t.label){case 0:e=!0,this._state=d.LoadTexture,this._updating=!1,this._initialized=!0,this.createRenderer(),this._state=d.WaitLoadTexture,r=this._modelSetting.getTextureCount(),i=0,t.label=1;case 1:return i<r?""==this._modelSetting.getTextureFileName(i)?(console.log("getTextureFileName null"),[3,3]):(n=this._modelSetting.getTextureFileName(i),n=this._setting.baseUrl+n,[4,this._textureManager.createTextureFromPngFile(n,e)]):[3,4];case 2:n=t.sent(),this.getRenderer().bindTexture(i,n.id),this._textureCount++,this.getRenderer().setIsPremultipliedAlpha(e),this.getRenderer().startUp(this._webgl.gl),t.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},Model.prototype.reloadRenderer=function(){this.deleteRenderer(),this.createRenderer(),this.setupTextures()},Model.prototype.registerMotion=function(o,a){return Ur(this,void 0,void 0,function(){var i,n=this;return Nr(this,function(t){return i=this._modelSetting.getMotionFileName(o,a),S.log("register motion: "+i+" => ["+o+"_"+a+"]",!0),[2,this.preLoadMotion(i).then(function(t){var e=Xr.getFormatedString("{0}_{1}",o,a),r=(S.log("load motion complete: "+i+" => ["+o+"_"+a+"]",!0),t.byteLength),t=n.loadMotion(t,r,e),r=n._modelSetting.getMotionFadeInTimeValue(o,a);return 0<=r&&t.setFadeInTime(r),0<=(r=n._modelSetting.getMotionFadeOutTimeValue(o,a))&&t.setFadeOutTime(r),t.setEffectIds(n._eyeBlinkIds,n._lipSyncIds),null!=n._motions.getValue(e)&&Wr.delete(n._motions.getValue(e)),n._motions.setValue(e,t),S.log("motion parse complete: "+i+" => ["+o+"_"+a+"]",!0),t})]})})},Model.prototype.update=function(){if(this._state==d.CompleteSetup){var t=this.s_deltaTime,e=(this._userTimeSeconds+=t,this._dragManager.update(t),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY(),!1);if(this._model.loadParameters(),this._motionManager.isFinished()?this.startRandomMotion(this._setting.idle,this._setting.Priority.Idle):e=this._motionManager.updateMotion(this._model,t),this._model.saveParameters(),e||null!=this._eyeBlink&&this._eyeBlink.updateParameters(this._model,t),null!=this._expressionManager&&this._expressionManager.updateMotion(this._model,t),this._model.addParameterValueById(this._idParamAngleX,30*this._dragX),this._model.addParameterValueById(this._idParamAngleY,30*this._dragY),this._model.addParameterValueById(this._idParamAngleZ,this._dragX*this._dragY*-30),this._model.addParameterValueById(this._idParamBodyAngleX,10*this._dragX),this._model.addParameterValueById(this._idParamEyeBallX,this._dragX),this._model.addParameterValueById(this._idParamEyeBallY,this._dragY),null!=this._breath&&this._breath.updateParameters(this._model,t),null!=this._physics&&this._physics.evaluate(this._model,t),this._lipsync)for(var r=0;r<this._lipSyncIds.getSize();++r)this._model.addParameterValueById(this._lipSyncIds.at(r),0,.8);null!=this._pose&&this._pose.updateParameters(this._model,t),this._model.update()}},Model.prototype.startMotion=function(e,r,i){var n=this;if(i==this._setting.Priority.Force)this._motionManager.setReservePriority(i);else if(!this._motionManager.reserveMotion(i))return S.log("can't start motion.",!0),Or;this._modelSetting.getMotionFileName(e,r);var t=Xr.getFormatedString("{0}_{1}",e,r),t=this._motions.getValue(t);if(null!=t)return S.log("start motion: ["+e+"_"+r+"]",!0),this._motionManager.startMotionPriority(t,!1,i);this.registerMotion(e,r).then(function(t){S.log("start motion: ["+e+"_"+r+"]",!0),n._motionManager.startMotionPriority(t,!1,i)})},Model.prototype.startRandomMotion=function(t,e){if(0==this._modelSetting.getMotionCount(t))return Or;var r=Math.floor(Math.random()*this._modelSetting.getMotionCount(t));return this.startMotion(t,r,e)},Model.prototype.setExpression=function(t){var e=this._expressions.getValue(t);S.log("expression: ["+t+"]",!0),null!=e?this._expressionManager.startMotionPriority(e,!1,this._setting.Priority.Force):S.log("expression["+t+"] is null",!0)},Model.prototype.setRandomExpression=function(){if(0!=this._expressions.getSize())for(var t,e=Math.floor(Math.random()*this._expressions.getSize()),r=0;r<this._expressions.getSize();r++)if(r==e)return t=this._expressions._keyValues[r].first,void this.setExpression(t)},Model.prototype.motionEventFired=function(t){R("{0} is fired on LAppModel!!",t.s)},Model.prototype.getHitList=function(t,e){for(var r=[],i=0,n=this.getDrawableIds();i<n.length;i++){var o=n[i],a=Hr.getIdManager().getId(o),s=this.isHit(a,t,e);s.hit&&r.push({cubismIdHandle:a,area:s.area,id:o})}return r.sort(function(t,e){return t.area-e.area}),r},Model.prototype.preLoadMotionGroup=function(a,s){return Ur(this,void 0,void 0,function(){var e,r,i,n,o;return Nr(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<this._modelSetting.getMotionCount(a)?(o=Xr.getFormatedString("{0}_{1}",a,e),r=this._modelSetting.getMotionFileName(a,e),r=this._setting.baseUrl+r,S.log("load motion: "+r+" => ["+a+"_"+e+"]",!0),n=(i=s).push,o={name:o,group:a,i:e},[4,fetch(r)]):[3,5];case 2:return[4,t.sent().arrayBuffer()];case 3:n.apply(i,[(o.buffer=t.sent(),o)]),t.label=4;case 4:return e++,[3,1];case 5:return[2]}})})},Model.prototype.preLoadMotion=function(e){return Ur(this,void 0,void 0,function(){return Nr(this,function(t){switch(t.label){case 0:return e=this._setting.baseUrl+e,[4,fetch(e)];case 1:return[4,t.sent().arrayBuffer()];case 2:return[2,t.sent()]}})})},Model.prototype.releaseMotions=function(){this._motions.clear()},Model.prototype.releaseExpressions=function(){this._expressions.clear()},Model.prototype.doDraw=function(){var t;null!=this._model&&(t=[0,0,this._setting.canvas.width,this._setting.canvas.height],this.getRenderer().setRenderState(this._webgl.frameBuffer,t),this.getRenderer().drawModel())},Model.prototype.draw=function(t){null!=this._model&&this._state==d.CompleteSetup&&(t.multiplyByMatrix(this._modelMatrix),this.getRenderer().setMvpMatrix(t),this.doDraw())},Model.prototype.updateTime=function(){this.s_currentFrame=Date.now(),this.s_deltaTime=(this.s_currentFrame-this.s_lastFrame)/1e3,this.s_lastFrame=this.s_currentFrame},Model.prototype.onUpdate=function(){var t=new Zr,e=this._setting.canvas.width,r=this._setting.canvas.height;t.scale(1,e/r),null!=this._viewMatrix&&t.multiplyByMatrix(this._viewMatrix),this.update(),this.draw(t)},Model.prototype.getDrawableIds=function(){return this._model.getModel().drawables.ids},Model);function Model(t,e,r){var i=Dr.call(this)||this;return i._setting=t,i._textureManager=e,i._webgl=r,i._viewMatrix=new Zr,i.s_currentFrame=0,i.s_lastFrame=0,i.s_deltaTime=0,i._modelSetting=null,i._userTimeSeconds=0,i._eyeBlinkIds=new zr,i._lipSyncIds=new zr,i._motions=new Yr,i._expressions=new Yr,i._hitArea=new zr,i._userArea=new zr,i._idParamAngleX=Hr.getIdManager().getId(qr.ParamAngleX),i._idParamAngleY=Hr.getIdManager().getId(qr.ParamAngleY),i._idParamAngleZ=Hr.getIdManager().getId(qr.ParamAngleZ),i._idParamEyeBallX=Hr.getIdManager().getId(qr.ParamEyeBallX),i._idParamEyeBallY=Hr.getIdManager().getId(qr.ParamEyeBallY),i._idParamBodyAngleX=Hr.getIdManager().getId(qr.ParamBodyAngleX),i._state=d.LoadAssets,i._expressionCount=0,i._textureCount=0,i.loadAssets(i._setting.modelBuffer),i}$r=function(t,e){return($r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var $r,ti,_,ei,ri=function(t,e){function __(){this.constructor=t}$r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},ii=i.CubismMatrix44;function CubismViewMatrix(){var t=ei.call(this)||this;return t._screenLeft=0,t._screenRight=0,t._screenTop=0,t._screenBottom=0,t._maxLeft=0,t._maxRight=0,t._maxTop=0,t._maxBottom=0,t._maxScale=0,t._minScale=0,t}_=ti=ti||{},ri(CubismViewMatrix,ei=ii),CubismViewMatrix.prototype.adjustTranslate=function(t,e){this._tr[0]*this._maxLeft+(this._tr[12]+t)>this._screenLeft&&(t=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+t)<this._screenRight&&(t=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+e)<this._screenTop&&(e=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+e)>this._screenBottom&&(e=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]);ii.multiply(t,this._tr,this._tr)},CubismViewMatrix.prototype.adjustScale=function(t,e,r){var i=this.getMaxScale(),n=this.getMinScale(),o=r*this._tr[0],n=(o<n?0<this._tr[0]&&(r=n/this._tr[0]):i<o&&0<this._tr[0]&&(r=i/this._tr[0]),new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1])),o=new Float32Array([r,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-t,-e,0,1]);ii.multiply(i,this._tr,this._tr),ii.multiply(o,this._tr,this._tr),ii.multiply(n,this._tr,this._tr)},CubismViewMatrix.prototype.setScreenRect=function(t,e,r,i){this._screenLeft=t,this._screenRight=e,this._screenBottom=r,this._screenTop=i},CubismViewMatrix.prototype.setMaxScreenRect=function(t,e,r,i){this._maxLeft=t,this._maxRight=e,this._maxTop=i,this._maxBottom=r},CubismViewMatrix.prototype.setMaxScale=function(t){this._maxScale=t},CubismViewMatrix.prototype.setMinScale=function(t){this._minScale=t},CubismViewMatrix.prototype.getMaxScale=function(){return this._maxScale},CubismViewMatrix.prototype.getMinScale=function(){return this._minScale},CubismViewMatrix.prototype.isMaxScale=function(){return this.getScaleX()>=this._maxScale},CubismViewMatrix.prototype.isMinScale=function(){return this.getScaleX()<=this._minScale},CubismViewMatrix.prototype.getScreenLeft=function(){return this._screenLeft},CubismViewMatrix.prototype.getScreenRight=function(){return this._screenRight},CubismViewMatrix.prototype.getScreenBottom=function(){return this._screenBottom},CubismViewMatrix.prototype.getScreenTop=function(){return this._screenTop},CubismViewMatrix.prototype.getMaxLeft=function(){return this._maxLeft},CubismViewMatrix.prototype.getMaxRight=function(){return this._maxRight},CubismViewMatrix.prototype.getMaxBottom=function(){return this._maxBottom},CubismViewMatrix.prototype.getMaxTop=function(){return this._maxTop},_.CubismViewMatrix=CubismViewMatrix;var ni=ti.CubismViewMatrix,oi=i.CubismMatrix44,ai=(TouchManager.prototype.bindEvent=function(){var e=this;"ontouchend"in this._setting.canvas?(this._setting.canvas.ontouchstart=function(t){e.onTouchBegan(t)},this._setting.canvas.ontouchmove=function(t){e.onTouchMoved(t)},this._setting.canvas.ontouchend=function(t){e.onTouchEnded(t)},this._setting.canvas.ontouchcancel=function(t){e.onTouchCancel(t)}):(this._setting.canvas.onmousedown=function(t){e.onClickBegan(t)},this._setting.canvas.onmousemove=function(t){e.onMouseMoved(t)},this._setting.canvas.onmouseup=function(t){e.onClickEnded(t)})},TouchManager.prototype.onClickBegan=function(t){this._captured=!0;var e=t.pageX,t=t.pageY;this.onTouchesBegan(e,t)},TouchManager.prototype.onMouseMoved=function(t){var e,r;this._captured&&(e=t.target.getBoundingClientRect(),r=t.clientX-e.left,t=t.clientY-e.top,this.onTouchesMoved(r,t))},TouchManager.prototype.onClickEnded=function(t){this._captured=!1;var e=t.target.getBoundingClientRect(),r=t.clientX-e.left,t=t.clientY-e.top;this.onTouchesEnded(r,t)},TouchManager.prototype.onTouchBegan=function(t){this._captured=!0;var e=t.changedTouches[0].pageX,t=t.changedTouches[0].pageY;this.onTouchesBegan(e,t)},TouchManager.prototype.onTouchMoved=function(t){var e,r;this._captured&&(e=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-e.left,t=t.changedTouches[0].clientY-e.top,this.onTouchesMoved(r,t))},TouchManager.prototype.onTouchEnded=function(t){this._captured=!1;var e=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-e.left,t=t.changedTouches[0].clientY-e.top;this.onTouchesEnded(r,t)},TouchManager.prototype.onTouchCancel=function(t){this._captured=!1;var e=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-e.left,t=t.changedTouches[0].clientY-e.top;this.onTouchesEnded(r,t)},TouchManager.prototype.onTouchesBegan=function(t,e){this._coordinateManager.touchesBegan(t,e)},TouchManager.prototype.onTouchesMoved=function(t,e){var r=this.transformViewX(this._coordinateManager.getX()),i=this.transformViewY(this._coordinateManager.getY());this._coordinateManager.touchesMoved(t,e),this._model.setDragging(r,i)},TouchManager.prototype.onTouchesEnded=function(t,e){this._model.setDragging(0,0);var r=this._deviceToScreen.transformX(this._coordinateManager.getX()),i=this._deviceToScreen.transformY(this._coordinateManager.getY());this.onTap(r,i)},TouchManager.prototype.transformViewX=function(t){t=this._deviceToScreen.transformX(t);return this._viewMatrix.invertTransformX(t)},TouchManager.prototype.transformViewY=function(t){t=this._deviceToScreen.transformY(t);return this._viewMatrix.invertTransformY(t)},TouchManager.prototype.transformScreenX=function(t){return this._deviceToScreen.transformX(t)},TouchManager.prototype.transformScreenY=function(t){return this._deviceToScreen.transformY(t)},TouchManager.prototype.onTap=function(t,e){S.log("onTap x: "+t+" y: "+e,!0);for(var r=0,i=this._model.getHitList(t,e);r<i.length;r++){var n=i[r];if(S.log("Hit drawId : "+n.id,!0),this._setting.binding[n.id])return void this._model.startRandomMotion(w.getRandomItem(this._setting.binding[n.id].motion),2);this._setting.debug&&S.log("Hit drawId "+n.id+" not found binding",!0)}},TouchManager);function TouchManager(t,e,r){this._captured=!1,this._coordinateManager=new si,this._deviceToScreen=new oi,this._viewMatrix=new ni,this._setting=t,this._view=e,this._model=r,e=t.canvas.width;var i=(r=t.canvas.height)/e,n=t.view.VIEW_LOGICAL_LEFT,o=t.view.VIEW_LOGICAL_RIGHT,i=(this._viewMatrix.setScreenRect(n,o,-i,i),Math.abs(n-o));this._deviceToScreen.scaleRelative(i/e,-i/e),this._deviceToScreen.translateRelative(.5*-e,.5*-r),this._viewMatrix.setMaxScale(t.view.VIEW_MAX_SCALE),this._viewMatrix.setMinScale(t.view.VIEW_MIN_SCALE),this._viewMatrix.setMaxScreenRect(t.view.VIEW_LOGICAL_MAX_LEFT,t.view.VIEW_LOGICAL_MAX_RIGHT,t.view.VIEW_LOGICAL_MAX_BOTTOM,t.view.VIEW_LOGICAL_MAX_TOP),this.bindEvent()}CoordinateManager.prototype.getCenterX=function(){return this._lastX},CoordinateManager.prototype.getCenterY=function(){return this._lastY},CoordinateManager.prototype.getDeltaX=function(){return this._deltaX},CoordinateManager.prototype.getDeltaY=function(){return this._deltaY},CoordinateManager.prototype.getStartX=function(){return this._startX},CoordinateManager.prototype.getStartY=function(){return this._startY},CoordinateManager.prototype.getScale=function(){return this._scale},CoordinateManager.prototype.getX=function(){return this._lastX},CoordinateManager.prototype.getY=function(){return this._lastY},CoordinateManager.prototype.getX1=function(){return this._lastX1},CoordinateManager.prototype.getY1=function(){return this._lastY1},CoordinateManager.prototype.getX2=function(){return this._lastX2},CoordinateManager.prototype.getY2=function(){return this._lastY2},CoordinateManager.prototype.isSingleTouch=function(){return this._touchSingle},CoordinateManager.prototype.isFlickAvailable=function(){return this._flipAvailable},CoordinateManager.prototype.disableFlick=function(){this._flipAvailable=!1},CoordinateManager.prototype.touchesBegan=function(t,e){this._lastX=t,this._lastY=e,this._startX=t,this._startY=e,this._lastTouchDistance=-1,this._flipAvailable=!0,this._touchSingle=!0},CoordinateManager.prototype.touchesMoved=function(t,e){this._lastX=t,this._lastY=e,this._lastTouchDistance=-1,this._touchSingle=!0},CoordinateManager.prototype.getFlickDistance=function(){return this.calculateDistance(this._startX,this._startY,this._lastX,this._lastY)},CoordinateManager.prototype.calculateDistance=function(t,e,r,i){return Math.sqrt((t-r)*(t-r)+(e-i)*(e-i))},CoordinateManager.prototype.calculateMovingAmount=function(t,e){if(0<t!=0<e)return 0;var r=0<t?1:-1,t=Math.abs(t),e=Math.abs(e);return r*(t<e?t:e)};var si=CoordinateManager;function CoordinateManager(){this._startX=0,this._startY=0,this._lastX=0,this._lastY=0,this._lastX1=0,this._lastY1=0,this._lastX2=0,this._lastY2=0,this._lastTouchDistance=0,this._deltaX=0,this._deltaY=0,this._scale=1,this._touchSingle=!1,this._flipAvailable=!1}var ui=i.CubismMatrix44,li=n.CubismFramework,ci=(CubismSDK.prototype.loop=function(){var t=this;this._model.updateTime(),this._webgl.gl.clearColor(0,0,0,0),this._webgl.gl.enable(this._webgl.gl.DEPTH_TEST),this._webgl.gl.depthFunc(this._webgl.gl.LEQUAL),this._webgl.gl.clear(this._webgl.gl.COLOR_BUFFER_BIT|this._webgl.gl.DEPTH_BUFFER_BIT),this._webgl.gl.clearDepth(1),this._webgl.gl.enable(this._webgl.gl.BLEND),this._webgl.gl.blendFunc(this._webgl.gl.SRC_ALPHA,this._webgl.gl.ONE_MINUS_SRC_ALPHA),this._view.render(),this._model.onUpdate(),requestAnimationFrame(function(){t.loop()})},CubismSDK);function CubismSDK(t){this._cubismOption=new et,this._webgl=new st(t.canvas),this._view=new lt(this._webgl),this._textureManager=new ot(this._webgl),this._cubismOption.logFunction=S.log,this._cubismOption.loggingLevel=0,li.startUp(this._cubismOption),li.initialize();new ui;this._model=new Kr(t,this._textureManager,this._webgl),this._touchManage=new ai(t,this._view,this._model),this.loop()}Object.defineProperty(ModelInfo.prototype,"HitAreasList",{get:function(){return this._cubismSDK._model.getDrawableIds()},enumerable:!1,configurable:!0});var hi=ModelInfo;function ModelInfo(t,e){this._setting=t,this._cubismSDK=e}function Live2dHelper(t,e){var r=this;this.setting=new I,this.setting.init(t,e).then(function(){r.load()}),this.setting.canvas._Live2dHelper=this}Live2dHelper.prototype.load=function(){this.cubismSDK=new ci(this.setting),this.modelInfo=new hi(this.setting,this.cubismSDK)};b.default=Live2dHelper}],i={},__webpack_require__.m=r,__webpack_require__.c=i,__webpack_require__.d=function(t,e,r){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(r,i,function(t){return e[t]}.bind(null,i));return r},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=9).default;function __webpack_require__(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}var r,i});
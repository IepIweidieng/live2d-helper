!function webpackUniversalModuleDefinition(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Live2dHelper=i():t.Live2dHelper=i()}(self,(()=>(()=>{var t={470:t=>{"use strict";function assertPath(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function normalizeStringPosix(t,i){for(var r,n="",o=0,s=-1,u=0,l=0;l<=t.length;++l){if(l<t.length)r=t.charCodeAt(l);else{if(47===r)break;r=47}if(47===r){if(s===l-1||1===u);else if(s!==l-1&&2===u){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var p=n.lastIndexOf("/");if(p!==n.length-1){-1===p?(n="",o=0):o=(n=n.slice(0,p)).length-1-n.lastIndexOf("/"),s=l,u=0;continue}}else if(2===n.length||1===n.length){n="",o=0,s=l,u=0;continue}i&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),o=l-s-1;s=l,u=0}else 46===r&&-1!==u?++u:u=-1}return n}var i={resolve:function resolve(){for(var t,i="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var o;n>=0?o=arguments[n]:(void 0===t&&(t=process.cwd()),o=t),assertPath(o),0!==o.length&&(i=o+"/"+i,r=47===o.charCodeAt(0))}return i=normalizeStringPosix(i,!r),r?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function normalize(t){if(assertPath(t),0===t.length)return".";var i=47===t.charCodeAt(0),r=47===t.charCodeAt(t.length-1);return 0!==(t=normalizeStringPosix(t,!i)).length||i||(t="."),t.length>0&&r&&(t+="/"),i?"/"+t:t},isAbsolute:function isAbsolute(t){return assertPath(t),t.length>0&&47===t.charCodeAt(0)},join:function join(){if(0===arguments.length)return".";for(var t,r=0;r<arguments.length;++r){var n=arguments[r];assertPath(n),n.length>0&&(void 0===t?t=n:t+="/"+n)}return void 0===t?".":i.normalize(t)},relative:function relative(t,r){if(assertPath(t),assertPath(r),t===r)return"";if((t=i.resolve(t))===(r=i.resolve(r)))return"";for(var n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var o=t.length,s=o-n,u=1;u<r.length&&47===r.charCodeAt(u);++u);for(var l=r.length-u,p=s<l?s:l,m=-1,y=0;y<=p;++y){if(y===p){if(l>p){if(47===r.charCodeAt(u+y))return r.slice(u+y+1);if(0===y)return r.slice(u+y)}else s>p&&(47===t.charCodeAt(n+y)?m=y:0===y&&(m=0));break}var b=t.charCodeAt(n+y);if(b!==r.charCodeAt(u+y))break;47===b&&(m=y)}var A="";for(y=n+m+1;y<=o;++y)y!==o&&47!==t.charCodeAt(y)||(0===A.length?A+="..":A+="/..");return A.length>0?A+r.slice(u+m):(u+=m,47===r.charCodeAt(u)&&++u,r.slice(u))},_makeLong:function _makeLong(t){return t},dirname:function dirname(t){if(assertPath(t),0===t.length)return".";for(var i=t.charCodeAt(0),r=47===i,n=-1,o=!0,s=t.length-1;s>=1;--s)if(47===(i=t.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"//":t.slice(0,n)},basename:function basename(t,i){if(void 0!==i&&"string"!=typeof i)throw new TypeError('"ext" argument must be a string');assertPath(t);var r,n=0,o=-1,s=!0;if(void 0!==i&&i.length>0&&i.length<=t.length){if(i.length===t.length&&i===t)return"";var u=i.length-1,l=-1;for(r=t.length-1;r>=0;--r){var p=t.charCodeAt(r);if(47===p){if(!s){n=r+1;break}}else-1===l&&(s=!1,l=r+1),u>=0&&(p===i.charCodeAt(u)?-1==--u&&(o=r):(u=-1,o=l))}return n===o?o=l:-1===o&&(o=t.length),t.slice(n,o)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!s){n=r+1;break}}else-1===o&&(s=!1,o=r+1);return-1===o?"":t.slice(n,o)},extname:function extname(t){assertPath(t);for(var i=-1,r=0,n=-1,o=!0,s=0,u=t.length-1;u>=0;--u){var l=t.charCodeAt(u);if(47!==l)-1===n&&(o=!1,n=u+1),46===l?-1===i?i=u:1!==s&&(s=1):-1!==i&&(s=-1);else if(!o){r=u+1;break}}return-1===i||-1===n||0===s||1===s&&i===n-1&&i===r+1?"":t.slice(i,n)},format:function format(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function _format(t,i){var r=i.dir||i.root,n=i.base||(i.name||"")+(i.ext||"");return r?r===i.root?r+n:r+t+n:n}("/",t)},parse:function parse(t){assertPath(t);var i={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return i;var r,n=t.charCodeAt(0),o=47===n;o?(i.root="/",r=1):r=0;for(var s=-1,u=0,l=-1,p=!0,m=t.length-1,y=0;m>=r;--m)if(47!==(n=t.charCodeAt(m)))-1===l&&(p=!1,l=m+1),46===n?-1===s?s=m:1!==y&&(y=1):-1!==s&&(y=-1);else if(!p){u=m+1;break}return-1===s||-1===l||0===y||1===y&&s===l-1&&s===u+1?-1!==l&&(i.base=i.name=0===u&&o?t.slice(1,l):t.slice(u,l)):(0===u&&o?(i.name=t.slice(1,s),i.base=t.slice(1,l)):(i.name=t.slice(u,s),i.base=t.slice(u,l)),i.ext=t.slice(s,l)),u>0?i.dir=t.slice(0,u-1):o&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,t.exports=i},324:(t,i,r)=>{var n;!function(i){var n=function(){function _csm(){}return _csm.getVersion=function(){return A.ccall("csmGetVersion","number",[],[])},_csm.getLatestMocVersion=function(){return A.ccall("csmGetLatestMocVersion","number",[],[])},_csm.getMocVersion=function(t){return A.ccall("csmGetMocVersion","number",["number"],[t])},_csm.getSizeofModel=function(t){return A.ccall("csmGetSizeofModel","number",["number"],[t])},_csm.reviveMocInPlace=function(t,i){return A.ccall("csmReviveMocInPlace","number",["number","number"],[t,i])},_csm.initializeModelInPlace=function(t,i,r){return A.ccall("csmInitializeModelInPlace","number",["number","number","number"],[t,i,r])},_csm.getParameterCount=function(t){return A.ccall("csmGetParameterCount","number",["number"],[t])},_csm.getParameterIds=function(t){return A.ccall("csmGetParameterIds","number",["number"],[t])},_csm.getParameterMinimumValues=function(t){return A.ccall("csmGetParameterMinimumValues","number",["number"],[t])},_csm.getParameterMaximumValues=function(t){return A.ccall("csmGetParameterMaximumValues","number",["number"],[t])},_csm.getParameterDefaultValues=function(t){return A.ccall("csmGetParameterDefaultValues","number",["number"],[t])},_csm.getParameterValues=function(t){return A.ccall("csmGetParameterValues","number",["number"],[t])},_csm.getPartCount=function(t){return A.ccall("csmGetPartCount","number",["number"],[t])},_csm.getPartIds=function(t){return A.ccall("csmGetPartIds","number",["number"],[t])},_csm.getPartOpacities=function(t){return A.ccall("csmGetPartOpacities","number",["number"],[t])},_csm.getPartParentPartIndices=function(t){return A.ccall("csmGetPartParentPartIndices","number",["number"],[t])},_csm.getDrawableCount=function(t){return A.ccall("csmGetDrawableCount","number",["number"],[t])},_csm.getDrawableIds=function(t){return A.ccall("csmGetDrawableIds","number",["number"],[t])},_csm.getDrawableConstantFlags=function(t){return A.ccall("csmGetDrawableConstantFlags","number",["number"],[t])},_csm.getDrawableDynamicFlags=function(t){return A.ccall("csmGetDrawableDynamicFlags","number",["number"],[t])},_csm.getDrawableTextureIndices=function(t){return A.ccall("csmGetDrawableTextureIndices","number",["number"],[t])},_csm.getDrawableDrawOrders=function(t){return A.ccall("csmGetDrawableDrawOrders","number",["number"],[t])},_csm.getDrawableRenderOrders=function(t){return A.ccall("csmGetDrawableRenderOrders","number",["number"],[t])},_csm.getDrawableOpacities=function(t){return A.ccall("csmGetDrawableOpacities","number",["number"],[t])},_csm.getDrawableMaskCounts=function(t){return A.ccall("csmGetDrawableMaskCounts","number",["number"],[t])},_csm.getDrawableMasks=function(t){return A.ccall("csmGetDrawableMasks","number",["number"],[t])},_csm.getDrawableVertexCounts=function(t){return A.ccall("csmGetDrawableVertexCounts","number",["number"],[t])},_csm.getDrawableVertexPositions=function(t){return A.ccall("csmGetDrawableVertexPositions","number",["number"],[t])},_csm.getDrawableVertexUvs=function(t){return A.ccall("csmGetDrawableVertexUvs","number",["number"],[t])},_csm.getDrawableIndexCounts=function(t){return A.ccall("csmGetDrawableIndexCounts","number",["number"],[t])},_csm.getDrawableIndices=function(t){return A.ccall("csmGetDrawableIndices","number",["number"],[t])},_csm.mallocMoc=function(t){return A.ccall("csmMallocMoc","number",["number"],[t])},_csm.mallocModelAndInitialize=function(t){return A.ccall("csmMallocModelAndInitialize","number",["number"],[t])},_csm.malloc=function(t){return A.ccall("csmMalloc","number",["number"],[t])},_csm.setLogFunction=function(t){A.ccall("csmSetLogFunction",null,["number"],[t])},_csm.updateModel=function(t){A.ccall("csmUpdateModel",null,["number"],[t])},_csm.readCanvasInfo=function(t,i,r,n){A.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[t,i,r,n])},_csm.resetDrawableDynamicFlags=function(t){A.ccall("csmResetDrawableDynamicFlags",null,["number"],[t])},_csm.free=function(t){A.ccall("csmFree",null,["number"],[t])},_csm}(),o=function(){function Version(){}return Version.csmGetVersion=function(){return n.getVersion()},Version.csmGetLatestMocVersion=function(){return n.getLatestMocVersion()},Version.csmGetMocVersion=function(t){return n.getMocVersion(t._ptr)},Version}();i.Version=o;var s=function(){function Logging(){}return Logging.csmSetLogFunction=function(t){Logging.logFunction=t;var i=A.addFunction(Logging.wrapLogFunction,"vi");n.setLogFunction(i)},Logging.csmGetLogFunction=function(){return Logging.logFunction},Logging.wrapLogFunction=function(t){var i=A.UTF8ToString(t);Logging.logFunction(i)},Logging}();i.Logging=s;var u=function(){function Moc(t){var i=n.mallocMoc(t.byteLength);i&&(new Uint8Array(A.HEAPU8.buffer,i,t.byteLength).set(new Uint8Array(t)),this._ptr=n.reviveMocInPlace(i,t.byteLength),this._ptr||n.free(i))}return Moc.fromArrayBuffer=function(t){if(!t)return null;var i=new Moc(t);return i._ptr?i:null},Moc.prototype._release=function(){n.free(this._ptr),this._ptr=0},Moc}();i.Moc=u;var l=function(){function Model(t){this._ptr=n.mallocModelAndInitialize(t._ptr),this._ptr&&(this.parameters=new Parameters(this._ptr),this.parts=new Parts(this._ptr),this.drawables=new p(this._ptr),this.canvasinfo=new CanvasInfo(this._ptr))}return Model.fromMoc=function(t){var i=new Model(t);return i._ptr?i:null},Model.prototype.update=function(){n.updateModel(this._ptr)},Model.prototype.release=function(){n.free(this._ptr),this._ptr=0},Model}();i.Model=l;var CanvasInfo=function(t){if(t){var i=new Float32Array(2),r=i.length*i.BYTES_PER_ELEMENT,o=n.malloc(r),s=new Uint8Array(A.HEAPU8.buffer,o,r);s.set(new Uint8Array(i.buffer));var u=new Float32Array(2),l=u.length*u.BYTES_PER_ELEMENT,p=n.malloc(l),m=new Uint8Array(A.HEAPU8.buffer,p,l);m.set(new Uint8Array(u.buffer));var y=new Float32Array(1),b=y.length*y.BYTES_PER_ELEMENT,v=n.malloc(b),M=new Uint8Array(A.HEAPU8.buffer,v,b);M.set(new Uint8Array(y.buffer)),n.readCanvasInfo(t,s.byteOffset,m.byteOffset,M.byteOffset),i=new Float32Array(s.buffer,s.byteOffset,s.length),u=new Float32Array(m.buffer,m.byteOffset,m.length),y=new Float32Array(M.buffer,M.byteOffset,M.length),this.CanvasWidth=i[0],this.CanvasHeight=i[1],this.CanvasOriginX=u[0],this.CanvasOriginY=u[1],this.PixelsPerUnit=y[0],n.free(s.byteOffset),n.free(m.byteOffset),n.free(M.byteOffset)}};i.CanvasInfo=CanvasInfo;var Parameters=function(t){var i=0;this.count=n.getParameterCount(t),i=n.getParameterCount(t),this.ids=new Array(i);for(var r=new Uint32Array(A.HEAPU32.buffer,n.getParameterIds(t),i),o=0;o<r.length;o++)this.ids[o]=A.UTF8ToString(r[o]);i=n.getParameterCount(t),this.minimumValues=new Float32Array(A.HEAPF32.buffer,n.getParameterMinimumValues(t),i),i=n.getParameterCount(t),this.maximumValues=new Float32Array(A.HEAPF32.buffer,n.getParameterMaximumValues(t),i),i=n.getParameterCount(t),this.defaultValues=new Float32Array(A.HEAPF32.buffer,n.getParameterDefaultValues(t),i),i=n.getParameterCount(t),this.values=new Float32Array(A.HEAPF32.buffer,n.getParameterValues(t),i)};i.Parameters=Parameters;var Parts=function(t){var i=0;this.count=n.getPartCount(t),i=n.getPartCount(t),this.ids=new Array(i);for(var r=new Uint32Array(A.HEAPU32.buffer,n.getPartIds(t),i),o=0;o<r.length;o++)this.ids[o]=A.UTF8ToString(r[o]);i=n.getPartCount(t),this.opacities=new Float32Array(A.HEAPF32.buffer,n.getPartOpacities(t),i),i=n.getPartCount(t),this.parentIndices=new Int32Array(A.HEAP32.buffer,n.getPartParentPartIndices(t),i)};i.Parts=Parts;var p=function(){function Drawables(t){this._modelPtr=t;var i=0,r=null;this.count=n.getDrawableCount(t),i=n.getDrawableCount(t),this.ids=new Array(i);for(var o=new Uint32Array(A.HEAPU32.buffer,n.getDrawableIds(t),i),s=0;s<o.length;s++)this.ids[s]=A.UTF8ToString(o[s]);i=n.getDrawableCount(t),this.constantFlags=new Uint8Array(A.HEAPU8.buffer,n.getDrawableConstantFlags(t),i),i=n.getDrawableCount(t),this.dynamicFlags=new Uint8Array(A.HEAPU8.buffer,n.getDrawableDynamicFlags(t),i),i=n.getDrawableCount(t),this.textureIndices=new Int32Array(A.HEAP32.buffer,n.getDrawableTextureIndices(t),i),i=n.getDrawableCount(t),this.drawOrders=new Int32Array(A.HEAP32.buffer,n.getDrawableDrawOrders(t),i),i=n.getDrawableCount(t),this.renderOrders=new Int32Array(A.HEAP32.buffer,n.getDrawableRenderOrders(t),i),i=n.getDrawableCount(t),this.opacities=new Float32Array(A.HEAPF32.buffer,n.getDrawableOpacities(t),i),i=n.getDrawableCount(t),this.maskCounts=new Int32Array(A.HEAP32.buffer,n.getDrawableMaskCounts(t),i),i=n.getDrawableCount(t),this.vertexCounts=new Int32Array(A.HEAP32.buffer,n.getDrawableVertexCounts(t),i),i=n.getDrawableCount(t),this.indexCounts=new Int32Array(A.HEAP32.buffer,n.getDrawableIndexCounts(t),i),i=n.getDrawableCount(t),r=new Int32Array(A.HEAP32.buffer,n.getDrawableMaskCounts(t),i),this.masks=new Array(i);var u=new Uint32Array(A.HEAPU32.buffer,n.getDrawableMasks(t),i);for(s=0;s<u.length;s++)this.masks[s]=new Int32Array(A.HEAP32.buffer,u[s],r[s]);i=n.getDrawableCount(t),r=new Int32Array(A.HEAP32.buffer,n.getDrawableVertexCounts(t),i),this.vertexPositions=new Array(i);var l=new Uint32Array(A.HEAPU32.buffer,n.getDrawableVertexPositions(t),i);for(s=0;s<l.length;s++)this.vertexPositions[s]=new Float32Array(A.HEAPF32.buffer,l[s],2*r[s]);i=n.getDrawableCount(t),r=new Int32Array(A.HEAP32.buffer,n.getDrawableVertexCounts(t),i),this.vertexUvs=new Array(i);var p=new Uint32Array(A.HEAPU32.buffer,n.getDrawableVertexUvs(t),i);for(s=0;s<p.length;s++)this.vertexUvs[s]=new Float32Array(A.HEAPF32.buffer,p[s],2*r[s]);i=n.getDrawableCount(t),r=new Int32Array(A.HEAP32.buffer,n.getDrawableIndexCounts(t),i),this.indices=new Array(i);var m=new Uint32Array(A.HEAPU32.buffer,n.getDrawableIndices(t),i);for(s=0;s<m.length;s++)this.indices[s]=new Uint16Array(A.HEAPU16.buffer,m[s],r[s])}return Drawables.prototype.resetDynamicFlags=function(){n.resetDrawableDynamicFlags(this._modelPtr)},Drawables}();i.Drawables=p;var m=function(){function Utils(){}return Utils.hasBlendAdditiveBit=function(t){return 1==(1&t)},Utils.hasBlendMultiplicativeBit=function(t){return 2==(2&t)},Utils.hasIsDoubleSidedBit=function(t){return 4==(4&t)},Utils.hasIsInvertedMaskBit=function(t){return 8==(8&t)},Utils.hasIsVisibleBit=function(t){return 1==(1&t)},Utils.hasVisibilityDidChangeBit=function(t){return 2==(2&t)},Utils.hasOpacityDidChangeBit=function(t){return 4==(4&t)},Utils.hasDrawOrderDidChangeBit=function(t){return 8==(8&t)},Utils.hasRenderOrderDidChangeBit=function(t){return 16==(16&t)},Utils.hasVertexPositionsDidChangeBit=function(t){return 32==(32&t)},Utils}();i.Utils=m;var y,b=(y="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){var i;t=t||{},i=i||(void 0!==t?t:{});var n,o={};for(n in i)i.hasOwnProperty(n)&&(o[n]=i[n]);var s,u,l,p;u="object"==typeof window,l="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&!u&&!l,s=!u&&!p&&!l;var m,b,A,v,M="";p?(M="//",m=function(t,i){var n;return(n=z(t))?i?n:n.toString():(A=A||r(304),t=(v=v||r(470)).normalize(t),A.readFileSync(t,i?null:"utf8"))},b=function(t){return(t=m(t,!0)).buffer||(t=new Uint8Array(t)),assert(t.buffer),t},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(t){throw t})),process.on("unhandledRejection",B),i.inspect=function(){return"[Emscripten Module object]"}):s?("undefined"!=typeof read&&(m=function(t){var i=z(t);return i?C(i):read(t)}),b=function(t){var i;return(i=z(t))?i:"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(assert("object"==typeof(i=read(t,"binary"))),i)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(u||l)&&(l?M=self.location.href:document.currentScript&&(M=document.currentScript.src),y&&(M=y),M=0!==M.indexOf("blob:")?M.substr(0,M.lastIndexOf("/")+1):"",m=function(t){try{var i=new XMLHttpRequest;return i.open("GET",t,!1),i.send(null),i.responseText}catch(i){if(t=z(t))return C(t);throw i}},l&&(b=function(t){try{var i=new XMLHttpRequest;return i.open("GET",t,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)}catch(i){if(t=z(t))return t;throw i}}));var S,x=i.print||console.log.bind(console),w=i.printErr||console.warn.bind(console);for(n in o)o.hasOwnProperty(n)&&(i[n]=o[n]);function da(){return{exports:function(t,i,r){var n=new ArrayBuffer(8),o=new Int32Array(n),s=new Float32Array(n),u=new Float64Array(n);function e(t){return o[t]}function f(t,i){o[t]=i}function g(){return u[0]}function h(t){u[0]=t}function j(t){s[0]=t}function k(){return s[0]}var l,p,m,y,b,A,v,M,S,x,w,P,V,I,E,T,F,L,R,D,U,G,J,H,Q,q,K,tt=(l=i.buffer,p=new Uint8Array(l),function(t,i){var r,n;if("undefined"==typeof Buffer)for(r=atob(i),n=0;n<r.length;n++)p[t+n]=r.charCodeAt(n);else for(r=Buffer.from(i,"base64"),n=0;n<r.length;n++)p[t+n]=r[n]});return tt(1024,"CgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAE1PQzMAW0NTTV0gW0VdJXM6ICVzCgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgAlcwoAICAAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIENvcnJ1cHRlZCAgbW9jMyBmaWxlLgoAImFkZHJlc3MiIGlzIG51bGwuAFtDU01dIFtXXVJvdGF0aW9uRGVmb3JtZXI6IE5vdCBmb3VuZCB0cmFuc2Zvcm1lZCBEaXJlY3Rpb24uCgAlMDJYIABbQ1NNXSBbRV1jc21SZXZpdmVNb2NJblBsYWNlIGlzIGZhaWxlZC4gVGhlIENvcmUgdW5zdXBwb3J0IGxhdGVyIHRoYW4gbW9jMyB2ZXI6WyVkXS4gVGhpcyBtb2MzIHZlciBpcyBbJWRdLgoAImFkZHJlc3MiIGFsaWdubWVudCBpcyBpbnZhbGlkLgBbQ1NNXSBbRV1VcGRhdGVEZWZvcm1lckhpZXJhcmNoeSgpOiBVbmtub3duIERlZm9ybWVyIFR5cGUuCgBbQ1NNXSBbRV1jc21HZXRNb2NWZXJzaW9uIGlzIGZhaWxlZC4gQ29ycnVwdGVkIG1vYzMgZmlsZS4KACJzaXplIiBpcyBpbnZhbGlkLgBMaXZlMkQgQ3ViaXNtIFNESyBDb3JlIFZlcnNpb24gJWQuJWQuJWQAIm1vZGVsIiBpcyBpbnZhbGlkLgBjc21HZXRNb2NWZXJzaW9uAGNzbVJldml2ZU1vY0luUGxhY2UAY3NtUmVhZENhbnZhc0luZm8AIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AY3NtR2V0U2l6ZW9mTW9kZWwAIm1vYyIgaXMgaW52YWxpZC4AY3NtSW5pdGlhbGl6ZU1vZGVsSW5QbGFjZQAic2l6ZSIgaXMgaW52YWxpZABjc21VcGRhdGVNb2RlbABjc21HZXRQYXJhbWV0ZXJDb3VudABjc21HZXRQYXJhbWV0ZXJJZHMAY3NtR2V0UGFyYW1ldGVyTWluaW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJNYXhpbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlckRlZmF1bHRWYWx1ZXMAY3NtR2V0UGFyYW1ldGVyVmFsdWVzAGNzbUdldFBhcnRDb3VudABjc21HZXRQYXJ0SWRzAGNzbUdldFBhcnRPcGFjaXRpZXMAY3NtR2V0UGFydFBhcmVudFBhcnRJbmRpY2VzAGNzbUdldERyYXdhYmxlQ291bnQAY3NtR2V0RHJhd2FibGVJZHMAY3NtR2V0RHJhd2FibGVDb25zdGFudEZsYWdzAGNzbUdldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldERyYXdhYmxlVGV4dHVyZUluZGljZXMAY3NtR2V0RHJhd2FibGVEcmF3T3JkZXJzAGNzbUdldERyYXdhYmxlUmVuZGVyT3JkZXJzAGNzbUdldERyYXdhYmxlT3BhY2l0aWVzAGNzbUdldERyYXdhYmxlTWFza0NvdW50cwBjc21HZXREcmF3YWJsZU1hc2tzAGNzbUdldERyYXdhYmxlVmVydGV4Q291bnRzAGNzbUdldERyYXdhYmxlVmVydGV4UG9zaXRpb25zAGNzbUdldERyYXdhYmxlVmVydGV4VXZzAGNzbUdldERyYXdhYmxlSW5kZXhDb3VudHMAY3NtR2V0RHJhd2FibGVJbmRpY2VzAGNzbVJlc2V0RHJhd2FibGVEeW5hbWljRmxhZ3M="),tt(2572,"Cw=="),tt(2611,"//////8="),tt(2680,"GBgAAC0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAAL"),tt(2736,"EQAPChEREQMKBwABEwkLCwAACQYLAAALAAYRAAAAERER"),tt(2785,"Cw=="),tt(2794,"EQAKChEREQAKAAACAAkLAAAACQALAAAL"),tt(2843,"DA=="),tt(2855,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),tt(2901,"Dg=="),tt(2913,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),tt(2959,"EA=="),tt(2971,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),tt(3026,"EgAAABISEgAAAAAAAAk="),tt(3075,"Cw=="),tt(3087,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),tt(3133,"DA=="),tt(3145,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGLTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAu"),tt(3232,"AwAAAAQAAAAEAAAABgAAAIP5ogBETm4A/CkVANFXJwDdNPUAYtvAADyZlQBBkEMAY1H+ALveqwC3YcUAOm4kANJNQgBJBuAACeouAByS0QDrHf4AKbEcAOg+pwD1NYIARLsuAJzphAC0JnAAQX5fANaROQBTgzkAnPQ5AItfhAAo+b0A+B87AN7/lwAPmAUAES/vAApaiwBtH20Az342AAnLJwBGT7cAnmY/AC3qXwC6J3UA5evHAD178QD3OQcAklKKAPtr6gAfsV8ACF2NADADVgB7/EYA8KtrACC8zwA29JoA46kdAF5hkQAIG+YAhZllAKAUXwCNQGgAgNj/ACdzTQAGBjEAylYVAMmocwB74mAAa4zAABnERwDNZ8MACejcAFmDKgCLdsQAphyWAESv3QAZV9EApT4FAAUH/wAzfj8AwjLoAJhP3gC7fTIAJj3DAB5r7wCf+F4ANR86AH/yygDxhx0AfJAhAGokfADVbvoAMC13ABU7QwC1FMYAwxmdAK3EwgAsTUEADABdAIZ9RgDjcS0Am8aaADNiAAC00nwAtKeXADdV1QDXPvYAoxAYAE12/ABknSoAcNerAGN8+AB6sFcAFxXnAMBJVgA71tkAp4Q4ACQjywDWincAWlQjAAAfuQDxChsAGc7fAJ8x/wBmHmoAmVdhAKz7RwB+f9gAImW3ADLoiQDmv2AA78TNAGw2CQBdP9QAFt7XAFg73gDem5IA0iIoACiG6ADiWE0AxsoyAAjjFgDgfcsAF8BQAPMdpwAY4FsALhM0AIMSYgCDSAEA9Y5bAK2wfwAe6fIASEpDABBn0wCq3dgArl9CAGphzgAKKKQA05m0AAam8gBcd38Ao8KDAGE8iACKc3gAr4xaAG/XvQAtpmMA9L/LAI2B7wAmwWcAVcpFAMrZNgAoqNIAwmGNABLJdwAEJhQAEkabAMRZxADIxUQATbKRAAAX8wDUQ60AKUnlAP3VEAAAvvwAHpTMAHDO7gATPvUA7PGAALPnwwDH+CgAkwWUAMFxPgAuCbMAC0XzAIgSnACrIHsALrWfAEeSwgB7Mi8ADFVtAHKnkABr5x8AMcuWAHkWSgBBeeIA9N+JAOiUlwDi5oQAmTGXAIjtawBfXzYAu/0OAEiatABnpGwAcXJCAI1dMgCfFbgAvOUJAI0xJQD3dDkAMAUcAA0MAQBLCGgALO5YAEeqkAB05wIAvdYkAPd9pgBuSHIAnxbvAI6UpgC0kfYA0VNRAM8K8gAgmDMA9Ut+ALJjaADdPl8AQF0DAIWJfwBVUikAN2TAAG3YEAAySDIAW0x1AE5x1ABFVG4ACwnBACr1aQAUZtUAJwedAF0EUAC0O9sA6nbFAIf5FwBJa30AHSe6AJZpKQDGzKwArRRUAJDiagCI2YkALHJQAASkvgB3B5QA8zBwAAD8JwDqcagAZsJJAGTgPQCX3YMAoz+XAEOU/QANhowAMUHeAJI5nQDdcIwAF7fnAAjfOwAVNysAXICgAFqAkwAQEZIAD+jYAGyArwDb/0sAOJAPAFkYdgBipRUAYcu7AMeJuQAQQL0A0vIEAEl1JwDrtvYA2yK7AAoUqgCJJi8AZIN2AAk7MwAOlBoAUTqqAB2jwgCv7a4AXCYSAG3CTQAtepwAwFaXAAM/gwAJ8PYAK0CMAG0xmQA5tAcADCAVANjDWwD1ksQAxq1LAE7KpQCnN80A5qk2AKuSlADdQmgAGWPeAHaM7wBoi1IA/Ns3AK6hqwDfFTEAAK6hAAz72gBkTWYA7QW3ACllMABXVr8AR/86AGr5uQB1vvMAKJPfAKuAMABmjPYABMsVAPoiBgDZ5B0APbOkAFcbjwA2zQkATkLpABO+pAAzI7UA8KoaAE9lqADSwaUACz8PAFt4zQAj+XYAe4sEAIkXcgDGplMAb27iAO/rAACbSlgAxNq3AKpmugB2z88A0QIdALHxLQCMmcEAw613AIZI2gD3XaAAxoD0AKzwLwDd7JoAP1y8ANDebQCQxx8AKtu2AKMlOgAAr5oArVOTALZXBAApLbQAS4B+ANoHpwB2qg4Ae1mhABYSKgDcty0A+uX9AInb/gCJvv0A5HZsAAap/AA+gHAAhW4VAP2H/wAoPgcAYWczACoYhgBNveoAs+evAI9tbgCVZzkAMb9bAITXSAAw3xYAxy1DACVhNQDJcM4AMMu4AL9s/QCkAKIABWzkAFrdoAAhb0cAYhLSALlchABwYUkAa1bgAJlSAQBQVTcAHtW3ADPxxAATbl8AXTDkAIUuqQAdssMAoTI2AAi3pADqsdQAFvchAI9p5AAn/3cADAOAAI1ALQBPzaAAIKWZALOi0wAvXQoAtPlCABHaywB9vtAAm9vBAKsXvQDKooEACGpcAC5VFwAnAFUAfxTwAOEHhgAUC2QAlkGNAIe+3gDa/SoAayW2AHuJNAAF8/4Aub+eAGhqTwBKKqgAT8RaAC34vADXWpgA9MeVAA1NjQAgOqYApFdfABQ/sQCAOJUAzCABAHHdhgDJ3rYAv2D1AE1lEQABB2sAjLCsALLA0ABRVUgAHvsOAJVywwCjBjsAwEA1AAbcewDgRcwATin6ANbKyADo80EAfGTeAJtk2ADZvjEApJfDAHdY1ABp48UA8NoTALo6PABGGEYAVXVfANK99QBuksYArC5dAA5E7QAcPkIAYcSHACn96QDn1vMAInzKAG+RNQAI4MUA/9eNAG5q4gCw/cYAkwjBAHxddABrrbIAzW6dAD5yewDGEWoA98+pAClz3wC1yboAtwBRAOKyDQB0uiQA5X1gAHTYigANFSwAgRgMAH5mlAABKRYAn3p2AP39vgBWRe8A2X42AOzZEwCLurkAxJf8ADGoJwDxbsMAlMU2ANioVgC0qLUAz8wOABKJLQBvVzQALFaJAJnO4wDWILkAa16qAD4qnAARX8wA/QtKAOH0+wCOO20A4oYsAOnUhAD8tKkA7+7RAC41yQAvOWEAOCFEABvZyACB/AoA+0pqAC8c2ABTtIQATpmMAFQizAAqVdwAwMbWAAsZlgAacLgAaZVkACZaYAA/Uu4AfxEPAPS1EQD8y/UANLwtADS87gDoXcwA3V5gAGeOmwCSM+8AyRe4AGFYmwDhV7wAUYPGANg+EADdcUgALRzdAK8YoQAhLEYAWfPXANl6mACeVMAAT4b6AFYG/ADlea4AiSI2ADitIgBnk9wAVeiqAIImOADK55sAUQ2kAJkzsQCp1w4AaQVIAGWy8AB/iKcAiEyXAPnRNgAhkrMAe4JKAJjPIQBAn9wA3EdVAOF0OgBn60IA/p3fAF7UXwB7Z6QAuqx6AFX2ogAriCMAQbpVAFluCAAhKoYAOUeDAInj5gDlntQASftAAP9W6QAcD8oAxVmKAJT6KwDTwcUAD8XPANtargBHxYYAhUNiACGGOwAseZQAEGGHACpMewCALBoAQ78SAIgmkAB4PIkAqMTkAOXbewDEOsIAJvTqAPdnigANkr8AZaMrAD2TsQC9fAsApFHcACfdYwBp4d0AmpQZAKgplQBozigACe20AESfIABOmMoAcIJjAH58IwAPuTIAp/WOABRW5wAh8QgAtZ0qAG9+TQClGVEAtfmrAILf1gCW3WEAFjYCAMQ6nwCDoqEAcu1tADmNegCCuKkAazJcAEYnWwAANO0A0gB3APz0VQABWU0A4HGA"),tt(6019,"QPsh+T8AAAAALUR0PgAAAICYRvg8AAAAYFHMeDsAAACAgxvwOQAAAEAgJXo4AAAAgCKC4zYAAAAAHfNpNThj7T7aD0k/Xph7P9oPyT9pN6wxaCEiM7QPFDNoIaIz2w9JP9sPSb/kyxZA5MsWwAAAAAAAAACA2w9JQNsPScAAAIA/AADAPwAAAADcz9E1AAAAAADAFT8="),tt(6168,"BQ=="),tt(6180,"DA=="),tt(6204,"DQAAAA4AAADIGQAAAAQ="),tt(6228,"AQ=="),tt(6243,"Cv////8="),tt(6500,"9B0="),m={Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},y=t,b=i.buffer,A=y.memory,v=r,M=new m.Int8Array(b),S=new m.Int16Array(b),x=new m.Int32Array(b),w=new m.Uint8Array(b),P=new m.Uint16Array(b),V=new m.Uint32Array(b),I=new m.Float32Array(b),E=new m.Float64Array(b),T=m.Math.imul,F=m.Math.fround,L=m.Math.abs,R=m.Math.clz32,D=m.Math.min,m.Math.max,U=m.Math.floor,m.Math.ceil,m.Math.sqrt,y.abort,m.NaN,G=m.Infinity,J=y.a,H=y.b,Q=y.c,q=5251088,K=0,v[1]=function(t,i,r,n){t|=0,i|=0,r|=0,n|=0;var o,s=0,u=F(0),l=F(0),p=0,m=F(0),y=F(0),b=F(0),A=0,v=F(0),M=F(0),S=F(0),w=F(0),P=F(0),V=F(0),R=F(0),D=F(0),U=F(0),G=F(0),J=F(0),H=F(0),Q=F(0),K=F(0),tt=0,et=0,it=F(0),rt=F(0),nt=0,at=0,ot=F(0),st=F(0),ut=0,lt=0,ct=0,ht=0,gt=0,ft=0,pt=0,dt=0,mt=0,_t=F(0),yt=F(0),bt=F(0),Ct=F(0),At=F(0),vt=F(0),Mt=F(0),St=0,xt=0;if(q=o=q-32|0,1<=(0|n))for(gt=(tt=x[t+4>>2])+-1|0,ft=(at=x[t>>2])+-1|0,pt=lt=(A=x[t+20>>2])+(tt<<3)|0,dt=ct=((ut=T(at,et=tt+1|0))<<3)+A|0,mt=ht=(tt+ut<<3)+A|0,ot=F(0|at),st=F(0|tt),St=x[t+8>>2],t=0;;){b=I[4+(s=(nt=t<<3)+i|0)>>2],l=F(b*ot),v=I[s>>2],u=F(v*st),s=b>=F(1);t:if(b<F(0)^1&&!(s|v>=F(1)|v<F(0)))s=F(L(V=l))<F(2147483648)?~~l:-2147483648,y=F(V-F(0|s)),p=F(L(l=u))<F(2147483648)?~~u:-2147483648,m=F(l-F(0|p)),s=p+T(s,et)|0,l=St?(u=F(F(1)-y),l=F(F(1)-m),p=(s<<3)+A|0,s=(s+et<<3)+A|0,I[r+nt>>2]=F(F(F(u*F(l*I[p>>2]))+F(u*F(m*I[p+8>>2])))+F(y*F(l*I[s>>2])))+F(y*F(m*I[s+8>>2])),u=F(F(F(u*F(l*I[p+4>>2]))+F(u*F(m*I[p+12>>2])))+F(y*F(l*I[s+4>>2]))),F(y*F(m*I[s+12>>2]))):F(m+y)<=F(1)?(u=F(F(F(1)-m)-y),p=(s<<3)+A|0,s=(s+et<<3)+A|0,I[r+nt>>2]=F(F(u*I[p>>2])+F(m*I[p+8>>2]))+F(y*I[s>>2]),u=F(F(u*I[p+4>>2])+F(m*I[p+12>>2])),F(y*I[s+4>>2])):(u=F(F(m+F(-1))+y),p=(s+et<<3)+A|0,l=F(F(1)-m),b=F(F(1)-y),s=(s<<3)+A|0,I[r+nt>>2]=F(F(u*I[p+8>>2])+F(l*I[p>>2]))+F(b*I[s+8>>2]),u=F(F(u*I[p+12>>2])+F(l*I[p+4>>2])),F(b*I[s+12>>2]));else{if(xt||(V=I[mt+4>>2],_t=I[A+4>>2],M=F(V-_t),yt=I[pt+4>>2],bt=I[dt+4>>2],S=F(yt-bt),R=F(F(M-S)*F(.5)),Ct=I[ht>>2],At=I[A>>2],w=F(Ct-At),vt=I[lt>>2],Mt=I[ct>>2],P=F(vt-Mt),D=F(F(w-P)*F(.5)),S=F(F(S+M)*F(.5)),P=F(F(P+w)*F(.5)),xt=1,M=F(F(F(F(F(_t+yt)+bt)+V)*F(.25))-F(M*F(.5))),w=F(F(F(F(F(At+vt)+Mt)+Ct)*F(.25))-F(w*F(.5)))),!(b<F(3)^1|v>F(-2)^1|v<F(3)^1|b>F(-2)^1)){e:if(v<=F(0)){if(b<=F(0)){y=F(F(b+F(2))*F(.5)),m=F(F(v+F(2))*F(.5)),u=F(R+R),it=F(M-u),l=F(D+D),rt=F(w-l),Q=F(M-F(S+S)),U=F(Q-u),K=F(w-F(P+P)),G=F(K-l),J=I[A+4>>2],H=I[A>>2];break e}if(s){u=F(R*F(3)),l=F(M-F(S+S)),Q=F(u+l),U=F(D*F(3)),G=F(w-F(P+P)),K=F(U+G),y=F(F(b+F(-1))*F(.5)),m=F(F(v+F(2))*F(.5)),J=F(u+M),H=F(U+w),U=F(R+l),G=F(D+G),it=I[dt+4>>2],rt=I[ct>>2];break e}u=F(M-F(S+S)),s=ft,p=F(L(l))<F(2147483648)?~~l:-2147483648,y=F(0|(s=(0|p)==(0|at)?s:p)),m=F(y/ot),U=F(F(m*R)+u),V=F(m*D),m=F(w-F(P+P)),G=F(V+m),b=F(F(0|(p=s+1|0))/ot),Q=F(F(b*R)+u),K=F(F(b*D)+m),m=F(F(v+F(2))*F(.5)),y=F(l-y),s=(T(s,et)<<3)+A|0,it=I[s+4>>2],rt=I[s>>2],s=(T(p,et)<<3)+A|0,J=I[s+4>>2],H=I[s>>2]}else if(v>=F(1)){if(b<=F(0)){y=F(F(b+F(2))*F(.5)),m=F(F(v+F(-1))*F(.5)),u=F(R+R),U=F(F(S+M)-u),l=F(D+D),G=F(F(P+w)-l),J=F(F(S*F(3))+M),it=F(J-u),H=F(F(P*F(3))+w),rt=F(H-l),Q=I[pt+4>>2],K=I[lt>>2];break e}if(s){u=F(R*F(3)),Q=F(u+F(S+M)),l=F(D*F(3)),K=F(l+F(P+w)),V=u,u=F(F(S*F(3))+M),J=F(V+u),V=l,l=F(F(P*F(3))+w),H=F(V+l),y=F(F(b+F(-1))*F(.5)),m=F(F(v+F(-1))*F(.5)),it=F(R+u),rt=F(D+l),U=I[mt+4>>2],G=I[ht>>2];break e}u=F(F(S*F(3))+M),s=ft,p=F(L(l))<F(2147483648)?~~l:-2147483648,y=F(0|(s=(0|p)==(0|at)?s:p)),m=F(y/ot),it=F(F(m*R)+u),V=F(m*D),m=F(F(P*F(3))+w),rt=F(V+m),b=F(F(0|(p=s+1|0))/ot),J=F(F(b*R)+u),H=F(F(b*D)+m),m=F(F(v+F(-1))*F(.5)),y=F(l-y),s=(T(s,et)+tt<<3)+A|0,U=I[s+4>>2],G=I[s>>2],s=(T(p,et)+tt<<3)+A|0,Q=I[s+4>>2],K=I[s>>2]}else b<=F(0)?(y=F(F(b+F(2))*F(.5)),s=gt,p=F(L(l=u))<F(2147483648)?~~u:-2147483648,u=F(0|(s=(0|p)==(0|tt)?s:p)),m=F(l-u),u=F(u/st),l=F(R+R),U=F(F(F(u*S)+M)-l),V=F(F(u*P)+w),u=F(D+D),G=F(V-u),b=F(F(0|(p=s+1|0))/st),it=F(F(F(b*S)+M)-l),rt=F(F(F(b*P)+w)-u),Q=I[4+(s=(s<<3)+A|0)>>2],K=I[s>>2],J=I[4+(s=(p<<3)+A|0)>>2],H=I[s>>2]):s?(V=l=F(R*F(3)),s=gt,p=F(L(u))<F(2147483648)?~~u:-2147483648,m=F(0|(s=(0|p)==(0|tt)?s:p)),y=F(m/st),Q=F(V+F(F(y*S)+M)),v=F(D*F(3)),K=F(v+F(F(y*P)+w)),V=l,l=F(F(0|(p=s+1|0))/st),J=F(V+F(F(l*S)+M)),H=F(v+F(F(l*P)+w)),y=F(F(b+F(-1))*F(.5)),m=F(u-m),U=I[4+(s=(s+ut<<3)+A|0)>>2],G=I[s>>2],it=I[4+(s=(p+ut<<3)+A|0)>>2],rt=I[s>>2]):(E[16+o>>3]=b,x[o>>2]=t,E[8+o>>3]=v,Y(4,1104,o));if(F(m+y)<=F(1)){I[r+nt>>2]=F(G+F(F(rt-G)*m))+F(F(K-G)*y),u=F(U+F(F(it-U)*m)),l=F(F(Q-U)*y);break t}u=F(F(1)-m),l=F(F(1)-y),I[r+nt>>2]=F(H+F(F(K-H)*u))+F(F(rt-H)*l),u=F(J+F(F(Q-J)*u)),l=F(F(it-J)*l);break t}I[r+nt>>2]=F(b*D)+F(F(v*P)+w),u=F(b*R),l=F(F(v*S)+M)}if(I[4+(r+nt|0)>>2]=u+l,(0|n)==(0|(t=t+1|0)))break}q=32+o|0},v[2]=function(t,i,r){t|=0,i|=0;var n,o,s,u=0;if(o=x[140+(r|=0)>>2],s=x[r+136>>2],n=x[t+24>>2],-1==(0|(u=x[t+4>>2])))return x[(t=i<<2)+s>>2]=x[n+16>>2],void(x[t+o>>2]=1065353216);r=x[r+4>>2]+(u<<5)|0,u=x[n+20>>2],v[x[r+20>>2]](x[r+24>>2],u,u,x[n+12>>2]),i<<=2,t=x[t+4>>2]<<2,I[i+s>>2]=I[n+16>>2]*I[t+s>>2],x[i+o>>2]=x[t+o>>2]},v[3]=function(t,i,r,n){t|=0,i|=0,r|=0,n|=0;var o,s=F(0),u=F(0),l=F(0),p=F(0),m=0,y=F(0),b=0,A=F(0),v=F(0),M=F(0);if(m=x[t+28>>2],u=function(t){var i,r=F(0),n=0,o=0,s=0;q=i=q-16|0,j(t);t:if((n=2147483647&(o=e(0)))>>>0<=1061752794){if(r=F(1),n>>>0<964689920)break t;r=aa(+t)}else if(n>>>0<=1081824209){if(s=+t,1075235812<=n>>>0){r=F(-aa(((0|o)<0?3.141592653589793:-3.141592653589793)+s));break t}if((0|o)<=-1){r=$(s+1.5707963267948966);break t}r=$(1.5707963267948966-s)}else if(n>>>0<=1088565717){if(1085271520<=n>>>0){r=aa(+t+((0|o)<0?6.283185307179586:-6.283185307179586));break t}if((0|o)<=-1){r=$(-4.71238898038469-t);break t}r=$(t-4.71238898038469)}else if(r=F(t-t),!(2139095040<=n>>>0))if((n=3&la(t,8+i|0))>>>0<=2){switch(n-1|0){default:r=aa(E[8+i>>3]);break t;case 0:r=$(-E[8+i>>3]);break t;case 1:}r=F(-aa(E[8+i>>3]))}else r=$(E[8+i>>3]);return q=16+i|0,r}(s=F(F(F(I[t>>2]+I[t+20>>2])*F(3.1415927410125732))/F(180))),l=I[t+8>>2],o=x[t+24>>2],s=function(t){var i,r=0,n=0,o=0;q=i=q-16|0,j(t);t:if((r=2147483647&(o=e(0)))>>>0<=1061752794){if(r>>>0<964689920)break t;t=$(+t)}else if(r>>>0<=1081824209){if(n=+t,r>>>0<=1075235811){if((0|o)<=-1){t=F(-aa(n+1.5707963267948966));break t}t=aa(n+-1.5707963267948966);break t}t=$(-(((0|o)<0?3.141592653589793:-3.141592653589793)+n))}else if(r>>>0<=1088565717){if(n=+t,r>>>0<=1085271519){if((0|o)<=-1){t=aa(n+4.71238898038469);break t}t=F(-aa(n+-4.71238898038469));break t}t=$(((0|o)<0?6.283185307179586:-6.283185307179586)+n)}else if(2139095040<=r>>>0)t=F(t-t);else if((r=3&la(t,8+i|0))>>>0<=2){switch(r-1|0){default:t=$(E[8+i>>3]);break t;case 0:t=aa(E[8+i>>3]);break t;case 1:}t=$(-E[8+i>>3])}else t=F(-aa(E[8+i>>3]));return q=16+i|0,t}(s),0<(0|n))for(u=F(l*u),y=F(m?-1:1),v=F(u*y),p=F(o?-1:1),M=F(p*F(l*s)),u=F(p*u),l=F(F(l*F(-s))*y),s=I[t+16>>2],y=I[t+12>>2];m=(t=b<<3)+r|0,p=I[(t=t+i|0)>>2],A=I[t+4>>2],I[m+4>>2]=s+F(F(M*p)+F(v*A)),I[m>>2]=y+F(F(u*p)+F(l*A)),(0|(b=b+1|0))!=(0|n););},v[4]=function(t,i,r){t|=0,i|=0,r|=0;var n,o,s,u,l,p=0,m=F(0),y=F(0),b=0,A=F(0),M=F(0),S=F(0),w=F(0);if(q=n=q+-64|0,s=x[r+140>>2],u=x[r+136>>2],o=x[t+24>>2],-1!=(0|(l=x[t+4>>2]))){p=x[r+4>>2],b=x[o+12>>2],x[24+n>>2]=b,r=x[o+16>>2],x[28+n>>2]=r,x[16+n>>2]=0,M=1==x[8+(p=p+(l<<5)|0)>>2]?F(-10):F(-.10000000149011612),I[20+n>>2]=M,x[60+n>>2]=r,x[56+n>>2]=b,v[x[p+20>>2]](x[p+24>>2],56+n|0,48+n|0,1),A=F(1),b=9;t:{for(;;){if(r=b,S=F(A*F(0)),I[32+n>>2]=S+I[56+n>>2],w=F(M*A),I[36+n>>2]=w+I[60+n>>2],v[x[p+20>>2]](x[p+24>>2],32+n|0,40+n|0,1),y=F(I[44+n>>2]-I[52+n>>2]),I[44+n>>2]=y,m=F(I[40+n>>2]-I[48+n>>2]),I[40+n>>2]=m,y!=F(0)||m!=F(0)){r=x[44+n>>2],x[8+n>>2]=x[40+n>>2],x[12+n>>2]=r;break t}if(I[32+n>>2]=I[56+n>>2]-S,I[36+n>>2]=I[60+n>>2]-w,v[x[p+20>>2]](x[p+24>>2],32+n|0,40+n|0,1),y=F(I[40+n>>2]-I[48+n>>2]),I[40+n>>2]=y,m=F(I[44+n>>2]-I[52+n>>2]),(I[44+n>>2]=m)!=F(0)||y!=F(0)){I[12+n>>2]=-m,I[8+n>>2]=-y;break t}if(b=r+-1|0,A=F(A*F(.10000000149011612)),!r)break}Y(3,1265,0)}m=function(t,i){var r=F(0);if((r=F(Aa(I[4+t>>2],I[t>>2])-Aa(I[4+i>>2],I[i>>2])))<F(-3.1415927410125732))for(;(r=F(r+F(6.2831854820251465)))<F(-3.1415927410125732););if(r>F(3.1415927410125732))for(;(r=F(r+F(-6.2831854820251465)))>F(3.1415927410125732););return r}(16+n|0,8+n|0),v[x[p+20>>2]](x[p+24>>2],24+n|0,24+n|0,1),x[o+12>>2]=x[24+n>>2],x[o+16>>2]=x[28+n>>2],I[o+20>>2]=I[o+20>>2]+F(F(m*F(-180))/F(3.1415927410125732)),i<<=2,t=x[t+4>>2]<<2,I[i+u>>2]=I[o+4>>2]*I[t+u>>2],m=F(I[o+8>>2]*I[t+s>>2]),I[i+s>>2]=m,I[o+8>>2]=m}else x[(t=i<<2)+u>>2]=x[o+4>>2],x[t+s>>2]=x[o+8>>2];q=64+n|0},v[5]=function(t){t|=0;var i,r,n=0,o=0,s=0,u=0,l=0,p=F(0),m=0,y=0,b=0,A=0,v=0,M=0,S=0,w=0,P=0,V=0,E=0;if(b=x[t+248>>2],r=x[t+204>>2],i=x[t+200>>2],!((0|(l=x[t+220>>2]))<1)){for(m=x[t+236>>2],u=x[t+216>>2],s=x[t+224>>2];I[(o=n<<2)+m>>2]=I[o+s>>2]*I[o+u>>2],(0|l)!=(0|(n=n+1|0)););if(!((0|l)<1))for(m=x[t+240>>2],u=x[t+216>>2],s=x[t+228>>2],n=0;I[(o=n<<2)+m>>2]=I[o+s>>2]*I[o+u>>2],(0|l)!=(0|(n=n+1|0)););}if(1<=(0|i))for(w=x[t+208>>2],l=m=0;;){if(x[b>>2]){A=(s=x[(o=m<<2)+x[t+212>>2]>>2])+l|0;t:{if((0|s)<=0)x[o+x[t+276>>2]>>2]=0;else{for(u=x[t+236>>2],p=F(0),n=l;p=F(p+I[u+(n<<2)>>2]),(0|(n=n+1|0))<(0|A););if(I[o+x[t+276>>2]>>2]=p,!((0|s)<1)){for(u=x[t+240>>2],p=F(0),n=l;p=F(p+I[u+(n<<2)>>2]),(0|(n=n+1|0))<(0|A););break t}}p=F(0)}if(n=o+x[t+268>>2]|0,p=F(p+F(.0010000000474974513)),u=F(L(p))<F(2147483648)?~~p:-2147483648,x[n>>2]=u,u=(n=x[12+((m<<4)+r|0)>>2])<<1,v=x[o+x[t+272>>2]>>2],(n=(0|n)<1)||ba(v,0,(1<(0|u)?u:1)<<2),!(n|(0|s)<1))for(M=x[t+244>>2],P=x[t+216>>2],V=x[t+232>>2],o=l;;){for(y=(n=o<<2)+P|0,E=x[n+V>>2],s=n=0;I[M+(S=s<<2)>>2]=I[E+S>>2]*I[y>>2],(0|(s=s+1|0))<(0|u););for(;I[(y=(s=n<<2)+v|0)>>2]=I[s+M>>2]+I[y>>2],(0|(n=n+1|0))<(0|u););if(!((0|(o=o+1|0))<(0|A)))break}}if(b=b+4|0,l=x[(m<<2)+w>>2]+l|0,(0|i)==(0|(m=m+1|0)))break}},v[6]=function(t){t|=0;var i,r,n=0,o=0,s=0,u=0,l=0,p=0,m=F(0),y=0,b=0,A=0,v=0,M=0,S=0,w=0,P=0,V=0,E=0;if(b=x[t+172>>2],i=x[t- -64>>2],r=x[t+68>>2],1<=(0|(s=x[t+92>>2])))for(l=x[t+104>>2],p=x[t+88>>2],o=x[t+96>>2];I[(u=n<<2)+l>>2]=I[o+u>>2]*I[p+u>>2],(0|s)!=(0|(n=n+1|0)););if(1<=(0|i))for(S=x[t+80>>2],u=l=0;;){if(x[b>>2]){if(A=(n=x[x[t+84>>2]+(l<<2)>>2])+u|0,s=(0|n)<1)m=F(0);else for(p=x[t+104>>2],m=F(0),n=u;m=F(m+I[p+(n<<2)>>2]),(0|(n=n+1|0))<(0|A););if(n=T(l,24)+r|0,I[n+16>>2]=m,p=(o=x[n+12>>2])<<1,(o=(0|o)<1)||ba(x[n+20>>2],0,(1<(0|p)?p:1)<<2),!(o|s))for(w=x[n+20>>2],v=x[t+108>>2],P=x[t+88>>2],V=x[t+100>>2],s=u;;){for(y=(n=s<<2)+P|0,E=x[n+V>>2],o=n=0;I[(M=o<<2)+v>>2]=I[E+M>>2]*I[y>>2],(0|(o=o+1|0))<(0|p););for(;I[(y=(o=n<<2)+w|0)>>2]=I[o+v>>2]+I[y>>2],(0|(n=n+1|0))<(0|p););if(!((0|(s=s+1|0))<(0|A)))break}}if(b=b+4|0,u=x[(l<<2)+S>>2]+u|0,(0|i)==(0|(l=l+1|0)))break}},v[7]=function(t){t|=0;var i,r=0,n=F(0),o=0,s=0,u=0,l=0,p=0,m=0,y=0;if(p=x[t+36>>2],i=x[t+4>>2],1<=(0|(s=x[t+24>>2])))for(m=x[t+32>>2],y=x[t+20>>2],o=x[t+28>>2];I[(u=r<<2)+m>>2]=I[o+u>>2]*I[u+y>>2],(0|s)!=(0|(r=r+1|0)););if(1<=(0|i))for(u=x[t+12>>2],o=0;;){if(x[p>>2]){if((0|(r=x[(s=l<<2)+x[t+16>>2]>>2]))<1)n=F(0);else for(m=r+o|0,y=x[t+32>>2],n=F(0),r=o;n=F(n+I[y+(r<<2)>>2]),(0|(r=r+1|0))<(0|m););r=s+x[t+44>>2]|0,n=F(n+F(.0010000000474974513)),F(L(n))<F(2147483648)?x[r>>2]=~~n:x[r>>2]=-2147483648}if(p=p+4|0,o=x[u+(l<<2)>>2]+o|0,(0|i)==(0|(l=l+1|0)))break}},v[8]=function(t){t|=0;var i,r,n=0,o=0,s=F(0),u=0,l=0,p=0,m=0,y=0,b=0,A=0;if(A=x[t+176>>2],r=x[t+72>>2],i=x[t+76>>2],!((0|(p=x[t+124>>2]))<1)){for(m=x[t+148>>2],u=x[t+120>>2],l=x[t+128>>2];I[(o=n<<2)+m>>2]=I[o+l>>2]*I[o+u>>2],(0|p)!=(0|(n=n+1|0)););if(!((0|p)<1)){for(m=x[t+152>>2],u=x[t+120>>2],l=x[t+132>>2],n=0;I[(o=n<<2)+m>>2]=I[o+l>>2]*I[o+u>>2],(0|p)!=(0|(n=n+1|0)););if(!((0|p)<1)){for(m=x[t+156>>2],u=x[t+120>>2],l=x[t+136>>2],n=0;I[(o=n<<2)+m>>2]=I[o+l>>2]*I[o+u>>2],(0|p)!=(0|(n=n+1|0)););if(!((0|p)<1)){for(m=x[t+160>>2],u=x[t+120>>2],l=x[t+140>>2],n=0;I[(o=n<<2)+m>>2]=I[o+l>>2]*I[o+u>>2],(0|p)!=(0|(n=n+1|0)););if(!((0|p)<1))for(m=x[t+164>>2],u=x[t+120>>2],l=x[t+144>>2],n=0;I[(o=n<<2)+m>>2]=I[o+l>>2]*I[o+u>>2],(0|p)!=(0|(n=n+1|0)););}}}}if(1<=(0|r))for(m=x[t+112>>2],l=0;;){if(x[A>>2]){t:{e:{i:{r:{if((0|(o=x[x[t+116>>2]+(y<<2)>>2]))<=0)x[4+((y<<5)+i|0)>>2]=0;else{for(b=o+l|0,u=x[t+148>>2],s=F(0),n=l;s=F(s+I[u+(n<<2)>>2]),(0|(n=n+1|0))<(0|b););if(I[4+(p=(y<<5)+i|0)>>2]=s,!(o=(0|o)<1)){for(u=x[t+152>>2],s=F(0),n=l;s=F(s+I[u+(n<<2)>>2]),(0|(n=n+1|0))<(0|b););if(I[p+20>>2]=s,o)break r;for(u=x[t+156>>2],s=F(0),n=l;s=F(s+I[u+(n<<2)>>2]),(0|(n=n+1|0))<(0|b););if(I[p+12>>2]=s,o)break i;for(u=x[t+160>>2],s=F(0),n=l;s=F(s+I[u+(n<<2)>>2]),(0|(n=n+1|0))<(0|b););if(I[p+16>>2]=s,o)break e;for(u=x[t+164>>2],s=F(0),n=l;s=F(s+I[u+(n<<2)>>2]),(0|(n=n+1|0))<(0|b););break t}}x[20+((y<<5)+i|0)>>2]=0}x[12+((y<<5)+i|0)>>2]=0}x[16+((y<<5)+i|0)>>2]=0}s=F(0)}I[8+((y<<5)+i|0)>>2]=s}if(A=A+4|0,l=x[m+(y<<2)>>2]+l|0,(0|r)==(0|(y=y+1|0)))break}},v[9]=function(t){t|=0;var i,r=0,n=0,o=0,s=0,u=0,l=F(0),p=0,m=0,y=0,b=0;if(i=x[t+340>>2],1<=(0|(o=x[t+360>>2])))for(p=x[t+368>>2],m=x[t+356>>2],n=x[t+364>>2];I[(s=r<<2)+p>>2]=I[n+s>>2]*I[s+m>>2],(0|o)!=(0|(r=r+1|0)););if(1<=(0|i))for(y=x[t+348>>2],b=x[t+344>>2],s=x[t+352>>2],n=0;;){if((0|(r=x[(o=u<<2)+s>>2]))<1)l=F(0);else for(p=r+n|0,m=x[t+368>>2],l=F(0),r=n;l=F(l+I[m+(r<<2)>>2]),(0|(r=r+1|0))<(0|p););if(I[20+(T(u,24)+b|0)>>2]=l,n=x[o+y>>2]+n|0,(0|i)==(0|(u=u+1|0)))break}},v[10]=function(t){var i=0,r=0,n=0,o=0,s=0,u=0,l=0;if(!(x[380+(t|=0)>>2]||(0|(i=x[t+200>>2]))<1))for(u=(r=x[t+204>>2])+(i<<4)|0,i=x[t+248>>2],o=x[t+272>>2];;){if(x[i>>2]&&(t=1,!((0|(n=x[r+12>>2]))<1)))for(n<<=1,l=x[o>>2];I[(s=(t<<2)+l|0)>>2]=-I[s>>2],(0|(t=t+2|0))<(0|n););if(o=o+4|0,i=i+4|0,!((r=r+16|0)>>>0<u>>>0))break}},v[11]=function(t,i,r){i|=0,r|=0;var n,o=0;return fa(n=x[20+(t|=0)>>2],i,o=r>>>0<(o=x[t+16>>2]-n|0)>>>0?r:o),x[t+20>>2]=o+x[t+20>>2],0|r},v[12]=function(t){return 0},v[13]=function(t,i,r){i|=0,r|=0;var n,o=0,s=0,u=0,l=0,p=0;for(q=n=q-32|0,o=x[28+(t|=0)>>2],x[16+n>>2]=o,u=x[t+20>>2],x[28+n>>2]=r,x[24+n>>2]=i,i=u-o|0,u=(x[20+n>>2]=i)+r|0,l=2,i=16+n|0;;){t:{if((s=(o=0)|Q(x[t+60>>2],0|i,0|l,12+n|0))&&(x[1906]=s,o=-1),(0|(o=o?x[12+n>>2]=-1:x[12+n>>2]))!=(0|u)){if(-1<(0|o))break t;x[t+28>>2]=0,x[t+16>>2]=0,x[t+20>>2]=0,x[t>>2]=32|x[t>>2],2!=((t=0)|l)&&(t=r-x[i+4>>2]|0)}else i=x[t+44>>2],x[t+28>>2]=i,x[t+20>>2]=i,x[t+16>>2]=i+x[t+48>>2],t=r;return q=32+n|0,0|t}s=o-((p=(s=x[i+4>>2])>>>0<o>>>0)?s:0)|0,x[(i=p?i+8|0:i)>>2]=s+x[i>>2],x[i+4>>2]=x[i+4>>2]-s,u=u-o|0,l=l-p|0}},v[14]=function(t,i,r,n){return K=0},v[15]=function(t,i,r,n,o,s){t|=0,i=+i,r|=0,n|=0,o|=0,s|=0;var u,l,p,m=0,y=0,b=0,A=0,v=0,S=0,P=0,V=0,I=0,E=0,F=0,R=0,D=0,U=0,G=0,J=0,H=0;if(x[44+(q=u=q-560|0)>>2]=0,h(+i),m=0|e(1),p=4294967295<e(0)>>>0?0:1,l=(0|m)<-1||(0|m)<=-1&&p?(h(+(i=-i)),m=0|e(1),e(0),G=1,3184):2048&o?(G=1,3187):(G=1&o)?3190:3185,2146435072!=(2146435072&m))if(i=function na(t,i){var r,n,o=0;if(h(+t),o=0|e(1),r=0|e(0),2047!=(0|(o=(n=o)>>>20&2047))){if(!o)return o=i,i=0==t?0:(t=na(0x10000000000000000*t,i),x[i>>2]+-64|0),x[o>>2]=i,t;x[i>>2]=o+-1022,f(0,0|r),f(1,-2146435073&n|1071644672),t=+g()}return t}(i,44+u|0),0!=(i+=i)&&(x[44+u>>2]=x[44+u>>2]+-1),R=16+u|0,97!=(0|(J=32|s))){for(m=(0|n)<0,0!=i?(A=x[44+u>>2]+-28|0,x[44+u>>2]=A,i*=268435456):A=x[44+u>>2],P=m?6:n,b=E=(0|A)<0?48+u|0:336+u|0;m=i<4294967296&0<=i?~~i>>>0:0,b=(n=b)+4|0,0!=(i=1e9*(i-((x[n>>2]=m)>>>0))););if((0|A)<1)m=b,y=E;else for(y=E;;){if(I=(0|A)<29?A:29,!((m=b+-4|0)>>>0<y>>>0)){for(n=I,V=0;S=0,H=V,V=x[(F=m)>>2],v=31&n,v=32<=(63&n)>>>0?(A=V<<v,0):(A=(1<<v)-1&V>>>32-v,V<<v),S=A+S|0,S=(V=H+v|0)>>>0<v>>>0?S+1|0:S,H=F,F=gc(V=hc(v=V,S,1e9),K,1e9),x[H>>2]=v-F,y>>>0<=(m=m+-4|0)>>>0;);(n=V)&&(x[(y=y+-4|0)>>2]=n)}for(;y>>>0<(m=b)>>>0&&!x[(b=m+-4|0)>>2];);if(A=x[44+u>>2]-I|0,b=m,!(0<(0|(x[44+u>>2]=A))))break}if((0|A)<=-1)for(U=1+((P+25|0)/9|0)|0,I=102==(0|J);;){if(V=(0|A)<-9?9:0-A|0,m>>>0<=y>>>0)y=x[y>>2]?y:y+4|0;else{for(F=1e9>>>V,v=-1<<V^-1,A=0,b=y;n=x[b>>2],x[b>>2]=(n>>>V)+A,A=T(F,n&v),(b=b+4|0)>>>0<m>>>0;);y=x[y>>2]?y:y+4|0,A&&(x[m>>2]=A,m=m+4|0)}if(A=V+x[44+u>>2]|0,m=(0|U)<m-(n=I?E:y)>>2?n+(U<<2)|0:m,!((0|(x[44+u>>2]=A))<0))break}if(!(m>>>(b=0)<=y>>>0||(b=T(E-y>>2,9),A=10,(n=x[y>>2])>>>0<10)))for(;b=b+1|0,(A=T(A,10))>>>0<=n>>>0;);if((0|(n=(P-(102==(0|J)?0:b)|0)-(103==(0|J)&0!=(0|P))|0))<(T(m-E>>2,9)+-9|0)){if(S=(E+((n=(0|(v=n+9216|0))/9|0)<<2)|0)-4092|0,A=10,(0|(n=1+(v-T(n,9)|0)|0))<=8)for(;A=T(A,10),9!=(0|(n=n+1|0)););if(U=S+4|0,((I=(F=x[S>>2])-T(A,v=(F>>>0)/(A>>>0)|0)|0)||(0|U)!=(0|m))&&(D=I>>>0<(n=A>>>1)>>>0?.5:(0|m)==(0|U)&&(0|n)==(0|I)?1:1.5,i=1&v?9007199254740994:9007199254740992,!G|45!=w[0|l]||(D=-D,i=-i),n=F-I|0,x[S>>2]=n,i+D!=i)){if(n=n+A|0,1e9<=(x[S>>2]=n)>>>0)for(;(S=S+-4|(x[S>>2]=0))>>>0<y>>>0&&(x[(y=y+-4|0)>>2]=0),n=x[S>>2]+1|0,999999999<(x[S>>2]=n)>>>0;);if(b=T(E-y>>2,9),A=10,!((n=x[y>>2])>>>0<10))for(;b=b+1|0,(A=T(A,10))>>>0<=n>>>0;);}m=(n=S+4|0)>>>0<m>>>0?n:m}t:{for(;;){if((I=m)>>>(F=0)<=y>>>0)break t;if(x[(m=I+-4|0)>>2])break}F=1}if(103==(0|J)){if(P=((n=(0|b)<(0|(m=P||1))&-5<(0|b))?-1^b:-1)+m|0,s=(n?-1:-2)+s|0,!(v=8&o)){if(m=9,F&&(v=x[I+-4>>2])&&!((v>>>(m=0))%(n=10)))for(;m=m+1|0,!((v>>>0)%((n=T(n,10))>>>0)););n=T(I-E>>2,9)+-9|0,P=102!=(32|s)?((v=0)|P)<(0|(n=0<(0|(n=(n+b|0)-m|0))?n:0))?P:n:((v=0)|P)<(0|(n=0<(0|(n=n-m|0))?n:0))?P:n}}else v=8&o;if(S=0!=(0|(A=P|v)),n=t,H=r,m=0<(0|b)?b:0,102!=(0|(V=32|s))){if((R-(m=ea((m=b>>31)+b^m,0,R))|0)<=1)for(;M[0|(m=m+-1|0)]=48,(R-m|0)<2;);M[0|(U=m+-2|0)]=s,M[m+-1|0]=(0|b)<0?45:43,m=R-U|0}if(_(n,32,H,S=1+(m+(S+(P+G|0)|0)|0)|0,o),Z(t,l,G),_(t,48,r,S,65536^o),102!=(0|V)){t:if(!((0|P)<0))for(s=F?I:y+4|0,n=16+u|8,E=16+u|9,b=y;;){(0|E)==(0|(m=ea(x[b>>2],0,E)))&&(M[24+u|0]=48,m=n);e:if((0|y)==(0|b))Z(t,m,1),m=m+1|0,(0|P)<1&&!v||Z(t,3219,1);else{if(m>>>0<=16+u>>>0)break e;for(;M[0|(m=m+-1|0)]=48,16+u>>>0<m>>>0;);}if(Z(t,V=m,(0|(m=E-m|0))<(0|P)?m:P),P=P-m|0,s>>>0<=(b=b+4|0)>>>0)break t;if(!(-1<(0|P)))break}_(t,48,P+18|0,18,0),Z(t,U,R-U|0)}else{for(n=16+u|8,b=16+u|9,y=s=E>>>0<y>>>0?E:y;;){m=ea(x[y>>2],0,b);t:if((0|s)==(0|y))(0|m)==(0|b)&&(M[24+u|0]=48,m=n);else{if(m>>>0<=16+u>>>0)break t;for(;M[0|(m=m+-1|0)]=48,16+u>>>0<m>>>0;);}if(Z(t,m,b-m|0),!((y=y+4|0)>>>0<=E>>>0))break}A&&Z(t,3219,1);t:if(!((0|P)<1|I>>>0<=y>>>0))for(;;){if(16+u>>>0<(m=ea(x[y>>2],0,b))>>>0)for(;M[0|(m=m+-1|0)]=48,16+u>>>0<m>>>0;);if(Z(t,m,(0|P)<9?P:9),P=P+-9|0,I>>>0<=(y=y+4|0)>>>0)break t;if(!(0<(0|P)))break}_(t,48,P+9|0,9,0)}}else{if(F=(E=32&s)?9+l|0:l,!(11<n>>>0)&&(m=12-n|0)){for(D=8;D*=16,m=m+-1|0;);i=45!=w[0|F]?i+D-D:-(D+(-i-D))}for((0|R)==(0|(m=ea((b=(m=x[44+u>>2])>>31)^m+b,0,R)))&&(M[15+u|0]=48,m=15+u|0),v=2|G,b=x[44+u>>2],M[0|(I=m+-2|0)]=s+15,M[m+-1|0]=(0|b)<0?45:43,m=8&o,y=16+u|0;s=y,V=E,b=L(i)<2147483648?~~i:-2147483648,M[0|y]=V|w[b+3168|0],1!=((y=s+1|0)-(16+u|0)|0)|(0==(i=16*(i-(0|b)))?!(m|0<(0|n)):0)||(M[s+1|0]=46,y=s+2|0),0!=i;);_(t,32,r,S=(s=!n|(0|n)<=((y-u|0)-18|0)?((R-(16+u|0)|0)-I|0)+y|0:2+((n+R|0)-I|0)|0)+v|0,o),Z(t,F,v),_(t,48,r,S,65536^o),Z(t,16+u|0,n=y-(16+u|0)|0),_(t,48,s-((m=n)+(n=R-I|0)|0)|0,0,0),Z(t,I,n)}else _(t,32,r,S=G+3|0,-65537&o),Z(t,l,G),n=s>>>5&1,Z(t,i!=i?n?3211:3215:n?3203:3207,3);return _(t,32,r,S,8192^o),q=560+u|0,0|((0|S)<(0|r)?r:S)},v[16]=function(t,i){var r,n,o;t|=0,i=x[(r=i|=0)>>2]+15&-16,x[r>>2]=i+16,n=t,o=function(t,i,r,n){var o,s,u,l,p=0,m=0,y=0;q=o=q-32|0,p=(s=p=2147483647&n)-1006698496|0,(m=y=r)>>>0<0&&(p=p+1|0),u=m,m=p,p=s-1140785152|0,(l=y)>>>0<0&&(p=p+1|0);t:if((0|p)==(0|m)&u>>>0<l>>>0|m>>>0<p>>>0){if(p=n<<4|r>>>28,r=r<<4|i>>>28,134217728==(0|(y=i&=268435455))&1<=t>>>0|134217728<i>>>0){p=p+1073741824|0,(t=r+1|0)>>>0<1&&(p=p+1|0),m=t;break t}if(p=p-(((m=r)>>>0<0)+-1073741824|0)|0,t|134217728^y)break t;(t=m+(1&m)|0)>>>0<m>>>0&&(p=p+1|0),m=t}else(!y&2147418112==(0|s)?!(t|i):2147418112==(0|s)&y>>>0<0|s>>>0<2147418112)?(p=2146435072,1140785151==((m=0)|s)&4294967295<y>>>0|1140785151<s>>>0||(y=s>>>16)>>>(p=0)<15249||(function(t,i,r,n,o,s){var u=0,l=0,p=0,m=0;e:if(64&s)i=31&(r=s-64|0),i=32<=(63&r)>>>0?(r=0,o>>>i):(r=o>>>i,((1<<i)-1&o)<<32-i|n>>>i),o=n=0;else{if(!s)break e;l=o,p=n,u=31&(m=64-s|0),m=32<=(63&m)>>>0?(l=p<<u,0):(l=(1<<u)-1&p>>>32-u|l<<u,p<<u),p=i,i=31&(u=s),i=32<=(63&u)>>>0?(u=0,r>>>i):(u=r>>>i,((1<<i)-1&r)<<32-i|p>>>i),i|=m,r=u|l,u=n,n=31&s,n=32<=(63&s)>>>0?(l=0,o>>>n):(l=o>>>n,((1<<n)-1&o)<<32-n|u>>>n),o=l}x[t>>2]=i,x[4+t>>2]=r,x[8+t>>2]=n,x[12+t>>2]=o}(o,t,i,r,p=65535&n|65536,15361-y|0),function(t,i,r,n,o,s){var u=0,l=0,p=0,m=0;64&s?(n=i,i=31&(o=s+-64|0),32<=(63&o)>>>0?(o=n<<i,n=0):(o=(1<<i)-1&n>>>32-i|r<<i,n<<=i),r=i=0):s&&(u=n,n=31&(p=s),m=32<=(63&s)>>>0?(l=u<<n,0):(l=(1<<n)-1&u>>>32-n|o<<n,u<<n),n=r,u=i,o=31&(s=64-s|0),32<=(63&s)>>>0?(s=0,n>>>=o):(s=n>>>o,n=((1<<o)-1&n)<<32-o|u>>>o),n|=m,o=s|l,s=i,i=31&p,i=32<=(63&p)>>>0?(l=s<<i,0):(l=(1<<i)-1&s>>>32-i|r<<i,s<<i),r=l),x[t>>2]=i,x[4+t>>2]=r,x[8+t>>2]=n,x[12+t>>2]=o}(16+o|0,t,i,r,p,y+-15233|0),r=x[4+o>>2],t=x[8+o>>2],p=x[12+o>>2]<<4|t>>>28,m=t<<4|r>>>28,134217728==(0|(r=t=268435455&r))&1<=(i=x[o>>2]|0!=(x[16+o>>2]|x[24+o>>2])|0!=(x[20+o>>2]|x[28+o>>2]))>>>0|134217728<t>>>0?((t=m+1|0)>>>0<1&&(p=p+1|0),m=t):i|134217728^r||((t=m+(1&m)|0)>>>0<m>>>0&&(p=p+1|0),m=t))):(m=r<<4|i>>>28,p=524287&(p=n<<4|r>>>28)|2146959360);return q=32+o|0,f(0,0|m),f(1,-2147483648&n|p),+g()}(x[i>>2],x[i+4>>2],x[i+8>>2],x[i+12>>2]),E[n>>3]=o},{d:function(){},e:function(){return 67108864},f:function(){return 3},g:function(t,i){return i|=0,q=i=q-16|0,t=(t|=0)?ma(t)?(Y(4,1533,0),0):w[t+4|0]:(x[i+4>>2]=1246,x[i>>2]=1671,Y(4,1087,i),0),q=i+16|0,0|t},h:function(t){t|=0,x[1641]=t},i:function(t,i){var r;return i|=0,q=r=q-48|0,t=(t|=0)?(t+63&-64)==(0|t)?(i+63&-64)==(0|i)&&i?function(t){var i,r=0,n=0,o=0,s=0,u=0,l=0,p=0,m=0,y=0,b=0;if(x[24+(q=i=q-32|0)>>2]=0,x[16+i>>2]=4,function(t){var i;sa(16+(q=i=q-272|0)|0,1611,x[12+i>>2]=t),function(t){var i;x[(q=i=q-16|0)>>2]=t,function(t,i){var r;ra(t,1176,x[12+(q=r=q-16|0)>>2]=i,0,0),q=16+r|0}(x[670],i),q=16+i|0}(16+i|0),q=272+i|0}(16+i|(x[20+i>>2]=0)),ma(t))Y(4,1183,0),t=0;else if(4<=(n=w[t+4|0])>>>0)x[4+i>>2]=n,x[i>>2]=3,Y(4,1332,i),t=0;else{for(1!=(0|(s=!w[t+5|0]))&&(ca(t+4|0,1),X(t- -64|0,4,160),M[t+5|0]=0),r=t- -64|0,o=102,n=t+704|0;x[n>>2]=x[r>>2]+t,n=n+4|0,r=r+4|0,o=o+-1|0;);if(1!=(0|s)&&(n=w[t+4|0],X(x[t+704>>2],4,32),ca(x[t+708>>2],4),ca(x[t+708>>2]+4|0,4),ca(x[t+708>>2]+8|0,4),ca(x[t+708>>2]+12|0,4),ca(x[t+708>>2]+16|0,4),ca(x[t+708>>2]+20|0,1),X(x[t+720>>2],4,x[x[t+704>>2]>>2]),X(x[t+724>>2],4,x[x[t+704>>2]>>2]),X(x[t+728>>2],4,x[x[t+704>>2]>>2]),X(x[t+732>>2],4,x[x[t+704>>2]>>2]),X(x[t+736>>2],4,x[x[t+704>>2]>>2]),X(x[t+740>>2],4,x[x[t+704>>2]>>2]),X(x[t+752>>2],4,x[x[t+704>>2]+4>>2]),X(x[t+756>>2],4,x[x[t+704>>2]+4>>2]),X(x[t+760>>2],4,x[x[t+704>>2]+4>>2]),X(x[t+764>>2],4,x[x[t+704>>2]+4>>2]),X(x[t+768>>2],4,x[x[t+704>>2]+4>>2]),X(x[t+772>>2],4,x[x[t+704>>2]+4>>2]),X(x[t+776>>2],4,x[x[t+704>>2]+4>>2]),X(x[t+780>>2],4,x[x[t+704>>2]+8>>2]),X(x[t+784>>2],4,x[x[t+704>>2]+8>>2]),X(x[t+788>>2],4,x[x[t+704>>2]+8>>2]),X(x[t+792>>2],4,x[x[t+704>>2]+8>>2]),X(x[t+796>>2],4,x[x[t+704>>2]+8>>2]),X(x[t+800>>2],4,x[x[t+704>>2]+8>>2]),X(x[t+804>>2],4,x[x[t+704>>2]+12>>2]),X(x[t+808>>2],4,x[x[t+704>>2]+12>>2]),X(x[t+812>>2],4,x[x[t+704>>2]+12>>2]),X(x[t+816>>2],4,x[x[t+704>>2]+12>>2]),X(x[t+840>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+844>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+848>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+852>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+856>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+860>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+864>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+868>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+872>>2],1,x[x[t+704>>2]+16>>2]),X(x[t+876>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+880>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+884>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+888>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+892>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+896>>2],4,x[x[t+704>>2]+16>>2]),X(x[t+908>>2],4,x[x[t+704>>2]+20>>2]),X(x[t+912>>2],4,x[x[t+704>>2]+20>>2]),X(x[t+916>>2],4,x[x[t+704>>2]+20>>2]),X(x[t+920>>2],4,x[x[t+704>>2]+20>>2]),X(x[t+924>>2],4,x[x[t+704>>2]+20>>2]),X(x[t+928>>2],4,x[x[t+704>>2]+20>>2]),X(x[t+932>>2],4,x[x[t+704>>2]+20>>2]),X(x[t+936>>2],4,x[x[t+704>>2]+24>>2]),X(x[t+940>>2],4,x[x[t+704>>2]+28>>2]),X(x[t+944>>2],4,x[x[t+704>>2]+28>>2]),X(x[t+948>>2],4,x[x[t+704>>2]+32>>2]),X(x[t+952>>2],4,x[x[t+704>>2]+32>>2]),X(x[t+956>>2],4,x[x[t+704>>2]+32>>2]),X(x[t+960>>2],4,x[x[t+704>>2]+32>>2]),X(x[t+964>>2],4,x[x[t+704>>2]+32>>2]),X(x[t+968>>2],4,x[x[t+704>>2]+32>>2]),X(x[t+972>>2],4,x[x[t+704>>2]+32>>2]),X(x[t+976>>2],4,x[x[t+704>>2]+36>>2]),X(x[t+980>>2],4,x[x[t+704>>2]+36>>2]),X(x[t+984>>2],4,x[x[t+704>>2]+36>>2]),X(x[t+988>>2],4,x[x[t+704>>2]+40>>2]),X(x[t+992>>2],4,x[x[t+704>>2]+44>>2]),X(x[t+996>>2],4,x[x[t+704>>2]+48>>2]),X(x[t+1e3>>2],4,x[x[t+704>>2]+48>>2]),X(x[t+1004>>2],4,x[x[t+704>>2]+52>>2]),X(x[t+1008>>2],4,x[x[t+704>>2]+52>>2]),X(x[t+1012>>2],4,x[x[t+704>>2]+56>>2]),X(x[t+1016>>2],4,x[x[t+704>>2]+60>>2]),X(x[t+1020>>2],2,x[x[t+704>>2]+64>>2]),X(x[t+1024>>2],4,x[x[t+704>>2]+68>>2]),X(x[t+1028>>2],4,x[x[t+704>>2]+72>>2]),X(x[t+1032>>2],4,x[x[t+704>>2]+72>>2]),X(x[t+1036>>2],4,x[x[t+704>>2]+72>>2]),X(x[t+1040>>2],4,x[x[t+704>>2]+72>>2]),X(x[t+1044>>2],4,x[x[t+704>>2]+72>>2]),X(x[t+1048>>2],4,x[x[t+704>>2]+76>>2]),X(x[t+1052>>2],4,x[x[t+704>>2]+76>>2]),X(x[t+1056>>2],4,x[x[t+704>>2]+76>>2]),X(x[t+1068>>2],4,x[x[t+704>>2]+80>>2]),X(x[t+1072>>2],4,x[x[t+704>>2]+80>>2]),X(x[t+1076>>2],4,x[x[t+704>>2]+80>>2]),X(x[t+1080>>2],4,x[x[t+704>>2]+80>>2]),X(x[t+1084>>2],4,x[x[t+704>>2]+80>>2]),X(x[t+1088>>2],4,x[x[t+704>>2]+80>>2]),X(x[t+1092>>2],4,x[x[t+704>>2]+80>>2]),X(x[t+1096>>2],4,x[x[t+704>>2]+84>>2]),X(x[t+1100>>2],2,x[x[t+704>>2]+84>>2]),X(x[t+1104>>2],4,x[x[t+704>>2]+88>>2]),n>>>0<2||X(x[t+1108>>2],4,x[x[t+704>>2]+8>>2])),x[1643]=5,x[1642]=6,x[1644]=7,x[1645]=8,x[1646]=9,x[1647]=10,r=x[t+704>>2],1<=x[r>>2])for(n=0;x[x[t+712>>2]+(n<<2)>>2]=x[t+716>>2]+(n<<6),n=n+1|0,r=x[t+704>>2],(0|n)<x[r>>2];);if(1<=x[r+4>>2])for(n=0;x[x[t+744>>2]+(n<<2)>>2]=x[t+748>>2]+(n<<6),n=n+1|0,r=x[t+704>>2],(0|n)<x[r+4>>2];);if(1<=x[r+16>>2])for(n=0;x[(r=n<<2)+x[t+820>>2]>>2]=x[t+836>>2]+(n<<6),x[r+x[t+824>>2]>>2]=x[t+1016>>2]+(x[r+x[t+880>>2]>>2]<<2),x[r+x[t+828>>2]>>2]=x[t+1020>>2]+(x[r+x[t+884>>2]>>2]<<1),x[r+x[t+832>>2]>>2]=x[t+1024>>2]+(x[r+x[t+892>>2]>>2]<<2),n=n+1|0,r=x[t+704>>2],(0|n)<x[r+16>>2];);if(1<=x[r+20>>2])for(n=0;x[x[t+900>>2]+(n<<2)>>2]=x[t+904>>2]+(n<<6),n=n+1|0,r=x[t+704>>2],(0|n)<x[r+20>>2];);if(1<=x[r+80>>2])for(n=0;x[x[t+1060>>2]+(n<<2)>>2]=x[t+1064>>2]+(n<<6),n=n+1|0,r=x[t+704>>2],(0|n)<x[r+80>>2];);if(!(1&M[x[t+708>>2]+20|0]||(0|(s=x[r+16>>2]))<1)){for(l=x[t+888>>2],p=x[t+884>>2],u=x[t+1020>>2],n=0;;){if(0<(0|(m=x[(r=n<<2)+l>>2]+-1|0)))for(y=u+(x[r+p>>2]<<1)|0,r=0;b=P[(o=(r<<1)+y|0)>>1],S[o>>1]=P[o+4>>1],S[o+4>>1]=b,(0|(r=r+3|0))<(0|m););if((0|s)==(0|(n=n+1|0)))break}for(n=x[t+876>>2],l=x[t+880>>2],p=x[t+1016>>2],o=0;;){if(1<=(0|(u=x[(r=o<<2)+n>>2])))for(u=(r=p+(x[r+l>>2]<<2)|0)+(u<<3)|0,r=r+4|0;I[r>>2]=F(1)-I[r>>2],(r=r+8|0)>>>0<u>>>0;);if((0|s)==(0|(o=o+1|0)))break}}}return q=32+i|0,t}(t):(x[20+r>>2]=1592,x[16+r>>2]=1688,Y(4,1087,16+r|0),0):(x[36+r>>2]=1441,x[32+r>>2]=1688,Y(4,1087,32+r|0),0):(x[4+r>>2]=1246,x[r>>2]=1688,Y(4,1087,r),0),q=48+r|0,0|t},j:function(t,i,r,n){var o;i|=0,r|=0,n|=0,q=o=q+-64|0,(t|=0)?i?r?n?(t=x[x[t>>2]+708>>2],x[i>>2]=x[t+12>>2],x[i+4>>2]=x[t+16>>2],x[r>>2]=x[t+4>>2],x[r+4>>2]=x[t+8>>2],x[n>>2]=x[t>>2]):(x[52+o>>2]=1782,x[48+o>>2]=1708,Y(4,1087,48+o|0)):(x[36+o>>2]=1753,x[32+o>>2]=1708,Y(4,1087,32+o|0)):(x[20+o>>2]=1726,x[16+o>>2]=1708,Y(4,1087,16+o|0)):(x[4+o>>2]=1651,x[o>>2]=1708,Y(4,1087,o)),q=64+o|0},k:wa,l:va,m:function(t){var i;q=i=q-16|0,(t|=0)?ta(t):(x[4+i>>2]=1651,x[i>>2]=1890,Y(4,1087,i)),q=16+i|0},n:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+292>>2]:(x[4+i>>2]=1651,x[i>>2]=1905,Y(4,1087,i),-1),q=16+i|0,0|t},o:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+900>>2]:(x[4+i>>2]=1651,x[i>>2]=1926,Y(4,1087,i),0),q=16+i|0,0|t},p:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+912>>2]:(x[4+i>>2]=1651,x[i>>2]=1945,Y(4,1087,i),0),q=16+i|0,0|t},q:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+908>>2]:(x[4+i>>2]=1651,x[i>>2]=1974,Y(4,1087,i),0),q=16+i|0,0|t},r:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+916>>2]:(x[4+i>>2]=1651,x[i>>2]=2003,Y(4,1087,i),0),q=16+i|0,0|t},s:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+300>>2]:(x[4+i>>2]=1651,x[i>>2]=2032,Y(4,1087,i),0),q=16+i|0,0|t},t:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+4>>2]:(x[4+i>>2]=1651,x[i>>2]=2054,Y(4,1087,i),-1),q=16+i|0,0|t},u:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+712>>2]:(x[4+i>>2]=1651,x[i>>2]=2070,Y(4,1087,i),0),q=16+i|0,0|t},v:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+52>>2]:(x[4+i>>2]=1651,x[i>>2]=2084,Y(4,1087,i),0),q=16+i|0,0|t},w:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+740>>2]:(x[4+i>>2]=1651,x[i>>2]=2104,Y(4,1087,i),0),q=16+i|0,0|t},x:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+200>>2]:(x[4+i>>2]=1651,x[i>>2]=2132,Y(4,1087,i),-1),q=16+i|0,0|t},y:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+820>>2]:(x[4+i>>2]=1651,x[i>>2]=2152,Y(4,1087,i),0),q=16+i|0,0|t},z:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+872>>2]:(x[4+i>>2]=1651,x[i>>2]=2170,Y(4,1087,i),0),q=16+i|0,0|t},A:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+260>>2]:(x[4+i>>2]=1651,x[i>>2]=2198,Y(4,1087,i),0),q=16+i|0,0|t},B:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+868>>2]:(x[4+i>>2]=1651,x[i>>2]=2225,Y(4,1087,i),0),q=16+i|0,0|t},C:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+268>>2]:(x[4+i>>2]=1651,x[i>>2]=2254,Y(4,1087,i),0),q=16+i|0,0|t},D:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+264>>2]:(x[4+i>>2]=1651,x[i>>2]=2279,Y(4,1087,i),0),q=16+i|0,0|t},E:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+276>>2]:(x[4+i>>2]=1651,x[i>>2]=2306,Y(4,1087,i),0),q=16+i|0,0|t},F:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+896>>2]:(x[4+i>>2]=1651,x[i>>2]=2330,Y(4,1087,i),0),q=16+i|0,0|t},G:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+832>>2]:(x[4+i>>2]=1651,x[i>>2]=2355,Y(4,1087,i),0),q=16+i|0,0|t},H:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+876>>2]:(x[4+i>>2]=1651,x[i>>2]=2375,Y(4,1087,i),0),q=16+i|0,0|t},I:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[t+272>>2]:(x[4+i>>2]=1651,x[i>>2]=2402,Y(4,1087,i),0),q=16+i|0,0|t},J:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+824>>2]:(x[4+i>>2]=1651,x[i>>2]=2432,Y(4,1087,i),0),q=16+i|0,0|t},K:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+888>>2]:(x[4+i>>2]=1651,x[i>>2]=2456,Y(4,1087,i),0),q=16+i|0,0|t},L:function(t){var i;return q=i=q-16|0,t=(t|=0)?x[x[t>>2]+828>>2]:(x[4+i>>2]=1651,x[i>>2]=2482,Y(4,1087,i),0),q=16+i|0,0|t},M:function(t){var i;q=i=q-16|0,(t|=0)?x[t+256>>2]=1:(x[4+i>>2]=1651,x[i>>2]=2504,Y(4,1087,i)),q=16+i|0},N:function(t){var i;return ya(12+(q=i=q-16|0)|0,64,t|=0),q=16+i|0,x[12+i>>2]},O:function(t){var i,r=0,n=0;return q=i=q-16|0,(t|=0)&&(ya(12+i|0,16,n=wa(t))||(r=va(t,x[12+i>>2],n))||(za(x[12+i>>2]),r=0)),q=16+i|0,0|r},P:function(t){return 0|ja(t|=0)},Q:function(t){za(t|=0)},R:function(){return 0|q},S:function(t){return 0|(q=q-(t|=0)&-16)},T:function(t){q=t|=0},U:function(t){return 0|function(t){t|=0;var i=0|N(),r=i+t|0;if(i<r&&r<65536){var n=new ArrayBuffer(T(r,65536)),o=new m.Int8Array(n);o.set(M),M=o,M=new m.Int8Array(n),S=new m.Int16Array(n),x=new m.Int32Array(n),w=new m.Uint8Array(n),P=new m.Uint16Array(n),V=new m.Uint32Array(n),I=new m.Float32Array(n),E=new m.Float64Array(n),b=n,A.buffer=n}return i}(0|(t|=0))},V:function(t,i){i|=0,v[t|=0](i)}};function X(t,i,r){var n=0,o=0,s=0;if(r)for(;;){if(r=r+-1|0,t>>>0<(n=(o=t+i|0)-1|0)>>>0)for(;s=w[0|t],M[0|t]=w[0|n],M[0|n]=s,(t=t+1|0)>>>0<(n=n+-1|0)>>>0;);if(t=o,!r)break}}function Y(t,i,r){var n;q=n=q-272|0,V[1640]>t>>>0||(t=x[1641])&&(sa(16+n|0,i,x[12+n>>2]=r),v[t](16+n|0)),q=272+n|0}function Z(t,i,r){32&w[0|t]||function(t,i,r){var n=0,o=0,s=0;t:{if(!(n=x[r+16>>2])){if(function(t){var i=0;return i=w[t+74|0],M[t+74|0]=i+-1|i,8&(i=x[t>>2])?(x[t>>2]=32|i,-1):(x[t+4>>2]=0,x[t+8>>2]=0,i=x[t+44>>2],x[t+28>>2]=i,x[t+20>>2]=i,x[t+16>>2]=i+x[t+48>>2],0)}(r))break t;n=x[r+16>>2]}if(n-(s=x[r+20>>2])>>>0<i>>>0)return v[x[r+36>>2]](r,t,i);e:if(!(M[r+75|0]<0)){for(n=i;;){if(!(o=n))break e;if(10==w[(n=o+-1|0)+t|0])break}if(v[x[r+36>>2]](r,t,o)>>>0<o>>>0)break t;i=i-o|0,t=t+o|0,s=x[r+20>>2]}fa(s,t,i),x[r+20>>2]=x[r+20>>2]+i}}(i,r,t)}function _(t,i,r,n,o){var s,u=0,l=0;if(q=s=q-256|0,!(73728&o|(0|r)<=(0|n))){if(ba(s,i,(u=(o=r-n|0)>>>0<256)?o:256),i=t,l=s,!u){for(r=r-n|0;Z(t,s,256),255<(o=o+-256|0)>>>0;);o=255&r}Z(i,l,o)}q=256+s|0}function $(t){var i,r;return F((i=t*t)*i*(r=i*t)*(2718311493989822e-21*i-.00019839334836096632)+(r*(.008333329385889463*i-.16666666641626524)+t))}function aa(t){var i;return F(-.499999997251031*(t*=t)+1+.04166662332373906*(i=t*t)+t*i*(2439044879627741e-20*t-.001388676377460993))}function ba(t,i,r){var n=0,o=0,s=0,u=0;if(r&&(M[(n=t+r|0)-1|0]=i,M[0|t]=i,!(r>>>0<3||(M[n+-2|0]=i,M[t+1|0]=i,M[n+-3|0]=i,M[t+2|0]=i,r>>>0<7||(M[n+-4|0]=i,M[t+3|0]=i,r>>>0<9||(o=(n=0-t&3)+t|0,i=T(255&i,16843009),x[o>>2]=i,x[(n=(r=r-n&-4)+o|0)-4>>2]=i,r>>>0<9||(x[o+8>>2]=i,x[o+4>>2]=i,x[n+-8>>2]=i,x[n+-12>>2]=i,r>>>0<25||(x[o+24>>2]=i,x[o+20>>2]=i,x[o+16>>2]=i,x[o+12>>2]=i,x[n+-16>>2]=i,x[n+-20>>2]=i,x[n+-24>>2]=i,x[n+-28>>2]=i,(r=r-(u=4&o|24)|0)>>>0<32))))))))for(s=n=i,i=o+u|0;x[i+24>>2]=s,x[i+28>>2]=n,x[i+16>>2]=s,x[i+20>>2]=n,x[i+8>>2]=s,x[i+12>>2]=n,x[i>>2]=s,x[i+4>>2]=n,i=i+32|0,31<(r=r+-32|0)>>>0;);return t}function ca(t,i){var r=0;if(t>>>0<(i=(t+i|0)-1|0)>>>0)for(;r=w[0|t],M[0|t]=w[0|i],M[0|i]=r,(t=t+1|0)>>>0<(i=i+-1|0)>>>0;);}function da(t){var i,r;return i=N(),(t=(r=x[2052])+t|0)>>>0<=i<<16>>>0||H(0|t)?(x[2052]=t,r):(x[1906]=48,-1)}function ea(t,i,r){var n=0,o=0,s=0;if(1==(0|i)&t>>>0<0|i>>>0<1)n=t;else for(;o=gc(n=hc(t,i,10),s=o=K,10),M[0|(r=r+-1|0)]=t-o|48,o=9==(0|i)&4294967295<t>>>0|9<i>>>0,t=n,i=s,o;);if(n)for(;t=(n>>>0)/10|0,M[0|(r=r+-1|0)]=n-T(t,10)|48,i=9<n>>>0,n=t,i;);return r}function fa(t,i,r){var n,o=0;if(8192<=r>>>0)J(0|t,0|i,0|r);else{n=t+r|0;t:if(3&(t^i))if(n>>>0<4)r=t;else if((o=n-4|0)>>>0<t>>>0)r=t;else for(r=t;M[0|r]=w[0|i],M[r+1|0]=w[i+1|0],M[r+2|0]=w[i+2|0],M[r+3|0]=w[i+3|0],i=i+4|0,(r=r+4|0)>>>0<=o>>>0;);else{e:if((0|r)<1)r=t;else if(3&t)for(r=t;;){if(M[0|r]=w[0|i],i=i+1|0,n>>>0<=(r=r+1|0)>>>0)break e;if(!(3&r))break}else r=t;if(!((t=-4&n)>>>0<64||(o=t+-64|0)>>>0<r>>>0))for(;x[r>>2]=x[i>>2],x[r+4>>2]=x[i+4>>2],x[r+8>>2]=x[i+8>>2],x[r+12>>2]=x[i+12>>2],x[r+16>>2]=x[i+16>>2],x[r+20>>2]=x[i+20>>2],x[r+24>>2]=x[i+24>>2],x[r+28>>2]=x[i+28>>2],x[r+32>>2]=x[i+32>>2],x[r+36>>2]=x[i+36>>2],x[r+40>>2]=x[i+40>>2],x[r+44>>2]=x[i+44>>2],x[r+48>>2]=x[i+48>>2],x[r+52>>2]=x[i+52>>2],x[r+56>>2]=x[i+56>>2],x[r+60>>2]=x[i+60>>2],i=i- -64|0,(r=r- -64|0)>>>0<=o>>>0;);if(t>>>0<=r>>>0)break t;for(;x[r>>2]=x[i>>2],i=i+4|0,(r=r+4|0)>>>0<t>>>0;);}if(r>>>0<n>>>0)for(;M[0|r]=w[0|i],i=i+1|0,(0|n)!=(0|(r=r+1|0)););}}function ga(t){return t+-48>>>0<10}function ha(t,i){var r=0;t:if(1024<=(0|i)){if(t*=898846567431158e293,(0|(r=i+-1023|0))<1024){i=r;break t}t*=898846567431158e293,i=((0|i)<3069?i:3069)+-2046|0}else-1023<(0|i)||(t*=22250738585072014e-324,i=-1023<(0|(r=i+1022|0))?r:(t*=22250738585072014e-324,(-3066<(0|i)?i:-3066)+2044|0));return f(0,0),f(1,i+1023<<20),t*g()}function ia(t,i,r,n,o,s,u){var l,p,m,y=0,b=0,A=0,P=0,V=0,I=0,F=0,L=0,R=0,D=0,U=0,G=0;x[76+(q=l=q-80|0)>>2]=i,m=55+l|0,p=56+l|0,i=0;t:{e:{i:for(;;){(0|R)<0||(R=(2147483647-R|0)<(0|i)?(x[1906]=61,-1):i+R|0);r:{n:{a:{o:{s:{u:{l:{c:{h:{g:{f:{p:{d:{if(P=x[76+l>>2],A=w[0|(i=P)]){for(;;){m:{_:{y:if(y=255&A){if(37!=(0|y))break _;for(A=i;;){if(37!=w[i+1|0])break y;if(y=i+2|0,x[76+l>>2]=y,A=A+1|0,b=w[i+2|0],i=y,37!=(0|b))break}}else A=i;if(i=A-P|0,t&&Z(t,P,i),i)continue i;D=-1,A=1,V=!ga(M[x[76+(y=l)>>2]+1|0]),i=x[76+l>>2],V|36!=w[i+2|0]||(D=M[i+1|0]+-48|0,U=1,A=3),i=A+i|0,x[y+76>>2]=i;y:if(31<(b=(F=M[(A=0)|i])+-32|0)>>>0)y=i;else if(y=i,75913&(b=1<<b))for(;;){if(y=i+1|0,x[76+l>>2]=y,A|=b,31<(b=(F=M[i+1|0])+-32|0)>>>0)break y;if(i=y,!(75913&(b=1<<b)))break}y:if(42!=(0|F)){if((0|(L=qa(76+l|0)))<0)break e;i=x[76+l>>2]}else{if(V=l,ga(M[y+1|0])&&(i=x[76+l>>2],36==w[i+2|0]))x[((M[i+1|0]<<2)+o|0)-192>>2]=10,L=x[((M[i+1|0]<<3)+n|0)-384>>2],U=1,i=i+3|0;else{if(U)break e;L=U=0,t&&(i=x[r>>2],x[r>>2]=i+4,L=x[i>>2]),i=x[76+l>>2]+1|0}if(x[V+76>>2]=i,-1<(0|L))break y;L=0-L|0,A|=8192}b=-1;y:if(46==w[0|i])if(42!=w[i+1|0])x[76+l>>2]=i+1,b=qa(76+l|0),i=x[76+l>>2];else{if(ga(M[i+2|0])&&(i=x[76+l>>2],36==w[i+3|0])){x[((M[i+2|0]<<2)+o|0)-192>>2]=10,b=x[((M[i+2|0]<<3)+n|0)-384>>2],i=i+4|0,x[76+l>>2]=i;break y}if(U)break e;b=t?(i=x[r>>2],x[r>>2]=i+4,x[i>>2]):0,i=x[76+l>>2]+2|0,x[76+l>>2]=i}for(y=0;;){if(G=y,I=-1,57<M[0|i]+-65>>>0)break t;if(F=i+1|0,x[76+l>>2]=F,y=M[0|i],i=F,!((y=w[2639+(y+T(G,58)|0)|0])+-1>>>0<8))break}if(!y)break t;y:{b:{C:{if(19==(0|y)){if((0|D)<=-1)break C;break t}if((0|D)<0)break b;x[(D<<2)+o>>2]=y,y=x[4+(i=(D<<3)+n|0)>>2],x[64+l>>2]=x[i>>2],x[68+l>>2]=y}if(i=0,!t)continue i;break y}if(!t)break r;pa(64+l|0,y,r,u),F=x[76+l>>2]}if(V=-65537&A,A=8192&A?V:A,D=2684,y=p,i=M[F+-1|(I=0)],(F=(i=G&&3==(15&i)?-33&i:i)+-88|0)>>>0<=32)break m;y:{b:{C:{A:{if(6<(V=i+-65|0)>>>0){if(83!=(0|i))break n;if(!b)break A;y=x[64+l>>2];break b}switch(V-1|0){case 1:break C;case 0:case 2:break n;default:break d}}_(t,32,L,i=0,A);break y}x[12+l>>2]=0,x[8+l>>2]=x[64+l>>2],x[64+l>>2]=8+l,b=-1,y=8+l|0}i=0;b:{for(;;){if(!(P=x[y>>2]))break b;if((V=(0|(P=oa(4+l|0,P)))<0)|b-i>>>0<P>>>0)break;if(y=y+4|0,!((i=i+P|0)>>>0<b>>>0))break b}if(I=-1,V)break t}if(_(t,32,L,i,A),i)for(b=0,y=x[64+l>>2];;){if(!(P=x[y>>2]))break y;if((0|i)<(0|(b=(P=oa(4+l|0,P))+b|0)))break y;if(Z(t,4+l|0,P),y=y+4|0,!(b>>>0<i>>>0))break}else i=0}_(t,32,L,i,8192^A),i=(0|i)<(0|L)?L:i;continue i}y=i+1|0,x[76+l>>2]=y,A=w[i+1|0],i=y;continue}break}switch(F-1|0){case 28:break s;case 21:break u;case 23:break c;case 22:break h;case 11:case 16:break g;case 10:break f;case 26:break p;case 8:case 12:case 13:case 14:break d;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 9:case 15:case 17:case 18:case 19:case 20:case 24:case 25:case 27:case 29:case 30:break n;default:break l}}if(I=R,t)break t;if(!U)break r;for(i=1;;){if(t=x[(i<<2)+o>>2]){if(pa((i<<3)+n|0,t,r,u),10!=(0|(i=i+(I=1)|0)))continue;break t}break}if(I=1,9<i>>>0)break t;if(I=-1,x[(i<<2)+o>>2])break t;for(;!x[((i=i+1|0)<<2)+o>>2]&&10!=(0|i););I=i>>>0<10?-1:1;break t}i=0|v[s](t,E[64+l>>3],L,b,A,i);continue}y=(i=Ia(P=(i=x[64+l>>2])||2694,b))||b+P|0,A=V,b=i?i-P|0:b;break n}M[55+l|0]=x[64+l>>2],b=1,P=m,A=V;break n}if(i=V=x[68+l>>2],P=x[64+l>>2],(0|i)<-1||(0|i)<=-1&&!(4294967295<P>>>0)){i=0-(i+(0<P>>>0)|0)|0,P=0-P|0,x[64+l>>2]=P,x[68+l>>2]=i,I=1,D=2684;break o}if(2048&A){I=1,D=2685;break o}D=(I=1&A)?2686:2684;break o}if(P=Oa(x[64+l>>2],x[68+l>>2],p),!(8&A))break a;b=(0|(i=p-P|0))<(0|b)?b:i+1|0;break a}b=8<b>>>0?b:8,A|=8,i=120}if(P=Na(x[64+l>>2],x[68+l>>2],p,32&i),!(8&A)|!(x[64+l>>2]|x[68+l>>2]))break a;D=2684+(i>>>4)|0,I=2;break a}if(7<(y=255&G)>>>(i=0))continue;switch(y-1|0){default:case 0:case 5:x[x[64+l>>2]>>2]=R;continue;case 1:y=x[64+l>>2],x[y>>2]=R,x[y+4>>2]=R>>31;continue;case 2:S[x[64+l>>2]>>1]=R;continue;case 3:M[x[64+l>>2]]=R;continue;case 4:continue;case 6:}y=x[64+l>>2],x[y>>2]=R,x[y+4>>2]=R>>31;continue}P=x[64+l>>2],i=x[68+l>>2],D=2684}P=ea(P,i,p)}A=-1<(0|b)?-65537&A:A,b=!!((V=i=x[68+l>>2])|(F=x[64+l>>2]))|b?(0|(i=!(V|F)+(p-P|0)|0))<(0|b)?b:i:(P=p,0)}_(t,32,i=(0|L)<(0|(y=(b=(0|b)<(0|(V=y-P|0))?V:b)+I|0))?y:L,y,A),Z(t,D,I),_(t,48,i,y,65536^A),_(t,48,b,V,0),Z(t,P,V),_(t,32,i,y,8192^A);continue}break}I=0;break t}I=-1}return q=80+l|0,I}function ja(t){var i,r=0,n=0,o=0,s=0,u=0,l=0,p=0,m=0,y=0,b=0,A=0,v=0;q=i=q-16|0;t:{e:{i:{r:{n:{a:{o:{s:{u:{l:{c:{if(t>>>0<=244){if(3&(r=(u=x[1923])>>>(t=(l=t>>>0<11?16:t+11&-8)>>>3))){t=(r=x[7740+(s=(n=t+(1&(-1^r))|0)<<3)>>2])+8|0,(0|(o=x[r+8>>2]))!=(0|(s=s+7732|0))?(x[o+12>>2]=s,x[s+8>>2]=o):(A=7692,v=jc(n)&u,x[A>>2]=v),n<<=3,x[r+4>>2]=3|n,x[4+(r=r+n|0)>>2]=1|x[r+4>>2];break t}if(l>>>0<=(m=x[1925])>>>0)break c;if(r){n=r=(t=(0-(t=(0-(n=2<<t)|n)&r<<t)&t)-1|0)>>>12&16,n|=r=(t>>>=r)>>>5&8,n|=r=(t>>>=r)>>>2&4,r=x[7740+(o=(n=((n|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)|0)<<3)>>2],(0|(t=x[r+8>>2]))!=(0|(o=o+7732|0))?(x[t+12>>2]=o,x[o+8>>2]=t):(u=jc(n)&u,x[1923]=u),t=r+8|0,x[r+4>>2]=3|l,s=(n<<=3)-l|0,x[4+(p=r+l|0)>>2]=1|s,x[r+n>>2]=s,m&&(r=7732+((n=m>>>3)<<3)|0,o=x[1928],n=(n=1<<n)&u?x[r+8>>2]:(x[1923]=n|u,r),x[r+8>>2]=o,x[n+12>>2]=o,x[o+12>>2]=r,x[o+8>>2]=n),x[1928]=p,x[1925]=s;break t}if(!(b=x[1924]))break c;for(n=r=(t=(b&0-b)-1|0)>>>12&16,n|=r=(t>>>=r)>>>5&8,n|=r=(t>>>=r)>>>2&4,r=x[7996+(((n|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)<<2)>>2],o=(-8&x[r+4>>2])-l|0,n=r;t=(t=x[n+16>>2])||x[n+20>>2];)o=(n=(s=(-8&x[t+4>>2])-l|0)>>>0<o>>>0)?s:o,r=n?t:r,n=t;if(y=x[r+24>>2],(0|(s=x[r+12>>2]))!=(0|r)){t=x[r+8>>2],x[t+12>>2]=s,x[s+8>>2]=t;break e}if(!(t=x[(n=r+20|0)>>2])){if(!(t=x[r+16>>2]))break l;n=r+16|0}for(;p=n,(t=x[(n=(s=t)+20|0)>>2])||(n=s+16|0,t=x[s+16>>2]););x[p>>2]=0;break e}if(l=-1,!(4294967231<t>>>0)&&(l=-8&(r=t+11|0),m=x[1924])){n=0-l|0,u=0,(r>>>=8)&&(u=31,16777215<l>>>0||(u=28+((t=((u=(r<<=o=r+1048320>>>16&8)<<(t=r+520192>>>16&4))<<(r=u+245760>>>16&2)>>>15)-(r|t|o)|0)<<1|l>>>t+21&1)|0));h:{g:{if(o=x[7996+(u<<2)>>2])for(r=l<<(31==(0|u)?0:25-(u>>>1)|0),t=0;;){if(!(n>>>0<=(p=(-8&x[o+4>>2])-l|0)>>>0||(s=o,n=p))){n=0,t=o;break g}if(p=x[o+20>>2],o=x[16+((r>>>29&4)+o|0)>>2],t=p?(0|p)==(0|o)?t:p:t,r<<=0!=(0|o),!o)break}else t=0;if(!(t|s)){if(!(t=(0-(t=2<<u)|t)&m))break c;o=r=(t=(t&0-t)-1|0)>>>12&16,o|=r=(t>>>=r)>>>5&8,o|=r=(t>>>=r)>>>2&4,t=x[7996+(((o|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)<<2)>>2]}if(!t)break h}for(;n=(r=(o=(-8&x[t+4>>2])-l|0)>>>0<n>>>0)?o:n,s=r?t:s,t=(r=x[t+16>>2])||x[t+20>>2];);}if(!(!s|n>>>0>=x[1925]-l>>>0)){if(p=x[s+24>>2],(0|s)!=(0|(r=x[s+12>>2]))){t=x[s+8>>2],x[t+12>>2]=r,x[r+8>>2]=t;break i}if(!(t=x[(o=s+20|0)>>2])){if(!(t=x[s+16>>2]))break u;o=s+16|0}for(;u=o,(t=x[(o=(r=t)+20|0)>>2])||(o=r+16|0,t=x[r+16>>2]););x[u>>2]=0;break i}}}if(l>>>0<=(r=x[1925])>>>0){t=x[1928],16<=(n=r-l|0)>>>0?(x[1925]=n,o=t+l|0,x[1928]=o,x[o+4>>2]=1|n,x[t+r>>2]=n,x[t+4>>2]=3|l):(x[1928]=0,x[1925]=0,x[t+4>>2]=3|r,x[4+(r=t+r|0)>>2]=1|x[r+4>>2]),t=t+8|0;break t}if(l>>>0<(o=x[1926])>>>0){r=o-l|0,x[1926]=r,n=(t=x[1929])+l|0,x[1929]=n,x[n+4>>2]=1|r,x[t+4>>2]=3|l,t=t+8|0;break t}if((n=(u=(n=s=l+47|(t=0))+(r=x[2041]?x[2043]:(x[2044]=-1,x[2045]=-1,x[2042]=4096,x[2043]=4096,x[2041]=12+i&-16^1431655768,x[2046]=0,x[2034]=0,4096))|0)&(p=0-r|0))>>>0<=l>>>0)break t;if((r=x[2033])&&(y=(m=x[2031])+n|0)>>>0<=m>>>0|r>>>0<y>>>0)break t;if(4&w[8136])break a;c:{h:{if(r=x[1929])for(t=8140;;){if((m=x[t>>2])+x[t+4>>2]>>>0>r>>>0&&m>>>0<=r>>>0)break h;if(!(t=x[t+8>>2]))break}if(-1==(0|(r=da(0))))break o;if(u=n,(o=(t=x[2042])+-1|0)&r&&(u=(n-r|0)+(r+o&0-t)|0),u>>>0<=l>>>0|2147483646<u>>>0)break o;if((t=x[2033])&&(p=(o=x[2031])+u|0)>>>0<=o>>>0|t>>>0<p>>>0)break o;if((0|r)!=(0|(t=da(u))))break c;break n}if(2147483646<(u=p&u-o)>>>0)break o;if((0|(r=da(u)))==(x[t>>2]+x[t+4>>2]|0))break s;t=r}if(!(l+48>>>0<=u>>>0|2147483646<u>>>0|-1==(0|(r=t)))){if(2147483646<(t=(t=x[2043])+(s-u|0)&0-t)>>>0)break n;if(-1!=(0|da(t))){u=t+u|0;break n}da(0-u|0);break o}if(-1!=(0|r))break n;break o}s=0;break e}r=0;break i}if(-1!=(0|r))break n}x[2034]=4|x[2034]}if(2147483646<n>>>0)break r;if(r=da(n),(t=da(0))>>>0<=r>>>0|-1==(0|r)|-1==(0|t))break r;if((u=t-r|0)>>>0<=l+40>>>0)break r}t=x[2031]+u|0,(x[2031]=t)>>>0>V[2032]&&(x[2032]=t);n:{a:{o:{if(n=x[1929]){for(t=8140;;){if(((o=x[t>>2])+(s=x[t+4>>2])|0)==(0|r))break o;if(!(t=x[t+8>>2]))break}break a}for((t=x[1927])>>>0<=r>>>0&&t||(x[1927]=r),t=0,x[2036]=u,x[2035]=r,x[1931]=-1,x[1932]=x[2041],x[2038]=0;o=7732+(n=t<<3)|0,x[n+7740>>2]=o,x[n+7744>>2]=o,32!=(0|(t=t+1|0)););o=(t=u+-40|0)-(n=r+8&7?-8-r&7:0)|0,x[1926]=o,n=r+n|0,x[1929]=n,x[n+4>>2]=1|o,x[4+(t+r|0)>>2]=40,x[1930]=x[2045];break n}if(!(8&w[t+12|0]|r>>>0<=n>>>0|n>>>0<o>>>0)){x[t+4>>2]=s+u,r=(t=n+8&7?-8-n&7:0)+n|0,x[1929]=r,t=(o=x[1926]+u|0)-t|0,x[1926]=t,x[r+4>>2]=1|t,x[4+(n+o|0)>>2]=40,x[1930]=x[2045];break n}}r>>>0<(s=x[1927])>>>0&&(x[1927]=r,s=0),o=r+u|0,t=8140;a:{o:{s:{u:{l:{c:{for(;(0|o)!=x[t>>2];)if(!(t=x[t+8>>2]))break c;if(!(8&w[t+12|0]))break l}for(t=8140;;){if((o=x[t>>2])>>>0<=n>>>0&&n>>>0<(s=o+x[t+4>>2]|0)>>>0)break u;t=x[t+8>>2]}}if(x[t>>2]=r,x[t+4>>2]=x[t+4>>2]+u,x[4+(y=(r+8&7?-8-r&7:0)+r|0)>>2]=3|l,t=((r=o+(o+8&7?-8-o&7:0)|0)-y|0)-l|0,p=l+y|0,(0|r)==(0|n)){x[1929]=p,t=x[1926]+t|0,x[1926]=t,x[p+4>>2]=1|t;break o}if(x[1928]==(0|r)){x[1928]=p,t=x[1925]+t|0,x[1925]=t,x[p+4>>2]=1|t,x[t+p>>2]=t;break o}if(1==(3&(n=x[r+4>>2]))){b=-8&n;l:if(n>>>0<=255){if(s=n>>>3,n=x[r+8>>2],(0|(o=x[r+12>>2]))==(0|n)){A=7692,v=x[1923]&jc(s),x[A>>2]=v;break l}x[n+12>>2]=o,x[o+8>>2]=n}else{if(m=x[r+24>>2],(0|(u=x[r+12>>2]))==(0|r))if((l=x[(o=r+20|0)>>2])||(l=x[(o=r+16|0)>>2])){for(;n=o,(l=x[(o=(u=l)+20|0)>>2])||(o=u+16|0,l=x[u+16>>2]););x[n>>2]=0}else u=0;else n=x[r+8>>2],x[n+12>>2]=u,x[u+8>>2]=n;if(m){n=x[r+28>>2];c:{if(x[(o=7996+(n<<2)|0)>>2]==(0|r)){if(x[o>>2]=u)break c;A=7696,v=x[1924]&jc(n),x[A>>2]=v;break l}if(!(x[m+(x[m+16>>2]==(0|r)?16:20)>>2]=u))break l}x[u+24>>2]=m,(n=x[r+16>>2])&&(x[u+16>>2]=n,x[n+24>>2]=u),(n=x[r+20>>2])&&(x[u+20>>2]=n,x[n+24>>2]=u)}}r=r+b|0,t=t+b|0}if(x[r+4>>2]=-2&x[r+4>>2],x[p+4>>2]=1|t,(x[t+p>>2]=t)>>>0<=255){t=7732+((r=t>>>3)<<3)|0,r=(n=x[1923])&(r=1<<r)?x[t+8>>2]:(x[1923]=r|n,t),x[t+8>>2]=p,x[r+12>>2]=p,x[p+12>>2]=t,x[p+8>>2]=r;break o}if(r=0,(o=t>>>8)&&(r=31,16777215<t>>>0||(r=28+((r=((l=(o<<=s=o+1048320>>>16&8)<<(r=o+520192>>>16&4))<<(o=l+245760>>>16&2)>>>15)-(o|r|s)|0)<<1|t>>>r+21&1)|0)),x[(n=p)+28>>2]=r,x[p+16>>2]=0,n=7996+(r<<2)|(x[p+20>>2]=0),(o=x[1924])&(s=1<<r)){for(o=t<<(31==(0|r)?0:25-(r>>>1)|0),r=x[n>>2];;){if((-8&x[(n=r)+4>>2])==(0|t))break s;if(r=o>>>29,o<<=1,!(r=x[16+(s=(4&r)+n|0)>>2]))break}x[s+16>>2]=p}else x[1924]=o|s,x[n>>2]=p;x[p+24>>2]=n,x[p+12>>2]=p,x[p+8>>2]=p;break o}for(p=(t=u+-40|0)-(o=r+8&7?-8-r&7:0)|0,x[1926]=p,o=r+o|0,x[1929]=o,x[o+4>>2]=1|p,x[4+(t+r|0)>>2]=40,x[1930]=x[2045],x[(o=(t=(s+(s+-39&7?39-s&7:0)|0)-47|0)>>>0<n+16>>>0?n:t)+4>>2]=27,t=x[2038],x[o+16>>2]=x[2037],x[o+20>>2]=t,t=x[2036],x[o+8>>2]=x[2035],x[o+12>>2]=t,x[2037]=o+8,x[2036]=u,x[2035]=r,t=o+24|(x[2038]=0);x[t+4>>2]=7,r=t+8|0,t=t+4|0,r>>>0<s>>>0;);if((0|n)==(0|o))break n;if(x[o+4>>2]=-2&x[o+4>>2],s=o-n|0,x[n+4>>2]=1|s,(x[o>>2]=s)>>>0<=255){t=7732+((r=s>>>3)<<3)|0,r=(o=x[1923])&(r=1<<r)?x[t+8>>2]:(x[1923]=r|o,t),x[t+8>>2]=n,x[r+12>>2]=n,x[n+12>>2]=t,x[n+8>>2]=r;break n}if(x[n+16>>2]=0,t=x[n+20>>2]=0,(o=s>>>8)&&(t=31,16777215<s>>>0||(t=28+((t=((p=(o<<=u=o+1048320>>>16&8)<<(t=o+520192>>>16&4))<<(o=p+245760>>>16&2)>>>15)-(o|t|u)|0)<<1|s>>>t+21&1)|0)),r=7996+((x[(r=n)+28>>2]=t)<<2)|0,(o=x[1924])&(u=1<<t)){for(t=s<<(31==(0|t)?0:25-(t>>>1)|0),r=x[r>>2];;){if((0|s)==(-8&x[(o=r)+4>>2]))break a;if(r=t>>>29,t<<=1,!(r=x[16+(u=o+(4&r)|0)>>2]))break}x[u+16>>2]=n,x[n+24>>2]=o}else x[1924]=o|u,x[r>>2]=n,x[n+24>>2]=r;x[n+12>>2]=n,x[n+8>>2]=n;break n}t=x[n+8>>2],x[t+12>>2]=p,x[n+8>>2]=p,x[p+24>>2]=0,x[p+12>>2]=n,x[p+8>>2]=t}t=y+8|0;break t}t=x[o+8>>2],x[t+12>>2]=n,x[o+8>>2]=n,x[n+24>>2]=0,x[n+12>>2]=o,x[n+8>>2]=t}if(!((t=x[1926])>>>0<=l>>>0)){r=t-l|0,x[1926]=r,n=(t=x[1929])+l|0,x[1929]=n,x[n+4>>2]=1|r,x[t+4>>2]=3|l,t=t+8|0;break t}}x[1906]=48,t=0;break t}i:if(p){t=x[s+28>>2];r:{if(x[(o=7996+(t<<2)|0)>>2]==(0|s)){if(x[o>>2]=r)break r;m=jc(t)&m,x[1924]=m;break i}if(!(x[p+(x[p+16>>2]==(0|s)?16:20)>>2]=r))break i}x[r+24>>2]=p,(t=x[s+16>>2])&&(x[r+16>>2]=t,x[t+24>>2]=r),(t=x[s+20>>2])&&(x[r+20>>2]=t,x[t+24>>2]=r)}i:if(n>>>0<=15)t=n+l|0,x[s+4>>2]=3|t,x[4+(t=t+s|0)>>2]=1|x[t+4>>2];else if(x[s+4>>2]=3|l,x[4+(o=s+l|0)>>2]=1|n,(x[n+o>>2]=n)>>>0<=255)t=7732+((r=n>>>3)<<3)|0,r=(n=x[1923])&(r=1<<r)?x[t+8>>2]:(x[1923]=r|n,t),x[t+8>>2]=o,x[r+12>>2]=o,x[o+12>>2]=t,x[o+8>>2]=r;else{t=0,(l=n>>>8)&&(t=31,16777215<n>>>0||(t=28+((t=((p=(l<<=u=l+1048320>>>16&8)<<(t=l+520192>>>16&4))<<(l=p+245760>>>16&2)>>>15)-(l|t|u)|0)<<1|n>>>t+21&1)|0)),x[(r=o)+28>>2]=t,x[o+16>>2]=0,r=7996+(t<<2)|(x[o+20>>2]=0);r:{if((l=1<<t)&m){for(t=n<<(31==(0|t)?0:25-(t>>>1)|0),l=x[r>>2];;){if((-8&x[(r=l)+4>>2])==(0|n))break r;if(l=t>>>29,t<<=1,!(l=x[16+(u=(4&l)+r|0)>>2]))break}x[u+16>>2]=o}else x[1924]=l|m,x[r>>2]=o;x[o+24>>2]=r,x[o+12>>2]=o,x[o+8>>2]=o;break i}t=x[r+8>>2],x[t+12>>2]=o,x[r+8>>2]=o,x[o+24>>2]=0,x[o+12>>2]=r,x[o+8>>2]=t}t=s+8|0;break t}e:if(y){t=x[r+28>>2];i:{if(x[(n=7996+(t<<2)|0)>>2]==(0|r)){if(x[n>>2]=s)break i;A=7696,v=jc(t)&b,x[A>>2]=v;break e}if(!(x[y+(x[y+16>>2]==(0|r)?16:20)>>2]=s))break e}x[s+24>>2]=y,(t=x[r+16>>2])&&(x[s+16>>2]=t,x[t+24>>2]=s),(t=x[r+20>>2])&&(x[s+20>>2]=t,x[t+24>>2]=s)}o>>>0<=15?(t=o+l|0,x[r+4>>2]=3|t,x[4+(t=t+r|0)>>2]=1|x[t+4>>2]):(x[r+4>>2]=3|l,x[4+(l=r+l|0)>>2]=1|o,x[o+l>>2]=o,m&&(t=7732+((n=m>>>3)<<3)|0,s=x[1928],n=(n=1<<n)&u?x[t+8>>2]:(x[1923]=n|u,t),x[t+8>>2]=s,x[n+12>>2]=s,x[s+12>>2]=t,x[s+8>>2]=n),x[1928]=l,x[1925]=o),t=r+8|0}return q=16+i|0,t}function ka(t){var i=0,r=F(0),n=0,o=0,s=F(0),u=F(0);j(t);t:{if(1283457024<=(i=2147483647&(o=e(0)))>>>0){if(2139095040<i>>>0)break t;return F((0|o)<0?-1.570796251296997:1.570796251296997)}e:{if(i>>>0<=1054867455){if(n=-1,964689920<=i>>>0)break e;break t}if(t=F(L(t)),i>>>0<=1066926079){if(i>>>0<=1060110335){t=F(F(F(t+t)+F(-1))/F(t+F(2))),n=0;break e}t=F(F(t+F(-1))/F(t+F(1))),n=1}else n=i>>>0<=1075576831?(t=F(F(t+F(-1.5))/F(F(t*F(1.5))+F(1))),2):(t=F(F(-1)/t),3)}if(i=n,s=F(t*t),r=F(s*s),u=F(r*F(F(r*F(-.106480173766613))+F(-.19999158382415771))),r=F(s*F(F(r*F(F(r*F(.06168760731816292))+F(.14253635704517365)))+F(.333333283662796))),(0|i)<=-1)return F(t-F(t*F(u+r)));t=F(I[6080+(i<<=2)>>2]-F(F(F(t*F(u+r))-I[i+6096>>2])-t)),t=(0|o)<0?F(-t):t}return t}function la(t,i){var r,n=0,o=0,s=0,u=0,l=0;q=r=q-16|0,j(t);t:if((n=2147483647&(s=e(0)))>>>0<=1305022426){if(o=.6366197723675814*(u=+t)+6755399441055744-6755399441055744,E[i>>3]=u+-1.5707963109016418*o+-1.5893254773528196e-8*o,L(o)<2147483648){n=~~o;break t}n=-2147483648}else 2139095040<=n>>>0?(E[i>>3]=F(t-t),n=0):(n=((l=n)>>>23)-150|0,E[8+r>>3]=(f(0,l-(n<<23)|0),k()),n=Da(8+r|0,r,n),o=E[r>>3],(0|s)<=-1?(E[i>>3]=-o,n=0-n|0):E[i>>3]=o);return q=16+r|0,n}function ma(t){var i=0,r=0,n=0,o=0,s=0;n=4,r=1082;t:if(i=w[0|t]){for(;!((0|(o=w[0|r]))!=(0|i)||!(n=n+-1|0)|!o);)if(r=r+1|0,i=w[t+1|0],t=t+1|0,!i)break t;s=i}return(255&s)-w[0|r]|0}function oa(t,i){return t?function(t,i){t:{if(t){if(i>>>0<=127)break t;if(x[x[1625]>>2]){if(i>>>0<=2047)return M[t+1|0]=63&i|128,M[0|t]=i>>>6|192,2;if(!(57344!=(-8192&i)&&55296<=i>>>0))return M[t+2|0]=63&i|128,M[0|t]=i>>>12|224,M[t+1|0]=i>>>6&63|128,3;if(i+-65536>>>0<=1048575)return M[t+3|0]=63&i|128,M[0|t]=i>>>18|240,M[t+2|0]=i>>>6&63|128,M[t+1|0]=i>>>12&63|128,4}else if(57216==(-128&i))break t;x[1906]=25,t=-1}else t=1;return t}return M[0|t]=i,1}(t,i):0}function pa(t,i,r,n){t:{if(!(20<i>>>0||9<(i=i+-9|0)>>>0)){switch(i-1|0){default:return i=x[r>>2],x[r>>2]=i+4,void(x[t>>2]=x[i>>2]);case 0:return i=x[r>>2],x[r>>2]=i+4,i=x[i>>2],x[t>>2]=i,void(x[t+4>>2]=i>>31);case 1:return i=x[r>>2],x[r>>2]=i+4,x[t>>2]=x[i>>2],void(x[t+4>>2]=0);case 3:return i=x[r>>2],x[r>>2]=i+4,i=S[i>>1],x[t>>2]=i,void(x[t+4>>2]=i>>31);case 4:return i=x[r>>2],x[r>>2]=i+4,x[t>>2]=P[i>>1],void(x[t+4>>2]=0);case 5:return i=x[r>>2],x[r>>2]=i+4,i=M[0|i],x[t>>2]=i,void(x[t+4>>2]=i>>31);case 6:return i=x[r>>2],x[r>>2]=i+4,x[t>>2]=w[0|i],void(x[t+4>>2]=0);case 2:case 7:break t;case 8:}v[n](t,r)}return}i=x[r>>2]+7&-8,x[r>>2]=i+8,r=x[i+4>>2],x[t>>2]=x[i>>2],x[t+4>>2]=r}function qa(t){var i=0,r=0,n=0;if(ga(M[x[t>>2]]))for(;i=x[t>>2],n=M[0|i],x[t>>2]=i+1,r=(T(r,10)+n|0)-48|0,ga(M[i+1|0]););return r}function ra(t,i,r,n,o){var s,u=0,l=0;x[204+(q=s=q-208|0)>>2]=r,ba(160+s|(r=0),0,40),x[200+s>>2]=x[204+s>>2],(0|ia(0,i,200+s|0,80+s|0,160+s|0,n,o))<0||(r=0<=x[t+76>>2]?1:r,u=x[t>>2],M[t+74|0]<=0&&(x[t>>2]=-33&u),l=32&u,x[t+48>>2]?ia(t,i,200+s|0,80+s|0,160+s|0,n,o):(x[t+48>>2]=80,x[t+16>>2]=80+s,x[t+28>>2]=s,x[t+20>>2]=s,u=x[t+44>>2],ia(t,i,200+(x[t+44>>2]=s)|0,80+s|0,160+s|0,n,o),u&&(v[x[t+36>>2]](t,0,0),x[t+48>>2]=0,x[t+44>>2]=u,x[t+28>>2]=0,x[t+16>>2]=0,x[t+20>>2]=0)),x[t>>2]=x[t>>2]|l),q=208+s|0}function sa(t,i,r){var n,o=0;fa(8+(q=n=q-160|0)|0,2536,144),x[52+n>>2]=t,o=(o=-2-(x[28+n>>2]=t)|0)>>>0<256?o:256,t=t+(x[56+n>>2]=o)|0,x[36+n>>2]=t,x[24+n>>2]=t,ra(8+n|0,i,r,15,16),o&&(t=x[28+n>>2],M[t-((0|t)==x[24+n>>2])|0]=0),q=160+n|0}function ta(t){var i=0,r=0,n=0,o=0,s=0,u=0,l=0,p=F(0),m=0,y=0,b=0,A=0,S=0,V=0,E=0,R=F(0),G=0,J=F(0),H=0,Q=0,q=F(0),K=F(0),tt=F(0),et=0,it=0,rt=0,nt=0,at=0,ot=0,st=0;if(x[t+256>>2]&&(i=x[t+200>>2]<<2,fa(x[t+280>>2],x[t+264>>2],i),fa(x[t+284>>2],x[t+268>>2],i),fa(x[t+288>>2],x[t+276>>2],i)),!((0|(s=x[t+292>>2]))<1)){for(m=(l=x[t+296>>2])+T(s,40)|0,n=x[t+300>>2],i=l;tt=I[n>>2],(J=I[i+32>>2])==(p=(r=x[i+12>>2])?(q=I[i>>2],p=F(tt-q),tt=I[i+8>>2],R=F(p/tt),p=F(U(R)),o=F(L(p))<F(2147483648)?~~p:-2147483648,F(q+F(tt*F(R-F(0|o))))):(R=I[i>>2],p=I[i+4>>2],tt<R?R:p<tt?p:tt))?x[i+36>>2]=0:(I[i+32>>2]=p,x[i+36>>2]=1),r||(I[n>>2]=p),n=n+4|0,(i=i+40|0)>>>0<m>>>0;);if(!((0|s)<1))for(G=x[t+308>>2],E=x[t+376>>2];;){t:if(!((0|(r=x[l+28>>2]))<1))if(y=(i=G+T(x[l+24>>2],28)|0)+T(r,28)|0,tt=I[l+20>>2],K=I[l+16>>2],J=I[l+32>>2],E)for(;;){q=F(s=0);e:{i:{r:{if((0|(u=x[i>>2]))<1)n=o=0;else if(r=x[i+4>>2],R=I[r>>2],p=F(R-K),1!=(0|u)){if(J<p){o=1,n=0;break i}if(o=0,J<F(K+R))n=0;else{if(n=1,p=I[r+4>>2],!(J<F(K+p)))for(;;){if((0|u)==(0|(n=n+1|0)))break r;if(R=p,p=I[r+(n<<2)>>2],J<F(K+p))break}F(p-K)<J||(n=n+-1|0,(p=F(p-R))<tt||(q=F(F(J-R)/p)))}}else o=J<F(K+R)^1|p<J^1,n=0;if(o)break i;if(V=u=1,!x[i+16>>2])break i;break e}n=u+-1|0,o=1}V=(u=(p=I[i+12>>2])!=q)&(q==F(0)|p==F(0))|x[i+8>>2]!=(0|n),s=o}if(x[i+20>>2]=V,x[i+24>>2]=u,I[i+12>>2]=q,x[i+16>>2]=s,x[i+8>>2]=n,!((i=i+28|0)>>>0<y>>>0))break}else{if(!x[l+36>>2])for(;;)if(x[i+20>>2]=0,!((i=i+28|(x[i+24>>2]=0))>>>0<y>>>0))break t;for(;;){q=F(s=0);e:{i:{r:{n:if(!(((o=0)|(n=x[(r=i)>>2]))<1)){if(A=x[i+4>>2],R=I[A>>2],p=F(R-K),1!=(0|n)){if(!(J<p)){if(o=0,J<F(K+R))break n;u=1;a:if(p=I[A+4>>2],!(J<F(K+p))){for(n=n+-1|0;R=p,(0|n)!=(0|u);)if(p=I[A+((u=u+1|0)<<2)>>2],J<F(K+p))break a;o=1;break i}if(o=0,F(p-K)<J){n=u;break r}if(n=u+-1|0,(p=F(p-R))<tt)break r;q=F(F(J-R)/p);break r}o=1,n=0;break i}o=J<F(K+R)^1|p<J^1}n=0}if(!o&&(A=u=1,x[i+16>>2]))break e}s=o,A=(u=(p=I[i+12>>2])!=q)&(q==F(0)|p==F(0))|x[i+8>>2]!=(0|n)}if(x[r+20>>2]=A,x[i+24>>2]=u,I[i+12>>2]=q,x[i+16>>2]=s,x[i+8>>2]=n,!((i=i+28|0)>>>0<y>>>0))break}}if(!((l=l+40|0)>>>0<m>>>0))break}}if(1<=(0|(i=x[t+312>>2])))for(A=(b=x[t+316>>2])+T(i,36)|0,m=x[t+376>>2];;){at=(r=x[b+12>>2])+((l=x[b>>2])<<2)|0,H=x[t+308>>2],i=r;t:{if(!(l=((u=o=s=0)|l)<1))for(;;){if(n=H+T(x[i>>2],28)|0,x[n+16>>2]){V=1,Q=nt=0;break t}if(s=s||x[n+24>>2],u=u||x[n+20>>2],o=(I[n+12>>2]!=F(0))+o|0,!((i=i+4|0)>>>0<at>>>0))break}if(V=0,(Q=m?1:u)|(nt=m?1:s)&&(rt=1<<o,x[b+8>>2]=rt,31!=(0|o))){for(s=x[b+20>>2],n=(i=x[b+16>>2])+(u=rt<<2)|0,et=ba(S=i,0,4+((y=-1^i)+((i=i+4|0)>>>0<n>>>0?n:i)|0)&-4),u=s+u|0,i=s;x[i>>2]=1065353216,(i=i+4|0)>>>0<u>>>0;);if(!l)if(u=l=1,o)for(;;){if(S=H+T(x[r>>2],28)|0,o=x[S+8>>2],y=T(o,l),i=0,(p=I[S+12>>2])==F(0))for(;x[(o=et+(i<<2)|0)>>2]=y+x[o>>2],(0|rt)!=(0|(i=i+1|0)););else{for(x[et>>2]=y+x[et>>2],I[s>>2]=F(F(1)-p)*I[s>>2],G=T(o+(i=1)|0,l);p=I[S+12>>2],n=i&u,x[(o=(E=i<<2)+et|0)>>2]=x[o>>2]+(n?G:y),I[(o=s+E|0)>>2]=(n?p:F(F(1)-p))*I[o>>2],(0|rt)!=(0|(i=i+1|0)););u<<=1}if(l=T(x[S>>2],l),!((r=r+4|0)>>>0<at>>>0))break}else for(;;){if(n=H+T(x[r>>2],28)|0,u=T(x[n+8>>2],l),i=0,(p=I[n+12>>2])==F(0))for(;x[(o=et+(i<<2)|0)>>2]=u+x[o>>2],(0|rt)!=(0|(i=i+1|0)););else x[et>>2]=u+x[et>>2],I[s>>2]=F(F(1)-p)*I[s>>2];if(l=T(x[n>>2],l),!((r=r+4|0)>>>0<at>>>0))break}}}if(x[b+32>>2]=V,x[b+24>>2]=Q,x[b+28>>2]=nt,!((b=b+36|0)>>>0<A>>>0))break}if(!((0|(o=x[t+4>>2]))<=0)){for(r=(i=x[t+52>>2])+(o<<2)|0;p=I[i>>2],I[i>>2]=p<F(0)?F(0):F(D(p,F(1))),(i=i+4|0)>>>0<r>>>0;);if(!((0|o)<1)){for(l=(i=x[t+8>>2])+(o<<3)|0,y=x[t+316>>2],s=x[t+40>>2],n=u=x[t+36>>2];o=0,x[i+4>>2]&&(r=x[i>>2],!x[u+(r<<2)>>2]&&-1!=(0|r)||(o=!x[32+(y+T(x[s>>2],36)|0)>>2])),x[n>>2]=o,s=s+4|0,n=n+4|0,(i=i+8|0)>>>0<l>>>0;);if(!((0|(m=x[t+4>>2]))<1))for(A=x[t>>2],G=x[A+724>>2],r=x[t+40>>2],u=l=0;;){if(S=y+T(x[r>>2],36)|0,(x[S+28>>2]||x[S+24>>2])&&(x[(s=l<<2)+x[t+16>>2]>>2]=x[S+8>>2],x[S+24>>2]&&!((0|(o=x[S+8>>2]))<1)))for(E=(i=x[S+16>>2])+(o<<2)|0,s=x[s+G>>2],n=x[t+28>>2]+(u<<2)|0,o=x[A+936>>2];x[n>>2]=x[o+(s+x[i>>2]<<2)>>2],n=n+4|0,(i=i+4|0)>>>0<E>>>0;);if(x[S+28>>2]&&!((0|(o=x[S+8>>2]))<1))for(o=(i=x[S+20>>2])+(o<<2)|0,n=x[t+20>>2]+(u<<2)|0;x[n>>2]=x[i>>2],n=n+4|0,(i=i+4|0)>>>0<o>>>0;);if(r=r+4|0,u=x[S+4>>2]+u|0,(0|m)==(0|(l=l+1|0)))break}}}if(v[x[1644]](t),ot=x[t+316>>2],1<=(0|(r=x[t+56>>2]))){for(m=(i=x[t+60>>2])+(r<<5)|0,A=x[t+176>>2],G=x[t+172>>2],E=x[t+36>>2],o=x[t+180>>2],s=n=x[t+168>>2];;){u=s,r=0,x[i+28>>2]&&(-1!=(0|(l=x[i>>2]))&&(r=0,!x[E+(l<<2)>>2])||-1!=(0|(l=x[i+4>>2]))&&(r=0,!x[n+(l<<2)>>2])||(r=!x[32+(T(x[o>>2],36)+ot|0)>>2])),x[u>>2]=r;t:if((u=x[i+8>>2])>>>0<=1){if(u-1){x[G+(x[i+12>>2]<<2)>>2]=r;break t}x[A+(x[i+12>>2]<<2)>>2]=r}else Y(4,1473,0);if(o=o+4|0,s=s+4|0,!((i=i+32|0)>>>0<m>>>0))break}ot=x[t+316>>2]}if(l=x[t>>2],1<=(0|(m=x[t- -64>>2]))){for(A=x[l+988>>2],G=x[l+784>>2],V=x[t+184>>2],b=r=0;;){if(y=T(x[V>>2],36)+ot|0,(x[y+28>>2]||x[y+24>>2])&&(x[(s=r<<2)+x[t+84>>2]>>2]=x[y+8>>2],x[y+24>>2]&&!((0|(o=x[y+8>>2]))<1)))for(E=(i=x[y+16>>2])+(o<<2)|0,u=x[s+G>>2],n=(o=b<<2)+x[t+100>>2]|0,s=o+x[t+96>>2]|0;o=u+x[i>>2]<<2,x[n>>2]=A+(x[o+x[l+944>>2]>>2]<<2),x[s>>2]=x[o+x[l+940>>2]>>2],s=s+4|0,n=n+4|0,(i=i+4|0)>>>0<E>>>0;);if(x[y+28>>2]&&!((0|(o=x[y+8>>2]))<1))for(o=(i=x[y+20>>2])+(o<<2)|0,n=x[t+88>>2]+(b<<2)|0;x[n>>2]=x[i>>2],n=n+4|0,(i=i+4|0)>>>0<o>>>0;);if(V=V+4|0,b=x[y+4>>2]+b|0,(0|m)==(0|(r=r+1|0)))break}ot=x[t+316>>2],l=x[t>>2]}if(1<=(0|(rt=x[t+72>>2])))for(at=x[t+76>>2],H=x[l+808>>2],nt=x[t+188>>2],Q=b=0;;){if(it=T(x[nt>>2],36)+ot|0,(x[it+28>>2]||x[it+24>>2])&&(x[(r=b<<2)+x[t+116>>2]>>2]=x[it+8>>2],x[it+24>>2])){if(i=x[it+16>>2],et=x[r+H>>2],1<=(0|(r=x[it+8>>2])))for(S=i+(r<<2)|0,n=(r=Q<<2)+x[t+132>>2]|0,s=r+x[t+136>>2]|0,o=r+x[t+140>>2]|0,u=r+x[t+144>>2]|0,V=r+x[t+128>>2]|0,y=x[l+948>>2],m=x[l+964>>2],A=x[l+960>>2],G=x[l+956>>2],E=x[l+952>>2],r=i;st=et+x[r>>2]<<2,x[n>>2]=x[st+E>>2],x[s>>2]=x[G+st>>2],x[o>>2]=x[A+st>>2],x[u>>2]=x[m+st>>2],x[V>>2]=x[y+st>>2],V=V+4|0,u=u+4|0,o=o+4|0,s=s+4|0,n=n+4|0,(r=r+4|0)>>>0<S>>>0;);r=at+(b<<5)|0,i=et+x[i>>2]<<2,x[r+24>>2]=x[i+x[l+968>>2]>>2],x[r+28>>2]=x[i+x[l+972>>2]>>2]}if(x[it+28>>2]&&!((0|(r=x[it+8>>2]))<1))for(r=(i=x[it+20>>2])+(r<<2)|0,n=x[t+120>>2]+(Q<<2)|0;x[n>>2]=x[i>>2],n=n+4|0,(i=i+4|0)>>>0<r>>>0;);if(nt=nt+4|0,Q=x[it+4>>2]+Q|0,(0|rt)==(0|(b=b+1|0)))break}if(v[x[1642]](t),v[x[1645]](t),!((0|(r=x[t+200>>2]))<1)){for(E=(i=x[t+204>>2])+(r<<4)|0,l=x[t+168>>2],u=x[t+36>>2],y=x[t+316>>2],s=x[t+252>>2],n=x[t+248>>2];o=0,x[i+8>>2]&&(r=x[i>>2],!x[u+(r<<2)>>2]&&-1!=(0|r)||(r=x[i+4>>2],!x[l+(r<<2)>>2]&&-1!=(0|r)||(o=!x[32+(y+T(x[s>>2],36)|0)>>2]))),x[n>>2]=o,s=s+4|0,n=n+4|0,(i=i+16|0)>>>0<E>>>0;);if(!((0|(A=x[t+200>>2]))<1))for(S=x[t>>2],G=x[S+988>>2],E=x[S+844>>2],r=x[t+252>>2],V=b=0;;){if(H=y+T(x[r>>2],36)|0,(x[H+28>>2]||x[H+24>>2])&&(x[(s=b<<2)+x[t+212>>2]>>2]=x[H+8>>2],x[H+24>>2]&&!((0|(o=x[H+8>>2]))<1)))for(l=(i=x[H+16>>2])+(o<<2)|0,u=x[s+E>>2],n=(o=V<<2)+x[t+232>>2]|0,s=o+x[t+224>>2]|0,o=o+x[t+228>>2]|0;m=u+x[i>>2]<<2,x[n>>2]=G+(x[m+x[S+984>>2]>>2]<<2),x[s>>2]=x[m+x[S+976>>2]>>2],x[o>>2]=x[m+x[S+980>>2]>>2],o=o+4|0,s=s+4|0,n=n+4|0,(i=i+4|0)>>>0<l>>>0;);if(x[H+28>>2]&&!((0|(o=x[H+8>>2]))<1))for(o=(i=x[H+20>>2])+(o<<2)|0,n=x[t+216>>2]+(V<<2)|0;x[n>>2]=x[i>>2],n=n+4|0,(i=i+4|0)>>>0<o>>>0;);if(r=r+4|0,V=x[H+4>>2]+V|0,(0|A)==(0|(b=b+1|0)))break}}if(v[x[1643]](t),function(t){var i,r=0,n=0,o=0,s=0,u=0,l=0,p=0,m=0,y=0,b=0,A=0,v=0;if(1<=(0|(i=x[t+340>>2])))for(y=x[t+316>>2],m=x[t>>2],b=x[m+1072>>2],u=x[t+372>>2];;){if(o=T(x[u>>2],36)+y|0,(x[o+28>>2]||x[o+24>>2])&&(x[(r=l<<2)+x[t+352>>2]>>2]=x[o+8>>2],x[o+24>>2]&&!((0|(s=x[o+8>>2]))<1)))for(s=(n=x[o+16>>2])+(s<<2)|0,A=x[r+b>>2],r=x[t+364>>2]+(p<<2)|0,v=x[m+1104>>2];x[r>>2]=x[(x[n>>2]+A<<2)+v>>2],r=r+4|0,(n=n+4|0)>>>0<s>>>0;);if(x[o+28>>2]&&!((0|(r=x[o+8>>2]))<1))for(s=(n=x[o+20>>2])+(r<<2)|0,r=x[t+356>>2]+(p<<2)|0;x[r>>2]=x[n>>2],r=r+4|0,(n=n+4|0)>>>0<s>>>0;);if(u=u+4|0,p=x[o+4>>2]+p|0,(0|i)==(0|(l=l+1|0)))break}}(t),v[x[1646]](t),r=x[t+48>>2],1<=(0|(i=x[t+4>>2])))for(l=(s=x[t+8>>2])+(i<<3)|0,o=x[t+52>>2],n=x[t+36>>2],i=r;x[n>>2]&&(p=I[o>>2],I[i>>2]=p,-1!=(0|(u=x[s>>2]))&&(I[i>>2]=p*I[(u<<2)+r>>2])),i=i+4|0,o=o+4|0,n=n+4|0,(s=s+8|0)>>>0<l>>>0;);if(1<=(0|(o=x[t+56>>2]))){for(r=t+56|0,i=x[t+60>>2],n=x[t+168>>2],s=0;x[n>>2]&&v[x[i+16>>2]](i,s,r),n=n+4|0,i=i+32|0,(0|o)!=(0|(s=s+1|0)););r=x[t+48>>2]}if(1<=(0|(o=x[t+200>>2])))for(A=(i=x[t+204>>2])+(o<<4)|0,G=x[t+192>>2],E=x[t+60>>2],s=x[t+248>>2],n=x[t+276>>2],o=x[t+272>>2];x[s>>2]&&(-1!=(0|(u=x[i>>2]))&&(I[n>>2]=I[(u<<2)+r>>2]*I[n>>2]),-1!=(0|(u=x[i+4>>2]))&&(I[n>>2]=I[G+(u<<2)>>2]*I[n>>2],l=E+(u<<5)|0,u=x[o>>2],v[x[l+20>>2]](x[l+24>>2],u,u,x[i+12>>2]))),o=o+4|0,n=n+4|0,s=s+4|0,(i=i+16|0)>>>0<A>>>0;);if(function(t){var i=0,r=0,n=0,o=0,s=F(0),u=F(0),l=F(0),p=F(0),m=F(0),y=0,b=0,A=0,v=0,M=0,S=F(0),w=0,V=0,E=F(0),L=0;if(1<=(0|(n=x[t+340>>2])))for(L=(i=x[t+344>>2])+T(n,24)|0,n=x[t+272>>2];;){if((t=0)<(0|(y=x[i+8>>2])))for(b=x[n+(x[i+4>>2]<<2)>>2],A=x[n+(x[i>>2]<<2)>>2],s=I[i+20>>2],v=x[i+16>>2],M=x[i+12>>2];S=I[((r=1|t)<<2)+M>>2],o=P[(t<<1)+v>>1]<<3&262136,u=I[(w=(4|o)+A|0)>>2],r=P[(r<<1)+v>>1]<<3&262136,l=I[(V=(4|r)+b|0)>>2],p=I[(o=o+A|0)>>2],E=I[(t<<2)+M>>2],m=I[(r=r+b|0)>>2],I[o>>2]=p+F(s*F(E*F(m-p))),I[w>>2]=u+F(s*F(E*F(l-u))),I[r>>2]=m+F(s*F(S*F(p-m))),I[V>>2]=l+F(s*F(S*F(u-l))),(0|(t=t+2|0))<(0|y););if(!((i=i+24|0)>>>0<L>>>0))break}}(t),v[x[1647]](t),V=x[t+248>>2],b=x[t+268>>2],1<=(0|(y=x[t+320>>2]))){for(A=(o=x[t+324>>2])+T(y,28)|0,G=x[t+44>>2],E=x[t+36>>2],r=o;;){if(1<=(0|(n=x[r+4>>2])))for(l=r+20|0,u=x[r+12>>2],i=0;m=x[4+(s=u+(i<<4)|0)>>2]<<2,s=1==x[(S=s)>>2],x[S+12>>2]=x[(x[m+(s?E:V)>>2]?m+(s?G:b)|0:l)>>2],(0|n)!=(0|(i=i+1|0)););if(!((r=r+28|0)>>>0<A>>>0))break}for(G=x[t+264>>2],Q=0;;){if(m=o+T(Q,28)|0,!(x[(A=m)+24>>2]<1)){for(s=x[t+328>>2],i=0;x[s+(i<<2)>>2]=-1,(0|(i=i+1|0))<(0|(r=x[A+24>>2])););if(!((0|r)<1))for(r=x[t+336>>2],i=0;x[r+(i<<2)>>2]=-1,(0|(i=i+1|0))<x[A+24>>2];);}if(!(x[m+4>>2]<1)){for(E=x[t+332>>2],i=0;x[E+(i<<2)>>2]=-1,(0|(i=i+1|0))<(0|(r=x[m+4>>2])););if(!((0|r)<1))for(n=x[m+12>>2],l=x[t+336>>2],i=0;u=x[12+(n+(i<<4)|0)>>2]-x[m+20>>2]<<2,r=-1!=(0|(r=x[(s=u+l|0)>>2]))?E+(r<<2)|0:u+x[t+328>>2]|0,x[r>>2]=i,(0|(i=(x[s>>2]=i)+1|0))<x[m+4>>2];);}if(1<=(0|(s=x[A+24>>2])))for(n=x[m+8>>2],E=x[t+328>>2],l=0;;){if(-1!=(0|(i=x[E+(l<<2)>>2]))){for(u=x[t+332>>2],s=x[m+12>>2];n=(r=1!=x[(r=s+(i<<4)|0)>>2]?(x[G+(x[r+4>>2]<<2)>>2]=n,1):(r=o+T(x[r+8>>2],28)|0,x[r+8>>2]=n,x[r>>2]))+n|0,(0|i)<(0|(r=x[u+(i<<2)>>2]))&&-1!=(0|(i=r)););s=x[A+24>>2]}if(!((0|(l=l+1|0))<(0|s)))break}if((0|y)==(0|(Q=Q+1|0)))break}}u=x[t+200>>2];t:{if(x[t+376>>2]){if(i=0,((x[t+256>>2]=0)|u)<1)break t;for(;;){if(n=62,s=x[t+260>>2]+i|0,!x[(r=i<<2)+V>>2]|I[r+x[t+276>>2]>>2]==F(0)||(n=63),M[0|s]=n,(0|u)==(0|(i=i+1|0)))break t;V=x[t+248>>2]}}if(!x[t+256>>2]){if((0|u)<1)break t;for(i=0;;){if(!x[(r=i<<2)+V>>2]|I[r+x[t+276>>2]>>2]==F(0)?(r=x[t+260>>2]+i|0,M[0|r]=254&w[0|r]):(r=x[t+260>>2]+i|0,M[0|r]=1|w[0|r]),(0|u)==(0|(i=i+1|0)))break t;V=x[t+248>>2]}}if(!(((x[t+256>>2]=0)|u)<1))for(n=0;;){if(p=I[(s=n<<2)+x[t+276>>2]>>2],o=x[s+V>>2],i=p!=F(0)&0!=(0|o),r=x[t+260>>2]+n|0,i=(0|i)==(1&M[0|r])?i:2|i,i=p!=I[s+x[t+288>>2]>>2]?4|i:i,i=x[s+b>>2]==x[s+x[t+284>>2]>>2]?i:8|i,i=x[s+x[t+264>>2]>>2]==x[s+x[t+280>>2]>>2]?i:16|i,M[0|r]=o?32|i:i,(0|u)==(0|(n=n+1|0)))break t;b=x[t+268>>2],V=x[t+248>>2]}}x[t+376>>2]=0}function ua(t,i,r){var n=0,o=0,s=0,u=0,l=0,p=0,m=0,y=0,b=0,A=0,v=0;if(x[i>>2]=384,o=x[t>>2],1<=(0|(u=x[o>>2]))){for(p=x[t+16>>2],m=x[t+296>>2];s=(1<<x[m+(x[p+(n<<2)>>2]<<2)>>2])+s|0,(0|u)!=(0|(n=n+1|0)););n=s<<2}if(x[i+4>>2]=u<<3,x[i+8>>2]=x[o>>2]<<2,x[i+12>>2]=x[o>>2]<<2,x[i+16>>2]=x[o>>2]<<2,x[i+20>>2]=x[o>>2]<<2,x[i+24>>2]=x[o>>2]<<2,s=x[o>>2],x[i+40>>2]=n,x[i+36>>2]=n,x[i+32>>2]=n,x[i+28>>2]=s<<2,1<=((s=n=0)|(m=x[o+8>>2]))){for(b=x[t+296>>2],A=x[t+88>>2],y=x[t+76>>2],u=0;n=(0|n)<(0|(p=x[(v=s<<2)+A>>2]))?p:n,l=(15+(p<<3)&-16)+l|0,u=(1<<x[b+(x[y+v>>2]<<2)>>2])+u|0,(0|m)!=(0|(s=s+1|0)););s=n<<3,n=u<<2}if(x[i+44>>2]=x[o+4>>2]<<5,x[i+48>>2]=T(x[o+8>>2],24),x[i+52>>2]=x[o+12>>2]<<5,x[i+56>>2]=x[o+4>>2]<<2,x[i+60>>2]=x[o+8>>2]<<2,x[i+64>>2]=x[o+12>>2]<<2,x[i+68>>2]=x[o+4>>2]<<2,u=x[o+4>>2],x[i+76>>2]=l,x[i+72>>2]=u<<2,x[i+80>>2]=x[o+8>>2]<<2,u=x[o+8>>2],x[i+104>>2]=s,x[i+100>>2]=n,x[i+96>>2]=n,x[i+92>>2]=n,x[i+88>>2]=n,x[i+84>>2]=u<<2,1<=((n=l=0)|(u=x[o+12>>2]))){for(p=x[t+296>>2],m=x[t+100>>2],s=0;s=(1<<x[p+(x[m+(n<<2)>>2]<<2)>>2])+s|0,(0|u)!=(0|(n=n+1|0)););n=s<<2}if(x[i+108>>2]=u<<2,s=x[o+12>>2],x[i+156>>2]=n,x[i+152>>2]=n,x[i+148>>2]=n,x[i+144>>2]=n,x[i+140>>2]=n,x[i+136>>2]=n,x[i+132>>2]=n,x[i+128>>2]=n,x[i+124>>2]=n,x[i+120>>2]=n,x[i+116>>2]=n,x[i+112>>2]=s<<2,1<=((s=n=0)|(p=x[o+16>>2]))){for(b=x[t+136>>2],A=x[t+296>>2],y=x[t+172>>2],u=0;n=(0|n)<(0|(m=x[(v=s<<2)+y>>2]))?m:n,l=(15+(m<<3)&-16)+l|0,u=(1<<x[A+(x[b+v>>2]<<2)>>2])+u|0,(0|p)!=(0|(s=s+1|0)););s=n<<3,n=u<<2}if(x[i+160>>2]=p<<4,x[i+164>>2]=x[o+16>>2]<<2,x[i+168>>2]=x[o+16>>2],x[i+172>>2]=x[o+16>>2]<<2,x[i+176>>2]=x[o+16>>2]<<2,u=x[o+16>>2],x[i+184>>2]=l,x[i+180>>2]=u<<2,x[i+188>>2]=x[o+16>>2]<<2,x[i+192>>2]=x[o+16>>2]<<2,x[i+196>>2]=x[o+16>>2]<<2,x[i+200>>2]=x[o+16>>2]<<2,x[i+204>>2]=x[o+16>>2]<<2,u=x[o+16>>2],x[i+236>>2]=s,x[i+232>>2]=n,x[i+228>>2]=n,x[i+224>>2]=n,x[i+220>>2]=n,x[i+216>>2]=n,x[i+212>>2]=n,x[i+208>>2]=u<<2,x[i+240>>2]=T(x[o+20>>2],40),x[i+244>>2]=x[o+20>>2]<<2,x[i+248>>2]=T(x[o+52>>2],28),1<=((n=u=0)|(l=x[o+48>>2]))){for(p=x[t+296>>2],s=0;s=(1<<x[p+(n<<2)>>2])+s|0,(0|l)!=(0|(n=n+1|0)););n=s<<2}if(x[i+260>>2]=n,x[i+256>>2]=n,x[i+252>>2]=T(l,36),x[i+264>>2]=T(x[o+72>>2],28),1<=((n=0)|(p=x[o+72>>2]))){for(m=x[t+340>>2],b=x[t+336>>2],A=x[t+328>>2],s=0;s=(0|(y=x[(l=u<<2)+b>>2]-x[l+m>>2]|0))<(0|s)?s:y+1|0,n=(0|n)<(0|(l=x[l+A>>2]))?l:n,(0|p)!=(0|(u=u+1|0)););u=s<<2,n<<=2}if(s=x[o+76>>2],x[i+280>>2]=u,x[i+276>>2]=n,x[i+272>>2]=u,x[i+268>>2]=s<<4,1<=((n=0)|(u=x[o+80>>2]))){for(l=x[t+364>>2],t=x[t+296>>2],s=0;s=(1<<x[t+(x[l+(n<<2)>>2]<<2)>>2])+s|0,(0|u)!=(0|(n=n+1|0)););n=s<<2}for(x[i+284>>2]=T(u,24),x[i+288>>2]=x[o+80>>2]<<2,t=x[o+80>>2],x[i+304>>2]=n,x[i+300>>2]=n,x[i+296>>2]=n,x[i>>2]=0,x[i+292>>2]=t<<2,n=384,s=1;n=((o=x[(t=(s<<2)+i|0)>>2])+15&-16)+(x[t>>2]=n)|0,77!=(0|(s=s+1|0)););x[r>>2]=n}function va(t,i,r){var n;i|=0,q=n=q+-64|0;t:{if(t|=0)if(i)if((i+15&-16)==(0|i)){if(i=function(t,i,r){var n,o=0,s=0,u=0,l=0,p=0,m=0,y=0,b=0,A=0,v=0,S=0,P=0,V=0,E=0,L=0,R=0,D=0,U=F(0);if(ba(16+(q=n=q-336|0)|0,0,308),ua(t+704|0,16+n|0,12+n|0),(s=x[12+n>>2])>>>0<=r>>>0){if(o=(i=ba(i,r=0,s))+x[16+n>>2]|0,x[o+8>>2]=i+x[20+n>>2],x[o+36>>2]=i+x[24+n>>2],x[o+44>>2]=i+x[28+n>>2],x[o+48>>2]=i+x[32+n>>2],x[o+52>>2]=i+x[36+n>>2],x[o+12>>2]=i+x[40+n>>2],x[o+16>>2]=i+x[44+n>>2],x[o+20>>2]=i+x[48+n>>2],x[o+28>>2]=i+x[52+n>>2],x[o+32>>2]=i+x[56+n>>2],s=x[t+704>>2],x[o+60>>2]=i+x[60+n>>2],m=i+x[64+n>>2]|0,x[o+68>>2]=m,x[o+76>>2]=i+x[68+n>>2],x[o+168>>2]=i+x[72+n>>2],x[o+172>>2]=i+x[76+n>>2],x[o+176>>2]=i+x[80+n>>2],x[o+192>>2]=i+x[84+n>>2],x[o+196>>2]=i+x[88+n>>2],1<=(0|(s=x[s+8>>2])))for(u=i+x[92+n>>2]|0,y=x[t+792>>2];x[20+(m+T(r,24)|0)>>2]=u,u=(15+(x[y+(r<<2)>>2]<<3)&-16)+u|0,(0|s)!=(0|(r=r+1|0)););if(x[o+80>>2]=i+x[96+n>>2],x[o+84>>2]=i+x[100+n>>2],x[o+88>>2]=i+x[104+n>>2],x[o+96>>2]=i+x[108+n>>2],x[o+100>>2]=i+x[112+n>>2],x[o+104>>2]=i+x[116+n>>2],x[o+108>>2]=i+x[120+n>>2],x[o+112>>2]=i+x[124+n>>2],x[o+116>>2]=i+x[128+n>>2],x[o+120>>2]=i+x[132+n>>2],x[o+128>>2]=i+x[136+n>>2],x[o+132>>2]=i+x[140+n>>2],x[o+136>>2]=i+x[144+n>>2],x[o+140>>2]=i+x[148+n>>2],x[o+144>>2]=i+x[152+n>>2],x[o+148>>2]=i+x[156+n>>2],x[o+152>>2]=i+x[160+n>>2],x[o+156>>2]=i+x[164+n>>2],x[o+160>>2]=i+x[168+n>>2],x[o+164>>2]=i+x[172+n>>2],r=x[t+704>>2],x[o+204>>2]=i+x[176+n>>2],x[o+248>>2]=i+x[180+n>>2],x[o+260>>2]=i+x[184+n>>2],x[o+264>>2]=i+x[188+n>>2],x[o+268>>2]=i+x[192+n>>2],s=i+x[196+n>>2]|0,x[o+272>>2]=s,!((0|(m=x[r+16>>2]))<1)&&(u=i+x[200+n>>2]|0,x[s>>2]=u,(r=1)!=(0|m)))for(s=0;u=(15+(x[x[t+876>>2]+(s<<2)>>2]<<3)&-16)+u|0,x[x[o+272>>2]+(r<<2)>>2]=u,(0|m)!=(0|(r=(s=r)+1|0)););if(x[o+276>>2]=i+x[204+n>>2],x[o+280>>2]=i+x[208+n>>2],x[o+284>>2]=i+x[212+n>>2],x[o+288>>2]=i+x[216+n>>2],x[o+208>>2]=i+x[220+n>>2],x[o+212>>2]=i+x[224+n>>2],x[o+216>>2]=i+x[228+n>>2],x[o+224>>2]=i+x[232+n>>2],x[o+228>>2]=i+x[236+n>>2],x[o+232>>2]=i+x[240+n>>2],x[o+236>>2]=i+x[244+n>>2],x[o+240>>2]=i+x[248+n>>2],x[o+244>>2]=i+x[252+n>>2],r=x[256+n>>2],p=i+x[260+n>>2]|0,x[o+300>>2]=p,b=i+r|0,x[o+296>>2]=b,v=i+x[264+n>>2]|0,x[o+308>>2]=v,r=x[t+704>>2],s=x[276+n>>2],u=x[272+n>>2],y=i+x[268+n>>2]|0,x[o+316>>2]=y,1<=(0|(m=x[r+48>>2])))for(u=i+u|0,s=i+s|0,l=x[t+1e3>>2],r=0;A=y+T(r,36)|0,x[A+20>>2]=s,x[A+16>>2]=u,s=(A=1<<x[l+(r<<2)>>2]<<2)+s|0,u=u+A|0,(0|m)!=(0|(r=r+1|0)););if(r=x[t+704>>2],s=i+x[280+n>>2]|0,x[o+324>>2]=s,1<=(0|(m=x[r+72>>2])))for(u=i+x[284+n>>2]|0,l=x[t+1032>>2],r=0;x[12+(s+T(r,28)|0)>>2]=u,u=(x[l+(r<<2)>>2]<<4)+u|0,(0|m)!=(0|(r=r+1|0)););if(x[o+328>>2]=i+x[288+n>>2],x[o+332>>2]=i+x[292+n>>2],x[o+336>>2]=i+x[296+n>>2],x[o+344>>2]=i+x[300+n>>2],x[o+348>>2]=i+x[304+n>>2],x[o+352>>2]=i+x[308+n>>2],x[o+356>>2]=i+x[312+n>>2],x[o+364>>2]=i+x[316+n>>2],r=x[320+n>>2],x[o+376>>2]=1,x[o+368>>2]=i+r,x[o+380>>2]=1&M[x[t+708>>2]+20|0],m=x[t+704>>2],s=x[m+20>>2],1<=(0|(x[o+292>>2]=s))){for(A=x[t+932>>2],S=x[t+928>>2],L=x[t+924>>2],l=x[t+916>>2],P=x[t+920>>2],R=x[t+908>>2],D=x[t+912>>2],u=s;i=b+T(u=u+-1|0,40)|0,V=(r=u<<2)+D|0,x[i>>2]=x[V>>2],E=r+R|0,x[i+4>>2]=x[E>>2],I[i+8>>2]=I[E>>2]-I[V>>2],x[i+12>>2]=x[r+P>>2],x[i+32>>2]=x[r+l>>2],U=$b(F(x[r+L>>2])),I[i+16>>2]=U,I[i+20>>2]=U*F(1.5),x[i+24>>2]=x[r+S>>2],r=x[r+A>>2],x[i+36>>2]=1,x[i+28>>2]=r,0<(0|u););for(;x[(i=(s=s+-1|0)<<2)+p>>2]=x[i+l>>2],0<(0|s););}if(r=x[m+52>>2],1<=(0|(x[o+304>>2]=r)))for(s=x[t+1004>>2],u=x[t+1012>>2],l=x[t+1008>>2];i=v+T(r=r+-1|0,28)|0,p=r<<2,x[i>>2]=x[p+l>>2],p=x[s+p>>2],x[i+20>>2]=1,x[i+24>>2]=1,x[i+12>>2]=0,x[i+4>>2]=u+(p<<2),0<(0|r););if(r=x[m+48>>2],1<=(0|(x[o+312>>2]=r)))for(s=x[t+996>>2],u=x[t+992>>2],l=x[t+1e3>>2];i=y+T(r=r+-1|0,36)|0,b=x[(p=r<<2)+l>>2],x[i>>2]=b,x[i+4>>2]=1<<b,p=x[s+p>>2],x[i+24>>2]=1,x[i+28>>2]=1,x[i+12>>2]=u+(p<<2),0<(0|r););if(u=x[m>>2],x[o+4>>2]=u,s=x[t+720>>2],x[o+40>>2]=s,(0|u)<1)r=0;else{for(l=x[t+732>>2],p=x[t+736>>2],b=x[t+740>>2],v=x[o+52>>2],A=x[o+8>>2],r=u;i=(r=r+-1|0)<<2,x[(S=A+(r<<3)|0)>>2]=x[i+b>>2],x[S+4>>2]=x[i+p>>2],I[i+v>>2]=x[i+l>>2]?F(1):F(0),0<(0|r););for(l=x[o+12>>2],r=0;i=x[4+(y+T(x[(p=(u=u+-1|0)<<2)+s>>2],36)|0)>>2],r=(x[l+p>>2]=i)+r|0,0<(0|u););}if(x[o+24>>2]=r,u=x[m+4>>2],x[o+56>>2]=u,x[o+180>>2]=x[t+752>>2],x[o+184>>2]=x[t+780>>2],x[o+188>>2]=x[t+804>>2],1<=(0|u)){for(;;){u=u+-1|0,i=x[o+60>>2]+(u<<5)|0,r=u<<2,x[i>>2]=x[r+x[t+764>>2]>>2],x[i+4>>2]=x[r+x[t+768>>2]>>2],s=x[r+x[t+772>>2]>>2],x[i+8>>2]=s,m=x[r+x[t+776>>2]>>2],x[i+12>>2]=m,x[i+28>>2]=x[r+x[t+760>>2]>>2];e:if(s>>>0<=1){if(s-1){x[i+20>>2]=1,x[i+16>>2]=2,x[i+24>>2]=x[o+68>>2]+T(m,24);break e}x[i+20>>2]=3,x[i+16>>2]=4,x[i+24>>2]=x[o+76>>2]+(m<<5)}else Y(4,1026,0);if(!(0<(0|u)))break}m=x[t+704>>2]}u=x[m+8>>2];e:if(!((0|(x[o+64>>2]=u))<1)){if(r=u+-1|0,y=x[t+792>>2],l=x[t+800>>2],p=x[t+796>>2],b=x[o+68>>2],w[t+4|0]<2)for(;;)if(i=b+T(r,24)|0,s=r<<2,x[i>>2]=x[s+p>>2],x[i+4>>2]=x[s+l>>2],s=x[s+y>>2],x[i+8>>2]=0,x[i+12>>2]=s,i=0<(0|r),r=r+-1|0,!i)break e;for(v=x[t+1108>>2];i=b+T(r,24)|0,s=r<<2,x[i>>2]=x[s+p>>2],x[i+4>>2]=x[s+l>>2],x[i+12>>2]=x[s+y>>2],x[i+8>>2]=x[s+v>>2],i=0<(0|r),r=r+-1|0,i;);}if(i=x[m+12>>2],1<=(0|(x[o+72>>2]=i)))for(s=x[t+816>>2],y=x[o+76>>2],r=i;x[y+((r=r+-1|0)<<5)>>2]=x[s+(r<<2)>>2],0<(0|r););if(1<=((s=r=0)|u)){for(y=x[o+80>>2],l=x[o+184>>2],p=x[o+316>>2];i=x[4+(p+T(x[(b=(u=u+-1|0)<<2)+l>>2],36)|0)>>2],s=(x[y+b>>2]=i)+s|0,0<(0|u););i=x[o+72>>2]}if(x[o+92>>2]=s,1<=(0|i))for(u=x[o+112>>2],y=x[o+188>>2],l=x[o+316>>2];s=x[4+(l+T(x[(p=(i=i+-1|0)<<2)+y>>2],36)|0)>>2],r=r+(x[u+p>>2]=s)|0,0<(0|i););if(x[o+124>>2]=r,s=x[m+16>>2],x[o+200>>2]=s,y=x[t+840>>2],x[o+252>>2]=y,(0|s)<1)r=0;else{for(l=x[t+856>>2],p=x[t+876>>2],b=x[t+864>>2],v=x[t+860>>2],A=x[o+204>>2],r=s;u=(r=r+-1|0)<<2,x[(i=A+(r<<4)|0)>>2]=x[u+v>>2],x[i+4>>2]=x[u+b>>2],x[i+12>>2]=x[u+p>>2],x[i+8>>2]=x[u+l>>2],0<(0|r););for(u=x[o+208>>2],l=x[o+316>>2],r=0;i=x[4+(l+T(x[(p=(s=s+-1|0)<<2)+y>>2],36)|0)>>2],r=(x[u+p>>2]=i)+r|0,0<(0|s););}if(x[o+220>>2]=r,u=x[m+72>>2],1<=(0|(x[o+320>>2]=u)))for(p=x[t+1028>>2],b=x[t+1044>>2],v=x[t+1040>>2],A=x[t+1036>>2],S=x[t+1032>>2],L=x[o+324>>2],s=0;;){if(i=L+T(s,28)|0,y=x[(r=s<<2)+S>>2],x[i+4>>2]=y,x[i>>2]=x[r+A>>2],l=x[r+v>>2],x[i+16>>2]=l,P=x[r+b>>2],x[i+20>>2]=P,x[i+8>>2]=0,x[i+24>>2]=1+(l-P|0),1<=(0|y))for(P=x[r+p>>2],R=x[i+12>>2],D=x[t+1056>>2],V=x[t+1048>>2],E=x[t+1052>>2],r=0;l=r+P<<2,x[4+(i=R+(r<<4)|0)>>2]=x[l+E>>2],x[i>>2]=x[l+V>>2],l=x[l+D>>2],x[i+12>>2]=0,x[i+8>>2]=l,(0|y)!=(0|(r=r+1|0)););if((0|u)==(0|(s=s+1|0)))break}if(i=x[m+80>>2],x[o+340>>2]=i,u=x[t+1068>>2],x[o+372>>2]=u,(0|i)<1)i=0;else{for(m=x[t+1100>>2],y=x[t+1088>>2],l=x[t+1096>>2],p=x[t+1092>>2],b=x[t+1084>>2],v=x[t+1080>>2],A=x[o+344>>2];r=A+T(i=i+-1|0,24)|0,s=i<<2,x[r>>2]=x[s+v>>2],x[r+4>>2]=x[s+b>>2],x[r+8>>2]=x[s+p>>2],s=x[s+y>>2],x[r+16>>2]=m+(s<<1),x[r+12>>2]=l+(s<<2),0<(0|i););if((0|(r=x[o+340>>2]))<1)i=0;else for(m=x[o+348>>2],y=x[o+316>>2],i=0;s=x[4+(y+T(x[(l=(r=r+-1|0)<<2)+u>>2],36)|0)>>2],i=i+(x[l+m>>2]=s)|0,0<(0|r););}x[o>>2]=t,x[o+360>>2]=i,ta(o)}return q=336+n|0,o}(t,i,r|=0))break t;x[36+n>>2]=1872,x[32+n>>2]=1846,Y(4,1087,32+n|0)}else x[52+n>>2]=1441,x[48+n>>2]=1846,Y(4,1087,48+n|0);else x[20+n>>2]=1246,x[16+n>>2]=1846,Y(4,1087,16+n|0);else x[4+n>>2]=1828,x[n>>2]=1846,Y(4,1087,n);i=0}return q=64+n|0,0|i}function wa(t){var i;return q=i=q-16|0,t=(t|=0)?function(t){var i;return ba(16+(q=i=q-336|0)|0,0,308),ua(t+704|0,16+i|0,12+i|0),q=336+i|0,x[12+i>>2]}(t):(x[4+i>>2]=1828,x[i>>2]=1810,Y(4,1087,i),0),q=16+i|0,0|t}function xa(t,i){var r=0,n=0,o=0,s=0,u=0,l=0,p=0,m=0;s=t+i|0;t:{e:if(!(1&(r=x[t+4>>2]))){if(!(3&r))break t;if(i=(r=x[t>>2])+i|0,(0|(t=t-r|0))==x[1928]){if(3==(3&(r=x[s+4>>2])))return x[1925]=i,x[s+4>>2]=-2&r,x[t+4>>2]=1|i,void(x[s>>2]=i)}else{if(r>>>0<=255){if(o=r>>>3,r=x[t+8>>2],(0|(n=x[t+12>>2]))==(0|r)){p=7692,m=x[1923]&jc(o),x[p>>2]=m;break e}x[r+12>>2]=n,x[n+8>>2]=r;break e}if(l=x[t+24>>2],(0|(r=x[t+12>>2]))==(0|t))if((o=x[(n=t+20|0)>>2])||(o=x[(n=t+16|0)>>2])){for(;u=n,(o=x[(n=(r=o)+20|0)>>2])||(n=r+16|0,o=x[r+16>>2]););x[u>>2]=0}else r=0;else n=x[t+8>>2],x[n+12>>2]=r,x[r+8>>2]=n;if(!l)break e;n=x[t+28>>2];i:{if(x[(o=7996+(n<<2)|0)>>2]==(0|t)){if(x[o>>2]=r)break i;p=7696,m=x[1924]&jc(n),x[p>>2]=m;break e}if(!(x[l+(x[l+16>>2]==(0|t)?16:20)>>2]=r))break e}if(x[r+24>>2]=l,(n=x[t+16>>2])&&(x[r+16>>2]=n,x[n+24>>2]=r),!(n=x[t+20>>2]))break e;x[r+20>>2]=n,x[n+24>>2]=r}}e:{if(!(2&(r=x[s+4>>2]))){if(x[1929]==(0|s)){if(x[1929]=t,i=x[1926]+i|0,x[1926]=i,x[t+4>>2]=1|i,x[1928]!=(0|t))break t;return x[1925]=0,void(x[1928]=0)}if(x[1928]==(0|s))return x[1928]=t,i=x[1925]+i|0,x[1925]=i,x[t+4>>2]=1|i,void(x[t+i>>2]=i);i=(-8&r)+i|0;i:if(r>>>0<=255){if(o=r>>>3,r=x[s+8>>2],(0|(n=x[s+12>>2]))==(0|r)){p=7692,m=x[1923]&jc(o),x[p>>2]=m;break i}x[r+12>>2]=n,x[n+8>>2]=r}else{if(l=x[s+24>>2],(0|s)==(0|(r=x[s+12>>2])))if((o=x[(n=s+20|0)>>2])||(o=x[(n=s+16|0)>>2])){for(;u=n,(o=x[(n=(r=o)+20|0)>>2])||(n=r+16|0,o=x[r+16>>2]););x[u>>2]=0}else r=0;else n=x[s+8>>2],x[n+12>>2]=r,x[r+8>>2]=n;if(l){n=x[s+28>>2];r:{if(x[(o=7996+(n<<2)|0)>>2]==(0|s)){if(x[o>>2]=r)break r;p=7696,m=x[1924]&jc(n),x[p>>2]=m;break i}if(!(x[l+(x[l+16>>2]==(0|s)?16:20)>>2]=r))break i}x[r+24>>2]=l,(n=x[s+16>>2])&&(x[r+16>>2]=n,x[n+24>>2]=r),(n=x[s+20>>2])&&(x[r+20>>2]=n,x[n+24>>2]=r)}}if(x[t+4>>2]=1|i,x[t+i>>2]=i,x[1928]!=(0|t))break e;return void(x[1925]=i)}x[s+4>>2]=-2&r,x[t+4>>2]=1|i,x[t+i>>2]=i}if(i>>>0<=255)return i=7732+((r=i>>>3)<<3)|0,r=(n=x[1923])&(r=1<<r)?x[i+8>>2]:(x[1923]=r|n,i),x[i+8>>2]=t,x[r+12>>2]=t,x[t+12>>2]=i,void(x[t+8>>2]=r);x[t+16>>2]=0,r=x[t+20>>2]=0,(o=i>>>8)&&(r=31,16777215<i>>>0||(r=28+((r=((s=(o<<=u=o+1048320>>>16&8)<<(r=o+520192>>>16&4))<<(o=s+245760>>>16&2)>>>15)-(o|r|u)|0)<<1|i>>>r+21&1)|0)),o=7996+((x[(n=t)+28>>2]=r)<<2)|0;e:{if((n=x[1924])&(u=1<<r)){for(n=i<<(31==(0|r)?0:25-(r>>>1)|0),r=x[o>>2];;){if((-8&x[(o=r)+4>>2])==(0|i))break e;if(r=n>>>29,n<<=1,!(r=x[16+(u=o+(4&r)|0)>>2]))break}x[u+16>>2]=t}else x[1924]=n|u,x[o>>2]=t;return x[t+24>>2]=o,x[t+12>>2]=t,void(x[t+8>>2]=t)}i=x[o+8>>2],x[i+12>>2]=t,x[o+8>>2]=t,x[t+24>>2]=0,x[t+12>>2]=o,x[t+8>>2]=i}}function ya(t,i,r){var n=0;t:{if(8!=(0|i)){if(n=28,3&i|1!=(0|function(t){for(var i=0,r=0;r=i,t;)t&=t-1,i=i+1|0;return r}(i>>>2)))break t;if(n=48,-64-i>>>0<r>>>0)break t;i=function(t,i){var r=0,n=0,o=0,s=0,u=0;if((n=t>>>0>(r=16)?t:16)+-1&n)for(;r=(t=r)<<1,t>>>0<n>>>0;);else t=n;return-64-t>>>0<=i>>>0?(x[1906]=48,0):(r=ja(12+((n=i>>>0<11?16:i+11&-8)+t|0)|0))?(i=r+-8|0,r&t+-1?(o=(-8&(u=x[(s=r+-4|0)>>2]))-(r=(t=15<(r=((t+r|0)-1&0-t)-8|0)-i>>>0?r:t+r|0)-i|0)|0,3&u?(x[t+4>>2]=o|1&x[t+4>>2]|2,x[4+(o=t+o|0)>>2]=1|x[o+4>>2],x[s>>2]=r|1&x[s>>2]|2,x[t+4>>2]=1|x[t+4>>2],xa(i,r)):(i=x[i>>2],x[t+4>>2]=o,x[t>>2]=i+r)):t=i,3&(i=x[t+4>>2])&&((r=-8&i)>>>0<=n+16>>>0||(x[t+4>>2]=n|1&i|2,i=t+n|0,n=r-n|0,x[i+4>>2]=3|n,x[4+(r=t+r|0)>>2]=1|x[r+4>>2],xa(i,n))),t+8|0):0}(16<i>>>0?i:16,r)}else i=ja(r);if(!i)return 48;x[t>>2]=i,n=0}return n}function za(t){var i=0,r=0,n=0,o=0,s=0,u=0,l=0,p=0,m=0;t:if(t){s=(n=t+-8|0)+(t=-8&(r=x[t+-4>>2]))|0;e:if(!(1&r)){if(!(3&r))break t;if((n=n-(r=x[n>>2])|0)>>>0<V[1927])break t;if(t=t+r|0,x[1928]==(0|n)){if(3==(3&(r=x[s+4>>2])))return x[1925]=t,x[s+4>>2]=-2&r,x[n+4>>2]=1|t,void(x[t+n>>2]=t)}else{if(r>>>0<=255){if(o=x[n+8>>2],r>>>=3,(0|(i=x[n+12>>2]))==(0|o)){p=7692,m=x[1923]&jc(r),x[p>>2]=m;break e}x[o+12>>2]=i,x[i+8>>2]=o;break e}if(l=x[n+24>>2],(0|n)==(0|(r=x[n+12>>2])))if((i=x[(o=n+20|0)>>2])||(i=x[(o=n+16|0)>>2])){for(;u=o,(i=x[(o=(r=i)+20|0)>>2])||(o=r+16|0,i=x[r+16>>2]););x[u>>2]=0}else r=0;else i=x[n+8>>2],x[i+12>>2]=r,x[r+8>>2]=i;if(!l)break e;o=x[n+28>>2];i:{if(x[(i=7996+(o<<2)|0)>>2]==(0|n)){if(x[i>>2]=r)break i;p=7696,m=x[1924]&jc(o),x[p>>2]=m;break e}if(!(x[l+(x[l+16>>2]==(0|n)?16:20)>>2]=r))break e}if(x[r+24>>2]=l,(i=x[n+16>>2])&&(x[r+16>>2]=i,x[i+24>>2]=r),!(i=x[n+20>>2]))break e;x[r+20>>2]=i,x[i+24>>2]=r}}if(!(s>>>0<=n>>>0)&&1&(r=x[s+4>>2])){e:{if(!(2&r)){if(x[1929]==(0|s)){if(x[1929]=n,t=x[1926]+t|0,x[1926]=t,x[n+4>>2]=1|t,x[1928]!=(0|n))break t;return x[1925]=0,void(x[1928]=0)}if(x[1928]==(0|s))return x[1928]=n,t=x[1925]+t|0,x[1925]=t,x[n+4>>2]=1|t,void(x[t+n>>2]=t);t=(-8&r)+t|0;i:if(r>>>0<=255){if(r>>>=3,(0|(i=x[s+8>>2]))==(0|(o=x[s+12>>2]))){p=7692,m=x[1923]&jc(r),x[p>>2]=m;break i}x[i+12>>2]=o,x[o+8>>2]=i}else{if(l=x[s+24>>2],(0|s)==(0|(r=x[s+12>>2])))if((i=x[(o=s+20|0)>>2])||(i=x[(o=s+16|0)>>2])){for(;u=o,(i=x[(o=(r=i)+20|0)>>2])||(o=r+16|0,i=x[r+16>>2]););x[u>>2]=0}else r=0;else i=x[s+8>>2],x[i+12>>2]=r,x[r+8>>2]=i;if(l){o=x[s+28>>2];r:{if(x[(i=7996+(o<<2)|0)>>2]==(0|s)){if(x[i>>2]=r)break r;p=7696,m=x[1924]&jc(o),x[p>>2]=m;break i}if(!(x[l+(x[l+16>>2]==(0|s)?16:20)>>2]=r))break i}x[r+24>>2]=l,(i=x[s+16>>2])&&(x[r+16>>2]=i,x[i+24>>2]=r),(i=x[s+20>>2])&&(x[r+20>>2]=i,x[i+24>>2]=r)}}if(x[n+4>>2]=1|t,x[t+n>>2]=t,x[1928]!=(0|n))break e;return void(x[1925]=t)}x[s+4>>2]=-2&r,x[n+4>>2]=1|t,x[t+n>>2]=t}if(t>>>0<=255)return r=7732+((t>>>=3)<<3)|0,t=(i=x[1923])&(t=1<<t)?x[r+8>>2]:(x[1923]=t|i,r),x[r+8>>2]=n,x[t+12>>2]=n,x[n+12>>2]=r,void(x[n+8>>2]=t);x[n+16>>2]=0,i=x[n+20>>2]=0,(o=t>>>8)&&(i=31,16777215<t>>>0||(i=o,i<<=o=o+1048320>>>16&8,i=28+((i=((i<<=l=i+520192>>>16&4)<<(u=i+245760>>>16&2)>>>15)-(u|o|l)|0)<<1|t>>>i+21&1)|0)),u=7996+((x[(r=n)+28>>2]=i)<<2)|0;e:if((o=x[1924])&(r=1<<i)){o=t<<(31==(0|i)?0:25-(i>>>1)|0),r=x[u>>2];i:{for(;;){if((-8&x[(i=r)+4>>2])==(0|t))break i;if(r=o>>>29,o<<=1,!(r=x[16+(u=i+(4&r)|0)>>2]))break}x[u+16>>2]=n,x[n+12>>2]=n,x[n+24>>2]=i,x[n+8>>2]=n;break e}t=x[i+8>>2],x[t+12>>2]=n,x[i+8>>2]=n,x[n+24>>2]=0,x[n+12>>2]=i,x[n+8>>2]=t}else x[1924]=r|o,x[u>>2]=n,x[n+12>>2]=n,x[n+24>>2]=u,x[n+8>>2]=n;if(t=x[1931]+-1|0,!(x[1931]=t)){for(n=8148;n=(t=x[n>>2])+8|0,t;);x[1931]=-1}}}}function Aa(t,i){var r,n,o=0,s=0,u=0,l=F(0);if(j(i),!((n=2147483647&(o=e(0)))>>>0<=2139095040&&(j(t),(s=2147483647&(u=e(0)))>>>0<2139095041)))return F(t+i);if(1065353216==(0|o))return ka(t);o=(r=o>>>30&2)|u>>>31;t:{e:{i:{r:{if(!s){n:switch(o-2|0){case 0:break r;case 1:break n;default:break i}return F(-3.1415927410125732)}if(2139095040!=(0|n)){if(!n|!(s>>>0<=218103808+n>>>0&&2139095040!=(0|s)))break t;if(s+218103808>>>0<n>>>0&&(l=F(0),r)||(l=ka(F(L(F(t/i))))),t=l,o>>>0<=2){n:switch(o-1|0){case 0:return F(-t);case 1:break n;default:break i}return F(F(3.1415927410125732)-F(t+F(8.742277657347586e-8)))}return F(F(t+F(8.742277657347586e-8))+F(-3.1415927410125732))}if(2139095040==(0|s))break e;return I[6128+(o<<2)>>2]}t=F(3.1415927410125732)}return t}return I[6112+(o<<2)>>2]}return F((0|u)<0?-1.5707963705062866:1.5707963705062866)}function Da(t,i,r){var n,o,s,u,l,p=0,m=0,y=0,b=0,A=0,v=0,M=0,S=0,w=0,P=0,V=0,I=0;if(q=n=q-560|0,M=(m=r)+T(s=0<(0|(r=(r+-3|0)/24|0))?r:0,-24)|0,0<=(0|(o=x[808])))for(m=o+1|0,r=s;E[(320+n|0)+(y<<3)>>3]=(0|r)<0?0:+x[3248+(r<<2)>>2],r=r+1|0,(0|m)!=(0|(y=y+1|0)););for(A=M+-24|0,m=0;;){for(p=r=0;p+=E[(r<<3)+t>>3]*E[(320+n|0)+(m-r<<3)>>3],1!=(0|(r=r+1|0)););if(E[(m<<3)+n>>3]=p,r=(0|m)<(0|o),m=m+1|0,!r)break}l=23-A|0,u=24-A|0,m=o;t:{for(;;){if(p=E[(m<<3)+n>>3],!(w=((r=0)|(y=m))<1))for(;v=(480+n|0)+(r<<2)|0,S=p,b=L(p*=5.960464477539063e-8)<2147483648?~~p:-2147483648,b=L(S+=-16777216*(p=+(0|b)))<2147483648?~~S:-2147483648,x[v>>2]=b,p=E[((y=y+-1|0)<<3)+n>>3]+p,(0|m)!=(0|(r=r+1|0)););p=ha(p,A),p+=-8*U(.125*p),p-=0|(v=L(p)<2147483648?~~p:-2147483648);e:{i:{r:{if(V=(0|A)<1){if(A)break r;b=x[476+((m<<2)+n|0)>>2]>>23}else P=y=(m<<2)+n|0,y=(b=x[y+476>>2])-((r=b>>u)<<u)|0,v=r+v|0,b=(x[P+476>>2]=y)>>l;if((0|b)<1)break e;break i}if(b=2,!(.5<=p)){b=0;break e}}if(y=r=0,!w)for(;;){w=x[(I=(480+n|0)+(r<<2)|0)>>2],P=16777215;i:{r:{if(!y){if(!w)break r;P=16777216,y=1}x[I>>2]=P-w;break i}y=0}if((0|m)==(0|(r=r+1|0)))break}V||1<(r=A+-1|0)>>>0||(x[476+(r=(m<<2)+n|0)>>2]=r-1?8388607&x[r+476>>2]:4194303&x[r+476>>2]),v=v+1|0,2==(0|b)&&(p=1-p,b=2,y&&(p-=ha(1,A)))}if(0!=p)break;if(!(((y=0)|(r=m))<=(0|o))){for(;y=x[(480+n|0)+((r=r+-1|0)<<2)>>2]|y,(0|o)<(0|r););if(y){for(M=A;M=M+-24|0,!x[(480+n|0)+((m=m+-1|0)<<2)>>2];);break t}}for(r=1;r=(y=r)+1|0,!x[(480+n|0)+(o-y<<2)>>2];);for(y=m+y|0;;){for(m=v=m+1|0,E[(320+n|0)+(v<<3)>>3]=x[3248+(s+m<<2)>>2],p=r=0;p+=E[(r<<3)+t>>3]*E[(320+n|0)+(v-r<<3)>>3],1!=(0|(r=r+1|0)););if(E[(m<<3)+n>>3]=p,!((0|m)<(0|y)))break}m=y}16777216<=(p=ha(p,0-A|0))?(t=(480+n|0)+(m<<2)|0,S=p,r=L(p*=5.960464477539063e-8)<2147483648?~~p:-2147483648,y=L(p=S+-16777216*(0|r))<2147483648?~~p:-2147483648,x[t>>2]=y,m=m+1|0):(r=L(p)<2147483648?~~p:-2147483648,M=A),x[(480+n|0)+(m<<2)>>2]=r}if(p=ha(1,M),!((0|m)<=-1)){for(r=m;E[(r<<3)+n>>3]=p*x[(480+n|0)+(r<<2)>>2],p*=5.960464477539063e-8,t=0<(0|r),r=r+-1|0,t;);if(!((0|m)<=-1))for(r=m;;){for(A=m-(t=r)|0,r=p=0;p+=E[6016+(r<<3)>>3]*E[(t+r<<3)+n>>3],!((0|o)<=(0|r))&&(M=r>>>0<A>>>0,r=r+1|0,M););if(E[(160+n|0)+(A<<3)>>3]=p,r=t+-1|0,!(0<(0|t)))break}}if((p=0)<=(0|m))for(;p+=E[(160+n|0)+(m<<3)>>3],t=0<(0|m),m=m+-1|0,t;);return E[i>>3]=b?-p:p,q=560+n|0,7&v}function Ia(t,i){var r=0,n=0,o=0;r=0!=(0|i);t:{e:{i:{r:if(!(!i|!(3&t)))for(;;){if(!w[0|t])break i;if(t=t+1|0,r=0!=(0|(i=i+-1|0)),!i)break r;if(!(3&t))break}if(!r)break e}if(!w[0|t])break t;i:{if(4<=i>>>0){for(r=(r=i+-4|0)-(n=-4&r)|0,n=4+(t+n|0)|0;;){if((-1^(o=x[t>>2]))&o+-16843009&-2139062144)break i;if(t=t+4|0,!(3<(i=i+-4|0)>>>0))break}i=r,t=n}if(!i)break e}for(;;){if(!w[0|t])break t;if(t=t+1|0,!(i=i+-1|0))break}}return 0}return t}function Na(t,i,r,n){if(t|i)for(;M[0|(r=r+-1|0)]=w[3168+(15&t)|0]|n,(t=(15&i)<<28|t>>>4)|(i>>>=4););return r}function Oa(t,i,r){if(t|i)for(;M[0|(r=r+-1|0)]=7&t|48,(t=(7&i)<<29|t>>>3)|(i>>>=3););return r}function $b(t){var i=F(0),r=F(0),n=0,o=0,s=F(0),u=F(0),l=F(0),p=F(0),m=0,y=F(0),b=F(0),A=0;t:{e:{if(j(t),o=2147483647&(n=e(0))){if(!(o>>>0<2139095041))return F(F(.10000000149011612)+t);if(1065353216==(0|o))return F(-1<(0|n)?.10000000149011612:10);if(2139095040==(0|o))return F(-1<(0|n)?0:-t);if(1073741824==(0|n))return F(.010000000707805157);if(1056964608==(0|n))return F(.3162277638912201);if(1291845633<=o>>>0)return F((0|n)<0?G:0);if(s=I[1537],u=F(F(1.600000023841858)-s),l=F(F(1)/F(s+F(1.600000023841858))),f(0,-4096&(j(r=F(u*l)),e(0))),i=k(),p=F(i*i),b=I[1541],s=F(l*F(F(u-F((y=i)*F(3.099609375)))-F(i*F(F(1.600000023841858)-F(F(3.099609375)-s))))),l=F(F(r+i)*s),i=F(r*r),u=F(l+F(F(i*i)*F(F(i*F(F(i*F(F(i*F(F(i*F(F(i*F(.20697501301765442))+F(.23066075146198273)))+F(.2727281153202057)))+F(.3333333432674408)))+F(.4285714328289032)))+F(.6000000238418579)))),f(0,-4096&(j(F(F(p+F(3))+u)),e(0))),i=k(),l=F(y*i),r=F(F(s*i)+F(r*F(u-F(F(i+F(-3))-p)))),f(0,-4096&(j(F(l+r)),e(0))),i=k(),s=F(i*F(.9619140625)),p=F(I[1539]+F(F(F(r-F(i-l))*F(.9617967009544373))+F(i*F(-.00011736857413779944)))),f(0,-4096&(j(F(F(b+F(s+p))+F(-4))),e(0))),r=k(),f(0,-4096&n),u=k(),i=F(r*u),t=F(F(F(p-F(F(F(r-F(-4))-b)-s))*t)+F(F(t-u)*r)),j(r=F(i+t)),1124073473<=(0|(n=e(0))))break e;i:{r:{if((o=1124073472)==(0|n)){if(!(F(t+F(4.299566569443414e-8))>F(r-i)))break r;break e}if(o=2147483647&n,!(t<=F(r-i)^1|-1021968384!=(0|n))|1125515265<=o>>>0)break t;if(o>>>0<1056964609)break i}m=(8388607&(o=(8388608>>>(o>>>23)-126)+n|0)|8388608)>>>150-(A=o>>>23&255),m=(0|n)<0?0-m|0:m,i=F(i-(f(0,o&-8388608>>A+-127),k())),j(F(t+i)),n=e(0)}f(0,-32768&n),r=k(),s=F(r*F(.693145751953125)),r=F(F(r*F(14286065379565116e-22))+F(F(t-F(r-i))*F(.6931471824645996))),t=F(s+r),i=F(t*t),i=F(t-F(i*F(F(i*F(F(i*F(F(i*F(F(i*F(4.138136944220605e-8))+F(-16533901998627698e-22)))+F(661375597701408e-19)))+F(-.0027777778450399637)))+F(.1666666716337204)))),y=F(F(t*i)/F(i+F(-2))),i=F(r-F(t-s)),t=(0|(n=0|(j(t=F(F(t-F(y-F(i+F(t*i))))+F(1))),e(0)+(m<<23))))<=8388607?function(t,i){var r=0;i:if(128<=(0|i)){if(t=F(t*F(17014118346046923e22)),(0|(r=i+-127|0))<128){i=r;break i}t=F(t*F(17014118346046923e22)),i=((0|i)<381?i:381)+-254|0}else-127<(0|i)||(t=F(t*F(11754943508222875e-54)),i=-127<(0|(r=i+126|0))?r:(t=F(t*F(11754943508222875e-54)),(-378<(0|i)?i:-378)+252|0));return F(t*(f(0,1065353216+(i<<23)|0),k()))}(t,m):(f(0,n),k()),t=F(F(1)*t)}else t=F(1);return t}return F(G)}return F(0)}function dc(t,i){var r,n;r=0|t,n=0|i,o[0]=r,o[1]=n}function gc(t,i,r){return function(t,i,r){var n,o,s,u,l=0;return u=T(n=r>>>16,l=t>>>16),t=(65535&(l=((s=T(o=65535&r,t&=65535))>>>16)+T(l,o)|0))+T(t,n)|0,K=((u+T(i,r)|0)+(l>>>16)|0)+(t>>>16)|0,65535&s|t<<16}(t,i,r)}function hc(t,i,r){return function(t,i,r){var n=0,o=0,s=0,u=0,l=0,p=0,m=0,y=0,b=0;t:{e:{i:{r:{n:{a:{o:{s:{u:{if(o=i){if(!(n=r))break u;break s}return dc((i=t)-T(t=(t>>>0)/(r>>>0)|0,r)|0,0),K=0,t}if(!t)break o;break a}if(!((u=n+-1|0)&n))break n;l=0-(u=(R(n)+33|0)-R(o)|0)|0;break i}return dc(0,o-T(t=(o>>>0)/0|0,0)|0),K=0,t}if((n=32-R(o)|0)>>>0<31)break r;break e}if(dc(t&u,0),1==(0|n))break t;return r=31&(n=n?31-R(n+-1^n)|0:32),t=32<=(63&n)>>>0?(o=0,i>>>r):(o=i>>>r,((1<<r)-1&i)<<32-r|t>>>r),K=o,t}u=n+1|0,l=63-n|0}if(n=i,s=31&(o=63&u),s=32<=o>>>0?(o=0,n>>>s):(o=n>>>s,((1<<s)-1&n)<<32-s|t>>>s),n=31&(l&=63),32<=l>>>0?(i=t<<n,t=0):(i=(1<<n)-1&t>>>32-n|i<<n,t<<=n),u)for((l=r+(n=-1)|0)>>>0<4294967295&&(n=0);s=(m=p=s<<1|i>>>31)-(y=r&(p=n-((o=o<<1|s>>>31)+(l>>>0<p>>>0)|0)>>31))|0,o=o-(m>>>0<y>>>0)|0,i=i<<1|t>>>31,t=b|t<<1,b=p&=1,u=u+-1|0;);return dc(s,o),K=i<<1|t>>>31,p|t<<1}dc(t,i),i=t=0}return K=i,t}(t,i,r)}function jc(t){var i;return(-1>>>(i=31&t)&-2)<<i|(-1<<(t=0-t&31)&-2)>>>t}function N(){return b.byteLength/65536|0}}(ut,I,E)}}o=null,i.wasmBinary&&(S=i.wasmBinary);var P=Error,V={};S=[],"object"!=typeof V&&w("no native wasm support detected");var I,E=new function(t){var i=Array(17);return i.grow=function(){18<=i.length&&B("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),i.push(null)},i.set=function(t,r){i[t]=r},i.get=function(t){return i[t]},i}({initial:17,maximum:18,element:"anyfunc"}),T=!1;function assert(t,i){t||B("Assertion failed: "+i)}var F,L,R,D,U="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function ja(t,i,r){var n=i+r;for(r=i;t[r]&&!(n<=r);)++r;if(16<r-i&&t.subarray&&U)return U.decode(t.subarray(i,r));for(n="";i<r;){var o=t[i++];if(128&o){var s=63&t[i++];if(192==(224&o))n+=String.fromCharCode((31&o)<<6|s);else{var u=63&t[i++];(o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&t[i++])<65536?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else n+=String.fromCharCode(o)}return n}function ka(t,i){return t?ja(R,t,i):""}function la(t){return 0<t%65536&&(t+=65536-t%65536),t}function ma(t){F=t,i.HEAP8=L=new Int8Array(t),i.HEAP16=new Int16Array(t),i.HEAP32=D=new Int32Array(t),i.HEAPU8=R=new Uint8Array(t),i.HEAPU16=new Uint16Array(t),i.HEAPU32=new Uint32Array(t),i.HEAPF32=new Float32Array(t),i.HEAPF64=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var G=i.TOTAL_MEMORY||16777216;function O(t){for(;0<t.length;){var r=t.shift();if("function"==typeof r)r();else{var n=r.X;"number"==typeof n?void 0===r.W?i.dynCall_v(n):i.dynCall_vi(n,r.W):n(void 0===r.W?null:r.W)}}}(I=i.wasmMemory?i.wasmMemory:new function(){return{buffer:new ArrayBuffer(G/65536*65536),grow:function(t){return dt(t)}}})&&(F=I.buffer),G=F.byteLength,ma(F),D[2052]=5251248;var J=[],H=[],Q=[],q=[];function ra(){var t=i.preRun.shift();J.unshift(t)}if(Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(t,i){var r=65535&t,n=65535&i;return r*n+((t>>>16)*n+r*(i>>>16)<<16)|0}),!Math.fround){var K=new Float32Array(1);Math.fround=function(t){return K[0]=t,K[0]}}Math.clz32||(Math.clz32=function(t){var i=32,r=t>>16;return r&&(i-=16,t=r),(r=t>>8)&&(i-=8,t=r),(r=t>>4)&&(i-=4,t=r),(r=t>>2)&&(i-=2,t=r),t>>1?i-2:i-t}),Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)});var tt=0,et=null,it=null;function B(t){throw i.onAbort&&i.onAbort(t),x(t),w(t),T=!0,new P("abort("+t+"). Build with -s ASSERTIONS=1 for more info.")}i.preloadedImages={},i.preloadedAudios={};var rt="data:application/octet-stream;base64,";function W(t){return String.prototype.startsWith?t.startsWith(rt):0===t.indexOf(rt)}var nt="_em_module.wasm";if(!W(nt)){var at=nt;nt=i.locateFile?i.locateFile(at,M):M+at}function ua(){try{if(S)return new Uint8Array(S);var t=z(nt);if(t)return t;if(b)return b(nt);throw"both async and sync fetching of the wasm failed"}catch(t){B(t)}}H.push({X:function(){ct()}});var ot=[null,[],[]];function C(t){for(var i=[],r=0;r<t.length;r++){var n=t[r];255<n&&(n&=255),i.push(String.fromCharCode(n))}return i.join("")}var st="function"==typeof atob?atob:function(t){var i="",r=0;t=t.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++));n=n<<2|o>>4,o=(15&o)<<4|s>>2;var l=(3&s)<<6|u;i+=String.fromCharCode(n),64!==s&&(i+=String.fromCharCode(o)),64!==u&&(i+=String.fromCharCode(l))}while(r<t.length);return i};function z(t){if(W(t)){if(t=t.slice(rt.length),"boolean"==typeof p&&p){try{var i=Buffer.from(t,"base64")}catch(r){i=new Buffer(t,"base64")}var r=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}else try{var n=st(t),o=new Uint8Array(n.length);for(i=0;i<n.length;++i)o[i]=n.charCodeAt(i);r=o}catch(t){throw Error("Converting base64 string to bytes failed.")}return r}}var ut={a:function(t,i,r){R.set(R.subarray(i,i+r),t)},b:function(t){if(2147418112<t)return!1;for(var i=Math.max(L.length,16777216);i<t;)i=i<=536870912?la(2*i):Math.min(la((3*i+2147483648)/4),2147418112);t:{try{I.grow(i-F.byteLength+65535>>16),ma(I.buffer);var r=1;break t}catch(t){}r=void 0}return!!r},c:function(t,i,r,n){try{for(var o=0,s=0;s<r;s++){for(var u=D[i+8*s>>2],l=D[i+(8*s+4)>>2],p=0;p<l;p++){var m=R[u+p],y=ot[t];0===m||10===m?((1===t?x:w)(ja(y,0)),y.length=0):y.push(m)}o+=l}return D[n>>2]=o,0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.Y||B(t),t.Z}},memory:I,table:E},lt=function(){function a(t){i.asm=t.exports,tt--,i.monitorRunDependencies&&i.monitorRunDependencies(tt),0==tt&&(null!==et&&(clearInterval(et),et=null),it&&(t=it,it=null,t()))}function c(t){a(t.instance)}function d(t){return(S||!u&&!l||"function"!=typeof fetch?new Promise((function(t){t(ua())})):fetch(nt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+nt+"'";return t.arrayBuffer()})).catch((function(){return ua()}))).then((function(){return{then:function(t){t({instance:new da})}}})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),B(t)}))}var t={env:ut,wasi_unstable:ut};if(tt++,i.monitorRunDependencies&&i.monitorRunDependencies(tt),i.instantiateWasm)try{return i.instantiateWasm(t,a)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}return function(){if(S||"function"!=typeof V.instantiateStreaming||W(nt)||"function"!=typeof fetch)return d(c);fetch(nt,{credentials:"same-origin"}).then((function(i){return V.instantiateStreaming(i,t).then(c,(function(t){w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),d(c)}))}))}(),{}}();i.asm=lt;var ct=i.___wasm_call_ctors=function(){return i.asm.d.apply(null,arguments)};i._csmGetVersion=function(){return i.asm.e.apply(null,arguments)},i._csmGetLatestMocVersion=function(){return i.asm.f.apply(null,arguments)},i._csmGetMocVersion=function(){return i.asm.g.apply(null,arguments)},i._csmSetLogFunction=function(){return i.asm.h.apply(null,arguments)},i._csmReviveMocInPlace=function(){return i.asm.i.apply(null,arguments)},i._csmReadCanvasInfo=function(){return i.asm.j.apply(null,arguments)},i._csmGetSizeofModel=function(){return i.asm.k.apply(null,arguments)},i._csmInitializeModelInPlace=function(){return i.asm.l.apply(null,arguments)},i._csmUpdateModel=function(){return i.asm.m.apply(null,arguments)},i._csmGetParameterCount=function(){return i.asm.n.apply(null,arguments)},i._csmGetParameterIds=function(){return i.asm.o.apply(null,arguments)},i._csmGetParameterMinimumValues=function(){return i.asm.p.apply(null,arguments)},i._csmGetParameterMaximumValues=function(){return i.asm.q.apply(null,arguments)},i._csmGetParameterDefaultValues=function(){return i.asm.r.apply(null,arguments)},i._csmGetParameterValues=function(){return i.asm.s.apply(null,arguments)},i._csmGetPartCount=function(){return i.asm.t.apply(null,arguments)},i._csmGetPartIds=function(){return i.asm.u.apply(null,arguments)},i._csmGetPartOpacities=function(){return i.asm.v.apply(null,arguments)},i._csmGetPartParentPartIndices=function(){return i.asm.w.apply(null,arguments)},i._csmGetDrawableCount=function(){return i.asm.x.apply(null,arguments)},i._csmGetDrawableIds=function(){return i.asm.y.apply(null,arguments)},i._csmGetDrawableConstantFlags=function(){return i.asm.z.apply(null,arguments)},i._csmGetDrawableDynamicFlags=function(){return i.asm.A.apply(null,arguments)},i._csmGetDrawableTextureIndices=function(){return i.asm.B.apply(null,arguments)},i._csmGetDrawableDrawOrders=function(){return i.asm.C.apply(null,arguments)},i._csmGetDrawableRenderOrders=function(){return i.asm.D.apply(null,arguments)},i._csmGetDrawableOpacities=function(){return i.asm.E.apply(null,arguments)},i._csmGetDrawableMaskCounts=function(){return i.asm.F.apply(null,arguments)},i._csmGetDrawableMasks=function(){return i.asm.G.apply(null,arguments)},i._csmGetDrawableVertexCounts=function(){return i.asm.H.apply(null,arguments)},i._csmGetDrawableVertexPositions=function(){return i.asm.I.apply(null,arguments)},i._csmGetDrawableVertexUvs=function(){return i.asm.J.apply(null,arguments)},i._csmGetDrawableIndexCounts=function(){return i.asm.K.apply(null,arguments)},i._csmGetDrawableIndices=function(){return i.asm.L.apply(null,arguments)},i._csmResetDrawableDynamicFlags=function(){return i.asm.M.apply(null,arguments)},i._csmMallocMoc=function(){return i.asm.N.apply(null,arguments)},i._csmMallocModelAndInitialize=function(){return i.asm.O.apply(null,arguments)},i._csmMalloc=function(){return i.asm.P.apply(null,arguments)},i._csmFree=function(){return i.asm.Q.apply(null,arguments)};var ht,gt=i.stackSave=function(){return i.asm.R.apply(null,arguments)},ft=i.stackAlloc=function(){return i.asm.S.apply(null,arguments)},pt=i.stackRestore=function(){return i.asm.T.apply(null,arguments)},dt=i.__growWasmMemory=function(){return i.asm.U.apply(null,arguments)};function Z(){function a(){if(!ht&&(ht=!0,!T)){if(O(H),O(Q),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;){var t=i.postRun.shift();q.unshift(t)}O(q)}}if(!(0<tt)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)ra();O(J),0<tt||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),a()}),1)):a())}}if(i.dynCall_vi=function(){return i.asm.V.apply(null,arguments)},i.asm=lt,i.ccall=function(t,r,n,o){var s={string:function(t){var i=0;if(null!=t&&0!==t){var r=1+(t.length<<2),n=i=ft(r),o=R;if(0<r){r=n+r-1;for(var s=0;s<t.length;++s){var u=t.charCodeAt(s);if(55296<=u&&u<=57343&&(u=65536+((1023&u)<<10)|1023&t.charCodeAt(++s)),u<=127){if(r<=n)break;o[n++]=u}else{if(u<=2047){if(r<=n+1)break;o[n++]=192|u>>6}else{if(u<=65535){if(r<=n+2)break;o[n++]=224|u>>12}else{if(r<=n+3)break;o[n++]=240|u>>18,o[n++]=128|u>>12&63}o[n++]=128|u>>6&63}o[n++]=128|63&u}}o[n]=0}}return i},array:function(t){var i=ft(t.length);return L.set(t,i),i}},u=function(t){var r=i["_"+t];return assert(r,"Cannot call unknown function "+t+", make sure it is exported"),r}(t),l=[];if(t=0,o)for(var p=0;p<o.length;p++){var m=s[n[p]];m?(0===t&&(t=gt()),l[p]=m(o[p])):l[p]=o[p]}return n=function(t){return"string"===r?ka(t):"boolean"===r?!!t:t}(n=u.apply(null,l)),0!==t&&pt(t),n},i.UTF8ToString=ka,i.addFunction=function(t,i){var r=E.length;try{E.grow(1)}catch(t){if(!t instanceof RangeError)throw t;throw"Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."}try{E.set(r,t)}catch(n){if(!n instanceof TypeError)throw n;assert(void 0!==i,"Missing signature argument to addFunction"),E.set(r,t)}return r},i.then=function(t){if(ht)t(i);else{var r=i.onRuntimeInitialized;i.onRuntimeInitialized=function(){r&&r(),t(i)}}return i},it=function Ea(){ht||Z(),ht||(it=Ea)},i.run=Z,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return Z(),t});t.exports=b;var A=b()}(n=n||{}),t.exports=n},304:()=>{}},i={};function __webpack_require__(r){var n=i[r];if(void 0!==n)return n.exports;var o=i[r]={exports:{}};return t[r](o,o.exports,__webpack_require__),o.exports}__webpack_require__.d=(t,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);var r={};return(()=>{"use strict";__webpack_require__.d(r,{default:()=>Oi});var t,i=function(){function Logger(){}return Logger.init=function(t,i,r){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),this.canLog=t,this.canWarn=i,this.canError=r},Logger.log=function(t,i){void 0===i&&(i=!1),Logger.canLog&&console.log("[live2d-helper] "+t)},Logger.warn=function(t,i){void 0===i&&(i=!1),Logger.canWarn&&console.warn("[live2d-helper] "+t)},Logger.error=function(t,i){void 0===i&&(i=!1),Logger.canError&&console.error("[live2d-helper] "+t)},Logger.canLog=!0,Logger.canWarn=!0,Logger.canError=!0,Logger}(),__awaiter=function(t,i,r,n){return new(r||(r=Promise))((function(o,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof r?t:new r((function(i){i(t)}))}(t.value).then(fulfilled,rejected)}step((n=n.apply(t,i||[])).next())}))},__generator=function(t,i){var r,n,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(s){return function(l){return function step(s){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,n=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=i.call(t,u)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},n=function(){function Utils(){}return Utils.xhr=function(t,i,r){return new Promise((function(n,o){var s=new XMLHttpRequest;s.open(i,t),s.responseType=r,s.onreadystatechange=function(){4===s.readyState&&(200===s.status?n(s.response):o({status:s.status,message:s.responseText}))},s.send()}))},Utils.getJson=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,this.xhr(t,"get","json")];case 1:return[2,i.sent()]}}))}))},Utils.getBlob=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,this.xhr(t,"get","blob")];case 1:return[2,i.sent()]}}))}))},Utils.getArraybuffer=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,this.xhr(t,"get","arraybuffer")];case 1:return[2,i.sent()]}}))}))},Utils.arrayBuffer2String=function(t){return String.fromCharCode.apply(null,new Uint8Array(t))},Utils.getRandomItem=function(t){return t[Math.floor(Math.random()*t.length)]},Utils}(),Setting_awaiter=function(t,i,r,n){return new(r||(r=Promise))((function(o,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof r?t:new r((function(i){i(t)}))}(t.value).then(fulfilled,rejected)}step((n=n.apply(t,i||[])).next())}))},Setting_generator=function(t,i){var r,n,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(s){return function(l){return function step(s){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,n=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=i.call(t,u)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=function(){function Setting(){this.model="",this.imageUrl="",this.soundUrl="",this.interval=15e3,this.width=300,this.height=300,this.layout={width:null,height:null,x:null,y:null,center_x:null,center_y:null,top:null,bottom:null,left:null,right:null},this.idle="idle",this.view={VIEW_MAX_SCALE:2,VIEW_MIN_SCALE:.8,VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:-2,VIEW_LOGICAL_MAX_TOP:2},this.initModelCallback=function(t){},this.scaling=!1,this.globalFollowPointer=!1,this.binding={},this.autoLoadAudio={canLoad:!0,callback:function(){}},this.allowSound=!0,this.Priority={None:0,Idle:1,Normal:2,Force:3}}return Setting.prototype.init=function(t,r){return Setting_awaiter(this,void 0,void 0,(function(){var o,s,u,l,p,m,y,b,A,v,M,S,x,w,P,V,I,E,T,F,L,R;return Setting_generator(this,(function(D){switch(D.label){case 0:if(("string"==typeof t||t instanceof HTMLCanvasElement)&&"string"==typeof r)if(this.baseUrl=/\/$/.test(r)?r:r+"/","string"==typeof t){if(this.canvas=document.querySelector(t),!this.canvas)throw i.error("Not Found HTMLCanvasElement"),new Error("Not Found HTMLCanvasElement")}else this.canvas=t;else{if(s=t.canvas,u=t.baseUrl,l=t.model,p=t.imageUrl,m=t.soundUrl,y=t.interval,b=t.width,A=t.height,v=t.layout,M=t.debug,S=t.idle,x=t.view,w=t.initModelCallback,P=t.scaling,V=t.globalFollowPointer,I=t.binding,E=t.autoLoadAudio,T=t.allowSound,F=t.motionLoadMode,this.canvas=s instanceof HTMLElement?s:document.querySelector(s),this.baseUrl=/\/$/.test(u)?u:u+"/",this.imageUrl=p||this.baseUrl,this.imageUrl=/\/$/.test(this.imageUrl)?this.imageUrl:this.imageUrl+"/",this.soundUrl=m||this.baseUrl,this.soundUrl=/\/$/.test(this.soundUrl)?this.soundUrl:this.soundUrl+"/",this.interval=y||15e3,this.width=isNaN(Number(b))?800:Number(b),this.height=isNaN(Number(A))?800:Number(A),this.canvas.width=this.width,this.canvas.height=this.height,this.layout=v,this.debug=M||this.debug,this.idle=S,this.motionLoadMode=F||"lazy",x)for(L in this.view)x[L]&&(this.view[L]=x[L]);this.initModelCallback="function"==typeof w?w:function(t){},this.scaling="boolean"==typeof P&&P,this.globalFollowPointer="boolean"==typeof V&&V,"function"==typeof E?this.autoLoadAudio={canLoad:!0,callback:E}:"boolean"==typeof E&&(this.autoLoadAudio={canLoad:E,callback:function(){}}),this.model=l,o=I,this.allowSound="boolean"!=typeof T||T}return void 0!==this.model&&"string"!=typeof this.model?[3,2]:(this.model=this.model?this.model:this.baseUrl+"model.json",R=this,[4,n.getArraybuffer(this.model)]);case 1:return R.modelBuffer=D.sent(),this.model=JSON.parse(n.arrayBuffer2String(this.modelBuffer)),[3,3];case 2:this.model=this.model,D.label=3;case 3:if(this.initBind(o||{}),!this.canvas||!this.baseUrl)throw i.error("Not Found HTMLCanvasElement OR baseUrl"),new Error("Not Found HTMLCanvasElement OR baseUrl");return[2]}}))}))},Setting.prototype.initBind=function(t){var r=this;for(var n in t){var o=[],callback=function(t){t.hitArea,t.motionPath,t.motionName,t.priority};"string"==typeof t[n]?o.push(t[n]):Array.isArray(t[n])?o.push.apply(o,t[n]):"function"==typeof t[n]?callback=t[n]:"object"==typeof t[n]&&(Array.isArray(t[n].motion)?o.push.apply(o,t[n].motion):o.push(t[n].motion),"function"==typeof t[n].callback&&(callback=t[n].callback)),this.binding[name]={motion:o,callback}}if(this.model.HitAreas)for(var s=JSON.parse(JSON.stringify(this.model.HitAreas)),_loop_1=function(t){var i=[];t.Motion&&("string"==typeof t.Motion?i.push(t.Motion):Array.isArray(t.Motion)&&i.push.apply(i,t.Motion)),u.binding[t.Id]?i.forEach((function(i){r.binding[t.Id].motion.includes(i)||r.binding[t.Id].motion.push(i)})):u.binding[t.Id]={motion:i,callback:function(t){t.hitArea,t.motionPath,t.motionName,t.priority}}},u=this,l=0,p=s;l<p.length;l++){_loop_1(p[l])}else i.warn("Not Found HitAreas In model.json")},Setting}();!function(t){var i=function(){function csmString(t){this.s=t}return csmString.prototype.append=function(t,i){return this.s+=void 0!==i?t.substr(0,i):t,this},csmString.prototype.expansion=function(t,i){for(var r=0;r<t;r++)this.append(i);return this},csmString.prototype.getBytes=function(){return encodeURIComponent(this.s).replace(/%../g,"x").length},csmString.prototype.getLength=function(){return this.s.length},csmString.prototype.isLess=function(t){return this.s<t.s},csmString.prototype.isGreat=function(t){return this.s>t.s},csmString.prototype.isEqual=function(t){return this.s==t},csmString.prototype.isEmpty=function(){return 0==this.s.length},csmString}();t.csmString=i}(t||(t={}));var s,u,l,CubismLogPrintIn=function(t,i,r){!function(t,i,r){s.CubismDebug.print(t,"[CSM]"+i,r)}(t,i+"\n",r)},CSM_ASSERT=function(t){console.assert(t)},CubismLogDebug=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r]},CubismLogInfo=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r]},CubismLogWarning=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r]},CubismLogError=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r]};CubismLogDebug=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];CubismLogPrintIn(U.LogLevel_Debug,"[D]"+t,i)},CubismLogInfo=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];CubismLogPrintIn(U.LogLevel_Info,"[I]"+t,i)},CubismLogWarning=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];CubismLogPrintIn(U.LogLevel_Warning,"[W]"+t,i)},CubismLogError=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];CubismLogPrintIn(U.LogLevel_Error,"[E]"+t,i)},function(t){var i=function(){function CubismDebug(){}return CubismDebug.print=function(t,i,r){if(!(t<T.CubismFramework.getLoggingLevel())){var n=T.CubismFramework.coreLogFunction;if(n)n(i.replace(/\{(\d+)\}/g,(function(t,i){return r[i]})))}},CubismDebug.dumpBytes=function(t,i,r){for(var n=0;n<r;n++)n%16==0&&n>0?this.print(t,"\n"):n%8==0&&n>0&&this.print(t,"  "),this.print(t,"{0} ",[255&i[n]]);this.print(t,"\n")},CubismDebug}();t.CubismDebug=i}(s||(s={})),function(t){var i=function i(t,r){this.first=null==t?null:t,this.second=null==r?null:r};t.csmPair=i;var r=function(){function csmMap(t){null!=t?t<1?(this._keyValues=new Array,this._dummyValue=null,this._size=0):(this._keyValues=new Array(t),this._size=t):(this._keyValues=new Array,this._dummyValue=null,this._size=0)}return csmMap.prototype.release=function(){this.clear()},csmMap.prototype.appendKey=function(t){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new i(t),this._size+=1},csmMap.prototype.getValue=function(t){for(var i=-1,r=0;r<this._size;r++)if(this._keyValues[r].first==t){i=r;break}return i>=0?this._keyValues[i].second:(this.appendKey(t),this._keyValues[this._size-1].second)},csmMap.prototype.setValue=function(t,i){for(var r=-1,n=0;n<this._size;n++)if(this._keyValues[n].first==t){r=n;break}r>=0?this._keyValues[r].second=i:(this.appendKey(t),this._keyValues[this._size-1].second=i)},csmMap.prototype.isExist=function(t){for(var i=0;i<this._size;i++)if(this._keyValues[i].first==t)return!0;return!1},csmMap.prototype.clear=function(){this._keyValues=void 0,this._keyValues=null,this._keyValues=new Array,this._size=0},csmMap.prototype.getSize=function(){return this._size},csmMap.prototype.prepareCapacity=function(t,i){t>this._keyValues.length&&(0==this._keyValues.length?(!i&&t<csmMap.DefaultSize&&(t=csmMap.DefaultSize),this._keyValues.length=t):(!i&&t<2*this._keyValues.length&&(t=2*this._keyValues.length),this._keyValues.length=t))},csmMap.prototype.begin=function(){return new n(this,0)},csmMap.prototype.end=function(){return new n(this,this._size)},csmMap.prototype.erase=function(t){var i=t._index;return i<0||this._size<=i?t:(this._keyValues.splice(i,1),--this._size,new n(this,i))},csmMap.prototype.dumpAsInt=function(){for(var t=0;t<this._size;t++)CubismLogDebug("{0} ,",this._keyValues[t]),CubismLogDebug("\n")},csmMap.DefaultSize=10,csmMap}();t.csmMap=r;var n=function(){function iterator(t,i){this._map=null!=t?t:new r,this._index=null!=i?i:0}return iterator.prototype.set=function(t){return this._index=t._index,this._map=t._map,this},iterator.prototype.preIncrement=function(){return++this._index,this},iterator.prototype.preDecrement=function(){return--this._index,this},iterator.prototype.increment=function(){var t=new iterator(this._map,this._index++);return this._map=t._map,this._index=t._index,this},iterator.prototype.decrement=function(){var t=new iterator(this._map,this._index);return this._map=t._map,this._index=t._index,this},iterator.prototype.ptr=function(){return this._map._keyValues[this._index]},iterator.prototype.notEqual=function(t){return this._index!=t._index||this._map!=t._map},iterator}();t.iterator=n}(u||(u={})),function(t){var i=function(){function csmVector(t){void 0===t&&(t=0),t<1?(this._ptr=new Array,this._capacity=0,this._size=0):(this._ptr=new Array(t),this._capacity=t,this._size=0)}return csmVector.prototype.at=function(t){return this._ptr[t]},csmVector.prototype.set=function(t,i){this._ptr[t]=i},csmVector.prototype.get=function(t){void 0===t&&(t=0);for(var i=new Array,r=t;r<this._size;r++)i.push(this._ptr[r]);return i},csmVector.prototype.pushBack=function(t){this._size>=this._capacity&&this.prepareCapacity(0==this._capacity?csmVector.s_defaultSize:2*this._capacity),this._ptr[this._size++]=t},csmVector.prototype.clear=function(){this._ptr.length=0,this._size=0},csmVector.prototype.getSize=function(){return this._size},csmVector.prototype.assign=function(t,i){this._size<t&&this.prepareCapacity(t);for(var r=0;r<t;r++)this._ptr[r]=i;this._size=t},csmVector.prototype.resize=function(t,i){void 0===i&&(i=null),this.updateSize(t,i,!0)},csmVector.prototype.updateSize=function(t,i,r){if(void 0===i&&(i=null),void 0===r&&(r=!0),this._size<t)if(this.prepareCapacity(t),r)for(var n=this._size;n<t;n++)this._ptr[n]="function"==typeof i?JSON.parse(JSON.stringify(new i)):i;else for(n=this._size;n<t;n++)this._ptr[n]=i;else{var o=this._size-t;this._ptr.splice(this._size-o,o)}this._size=t},csmVector.prototype.insert=function(t,i,r){var n=t._index,o=i._index,s=r._index,u=s-o;this.prepareCapacity(this._size+u);var l=this._size-n;if(l>0)for(var p=0;p<l;p++)this._ptr.splice(n+p,0,null);for(p=o;p<s;p++,n++)this._ptr[n]=i._vector._ptr[p];this._size=this._size+u},csmVector.prototype.remove=function(t){return!(t<0||this._size<=t)&&(this._ptr.splice(t,1),--this._size,!0)},csmVector.prototype.erase=function(t){var i=t._index;return i<0||this._size<=i?t:(this._ptr.splice(i,1),--this._size,new r(this,i))},csmVector.prototype.prepareCapacity=function(t){t>this._capacity&&(0==this._capacity?(this._ptr=new Array(t),this._capacity=t):(this._ptr.length=t,this._capacity=t))},csmVector.prototype.begin=function(){return 0==this._size?this.end():new r(this,0)},csmVector.prototype.end=function(){return new r(this,this._size)},csmVector.prototype.getOffset=function(t){var i=new csmVector;return i._ptr=this.get(t),i._size=this.get(t).length,i._capacity=this.get(t).length,i},csmVector.s_defaultSize=10,csmVector}();t.csmVector=i;var r=function(){function iterator(t,i){this._vector=null!=t?t:null,this._index=null!=i?i:0}return iterator.prototype.set=function(t){return this._index=t._index,this._vector=t._vector,this},iterator.prototype.preIncrement=function(){return++this._index,this},iterator.prototype.preDecrement=function(){return--this._index,this},iterator.prototype.increment=function(){var t=new iterator(this._vector,this._index++);return this._vector=t._vector,this._index=t._index,this},iterator.prototype.decrement=function(){var t=new iterator(this._vector,this._index--);return this._vector=t._vector,this._index=t._index,this},iterator.prototype.ptr=function(){return this._vector._ptr[this._index]},iterator.prototype.substitution=function(t){return this._index=t._index,this._vector=t._vector,this},iterator.prototype.notEqual=function(t){return this._index!=t._index||this._vector!=t._vector},iterator}();t.iterator=r}(l||(l={}));var p,m,y=(p=function(t,i){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},p(t,i)},function(t,i){function __(){this.constructor=t}p(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),b=l.csmVector,A=u.csmMap,v=t.csmString;!function(t){var i="Error: type mismatch",r=function(){function Value(){}return Value.prototype.getRawString=function(t,i){return this.getString(t,i)},Value.prototype.toInt=function(t){return void 0===t&&(t=0),t},Value.prototype.toFloat=function(t){return void 0===t&&(t=0),t},Value.prototype.toBoolean=function(t){return void 0===t&&(t=!1),t},Value.prototype.getSize=function(){return 0},Value.prototype.getArray=function(t){return void 0===t&&(t=null),t},Value.prototype.getVector=function(t){return t},Value.prototype.getMap=function(t){return t},Value.prototype.getValueByIndex=function(t){return Value.errorValue.setErrorNotForClientCall(i)},Value.prototype.getValueByString=function(t){return Value.nullValue.setErrorNotForClientCall(i)},Value.prototype.getKeys=function(){return Value.s_dummyKeys},Value.prototype.isError=function(){return!1},Value.prototype.isNull=function(){return!1},Value.prototype.isBool=function(){return!1},Value.prototype.isFloat=function(){return!1},Value.prototype.isString=function(){return!1},Value.prototype.isArray=function(){return!1},Value.prototype.isMap=function(){return!1},Value.prototype.equals=function(t){return!1},Value.prototype.isStatic=function(){return!1},Value.prototype.setErrorNotForClientCall=function(t){return l.errorValue},Value.staticInitializeNotForClientCall=function(){s.trueValue=new s(!0),s.falseValue=new s(!1),l.errorValue=new l("ERROR",!0),this.nullValue=new p,Value.s_dummyKeys=new b},Value.staticReleaseNotForClientCall=function(){s.trueValue=null,s.falseValue=null,l.errorValue=null,Value.nullValue=null,Value.s_dummyKeys=null,s.trueValue=null,s.falseValue=null,l.errorValue=null,Value.nullValue=null,Value.s_dummyKeys=null},Value}();t.Value=r;var n=function(){function CubismJson(t,i){this._error=null,this._lineCount=0,this._root=null,null!=t&&this.parseBytes(t,i)}return CubismJson.create=function(t,i){var r=new CubismJson;return r.parseBytes(t,i)?r:(CubismJson.delete(r),null)},CubismJson.delete=function(t){null},CubismJson.prototype.getRoot=function(){return this._root},CubismJson.prototype.arrayBufferToString=function(t){for(var i=new Uint8Array(t),r="",n=0,o=i.length;n<o;++n)r+="%"+this.pad(i[n].toString(16));return r=decodeURIComponent(r)},CubismJson.prototype.pad=function(t){return t.length<2?"0"+t:t},CubismJson.prototype.parseBytes=function(t,i){var r=new Array(1),n=this.arrayBufferToString(t);if(this._root=this.parseValue(n,i,0,r),this._error){var o;return o="Json parse error : @line "+(this._lineCount+1)+"\n",this._root=new u(o),CubismLogInfo("{0}",this._root.getRawString()),!1}return null!=this._root||(this._root=new l(new v(this._error),!1),!1)},CubismJson.prototype.getParseError=function(){return this._error},CubismJson.prototype.checkEndOfFile=function(){return this._root.getArray()[1].equals("EOF")},CubismJson.prototype.parseValue=function(t,i,r,n){if(this._error)return null;for(var l,m=null,y=r;y<i;y++){switch(t[y]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":var b=new Array(1);return l=strtod(t.slice(y),b),n[0]=t.indexOf(b[0]),new o(l);case'"':return new u(this.parseString(t,i,y+1,n));case"[":return m=this.parseArray(t,i,y+1,n);case"{":return m=this.parseObject(t,i,y+1,n);case"n":return y+3<i?(m=new p,n[0]=y+4):this._error="parse null",m;case"t":return y+3<i?(m=s.trueValue,n[0]=y+4):this._error="parse true",m;case"f":return y+4<i?(m=s.falseValue,n[0]=y+5):this._error="illegal ',' position",m;case",":return this._error="illegal ',' position",null;case"]":return n[0]=y,null;case"\n":this._lineCount++}}return this._error="illegal end of value",null},CubismJson.prototype.parseString=function(t,i,r,n){if(this._error)return null;for(var o=r,s=new v(""),u=r;o<i;o++)switch(t[o]){case'"':return n[0]=o+1,s.append(t.slice(u),o-u),s.s;case"//":if(++o-1>u&&s.append(t.slice(u),o-u),u=o+1,o<i)switch(t[o]){case"\\":s.expansion(1,"\\");break;case'"':s.expansion(1,'"');break;case"/":s.expansion(1,"/");break;case"b":s.expansion(1,"\b");break;case"f":s.expansion(1,"\f");break;case"n":s.expansion(1,"\n");break;case"r":s.expansion(1,"\r");break;case"t":s.expansion(1,"\t");break;case"u":this._error="parse string/unicord escape not supported"}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null},CubismJson.prototype.parseObject=function(t,i,r,n){if(this._error)return null;for(var o=new M,s="",u=r,l=Array(1),p=!1;u<i;u++){t:for(;u<i;u++)switch(t[u]){case'"':if(s=this.parseString(t,i,u+1,l),this._error)return null;u=l[0],p=!0;break t;case"}":return n[0]=u+1,o;case":":this._error="illegal ':' position";break;case"\n":this._lineCount++}if(!p)return this._error="key not found",null;p=!1;t:for(;u<i;u++)switch(t[u]){case":":p=!0,u++;break t;case"}":this._error="illegal '}' position";break;case"\n":this._lineCount++}if(!p)return this._error="':' not found",null;var m=this.parseValue(t,i,u,l);if(this._error)return null;u=l[0],o.put(s,m);t:for(;u<i;u++)switch(t[u]){case",":break t;case"}":return n[0]=u+1,o;case"\n":this._lineCount++}}return this._error="illegal end of perseObject",null},CubismJson.prototype.parseArray=function(t,i,r,n){if(this._error)return null;for(var o=new m,s=r,u=new Array(1);s<i;s++){var l=this.parseValue(t,i,s,u);if(this._error)return null;s=u[0],l&&o.add(l);t:for(;s<i;s++)switch(t[s]){case",":break t;case"]":return n[0]=s+1,o;case"\n":++this._lineCount}}return o=void 0,this._error="illegal end of parseObject",null},CubismJson}();t.CubismJson=n;var o=function(t){function JsonFloat(i){var r=t.call(this)||this;return r._value=i,r}return y(JsonFloat,t),JsonFloat.prototype.isFloat=function(){return!0},JsonFloat.prototype.getString=function(t,i){return this._value=parseFloat("\0"),this._stringBuffer="\0",this._stringBuffer},JsonFloat.prototype.toInt=function(t){return void 0===t&&(t=0),parseInt(this._value.toString())},JsonFloat.prototype.toFloat=function(t){return void 0===t&&(t=0),this._value},JsonFloat.prototype.equals=function(t){return"number"==typeof t&&(!Math.round(t)&&t==this._value)},JsonFloat}(r);t.JsonFloat=o;var s=function(t){function JsonBoolean(i){var r=t.call(this)||this;return r._boolValue=i,r}return y(JsonBoolean,t),JsonBoolean.prototype.isBool=function(){return!0},JsonBoolean.prototype.toBoolean=function(t){return void 0===t&&(t=!1),this._boolValue},JsonBoolean.prototype.getString=function(t,i){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer},JsonBoolean.prototype.equals=function(t){return"boolean"==typeof t&&t==this._boolValue},JsonBoolean.prototype.isStatic=function(){return!0},JsonBoolean}(r);t.JsonBoolean=s;var u=function(t){function JsonString(i){var r=t.call(this)||this;return"string"==typeof i&&(r._stringBuffer=i),i instanceof v&&(r._stringBuffer=i.s),r}return y(JsonString,t),JsonString.prototype.isString=function(){return!0},JsonString.prototype.getString=function(t,i){return this._stringBuffer},JsonString.prototype.equals=function(t){return"string"==typeof t?this._stringBuffer==t:t instanceof v&&this._stringBuffer==t.s},JsonString}(r);t.JsonString=u;var l=function(t){function JsonError(i,r){var n=this;return(n=t.call(this,i)||this)._isStatic=r,n}return y(JsonError,t),JsonError.prototype.isStatic=function(){return this._isStatic},JsonError.prototype.setErrorNotForClientCall=function(t){return this._stringBuffer=t,this},JsonError.prototype.isError=function(){return!0},JsonError}(u);t.JsonError=l;var p=function(t){function JsonNullvalue(){var i=t.call(this)||this;return i._stringBuffer="NullValue",i}return y(JsonNullvalue,t),JsonNullvalue.prototype.isNull=function(){return!0},JsonNullvalue.prototype.getString=function(t,i){return this._stringBuffer},JsonNullvalue.prototype.isStatic=function(){return!0},JsonNullvalue}(r);t.JsonNullvalue=p;var m=function(t){function JsonArray(){var i=t.call(this)||this;return i._array=new b,i}return y(JsonArray,t),JsonArray.prototype.release=function(){for(var t=this._array.begin();t.notEqual(this._array.end());t.preIncrement()){var i=t.ptr();i&&!i.isStatic()&&(i=void 0,i=null)}},JsonArray.prototype.isArray=function(){return!0},JsonArray.prototype.getValueByIndex=function(t){if(t<0||this._array.getSize()<=t)return r.errorValue.setErrorNotForClientCall("Error: index out of bounds");var i=this._array.at(t);return null==i?r.nullValue:i},JsonArray.prototype.getValueByString=function(t){return r.errorValue.setErrorNotForClientCall(i)},JsonArray.prototype.getString=function(t,i){for(var r=i+"[\n",n=this._array.begin();n.notEqual(this._array.end());n.increment()){var o=n.ptr();this._stringBuffer+=i+""+o.getString(i+" ")+"\n"}return this._stringBuffer=r+i+"]\n",this._stringBuffer},JsonArray.prototype.add=function(t){this._array.pushBack(t)},JsonArray.prototype.getVector=function(t){return void 0===t&&(t=null),this._array},JsonArray.prototype.getSize=function(){return this._array.getSize()},JsonArray}(r);t.JsonArray=m;var M=function(t){function JsonMap(){var i=t.call(this)||this;return i._map=new A,i}return y(JsonMap,t),JsonMap.prototype.release=function(){for(var t=this._map.begin();t.notEqual(this._map.end());){var i=t.ptr().second;i&&!i.isStatic()&&(i=void 0,i=null),t.preIncrement()}},JsonMap.prototype.isMap=function(){return!0},JsonMap.prototype.getValueByString=function(t){if(t instanceof v){var i=this._map.getValue(t.s);return null==i?r.nullValue:i}for(var n=this._map.begin();n.notEqual(this._map.end());n.preIncrement())if(n.ptr().first==t)return null==n.ptr().second?r.nullValue:n.ptr().second;return r.nullValue},JsonMap.prototype.getValueByIndex=function(t){return r.errorValue.setErrorNotForClientCall(i)},JsonMap.prototype.getString=function(t,i){this._stringBuffer=i+"{\n";for(var r=this._map.begin();r.notEqual(this._map.end());){var n=r.ptr().first,o=r.ptr().second;this._stringBuffer+=i+" "+n+" : "+o.getString(i+"   ")+" \n",r.preIncrement()}return this._stringBuffer+=i+"}\n",this._stringBuffer},JsonMap.prototype.getMap=function(t){return this._map},JsonMap.prototype.put=function(t,i){this._map.setValue(t,i)},JsonMap.prototype.getKeys=function(){if(!this._keys){this._keys=new b;for(var t=this._map.begin();t.notEqual(this._map.end());){var i=t.ptr().first;this._keys.pushBack(i),t.preIncrement()}}return this._keys},JsonMap.prototype.getSize=function(){return this._keys.getSize()},JsonMap}(r);t.JsonMap=M}(m||(m={}));var M,S=t.csmString;!function(t){var i=function(){function CubismId(t){this._id="string"!=typeof t?t:new S(t)}return CubismId.prototype.getString=function(){return this._id},CubismId.prototype.isEqual=function(t){return"string"==typeof t?this._id.isEqual(t):t instanceof S?this._id.isEqual(t.s):t instanceof CubismId&&this._id.isEqual(t._id.s)},CubismId.prototype.isNotEqual=function(t){return"string"==typeof t?!this._id.isEqual(t):t instanceof S?!this._id.isEqual(t.s):t instanceof CubismId&&!this._id.isEqual(t._id.s)},CubismId}();t.CubismId=i}(M||(M={}));var x,w,P=M.CubismId,V=l.csmVector;!function(t){var i=function(){function CubismIdManager(){this._ids=new V}return CubismIdManager.prototype.release=function(){for(var t=0;t<this._ids.getSize();++t)this._ids.set(t,void 0);this._ids=null},CubismIdManager.prototype.registerIds=function(t){for(var i=0;i<t.length;i++)this.registerId(t[i])},CubismIdManager.prototype.registerId=function(t){var i=null;return"string"!=typeof t?this.registerId(t.s):(null!=(i=this.findId(t))||(i=new P(t),this._ids.pushBack(i)),i)},CubismIdManager.prototype.getId=function(t){return this.registerId(t)},CubismIdManager.prototype.isExist=function(t){return"string"==typeof t?null!=this.findId(t):this.isExist(t.s)},CubismIdManager.prototype.findId=function(t){for(var i=0;i<this._ids.getSize();++i)if(this._ids.at(i).getString().isEqual(t))return this._ids.at(i);return null},CubismIdManager}();t.CubismIdManager=i}(x||(x={})),function(t){var i=function(){function CubismMatrix44(){this._tr=new Float32Array(16),this.loadIdentity()}return CubismMatrix44.multiply=function(t,i,r){for(var n=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=0;o<4;++o)for(var s=0;s<4;++s)for(var u=0;u<4;++u)n[s+4*o]+=t[u+4*o]*i[s+4*u];for(o=0;o<16;++o)r[o]=n[o]},CubismMatrix44.prototype.loadIdentity=function(){var t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)},CubismMatrix44.prototype.setMatrix=function(t){for(var i=0;i<16;++i)this._tr[i]=t[i]},CubismMatrix44.prototype.getArray=function(){return this._tr},CubismMatrix44.prototype.getScaleX=function(){return this._tr[0]},CubismMatrix44.prototype.getScaleY=function(){return this._tr[5]},CubismMatrix44.prototype.getTranslateX=function(){return this._tr[12]},CubismMatrix44.prototype.getTranslateY=function(){return this._tr[13]},CubismMatrix44.prototype.transformX=function(t){return this._tr[0]*t+this._tr[12]},CubismMatrix44.prototype.transformY=function(t){return this._tr[5]*t+this._tr[13]},CubismMatrix44.prototype.invertTransformX=function(t){return(t-this._tr[12])/this._tr[0]},CubismMatrix44.prototype.invertTransformY=function(t){return(t-this._tr[13])/this._tr[5]},CubismMatrix44.prototype.translateRelative=function(t,i){var r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1]);CubismMatrix44.multiply(r,this._tr,this._tr)},CubismMatrix44.prototype.translate=function(t,i){this._tr[12]=t,this._tr[13]=i},CubismMatrix44.prototype.translateX=function(t){this._tr[12]=t},CubismMatrix44.prototype.translateY=function(t){this._tr[13]=t},CubismMatrix44.prototype.scaleRelative=function(t,i){var r=new Float32Array([t,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1]);CubismMatrix44.multiply(r,this._tr,this._tr)},CubismMatrix44.prototype.scale=function(t,i){this._tr[0]=t,this._tr[5]=i},CubismMatrix44.prototype.multiplyByMatrix=function(t){CubismMatrix44.multiply(t.getArray(),this._tr,this._tr)},CubismMatrix44.prototype.clone=function(){for(var t=new CubismMatrix44,i=0;i<this._tr.length;i++)t._tr[i]=this._tr[i];return t},CubismMatrix44}();t.CubismMatrix44=i}(w||(w={}));var I,E=w.CubismMatrix44;!function(t){var i=function(){function CubismRenderer(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._model=null,this._modelColor=new r,this._mvpMatrix4x4=new E,this._mvpMatrix4x4.loadIdentity()}return CubismRenderer.create=function(){return null},CubismRenderer.delete=function(t){null},CubismRenderer.prototype.initialize=function(t){this._model=t},CubismRenderer.prototype.drawModel=function(){null!=this.getModel()&&this.doDrawModel()},CubismRenderer.prototype.setMvpMatrix=function(t){this._mvpMatrix4x4.setMatrix(t.getArray())},CubismRenderer.prototype.getMvpMatrix=function(){return this._mvpMatrix4x4},CubismRenderer.prototype.setModelColor=function(t,i,r,n){t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),r<0?r=0:r>1&&(r=1),n<0?n=0:n>1&&(n=1),this._modelColor.R=t,this._modelColor.G=i,this._modelColor.B=r,this._modelColor.A=n},CubismRenderer.prototype.getModelColor=function(){return JSON.parse(JSON.stringify(this._modelColor))},CubismRenderer.prototype.setIsPremultipliedAlpha=function(t){this._isPremultipliedAlpha=t},CubismRenderer.prototype.isPremultipliedAlpha=function(){return this._isPremultipliedAlpha},CubismRenderer.prototype.setIsCulling=function(t){this._isCulling=t},CubismRenderer.prototype.isCulling=function(){return this._isCulling},CubismRenderer.prototype.setAnisotropy=function(t){this._anisortopy=t},CubismRenderer.prototype.getAnisotropy=function(){return this._anisortopy},CubismRenderer.prototype.getModel=function(){return this._model},CubismRenderer}();t.CubismRenderer=i,function(t){t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative"}(t.CubismBlendMode||(t.CubismBlendMode={}));var r=function r(){this.R=1,this.G=1,this.B=1,this.A=1};t.CubismTextureColor=r}(I||(I={}));var T,F=__webpack_require__(324),L=m.Value,R=x.CubismIdManager,D=I.CubismRenderer;function strtod(t,i){for(var r=0,n=1;;n++){var o=t.slice(n-1,n);if("e"!=o&&"-"!=o&&"E"!=o){var s=t.substring(0,n),u=Number(s);if(isNaN(u))break;r=n}}var l=parseFloat(t);return isNaN(l)&&(l=NaN),i[0]=t.slice(r),l}!function(t){var i=!1,r=!1,n=null,o=null;!function(t){t.vertexOffset=0,t.vertexStep=2}(t.Constant||(t.Constant={})),t.csmDelete=function csmDelete(t){t&&(t=void 0)};var s=function(){function CubismFramework(){}return CubismFramework.startUp=function(t){if(void 0===t&&(t=null),i)return CubismLogInfo("CubismFramework.startUp() is already done."),i;if(null!=(n=t)&&F.Logging.csmSetLogFunction(n.logFunction),i=!0){var r=F.Version.csmGetVersion(),o=(16711680&r)>>16,s=65535&r,u=r;CubismLogInfo("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+((4278190080&r)>>24)).slice(-2),("00"+o).slice(-2),("0000"+s).slice(-4),u)}return CubismLogInfo("CubismFramework.startUp() is complete."),i},CubismFramework.cleanUp=function(){i=!1,r=!1,n=null,o=null},CubismFramework.initialize=function(){CSM_ASSERT(i),i?r?CubismLogWarning("CubismFramework.initialize() skipped, already initialized."):(L.staticInitializeNotForClientCall(),o=new R,r=!0,CubismLogInfo("CubismFramework.initialize() is complete.")):CubismLogWarning("CubismFramework is not started.")},CubismFramework.dispose=function(){CSM_ASSERT(i),i?r?(L.staticReleaseNotForClientCall(),o.release(),o=null,D.staticRelease(),r=!1,CubismLogInfo("CubismFramework.dispose() is complete.")):CubismLogWarning("CubismFramework.dispose() skipped, not initialized."):CubismLogWarning("CubismFramework is not started.")},CubismFramework.isStarted=function(){return i},CubismFramework.isInitialized=function(){return r},CubismFramework.coreLogFunction=function(t){F.Logging.csmGetLogFunction()&&F.Logging.csmGetLogFunction()(t)},CubismFramework.getLoggingLevel=function(){return null!=n?n.loggingLevel:U.LogLevel_Off},CubismFramework.getIdManager=function(){return o},CubismFramework}();t.CubismFramework=s}(T||(T={}));var U,G=function G(){};!function(t){t[t.LogLevel_Verbose=0]="LogLevel_Verbose",t[t.LogLevel_Debug=1]="LogLevel_Debug",t[t.LogLevel_Info=2]="LogLevel_Info",t[t.LogLevel_Warning=3]="LogLevel_Warning",t[t.LogLevel_Error=4]="LogLevel_Error",t[t.LogLevel_Off=5]="LogLevel_Off"}(U||(U={}));var J,TextureManager_awaiter=function(t,i,r,n){return new(r||(r=Promise))((function(o,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof r?t:new r((function(i){i(t)}))}(t.value).then(fulfilled,rejected)}step((n=n.apply(t,i||[])).next())}))},TextureManager_generator=function(t,i){var r,n,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(s){return function(l){return function step(s){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,n=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=i.call(t,u)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},H=l.csmVector,Q=function(){function TextureManager(t){this._textures=new H,this.webgl=t}return TextureManager.prototype.release=function(){for(var t=this._textures.begin();t.notEqual(this._textures.end());t.preIncrement())this.webgl.gl.deleteTexture(t.ptr().id);this._textures=null},TextureManager.prototype.createTextureFromPngFile=function(t,i){return TextureManager_awaiter(this,void 0,void 0,(function(){var r=this;return TextureManager_generator(this,(function(o){return[2,new Promise((function(o,s){return TextureManager_awaiter(r,void 0,void 0,(function(){var r,s,u,l,p,m=this;return TextureManager_generator(this,(function(y){switch(y.label){case 0:for(r=this._textures.begin();r.notEqual(this._textures.end());r.preIncrement())if(r.ptr().fileName==t&&r.ptr().usePremultply==i)return o(r.ptr()),[2];return(s=new Image).onload=function(){var r=m.webgl.gl.createTexture();m.webgl.gl.bindTexture(m.webgl.gl.TEXTURE_2D,r),m.webgl.gl.texParameteri(m.webgl.gl.TEXTURE_2D,m.webgl.gl.TEXTURE_MIN_FILTER,m.webgl.gl.LINEAR_MIPMAP_LINEAR),m.webgl.gl.texParameteri(m.webgl.gl.TEXTURE_2D,m.webgl.gl.TEXTURE_MAG_FILTER,m.webgl.gl.LINEAR),i&&m.webgl.gl.pixelStorei(m.webgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),m.webgl.gl.texImage2D(m.webgl.gl.TEXTURE_2D,0,m.webgl.gl.RGBA,m.webgl.gl.RGBA,m.webgl.gl.UNSIGNED_BYTE,s),m.webgl.gl.generateMipmap(m.webgl.gl.TEXTURE_2D),m.webgl.gl.bindTexture(m.webgl.gl.TEXTURE_2D,null);var n=new q;n.fileName=t,n.width=s.width,n.height=s.height,n.id=r,n.img=s,n.usePremultply=i,m._textures.pushBack(n),o(n)},u=s,p=(l=URL).createObjectURL,[4,n.getBlob(t)];case 1:return u.src=p.apply(l,[y.sent()]),[2]}}))}))}))]}))}))},TextureManager.prototype.releaseTextures=function(){for(var t=0;t<this._textures.getSize();t++)this._textures.set(t,null);this._textures.clear()},TextureManager.prototype.releaseTextureByTexture=function(t){for(var i=0;i<this._textures.getSize();i++)if(this._textures.at(i).id==t){this._textures.set(i,null),this._textures.remove(i);break}},TextureManager.prototype.releaseTextureByFilePath=function(t){for(var i=0;i<this._textures.getSize();i++)if(this._textures.at(i).fileName==t){this._textures.set(i,null),this._textures.remove(i);break}},TextureManager}(),q=function q(){this.id=null,this.width=0,this.height=0},K=function(){function Webgl(t){this.gl=t.getContext("webgl"),this.frameBuffer=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}return Webgl.prototype.createShader=function(){var t=this.gl.createShader(this.gl.VERTEX_SHADER);if(null==t)return null;this.gl.shaderSource(t,"precision mediump float;attribute vec3 position;attribute vec2 uv;varying vec2 vuv;void main(void){   gl_Position = vec4(position, 1.0);   vuv = uv;}"),this.gl.compileShader(t);var i=this.gl.createShader(this.gl.FRAGMENT_SHADER);if(null==i)return null;this.gl.shaderSource(i,"precision mediump float;varying vec2 vuv;uniform sampler2D texture;void main(void){   gl_FragColor = texture2D(texture, vuv);}"),this.gl.compileShader(i);var r=this.gl.createProgram();return this.gl.attachShader(r,t),this.gl.attachShader(r,i),this.gl.deleteShader(t),this.gl.deleteShader(i),this.gl.linkProgram(r),this.gl.useProgram(r),r},Webgl}(),tt=function(){function View(t){this._webgl=t}return View.prototype.render=function(){this._webgl.gl.useProgram(this._programId),this._webgl.gl.flush()},View}();!function(t){var i=function(){function CubismVector2(t,i){this.x=t,this.y=i,this.x=null==t?0:t,this.y=null==i?0:i}return CubismVector2.prototype.add=function(t){var i=new CubismVector2(0,0);return i.x=this.x+t.x,i.y=this.y+t.y,i},CubismVector2.prototype.substract=function(t){var i=new CubismVector2(0,0);return i.x=this.x-t.x,i.y=this.y-t.y,i},CubismVector2.prototype.multiply=function(t){var i=new CubismVector2(0,0);return i.x=this.x*t.x,i.y=this.y*t.y,i},CubismVector2.prototype.multiplyByScaler=function(t){return this.multiply(new CubismVector2(t,t))},CubismVector2.prototype.division=function(t){var i=new CubismVector2(0,0);return i.x=this.x/t.x,i.y=this.y/t.y,i},CubismVector2.prototype.divisionByScalar=function(t){return this.division(new CubismVector2(t,t))},CubismVector2.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},CubismVector2.prototype.getDistanceWith=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},CubismVector2.prototype.dot=function(t){return this.x*t.x+this.y*t.y},CubismVector2.prototype.normalize=function(){var t=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/t,this.y=this.y/t},CubismVector2.prototype.isEqual=function(t){return this.x==t.x&&this.y==t.y},CubismVector2.prototype.isNotEqual=function(t){return!this.isEqual(t)},CubismVector2}();t.CubismVector2=i}(J||(J={}));var et,it=J.CubismVector2;!function(t){var i=function(){function CubismMath(){}return CubismMath.range=function(t,i,r){return t<i?t=i:t>r&&(t=r),t},CubismMath.sin=function(t){return Math.sin(t)},CubismMath.cos=function(t){return Math.cos(t)},CubismMath.abs=function(t){return Math.abs(t)},CubismMath.sqrt=function(t){return Math.sqrt(t)},CubismMath.getEasingSine=function(t){return t<0?0:t>1?1:.5-.5*this.cos(t*Math.PI)},CubismMath.max=function(t,i){return t>i?t:i},CubismMath.min=function(t,i){return t>i?i:t},CubismMath.degreesToRadian=function(t){return t/180*Math.PI},CubismMath.radianToDegrees=function(t){return 180*t/Math.PI},CubismMath.directionToRadian=function(t,i){for(var r=Math.atan2(i.y,i.x)-Math.atan2(t.y,t.x);r<-Math.PI;)r+=2*Math.PI;for(;r>Math.PI;)r-=2*Math.PI;return r},CubismMath.directionToDegrees=function(t,i){var r=this.directionToRadian(t,i),n=this.radianToDegrees(r);return i.x-t.x>0&&(n=-n),n},CubismMath.radianToDirection=function(t){var i=new it;return i.x=this.sin(t),i.y=this.cos(t),i},CubismMath}();t.CubismMath=i}(et||(et={}));var rt,nt=l.csmVector,at=et.CubismMath;!function(t){var i=function(){function ACubismMotion(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new nt}return ACubismMotion.delete=function(t){t.release(),t=void 0,t=null},ACubismMotion.prototype.release=function(){this._weight=0},ACubismMotion.prototype.updateParameters=function(t,i,r){if(i.isAvailable()&&!i.isFinished()){if(!i.isStarted()){i.setIsStarted(!0),i.setStartTime(r-this._offsetSeconds),i.setFadeInStartTime(r);var n=this.getDuration();i.getEndTime()<0&&i.setEndTime(n<=0?-1:i.getStartTime()+n)}var o=this._weight;o=o*(0==this._fadeInSeconds?1:at.getEasingSine((r-i.getFadeInStartTime())/this._fadeInSeconds))*(0==this._fadeOutSeconds||i.getEndTime()<0?1:at.getEasingSine((i.getEndTime()-r)/this._fadeOutSeconds)),i.setState(r,o),CSM_ASSERT(0<=o&&o<=1),this.doUpdateParameters(t,r,o,i),i.getEndTime()>0&&i.getEndTime()<r&&i.setIsFinished(!0)}},ACubismMotion.prototype.setFadeInTime=function(t){this._fadeInSeconds=t},ACubismMotion.prototype.setFadeOutTime=function(t){this._fadeOutSeconds=t},ACubismMotion.prototype.getFadeOutTime=function(){return this._fadeOutSeconds},ACubismMotion.prototype.getFadeInTime=function(){return this._fadeInSeconds},ACubismMotion.prototype.setWeight=function(t){this._weight=t},ACubismMotion.prototype.getWeight=function(){return this._weight},ACubismMotion.prototype.getDuration=function(){return-1},ACubismMotion.prototype.getLoopDuration=function(){return-1},ACubismMotion.prototype.setOffsetTime=function(t){this._offsetSeconds=t},ACubismMotion.prototype.getFiredEvent=function(t,i){return this._firedEventValues},ACubismMotion}();t.ACubismMotion=i}(rt||(rt={}));var ot,st=rt.ACubismMotion;!function(t){var i=function(){function CubismMotionQueueEntry(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this}return CubismMotionQueueEntry.prototype.release=function(){this._autoDelete&&this._motion&&st.delete(this._motion)},CubismMotionQueueEntry.prototype.startFadeout=function(t,i){var r=i+t;(this._endTimeSeconds<0||r<this._endTimeSeconds)&&(this._endTimeSeconds=r)},CubismMotionQueueEntry.prototype.isFinished=function(){return this._finished},CubismMotionQueueEntry.prototype.isStarted=function(){return this._started},CubismMotionQueueEntry.prototype.getStartTime=function(){return this._startTimeSeconds},CubismMotionQueueEntry.prototype.getFadeInStartTime=function(){return this._fadeInStartTimeSeconds},CubismMotionQueueEntry.prototype.getEndTime=function(){return this._endTimeSeconds},CubismMotionQueueEntry.prototype.setStartTime=function(t){this._startTimeSeconds=t},CubismMotionQueueEntry.prototype.setFadeInStartTime=function(t){this._fadeInStartTimeSeconds=t},CubismMotionQueueEntry.prototype.setEndTime=function(t){this._endTimeSeconds=t},CubismMotionQueueEntry.prototype.setIsFinished=function(t){this._finished=t},CubismMotionQueueEntry.prototype.setIsStarted=function(t){this._started=t},CubismMotionQueueEntry.prototype.isAvailable=function(){return this._available},CubismMotionQueueEntry.prototype.setIsAvailable=function(t){this._available=t},CubismMotionQueueEntry.prototype.setState=function(t,i){this._stateTimeSeconds=t,this._stateWeight=i},CubismMotionQueueEntry.prototype.getStateTime=function(){return this._stateTimeSeconds},CubismMotionQueueEntry.prototype.getStateWeight=function(){return this._stateWeight},CubismMotionQueueEntry.prototype.getLastCheckEventTime=function(){return this._lastEventCheckSeconds},CubismMotionQueueEntry.prototype.setLastCheckEventTime=function(t){this._lastEventCheckSeconds=t},CubismMotionQueueEntry}();t.CubismMotionQueueEntry=i}(ot||(ot={}));var ut,lt=l.csmVector,ct=ot.CubismMotionQueueEntry;!function(t){var i=function(){function CubismMotionQueueManager(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new lt}return CubismMotionQueueManager.prototype.release=function(){for(var t=0;t<this._motions.getSize();++t)this._motions.at(t)&&(this._motions.at(t).release(),this._motions.set(t,void 0),this._motions.set(t,null));this._motions=null},CubismMotionQueueManager.prototype.startMotion=function(i,r,n){if(null==i)return t.InvalidMotionQueueEntryHandleValue;for(var o=null,s=0;s<this._motions.getSize();++s)null!=(o=this._motions.at(s))&&o.startFadeout(o._motion.getFadeOutTime(),n);return(o=new ct)._autoDelete=r,o._motion=i,this._motions.pushBack(o),o._motionQueueEntryHandle},CubismMotionQueueManager.prototype.isFinished=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var i=t.ptr();if(null!=i)if(null!=i._motion){if(!i.isFinished())return!1;t.preIncrement()}else i.release(),i=void 0,i=null,t=this._motions.erase(t);else t=this._motions.erase(t)}return!0},CubismMotionQueueManager.prototype.isFinishedByHandle=function(t){for(var i=this._motions.begin();i.notEqual(this._motions.end());i.increment()){var r=i.ptr();if(null!=r&&(r._motionQueueEntryHandle==t&&!r.isFinished()))return!1}return!0},CubismMotionQueueManager.prototype.stopAllMotions=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var i=t.ptr();null!=i?(i.release(),i=void 0,i=null,t=this._motions.erase(t)):t=this._motions.erase(t)}},CubismMotionQueueManager.prototype.getCubismMotionQueueEntry=function(t){for(var i=this._motions.begin();i.notEqual(this._motions.end());i.preIncrement()){var r=i.ptr();if(null!=r&&r._motionQueueEntryHandle==t)return r}return null},CubismMotionQueueManager.prototype.setEventCallback=function(t,i){void 0===i&&(i=null),this._eventCallBack=t,this._eventCustomData=i},CubismMotionQueueManager.prototype.doUpdateMotion=function(t,i){for(var r=!1,n=this._motions.begin();n.notEqual(this._motions.end());){var o=n.ptr();if(null!=o){var s=o._motion;if(null!=s){s.updateParameters(t,o,i),r=!0;for(var u=s.getFiredEvent(o.getLastCheckEventTime()-o.getStartTime(),i-o.getStartTime()),l=0;l<u.getSize();++l)this._eventCallBack(this,u.at(l),this._eventCustomData);o.setLastCheckEventTime(i),o.isFinished()?(o.release(),o=void 0,o=null,n=this._motions.erase(n)):n.preIncrement()}else o.release(),o=void 0,o=null,n=this._motions.erase(n)}else n=this._motions.erase(n)}return r},CubismMotionQueueManager}();t.CubismMotionQueueManager=i,t.InvalidMotionQueueEntryHandleValue=-1}(ut||(ut={}));var ht,gt=function(){var extendStatics=function(t,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},extendStatics(t,i)};return function(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),ft=ut.CubismMotionQueueManager;!function(t){var i=function(t){function CubismMotionManager(){var i=t.call(this)||this;return i._currentPriority=0,i._reservePriority=0,i}return gt(CubismMotionManager,t),CubismMotionManager.prototype.getCurrentPriority=function(){return this._currentPriority},CubismMotionManager.prototype.getReservePriority=function(){return this._reservePriority},CubismMotionManager.prototype.setReservePriority=function(t){this._reservePriority=t},CubismMotionManager.prototype.startMotionPriority=function(i,r,n){return n==this._reservePriority&&(this._reservePriority=0),this._currentPriority=n,t.prototype.startMotion.call(this,i,r,this._userTimeSeconds)},CubismMotionManager.prototype.updateMotion=function(i,r){this._userTimeSeconds+=r;var n=t.prototype.doUpdateMotion.call(this,i,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),n},CubismMotionManager.prototype.reserveMotion=function(t){return!(t<=this._reservePriority||t<=this._currentPriority)&&(this._reservePriority=t,!0)},CubismMotionManager}(ft);t.CubismMotionManager=i}(ht||(ht={}));var pt,dt=et.CubismMath;!function(t){var i=function(){function CubismTargetPoint(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}return CubismTargetPoint.prototype.update=function(t){this._userTimeSeconds+=t;var i=4/30;if(0!=this._lastTimeSeconds){var r=30*(this._userTimeSeconds-this._lastTimeSeconds);this._lastTimeSeconds=this._userTimeSeconds;var n=r*i/4.5,o=this._faceTargetX-this._faceX,s=this._faceTargetY-this._faceY;if(!(dt.abs(o)<=.01&&dt.abs(s)<=.01)){var u=dt.sqrt(o*o+s*s),l=i*s/u,p=i*o/u-this._faceVX,m=l-this._faceVY,y=dt.sqrt(p*p+m*m);(y<-n||y>n)&&(p*=n/y,m*=n/y),this._faceVX+=p,this._faceVY+=m;var b=.5*(dt.sqrt(n*n+16*n*u-8*n*u)-n),A=dt.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);A>b&&(this._faceVX*=b/A,this._faceVY*=b/A),this._faceX+=this._faceVX,this._faceY+=this._faceVY}}else this._lastTimeSeconds=this._userTimeSeconds},CubismTargetPoint.prototype.getX=function(){return this._faceX},CubismTargetPoint.prototype.getY=function(){return this._faceY},CubismTargetPoint.prototype.set=function(t,i){this._faceTargetX=t,this._faceTargetY=i},CubismTargetPoint}();t.CubismTargetPoint=i}(pt||(pt={}));var mt,_t=function(){var extendStatics=function(t,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},extendStatics(t,i)};return function(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),yt=w.CubismMatrix44;!function(t){var i=function(t){function CubismModelMatrix(i,r){var n=t.call(this)||this;return n._width=void 0!==i?i:0,n._height=void 0!==r?r:0,n.setHeight(1),n}return _t(CubismModelMatrix,t),CubismModelMatrix.prototype.setWidth=function(t){var i=t/this._width,r=i;this.scale(i,r)},CubismModelMatrix.prototype.setHeight=function(t){var i=t/this._height,r=i;this.scale(i,r)},CubismModelMatrix.prototype.setPosition=function(t,i){this.translate(t,i)},CubismModelMatrix.prototype.setCenterPosition=function(t,i){this.centerX(t),this.centerY(i)},CubismModelMatrix.prototype.top=function(t){this.setY(t)},CubismModelMatrix.prototype.bottom=function(t){var i=this._height*this.getScaleY();this.translateY(t-i)},CubismModelMatrix.prototype.left=function(t){this.setX(t)},CubismModelMatrix.prototype.right=function(t){var i=this._width*this.getScaleX();this.translateX(t-i)},CubismModelMatrix.prototype.centerX=function(t){var i=this._width*this.getScaleX();this.translateX(t-i/2)},CubismModelMatrix.prototype.setX=function(t){this.translateX(t)},CubismModelMatrix.prototype.centerY=function(t){var i=this._height*this.getScaleY();this.translateY(t-i/2)},CubismModelMatrix.prototype.setY=function(t){this.translateY(t)},CubismModelMatrix.prototype.setupFromLayout=function(t){for(var i=t.begin();i.notEqual(t.end());i.preIncrement()){var r=i.ptr().first,n=i.ptr().second;"width"==r?this.setWidth(n):"height"==r&&this.setHeight(n)}for(i=t.begin();i.notEqual(t.end());i.preIncrement()){r=i.ptr().first,n=i.ptr().second;"x"==r?this.setX(n):"y"==r?this.setY(n):"center_x"==r?this.centerX(n):"center_y"==r?this.centerY(n):"top"==r?this.top(n):"bottom"==r?this.bottom(n):"left"==r?this.left(n):"right"==r&&this.right(n)}},CubismModelMatrix}(yt);t.CubismModelMatrix=i}(mt||(mt={}));var bt,Ct=__webpack_require__(324),At=T.CubismFramework,vt=I.CubismBlendMode,Mt=l.csmVector,St=u.csmMap;!function(t){var i=function(){function CubismModel(t){this._model=t,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new Mt,this._parameterIds=new Mt,this._drawableIds=new Mt,this._partIds=new Mt,this._notExistPartId=new St,this._notExistParameterId=new St,this._notExistParameterValues=new St,this._notExistPartOpacities=new St}return CubismModel.prototype.update=function(){this._model.update(),this._model.drawables.resetDynamicFlags()},CubismModel.prototype.getCanvasWidth=function(){return null==this._model?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit},CubismModel.prototype.getCanvasHeight=function(){return null==this._model?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit},CubismModel.prototype.saveParameters=function(){for(var t=this._model.parameters.count,i=this._savedParameters.getSize(),r=0;r<t;++r)r<i?this._savedParameters.set(r,this._parameterValues[r]):this._savedParameters.pushBack(this._parameterValues[r])},CubismModel.prototype.getModel=function(){return this._model},CubismModel.prototype.getPartIndex=function(t){var i,r=this._model.parts.count;for(i=0;i<r;++i)if(t==this._partIds.at(i))return i;return this._notExistPartId.isExist(t)?this._notExistPartId.getValue(t):(i=r+this._notExistPartId.getSize(),this._notExistPartId.setValue(t,i),this._notExistPartOpacities.appendKey(i),i)},CubismModel.prototype.getPartCount=function(){return this._model.parts.count},CubismModel.prototype.setPartOpacityByIndex=function(t,i){this._notExistPartOpacities.isExist(t)?this._notExistPartOpacities.setValue(t,i):(CSM_ASSERT(0<=t&&t<this.getPartCount()),this._partOpacities[t]=i)},CubismModel.prototype.setPartOpacityById=function(t,i){var r=this.getPartIndex(t);r<0||this.setPartOpacityByIndex(r,i)},CubismModel.prototype.getPartOpacityByIndex=function(t){return this._notExistPartOpacities.isExist(t)?this._notExistPartOpacities.getValue(t):(CSM_ASSERT(0<=t&&t<this.getPartCount()),this._partOpacities[t])},CubismModel.prototype.getPartOpacityById=function(t){var i=this.getPartIndex(t);return i<0?0:this.getPartOpacityByIndex(i)},CubismModel.prototype.getParameterIndex=function(t){var i,r=this._model.parameters.count;for(i=0;i<r;++i)if(t==this._parameterIds.at(i))return i;return this._notExistParameterId.isExist(t)?this._notExistParameterId.getValue(t):(i=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(t,i),this._notExistParameterValues.appendKey(i),i)},CubismModel.prototype.getParameterCount=function(){return this._model.parameters.count},CubismModel.prototype.getParameterMaximumValue=function(t){return this._model.parameters.maximumValues[t]},CubismModel.prototype.getParameterMinimumValue=function(t){return this._model.parameters.minimumValues[t]},CubismModel.prototype.getParameterDefaultValue=function(t){return this._model.parameters.defaultValues[t]},CubismModel.prototype.getParameterValueByIndex=function(t){return this._notExistParameterValues.isExist(t)?this._notExistParameterValues.getValue(t):(CSM_ASSERT(0<=t&&t<this.getParameterCount()),this._parameterValues[t])},CubismModel.prototype.getParameterValueById=function(t){var i=this.getParameterIndex(t);return this.getParameterValueByIndex(i)},CubismModel.prototype.setParameterValueByIndex=function(t,i,r){void 0===r&&(r=1),this._notExistParameterValues.isExist(t)?this._notExistParameterValues.setValue(t,1==r?i:this._notExistParameterValues.getValue(t)*(1-r)+i*r):(CSM_ASSERT(0<=t&&t<this.getParameterCount()),this._model.parameters.maximumValues[t]<i&&(i=this._model.parameters.maximumValues[t]),this._model.parameters.minimumValues[t]>i&&(i=this._model.parameters.minimumValues[t]),this._parameterValues[t]=1==r?i:this._parameterValues[t]=this._parameterValues[t]*(1-r)+i*r)},CubismModel.prototype.setParameterValueById=function(t,i,r){void 0===r&&(r=1);var n=this.getParameterIndex(t);this.setParameterValueByIndex(n,i,r)},CubismModel.prototype.addParameterValueByIndex=function(t,i,r){void 0===r&&(r=1),this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)+i*r)},CubismModel.prototype.addParameterValueById=function(t,i,r){void 0===r&&(r=1);var n=this.getParameterIndex(t);this.addParameterValueByIndex(n,i,r)},CubismModel.prototype.multiplyParameterValueById=function(t,i,r){void 0===r&&(r=1);var n=this.getParameterIndex(t);this.multiplyParameterValueByIndex(n,i,r)},CubismModel.prototype.multiplyParameterValueByIndex=function(t,i,r){void 0===r&&(r=1),this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)*(1+(i-1)*r))},CubismModel.prototype.getDrawableIndex=function(t){for(var i=this._model.drawables.count,r=0;r<i;++r)if(this._drawableIds.at(r)==t)return r;return-1},CubismModel.prototype.getDrawableCount=function(){return this._model.drawables.count},CubismModel.prototype.getDrawableId=function(t){var i=this._model.drawables.ids;return At.getIdManager().getId(i[t])},CubismModel.prototype.getDrawableRenderOrders=function(){return this._model.drawables.renderOrders},CubismModel.prototype.getDrawableTextureIndices=function(t){return this._model.drawables.textureIndices[t]},CubismModel.prototype.getDrawableDynamicFlagVertexPositionsDidChange=function(t){var i=this._model.drawables.dynamicFlags;return Ct.Utils.hasVertexPositionsDidChangeBit(i[t])},CubismModel.prototype.getDrawableVertexIndexCount=function(t){return this._model.drawables.indexCounts[t]},CubismModel.prototype.getDrawableVertexCount=function(t){return this._model.drawables.vertexCounts[t]},CubismModel.prototype.getDrawableVertices=function(t){return this.getDrawableVertexPositions(t)},CubismModel.prototype.getDrawableVertexIndices=function(t){return this._model.drawables.indices[t]},CubismModel.prototype.getDrawableVertexPositions=function(t){return this._model.drawables.vertexPositions[t]},CubismModel.prototype.getDrawableVertexUvs=function(t){return this._model.drawables.vertexUvs[t]},CubismModel.prototype.getDrawableOpacity=function(t){return this._model.drawables.opacities[t]},CubismModel.prototype.getDrawableCulling=function(t){var i=this._model.drawables.constantFlags;return!Ct.Utils.hasIsDoubleSidedBit(i[t])},CubismModel.prototype.getDrawableBlendMode=function(t){var i=this._model.drawables.constantFlags;return Ct.Utils.hasBlendAdditiveBit(i[t])?vt.CubismBlendMode_Additive:Ct.Utils.hasBlendMultiplicativeBit(i[t])?vt.CubismBlendMode_Multiplicative:vt.CubismBlendMode_Normal},CubismModel.prototype.getDrawableInvertedMaskBit=function(t){var i=this._model.drawables.constantFlags;return Ct.Utils.hasIsInvertedMaskBit(i[t])},CubismModel.prototype.getDrawableMasks=function(){return this._model.drawables.masks},CubismModel.prototype.getDrawableMaskCounts=function(){return this._model.drawables.maskCounts},CubismModel.prototype.isUsingMasking=function(){for(var t=0;t<this._model.drawables.count;++t)if(!(this._model.drawables.maskCounts[t]<=0))return!0;return!1},CubismModel.prototype.getDrawableDynamicFlagIsVisible=function(t){var i=this._model.drawables.dynamicFlags;return Ct.Utils.hasIsVisibleBit(i[t])},CubismModel.prototype.getDrawableDynamicFlagVisibilityDidChange=function(t){var i=this._model.drawables.dynamicFlags;return Ct.Utils.hasVisibilityDidChangeBit(i[t])},CubismModel.prototype.getDrawableDynamicFlagOpacityDidChange=function(t){var i=this._model.drawables.dynamicFlags;return Ct.Utils.hasOpacityDidChangeBit(i[t])},CubismModel.prototype.getDrawableDynamicFlagRenderOrderDidChange=function(t){var i=this._model.drawables.dynamicFlags;return Ct.Utils.hasRenderOrderDidChangeBit(i[t])},CubismModel.prototype.loadParameters=function(){var t=this._model.parameters.count,i=this._savedParameters.getSize();t>i&&(t=i);for(var r=0;r<t;++r)this._parameterValues[r]=this._savedParameters.at(r)},CubismModel.prototype.initialize=function(){CSM_ASSERT(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;var t=this._model.parameters.ids,i=this._model.parameters.count;this._parameterIds.prepareCapacity(i);for(var r=0;r<i;++r)this._parameterIds.pushBack(At.getIdManager().getId(t[r]));var n=this._model.parts.ids,o=this._model.parts.count;this._partIds.prepareCapacity(o);for(r=0;r<o;++r)this._partIds.pushBack(At.getIdManager().getId(n[r]));var s=this._model.drawables.ids,u=this._model.drawables.count;this._drawableIds.prepareCapacity(u);for(r=0;r<u;++r)this._drawableIds.pushBack(At.getIdManager().getId(s[r]))},CubismModel.prototype.release=function(){this._model.release(),this._model=null},CubismModel}();t.CubismModel=i}(bt||(bt={}));var xt,wt=__webpack_require__(324),Bt=bt.CubismModel;!function(t){var i=function(){function CubismMoc(t){this._moc=t,this._modelCount=0}return CubismMoc.create=function(t){var i=null,r=wt.Moc.fromArrayBuffer(t);return r&&(i=new CubismMoc(r)),i},CubismMoc.delete=function(t){t._moc._release(),t._moc=null,t=null},CubismMoc.prototype.createModel=function(){var t=null,i=wt.Model.fromMoc(this._moc);return i&&((t=new Bt(i)).initialize(),++this._modelCount),t},CubismMoc.prototype.deleteModel=function(t){null!=t&&(t.release(),t=null,--this._modelCount)},CubismMoc.prototype.release=function(){CSM_ASSERT(0==this._modelCount),this._moc._release(),this._moc=null},CubismMoc}();t.CubismMoc=i}(xt||(xt={}));var Pt,Vt=t.csmString,It=T.CubismFramework,kt=m.CubismJson;!function(t){var i="Meta",r="Curves",n="FadeInTime",o="FadeOutTime",s="Segments",u="UserData",l=function(){function CubismMotionJson(t,i){this._json=kt.create(t,i)}return CubismMotionJson.prototype.release=function(){kt.delete(this._json)},CubismMotionJson.prototype.getMotionDuration=function(){return this._json.getRoot().getValueByString(i).getValueByString("Duration").toFloat()},CubismMotionJson.prototype.isMotionLoop=function(){return this._json.getRoot().getValueByString(i).getValueByString("Loop").toBoolean()},CubismMotionJson.prototype.getMotionCurveCount=function(){return this._json.getRoot().getValueByString(i).getValueByString("CurveCount").toInt()},CubismMotionJson.prototype.getMotionFps=function(){return this._json.getRoot().getValueByString(i).getValueByString("Fps").toFloat()},CubismMotionJson.prototype.getMotionTotalSegmentCount=function(){return this._json.getRoot().getValueByString(i).getValueByString("TotalSegmentCount").toInt()},CubismMotionJson.prototype.getMotionTotalPointCount=function(){return this._json.getRoot().getValueByString(i).getValueByString("TotalPointCount").toInt()},CubismMotionJson.prototype.isExistMotionFadeInTime=function(){return!this._json.getRoot().getValueByString(i).getValueByString(n).isNull()},CubismMotionJson.prototype.isExistMotionFadeOutTime=function(){return!this._json.getRoot().getValueByString(i).getValueByString(o).isNull()},CubismMotionJson.prototype.getMotionFadeInTime=function(){return this._json.getRoot().getValueByString(i).getValueByString(n).toFloat()},CubismMotionJson.prototype.getMotionFadeOutTime=function(){return this._json.getRoot().getValueByString(i).getValueByString(o).toFloat()},CubismMotionJson.prototype.getMotionCurveTarget=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Target").getRawString()},CubismMotionJson.prototype.getMotionCurveId=function(t){return It.getIdManager().getId(this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Id").getRawString())},CubismMotionJson.prototype.isExistMotionCurveFadeInTime=function(t){return!this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(n).isNull()},CubismMotionJson.prototype.isExistMotionCurveFadeOutTime=function(t){return!this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(o).isNull()},CubismMotionJson.prototype.getMotionCurveFadeInTime=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(n).toFloat()},CubismMotionJson.prototype.getMotionCurveFadeOutTime=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(o).toFloat()},CubismMotionJson.prototype.getMotionCurveSegmentCount=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(s).getVector().getSize()},CubismMotionJson.prototype.getMotionCurveSegment=function(t,i){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString(s).getValueByIndex(i).toFloat()},CubismMotionJson.prototype.getEventCount=function(){return this._json.getRoot().getValueByString(i).getValueByString("UserDataCount").toInt()},CubismMotionJson.prototype.getTotalEventValueSize=function(){return this._json.getRoot().getValueByString(i).getValueByString("TotalUserDataSize").toInt()},CubismMotionJson.prototype.getEventTime=function(t){return this._json.getRoot().getValueByString(u).getValueByIndex(t).getValueByString("Time").toInt()},CubismMotionJson.prototype.getEventValue=function(t){return new Vt(this._json.getRoot().getValueByString(u).getValueByIndex(t).getValueByString("Value").getRawString())},CubismMotionJson}();t.CubismMotionJson=l}(Pt||(Pt={}));var Et,Tt=l.csmVector;!function(t){var i;!function(t){t[t.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",t[t.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",t[t.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity"}(i=t.CubismMotionCurveTarget||(t.CubismMotionCurveTarget={})),function(t){t[t.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",t[t.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",t[t.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",t[t.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped"}(t.CubismMotionSegmentType||(t.CubismMotionSegmentType={}));var r=function r(){this.time=0,this.value=0};t.CubismMotionPoint=r;var n=function n(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0};t.CubismMotionSegment=n;var o=function o(){this.type=i.CubismMotionCurveTarget_Model,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0};t.CubismMotionCurve=o;var s=function s(){this.fireTime=0};t.CubismMotionEvent=s;var u=function u(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new Tt,this.segments=new Tt,this.points=new Tt,this.events=new Tt};t.CubismMotionData=u}(Et||(Et={}));var Ft,Lt=function(){var extendStatics=function(t,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},extendStatics(t,i)};return function(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),Rt=t.csmString,Dt=Et.CubismMotionData,Nt=Et.CubismMotionSegment,Ut=Et.CubismMotionPoint,Ot=Et.CubismMotionEvent,Xt=Et.CubismMotionSegmentType,Gt=Et.CubismMotionCurve,zt=Et.CubismMotionCurveTarget,Jt=et.CubismMath,Yt=T.CubismFramework,jt=rt.ACubismMotion,Wt=Pt.CubismMotionJson;!function(t){function lerpPoints(t,i,r){var n=new Ut;return n.time=t.time+(i.time-t.time)*r,n.value=t.value+(i.value-t.value)*r,n}function linearEvaluate(t,i){var r=(i-t[0].time)/(t[1].time-t[0].time);return r<0&&(r=0),t[0].value+(t[1].value-t[0].value)*r}function bezierEvaluate(t,i){var r=(i-t[0].time)/(t[3].time-t[0].time);r<0&&(r=0);var n=lerpPoints(t[0],t[1],r),o=lerpPoints(t[1],t[2],r),s=lerpPoints(t[2],t[3],r),u=lerpPoints(n,o,r),l=lerpPoints(o,s,r);return lerpPoints(u,l,r).value}function steppedEvaluate(t,i){return t[0].value}function inverseSteppedEvaluate(t,i){return t[1].value}function evaluateCurve(t,i,r){for(var n=t.curves.at(i),o=-1,s=n.baseSegmentIndex+n.segmentCount,u=0,l=n.baseSegmentIndex;l<s;++l)if(u=t.segments.at(l).basePointIndex+(t.segments.at(l).segmentType==Xt.CubismMotionSegmentType_Bezier?3:1),t.points.at(u).time>r){o=l;break}if(-1==o)return t.points.at(u).value;var p=t.segments.at(o);return p.evaluate(t.points.get(p.basePointIndex),r)}var i=function(t){function CubismMotion(){var i=t.call(this)||this;return i._sourceFrameRate=30,i._loopDurationSeconds=-1,i._isLoop=!1,i._isLoopFadeIn=!0,i._lastWeight=0,i._motionData=null,i._modelCurveIdEyeBlink=null,i._modelCurveIdLipSync=null,i._eyeBlinkParameterIds=null,i._lipSyncParameterIds=null,i}return Lt(CubismMotion,t),CubismMotion.create=function(t,i){var r=new CubismMotion;return r.parse(t,i),r._sourceFrameRate=r._motionData.fps,r._loopDurationSeconds=r._motionData.duration,r},CubismMotion.prototype.doUpdateParameters=function(t,i,r,n){null==this._modelCurveIdEyeBlink&&(this._modelCurveIdEyeBlink=Yt.getIdManager().getId("EyeBlink")),null==this._modelCurveIdLipSync&&(this._modelCurveIdLipSync=Yt.getIdManager().getId("LipSync"));var o=i-n.getStartTime();o<0&&(o=0);var s=Number.MAX_VALUE,u=Number.MAX_VALUE,l=64,p=0,m=0;this._eyeBlinkParameterIds.getSize()>l&&CubismLogDebug("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>l&&CubismLogDebug("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());var y,b,A,v=this._fadeInSeconds<=0?1:Jt.getEasingSine((i-n.getFadeInStartTime())/this._fadeInSeconds),M=this._fadeOutSeconds<=0||n.getEndTime()<0?1:Jt.getEasingSine((n.getEndTime()-i)/this._fadeOutSeconds),S=o;if(this._isLoop)for(;S>this._motionData.duration;)S-=this._motionData.duration;var x=this._motionData.curves;for(b=0;b<this._motionData.curveCount&&x.at(b).type==zt.CubismMotionCurveTarget_Model;++b)y=evaluateCurve(this._motionData,b,S),x.at(b).id==this._modelCurveIdEyeBlink?u=y:x.at(b).id==this._modelCurveIdLipSync&&(s=y);for(;b<this._motionData.curveCount&&x.at(b).type==zt.CubismMotionCurveTarget_Parameter;++b)if(-1!=(A=t.getParameterIndex(x.at(b).id))){var w=t.getParameterValueByIndex(A);if(y=evaluateCurve(this._motionData,b,S),u!=Number.MAX_VALUE)for(var P=0;P<this._eyeBlinkParameterIds.getSize()&&P<l;++P)if(this._eyeBlinkParameterIds.at(P)==x.at(b).id){y*=u,m|=1<<P;break}if(s!=Number.MAX_VALUE)for(P=0;P<this._lipSyncParameterIds.getSize()&&P<l;++P)if(this._lipSyncParameterIds.at(P)==x.at(b).id){y+=s,p|=1<<P;break}var V=void 0;if(x.at(b).fadeInTime<0&&x.at(b).fadeOutTime<0)V=w+(y-w)*r;else{var I=void 0,E=void 0;I=x.at(b).fadeInTime<0?v:0==x.at(b).fadeInTime?1:Jt.getEasingSine((i-n.getFadeInStartTime())/x.at(b).fadeInTime),E=x.at(b).fadeOutTime<0?M:0==x.at(b).fadeOutTime||n.getEndTime()<0?1:Jt.getEasingSine((n.getEndTime()-i)/x.at(b).fadeOutTime),V=w+(y-w)*(this._weight*I*E)}t.setParameterValueByIndex(A,V,1)}if(u!=Number.MAX_VALUE)for(P=0;P<this._eyeBlinkParameterIds.getSize()&&P<l;++P){w=t.getParameterValueById(this._eyeBlinkParameterIds.at(P));if(!(m>>P&1)){V=w+(u-w)*r;t.setParameterValueById(this._eyeBlinkParameterIds.at(P),V)}}if(s!=Number.MAX_VALUE)for(P=0;P<this._lipSyncParameterIds.getSize()&&P<l;++P){w=t.getParameterValueById(this._lipSyncParameterIds.at(P));if(!(p>>P&1)){V=w+(s-w)*r;t.setParameterValueById(this._lipSyncParameterIds.at(P),V)}}for(;b<this._motionData.curveCount&&x.at(b).type==zt.CubismMotionCurveTarget_PartOpacity;++b)-1!=(A=t.getParameterIndex(x.at(b).id))&&(y=evaluateCurve(this._motionData,b,S),t.setParameterValueByIndex(A,y));o>=this._motionData.duration&&(this._isLoop?(n.setStartTime(i),this._isLoopFadeIn&&n.setFadeInStartTime(i)):n.setIsFinished(!0)),this._lastWeight=r},CubismMotion.prototype.setIsLoop=function(t){this._isLoop=t},CubismMotion.prototype.isLoop=function(){return this._isLoop},CubismMotion.prototype.setIsLoopFadeIn=function(t){this._isLoopFadeIn=t},CubismMotion.prototype.isLoopFadeIn=function(){return this._isLoopFadeIn},CubismMotion.prototype.getDuration=function(){return this._isLoop?-1:this._loopDurationSeconds},CubismMotion.prototype.getLoopDuration=function(){return this._loopDurationSeconds},CubismMotion.prototype.setParameterFadeInTime=function(t,i){for(var r=this._motionData.curves,n=0;n<this._motionData.curveCount;++n)if(t==r.at(n).id)return void(r.at(n).fadeInTime=i)},CubismMotion.prototype.setParameterFadeOutTime=function(t,i){for(var r=this._motionData.curves,n=0;n<this._motionData.curveCount;++n)if(t==r.at(n).id)return void(r.at(n).fadeOutTime=i)},CubismMotion.prototype.getParameterFadeInTime=function(t){for(var i=this._motionData.curves,r=0;r<this._motionData.curveCount;++r)if(t==i.at(r).id)return i.at(r).fadeInTime;return-1},CubismMotion.prototype.getParameterFadeOutTime=function(t){for(var i=this._motionData.curves,r=0;r<this._motionData.curveCount;++r)if(t==i.at(r).id)return i.at(r).fadeOutTime;return-1},CubismMotion.prototype.setEffectIds=function(t,i){this._eyeBlinkParameterIds=t,this._lipSyncParameterIds=i},CubismMotion.prototype.release=function(){this._motionData=void 0,this._motionData=null},CubismMotion.prototype.parse=function(t,i){this._motionData=new Dt;var r=new Wt(t,i);this._motionData.duration=r.getMotionDuration(),this._motionData.loop=r.isMotionLoop(),this._motionData.curveCount=r.getMotionCurveCount(),this._motionData.fps=r.getMotionFps(),this._motionData.eventCount=r.getEventCount(),r.isExistMotionFadeInTime()?this._fadeInSeconds=r.getMotionFadeInTime()<0?1:r.getMotionFadeInTime():this._fadeInSeconds=1,r.isExistMotionFadeOutTime()?this._fadeOutSeconds=r.getMotionFadeOutTime()<0?1:r.getMotionFadeOutTime():this._fadeOutSeconds=1;for(var n=0,o=0,s=0;s<this._motionData.curveCount;++s){var u=new Gt;"Model"==r.getMotionCurveTarget(s)?u.type=zt.CubismMotionCurveTarget_Model:"Parameter"==r.getMotionCurveTarget(s)?u.type=zt.CubismMotionCurveTarget_Parameter:"PartOpacity"==r.getMotionCurveTarget(s)&&(u.type=zt.CubismMotionCurveTarget_PartOpacity),u.id=r.getMotionCurveId(s),u.baseSegmentIndex=o,u.fadeInTime=r.isExistMotionCurveFadeInTime(s)?r.getMotionCurveFadeInTime(s):-1,u.fadeOutTime=r.isExistMotionCurveFadeOutTime(s)?r.getMotionCurveFadeOutTime(s):-1;for(var l=0;l<r.getMotionCurveSegmentCount(s);){var p=new Nt;if(0==l){var m=new Ut;p.basePointIndex=n,m.time=r.getMotionCurveSegment(s,l),m.value=r.getMotionCurveSegment(s,l+1),this._motionData.points.pushBack(m),n+=1,l+=2}else p.basePointIndex=n-1;switch(r.getMotionCurveSegment(s,l)){case Xt.CubismMotionSegmentType_Linear:m=new Ut;p.segmentType=Xt.CubismMotionSegmentType_Linear,p.evaluate=linearEvaluate,m.time=r.getMotionCurveSegment(s,l+1),m.value=r.getMotionCurveSegment(s,l+2),this._motionData.points.pushBack(m),n+=1,l+=3;break;case Xt.CubismMotionSegmentType_Bezier:m=void 0;p.segmentType=Xt.CubismMotionSegmentType_Bezier,p.evaluate=bezierEvaluate,(m=new Ut).time=r.getMotionCurveSegment(s,l+1),m.value=r.getMotionCurveSegment(s,l+2),this._motionData.points.pushBack(m),(m=new Ut).time=r.getMotionCurveSegment(s,l+3),m.value=r.getMotionCurveSegment(s,l+4),this._motionData.points.pushBack(m),(m=new Ut).time=r.getMotionCurveSegment(s,l+5),m.value=r.getMotionCurveSegment(s,l+6),this._motionData.points.pushBack(m),n+=3,l+=7;break;case Xt.CubismMotionSegmentType_Stepped:m=new Ut;p.segmentType=Xt.CubismMotionSegmentType_Stepped,p.evaluate=steppedEvaluate,m.time=r.getMotionCurveSegment(s,l+1),m.value=r.getMotionCurveSegment(s,l+2),this._motionData.points.pushBack(m),n+=1,l+=3;break;case Xt.CubismMotionSegmentType_InverseStepped:m=new Ut;p.segmentType=Xt.CubismMotionSegmentType_InverseStepped,p.evaluate=inverseSteppedEvaluate,m.time=r.getMotionCurveSegment(s,l+1),m.value=r.getMotionCurveSegment(s,l+2),this._motionData.points.pushBack(m),n+=1,l+=3;break;default:CSM_ASSERT(0)}++u.segmentCount,++o,this._motionData.segments.pushBack(p)}this._motionData.curves.pushBack(u)}for(var y=0;y<r.getEventCount();++y){var b=new Ot;b.fireTime=r.getEventTime(y),b.value=r.getEventValue(y),this._motionData.events.pushBack(b)}r.release(),r=void 0,r=null},CubismMotion.prototype.getFiredEvent=function(t,i){this._firedEventValues.updateSize(0);for(var r=0;r<this._motionData.eventCount;++r)this._motionData.events.at(r).fireTime>t&&this._motionData.events.at(r).fireTime<=i&&this._firedEventValues.pushBack(new Rt(this._motionData.events.at(r).value.s));return this._firedEventValues},CubismMotion}(jt);t.CubismMotion=i}(Ft||(Ft={}));var Ht,Qt=function(){var extendStatics=function(t,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},extendStatics(t,i)};return function(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),qt=l.csmVector,Zt=T.CubismFramework,Kt=m.CubismJson,$t=rt.ACubismMotion;!function(t){var i,r="Parameters",n="Blend",o=function(t){function CubismExpressionMotion(){var i=t.call(this)||this;return i._parameters=new qt,i}return Qt(CubismExpressionMotion,t),CubismExpressionMotion.create=function(t,o){var u=new CubismExpressionMotion,l=Kt.create(t,o),p=l.getRoot();u.setFadeInTime(p.getValueByString("FadeInTime").toFloat(1)),u.setFadeOutTime(p.getValueByString("FadeOutTime").toFloat(1));var m=p.getValueByString(r).getSize();u._parameters.prepareCapacity(m);for(var y=0;y<m;++y){var b=p.getValueByString(r).getValueByIndex(y),A=Zt.getIdManager().getId(b.getValueByString("Id").getRawString()),v=b.getValueByString("Value").toFloat(),M=void 0;M=b.getValueByString(n).isNull()||"Add"==b.getValueByString(n).getString()?i.ExpressionBlendType_Add:"Multiply"==b.getValueByString(n).getString()?i.ExpressionBlendType_Multiply:"Overwrite"==b.getValueByString(n).getString()?i.ExpressionBlendType_Overwrite:i.ExpressionBlendType_Add;var S=new s;S.parameterId=A,S.blendType=M,S.value=v,u._parameters.pushBack(S)}return Kt.delete(l),u},CubismExpressionMotion.prototype.doUpdateParameters=function(t,r,n,o){for(var s=0;s<this._parameters.getSize();++s){var u=this._parameters.at(s);switch(u.blendType){case i.ExpressionBlendType_Add:t.addParameterValueById(u.parameterId,u.value,n);break;case i.ExpressionBlendType_Multiply:t.multiplyParameterValueById(u.parameterId,u.value,n);break;case i.ExpressionBlendType_Overwrite:t.setParameterValueById(u.parameterId,u.value,n)}}},CubismExpressionMotion}($t);t.CubismExpressionMotion=o,function(t){t[t.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",t[t.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",t[t.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite"}(i=t.ExpressionBlendType||(t.ExpressionBlendType={}));var s=function s(){};t.ExpressionParameter=s}(Ht||(Ht={}));var te,ee=l.csmVector,ie=T.CubismFramework,re=m.CubismJson;!function(t){var i="FadeInTime",r="Link",n=function(){function CubismPose(){this._fadeTimeSeconds=.5,this._lastModel=null,this._partGroups=new ee,this._partGroupCounts=new ee}return CubismPose.create=function(t,n){var s=new CubismPose,u=re.create(t,n),l=u.getRoot();l.getValueByString(i).isNull()||(s._fadeTimeSeconds=l.getValueByString(i).toFloat(.5),s._fadeTimeSeconds<=0&&(s._fadeTimeSeconds=.5));for(var p=l.getValueByString("Groups"),m=p.getSize(),y=0;y<m;++y){for(var b=p.getValueByIndex(y),A=b.getSize(),v=0,M=0;M<A;++M){var S=b.getValueByIndex(M),x=new o,w=ie.getIdManager().getId(S.getValueByString("Id").getRawString());if(x.partId=w,!S.getValueByString(r).isNull())for(var P=S.getValueByString(r),V=P.getSize(),I=0;I<V;++I){var E=new o,T=ie.getIdManager().getId(P.getValueByIndex(I).getString());E.partId=T,x.link.pushBack(E)}s._partGroups.pushBack(x.clone()),++v}s._partGroupCounts.pushBack(v)}return re.delete(u),s},CubismPose.delete=function(t){null!=t&&(t=null)},CubismPose.prototype.updateParameters=function(t,i){t!=this._lastModel&&this.reset(t),this._lastModel=t,i<0&&(i=0);for(var r=0,n=0;n<this._partGroupCounts.getSize();n++){var o=this._partGroupCounts.at(n);this.doFade(t,i,r,o),r+=o}this.copyPartOpacities(t)},CubismPose.prototype.reset=function(t){for(var i=0,r=0;r<this._partGroupCounts.getSize();++r){for(var n=this._partGroupCounts.at(r),o=i;o<i+n;++o){this._partGroups.at(o).initialize(t);var s=this._partGroups.at(o).partIndex,u=this._partGroups.at(o).parameterIndex;if(!(s<0)){t.setPartOpacityByIndex(s,o==i?1:0),t.setParameterValueByIndex(u,o==i?1:0);for(var l=0;l<this._partGroups.at(o).link.getSize();++l)this._partGroups.at(o).link.at(l).initialize(t)}}i+=n}},CubismPose.prototype.copyPartOpacities=function(t){for(var i=0;i<this._partGroups.getSize();++i){var r=this._partGroups.at(i);if(0!=r.link.getSize())for(var n=this._partGroups.at(i).partIndex,o=t.getPartOpacityByIndex(n),s=0;s<r.link.getSize();++s){var u=r.link.at(s).partIndex;u<0||t.setPartOpacityByIndex(u,o)}}},CubismPose.prototype.doFade=function(t,i,r,n){for(var o=-1,s=1,u=.5,l=r;l<r+n;++l){var p=this._partGroups.at(l).partIndex,m=this._partGroups.at(l).parameterIndex;if(t.getParameterValueByIndex(m)>.001){if(o>=0)break;o=l,s=t.getPartOpacityByIndex(p),(s+=i/this._fadeTimeSeconds)>1&&(s=1)}}o<0&&(o=0,s=1);for(l=r;l<r+n;++l){var y=this._partGroups.at(l).partIndex;if(o==l)t.setPartOpacityByIndex(y,s);else{var b=t.getPartOpacityByIndex(y),A=void 0;(1-(A=s<u?-.5*s/u+1:(1-s)*u/.5))*(1-s)>.15&&(A=1-.15/(1-s)),b>A&&(b=A),t.setPartOpacityByIndex(y,b)}}},CubismPose}();t.CubismPose=n;var o=function(){function PartData(t){if(this.parameterIndex=0,this.partIndex=0,this.link=new ee,null!=t){this.partId=t.partId;for(var i=t.link.begin();i.notEqual(t.link.end());i.preIncrement())this.link.pushBack(i.ptr().clone())}}return PartData.prototype.assignment=function(t){this.partId=t.partId;for(var i=t.link.begin();i.notEqual(t.link.end());i.preIncrement())this.link.pushBack(i.ptr().clone());return this},PartData.prototype.initialize=function(t){this.parameterIndex=t.getParameterIndex(this.partId),this.partIndex=t.getPartIndex(this.partId),t.setParameterValueByIndex(this.parameterIndex,1)},PartData.prototype.clone=function(){var t=new PartData;t.partId=this.partId,t.parameterIndex=this.parameterIndex,t.partIndex=this.partIndex,t.link=new ee;for(var i=this.link.begin();i.notEqual(this.link.end());i.increment())t.link.pushBack(i.ptr().clone());return t},PartData}();t.PartData=o}(te||(te={}));var ne,ae=T.CubismFramework,oe=m.CubismJson;!function(t){var i="Meta",r="UserData",n=function(){function CubismModelUserDataJson(t,i){this._json=oe.create(t,i)}return CubismModelUserDataJson.prototype.release=function(){oe.delete(this._json)},CubismModelUserDataJson.prototype.getUserDataCount=function(){return this._json.getRoot().getValueByString(i).getValueByString("UserDataCount").toInt()},CubismModelUserDataJson.prototype.getTotalUserDataSize=function(){return this._json.getRoot().getValueByString(i).getValueByString("TotalUserDataSize").toInt()},CubismModelUserDataJson.prototype.getUserDataTargetType=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Target").getRawString()},CubismModelUserDataJson.prototype.getUserDataId=function(t){return ae.getIdManager().getId(this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Id").getRawString())},CubismModelUserDataJson.prototype.getUserDataValue=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Value").getRawString()},CubismModelUserDataJson}();t.CubismModelUserDataJson=n}(ne||(ne={}));var se,ue=T.CubismFramework,le=l.csmVector,ce=t.csmString,he=ne.CubismModelUserDataJson;!function(t){var i=function i(){};t.CubismModelUserDataNode=i;var r=function(){function CubismModelUserData(){this._userDataNodes=new le,this._artMeshUserDataNode=new le}return CubismModelUserData.create=function(t,i){var r=new CubismModelUserData;return r.parseUserData(t,i),r},CubismModelUserData.delete=function(t){null!=t&&(t.release(),t=null)},CubismModelUserData.prototype.getArtMeshUserDatas=function(){return this._artMeshUserDataNode},CubismModelUserData.prototype.parseUserData=function(t,r){for(var n=new he(t,r),o=ue.getIdManager().getId("ArtMesh"),s=n.getUserDataCount(),u=0;u<s;u++){var l=new i;l.targetId=n.getUserDataId(u),l.targetType=ue.getIdManager().getId(n.getUserDataTargetType(u)),l.value=new ce(n.getUserDataValue(u)),this._userDataNodes.pushBack(l),l.targetType==o&&this._artMeshUserDataNode.pushBack(l)}n.release(),n=void 0},CubismModelUserData.prototype.release=function(){for(var t=0;t<this._userDataNodes.getSize();++t)this._userDataNodes.set(t,null);this._userDataNodes=null},CubismModelUserData}();t.CubismModelUserData=r}(se||(se={}));var ge,fe=l.csmVector,pe=J.CubismVector2;!function(t){!function(t){t[t.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter"}(t.CubismPhysicsTargetType||(t.CubismPhysicsTargetType={})),function(t){t[t.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",t[t.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",t[t.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle"}(t.CubismPhysicsSource||(t.CubismPhysicsSource={}));var i=function i(){this.gravity=new pe(0,0),this.wind=new pe(0,0)};t.PhysicsJsonEffectiveForces=i;var r=function r(){};t.CubismPhysicsParameter=r;var n=function n(){};t.CubismPhysicsNormalization=n;var o=function o(){this.initialPosition=new pe(0,0),this.position=new pe(0,0),this.lastPosition=new pe(0,0),this.lastGravity=new pe(0,0),this.force=new pe(0,0),this.velocity=new pe(0,0)};t.CubismPhysicsParticle=o;var s=function s(){this.normalizationPosition=new n,this.normalizationAngle=new n};t.CubismPhysicsSubRig=s;var u=function u(){this.source=new r};t.CubismPhysicsInput=u;var l=function l(){this.destination=new r,this.translationScale=new pe(0,0)};t.CubismPhysicsOutput=l;var p=function p(){this.settings=new fe,this.inputs=new fe,this.outputs=new fe,this.particles=new fe,this.gravity=new pe(0,0),this.wind=new pe(0,0)};t.CubismPhysicsRig=p}(ge||(ge={}));var de,me=T.CubismFramework,_e=J.CubismVector2,ye=m.CubismJson;!function(t){var i="Position",r="Angle",n="Type",o="Meta",s="EffectiveForces",u="Gravity",l="Wind",p="PhysicsSettings",m="Normalization",y="Minimum",b="Maximum",A="Default",v="Reflect",M="Weight",S="Input",x="Output",w="Vertices",P=function(){function CubismPhysicsJson(t,i){this._json=ye.create(t,i)}return CubismPhysicsJson.prototype.release=function(){ye.delete(this._json)},CubismPhysicsJson.prototype.getGravity=function(){var t=new _e(0,0);return t.x=this._json.getRoot().getValueByString(o).getValueByString(s).getValueByString(u).getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString(o).getValueByString(s).getValueByString(u).getValueByString("Y").toFloat(),t},CubismPhysicsJson.prototype.getWind=function(){var t=new _e(0,0);return t.x=this._json.getRoot().getValueByString(o).getValueByString(s).getValueByString(l).getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString(o).getValueByString(s).getValueByString(l).getValueByString("Y").toFloat(),t},CubismPhysicsJson.prototype.getSubRigCount=function(){return this._json.getRoot().getValueByString(o).getValueByString("PhysicsSettingCount").toInt()},CubismPhysicsJson.prototype.getTotalInputCount=function(){return this._json.getRoot().getValueByString(o).getValueByString("TotalInputCount").toInt()},CubismPhysicsJson.prototype.getTotalOutputCount=function(){return this._json.getRoot().getValueByString(o).getValueByString("TotalOutputCount").toInt()},CubismPhysicsJson.prototype.getVertexCount=function(){return this._json.getRoot().getValueByString(o).getValueByString("VertexCount").toInt()},CubismPhysicsJson.prototype.getNormalizationPositionMinimumValue=function(t){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(m).getValueByString(i).getValueByString(y).toFloat()},CubismPhysicsJson.prototype.getNormalizationPositionMaximumValue=function(t){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(m).getValueByString(i).getValueByString(b).toFloat()},CubismPhysicsJson.prototype.getNormalizationPositionDefaultValue=function(t){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(m).getValueByString(i).getValueByString(A).toFloat()},CubismPhysicsJson.prototype.getNormalizationAngleMinimumValue=function(t){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(m).getValueByString(r).getValueByString(y).toFloat()},CubismPhysicsJson.prototype.getNormalizationAngleMaximumValue=function(t){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(m).getValueByString(r).getValueByString(b).toFloat()},CubismPhysicsJson.prototype.getNormalizationAngleDefaultValue=function(t){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(m).getValueByString(r).getValueByString(A).toFloat()},CubismPhysicsJson.prototype.getInputCount=function(t){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(S).getVector().getSize()},CubismPhysicsJson.prototype.getInputWeight=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(S).getValueByIndex(i).getValueByString(M).toFloat()},CubismPhysicsJson.prototype.getInputReflect=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(S).getValueByIndex(i).getValueByString(v).toBoolean()},CubismPhysicsJson.prototype.getInputType=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(S).getValueByIndex(i).getValueByString(n).getRawString()},CubismPhysicsJson.prototype.getInputSourceId=function(t,i){return me.getIdManager().getId(this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(S).getValueByIndex(i).getValueByString("Source").getValueByString("Id").getRawString())},CubismPhysicsJson.prototype.getOutputCount=function(t){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(x).getVector().getSize()},CubismPhysicsJson.prototype.getOutputVertexIndex=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(x).getValueByIndex(i).getValueByString("VertexIndex").toInt()},CubismPhysicsJson.prototype.getOutputAngleScale=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(x).getValueByIndex(i).getValueByString("Scale").toFloat()},CubismPhysicsJson.prototype.getOutputWeight=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(x).getValueByIndex(i).getValueByString(M).toFloat()},CubismPhysicsJson.prototype.getOutputDestinationId=function(t,i){return me.getIdManager().getId(this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(x).getValueByIndex(i).getValueByString("Destination").getValueByString("Id").getRawString())},CubismPhysicsJson.prototype.getOutputType=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(x).getValueByIndex(i).getValueByString(n).getRawString()},CubismPhysicsJson.prototype.getOutputReflect=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(x).getValueByIndex(i).getValueByString(v).toBoolean()},CubismPhysicsJson.prototype.getParticleCount=function(t){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(w).getVector().getSize()},CubismPhysicsJson.prototype.getParticleMobility=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(w).getValueByIndex(i).getValueByString("Mobility").toFloat()},CubismPhysicsJson.prototype.getParticleDelay=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(w).getValueByIndex(i).getValueByString("Delay").toFloat()},CubismPhysicsJson.prototype.getParticleAcceleration=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(w).getValueByIndex(i).getValueByString("Acceleration").toFloat()},CubismPhysicsJson.prototype.getParticleRadius=function(t,i){return this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(w).getValueByIndex(i).getValueByString("Radius").toInt()},CubismPhysicsJson.prototype.getParticlePosition=function(t,r){var n=new _e(0,0);return n.x=this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(w).getValueByIndex(r).getValueByString(i).getValueByString("X").toFloat(),n.y=this._json.getRoot().getValueByString(p).getValueByIndex(t).getValueByString(w).getValueByIndex(r).getValueByString(i).getValueByString("Y").toFloat(),n},CubismPhysicsJson}();t.CubismPhysicsJson=P}(de||(de={}));var be,Ce,Ae=de.CubismPhysicsJson,ve=et.CubismMath,Me=ge.CubismPhysicsRig,Se=ge.CubismPhysicsSubRig,xe=ge.CubismPhysicsInput,we=ge.CubismPhysicsOutput,Be=ge.CubismPhysicsParticle,Pe=ge.CubismPhysicsSource,Ve=ge.CubismPhysicsTargetType,Ie=J.CubismVector2;!function(t){var i="Angle",r=function(){function CubismPhysics(){this._physicsRig=null,this._options=new n,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}return CubismPhysics.create=function(t,i){var r=new CubismPhysics;return r.parse(t,i),r._physicsRig.gravity.y=0,r},CubismPhysics.delete=function(t){null!=t&&(t.release(),t=null)},CubismPhysics.prototype.evaluate=function(t,i){var r,n,o,s,u,l,p,m,y,b,A,v,M=new Ie;y=t.getModel().parameters.values,b=t.getModel().parameters.maximumValues,A=t.getModel().parameters.minimumValues,v=t.getModel().parameters.defaultValues;for(var S=0;S<this._physicsRig.subRigCount;++S){r={angle:0},M.x=0,M.y=0,u=this._physicsRig.settings.at(S),l=this._physicsRig.inputs.get(u.baseInputIndex),p=this._physicsRig.outputs.get(u.baseOutputIndex),m=this._physicsRig.particles.get(u.baseParticleIndex);for(var x=0;x<u.inputCount;++x)n=l[x].weight/100,-1==l[x].sourceParameterIndex&&(l[x].sourceParameterIndex=t.getParameterIndex(l[x].source.id)),l[x].getNormalizedParameterValue(M,r,y[l[x].sourceParameterIndex],A[l[x].sourceParameterIndex],b[l[x].sourceParameterIndex],v[l[x].sourceParameterIndex],u.normalizationPosition,u.normalizationAngle,l[0].reflect,n);o=ve.degreesToRadian(-r.angle),M.x=M.x*ve.cos(o)-M.y*ve.sin(o),M.y=M.x*ve.sin(o)+M.y*ve.cos(o),updateParticles(m,u.particleCount,M,r.angle,this._options.wind,.001*u.normalizationPosition.maximum,i,5);for(x=0;x<u.outputCount;++x){var w=p[x].vertexIndex;if(w<1||w>=u.particleCount)break;-1==p[x].destinationParameterIndex&&(p[x].destinationParameterIndex=t.getParameterIndex(p[x].destination.id));var P=new Ie;P.x=m[w].position.x-m[w-1].position.x,P.y=m[w].position.y-m[w-1].position.y,s=p[x].getValue(P,m,w,p[x].reflect,this._options.gravity);var V=p[x].destinationParameterIndex,I=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(y.subarray(V))):y.slice(V);updateOutputParameterValue(I,A[V],b[V],s,p[x]);for(var E=V,T=0;E<y.length;E++,T++)y[E]=I[T]}}},CubismPhysics.prototype.setOptions=function(t){this._options=t},CubismPhysics.prototype.getOption=function(){return this._options},CubismPhysics.prototype.release=function(){this._physicsRig=void 0,this._physicsRig=null},CubismPhysics.prototype.parse=function(t,r){this._physicsRig=new Me;var n=new Ae(t,r);this._physicsRig.gravity=n.getGravity(),this._physicsRig.wind=n.getWind(),this._physicsRig.subRigCount=n.getSubRigCount(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,Se,!0),this._physicsRig.inputs.updateSize(n.getTotalInputCount(),xe,!0),this._physicsRig.outputs.updateSize(n.getTotalOutputCount(),we,!0),this._physicsRig.particles.updateSize(n.getVertexCount(),Be,!0);for(var o=0,s=0,u=0,l=0;l<this._physicsRig.settings.getSize();++l){this._physicsRig.settings.at(l).normalizationPosition.minimum=n.getNormalizationPositionMinimumValue(l),this._physicsRig.settings.at(l).normalizationPosition.maximum=n.getNormalizationPositionMaximumValue(l),this._physicsRig.settings.at(l).normalizationPosition.defalut=n.getNormalizationPositionDefaultValue(l),this._physicsRig.settings.at(l).normalizationAngle.minimum=n.getNormalizationAngleMinimumValue(l),this._physicsRig.settings.at(l).normalizationAngle.maximum=n.getNormalizationAngleMaximumValue(l),this._physicsRig.settings.at(l).normalizationAngle.defalut=n.getNormalizationAngleDefaultValue(l),this._physicsRig.settings.at(l).inputCount=n.getInputCount(l),this._physicsRig.settings.at(l).baseInputIndex=o;for(var p=0;p<this._physicsRig.settings.at(l).inputCount;++p)this._physicsRig.inputs.at(o+p).sourceParameterIndex=-1,this._physicsRig.inputs.at(o+p).weight=n.getInputWeight(l,p),this._physicsRig.inputs.at(o+p).reflect=n.getInputReflect(l,p),"X"==n.getInputType(l,p)?(this._physicsRig.inputs.at(o+p).type=Pe.CubismPhysicsSource_X,this._physicsRig.inputs.at(o+p).getNormalizedParameterValue=getInputTranslationXFromNormalizedParameterValue):"Y"==n.getInputType(l,p)?(this._physicsRig.inputs.at(o+p).type=Pe.CubismPhysicsSource_Y,this._physicsRig.inputs.at(o+p).getNormalizedParameterValue=getInputTranslationYFromNormalizedParamterValue):n.getInputType(l,p)==i&&(this._physicsRig.inputs.at(o+p).type=Pe.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(o+p).getNormalizedParameterValue=getInputAngleFromNormalizedParameterValue),this._physicsRig.inputs.at(o+p).source.targetType=Ve.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(o+p).source.id=n.getInputSourceId(l,p);o+=this._physicsRig.settings.at(l).inputCount,this._physicsRig.settings.at(l).outputCount=n.getOutputCount(l),this._physicsRig.settings.at(l).baseOutputIndex=s;for(p=0;p<this._physicsRig.settings.at(l).outputCount;++p)this._physicsRig.outputs.at(s+p).destinationParameterIndex=-1,this._physicsRig.outputs.at(s+p).vertexIndex=n.getOutputVertexIndex(l,p),this._physicsRig.outputs.at(s+p).angleScale=n.getOutputAngleScale(l,p),this._physicsRig.outputs.at(s+p).weight=n.getOutputWeight(l,p),this._physicsRig.outputs.at(s+p).destination.targetType=Ve.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(s+p).destination.id=n.getOutputDestinationId(l,p),"X"==n.getOutputType(l,p)?(this._physicsRig.outputs.at(s+p).type=Pe.CubismPhysicsSource_X,this._physicsRig.outputs.at(s+p).getValue=getOutputTranslationX,this._physicsRig.outputs.at(s+p).getScale=getOutputScaleTranslationX):"Y"==n.getOutputType(l,p)?(this._physicsRig.outputs.at(s+p).type=Pe.CubismPhysicsSource_Y,this._physicsRig.outputs.at(s+p).getValue=getOutputTranslationY,this._physicsRig.outputs.at(s+p).getScale=getOutputScaleTranslationY):n.getOutputType(l,p)==i&&(this._physicsRig.outputs.at(s+p).type=Pe.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(s+p).getValue=getOutputAngle,this._physicsRig.outputs.at(s+p).getScale=getOutputScaleAngle),this._physicsRig.outputs.at(s+p).reflect=n.getOutputReflect(l,p);s+=this._physicsRig.settings.at(l).outputCount,this._physicsRig.settings.at(l).particleCount=n.getParticleCount(l),this._physicsRig.settings.at(l).baseParticleIndex=u;for(p=0;p<this._physicsRig.settings.at(l).particleCount;++p)this._physicsRig.particles.at(u+p).mobility=n.getParticleMobility(l,p),this._physicsRig.particles.at(u+p).delay=n.getParticleDelay(l,p),this._physicsRig.particles.at(u+p).acceleration=n.getParticleAcceleration(l,p),this._physicsRig.particles.at(u+p).radius=n.getParticleRadius(l,p),this._physicsRig.particles.at(u+p).position=n.getParticlePosition(l,p);u+=this._physicsRig.settings.at(l).particleCount}this.initialize(),n.release(),n=void 0,n=null},CubismPhysics.prototype.initialize=function(){for(var t,i,r,n=0;n<this._physicsRig.subRigCount;++n){i=this._physicsRig.settings.at(n),(t=this._physicsRig.particles.get(i.baseParticleIndex))[0].initialPosition=new Ie(0,0),t[0].lastPosition=new Ie(t[0].initialPosition.x,t[0].initialPosition.y),t[0].lastGravity=new Ie(0,-1),t[0].lastGravity.y*=-1,t[0].velocity=new Ie(0,0),t[0].force=new Ie(0,0);for(var o=1;o<i.particleCount;++o)(r=new Ie(0,0)).y=t[o].radius,t[o].initialPosition=new Ie(t[o-1].initialPosition.x+r.x,t[o-1].initialPosition.y+r.y),t[o].position=new Ie(t[o].initialPosition.x,t[o].initialPosition.y),t[o].lastPosition=new Ie(t[o].initialPosition.x,t[o].initialPosition.y),t[o].lastGravity=new Ie(0,-1),t[o].lastGravity.y*=-1,t[o].velocity=new Ie(0,0),t[o].force=new Ie(0,0)}},CubismPhysics}();t.CubismPhysics=r;var n=function n(){this.gravity=new Ie(0,0),this.wind=new Ie(0,0)};function getInputTranslationXFromNormalizedParameterValue(t,i,r,n,o,s,u,l,p,m){t.x+=normalizeParameterValue(r,n,o,s,u.minimum,u.maximum,u.defalut,p)*m}function getInputTranslationYFromNormalizedParamterValue(t,i,r,n,o,s,u,l,p,m){t.y+=normalizeParameterValue(r,n,o,s,u.minimum,u.maximum,u.defalut,p)*m}function getInputAngleFromNormalizedParameterValue(t,i,r,n,o,s,u,l,p,m){i.angle+=normalizeParameterValue(r,n,o,s,l.minimum,l.maximum,l.defalut,p)*m}function getOutputTranslationX(t,i,r,n,o){var s=t.x;return n&&(s*=-1),s}function getOutputTranslationY(t,i,r,n,o){var s=t.y;return n&&(s*=-1),s}function getOutputAngle(t,i,r,n,o){var s;return o=r>=2?i[r-1].position.substract(i[r-2].position):o.multiplyByScaler(-1),s=ve.directionToRadian(o,t),n&&(s*=-1),s}function getDefaultValue(t,i){return ve.min(t,i)+function getRangeValue(t,i){var r=ve.max(t,i),n=ve.min(t,i);return ve.abs(r-n)}(t,i)/2}function getOutputScaleTranslationX(t,i){return JSON.parse(JSON.stringify(t.x))}function getOutputScaleTranslationY(t,i){return JSON.parse(JSON.stringify(t.y))}function getOutputScaleAngle(t,i){return JSON.parse(JSON.stringify(i))}function updateParticles(t,i,r,n,o,s,u,l){var p,m,y,b,A=new Ie(0,0),v=new Ie(0,0),M=new Ie(0,0),S=new Ie(0,0);t[0].position=new Ie(r.x,r.y),p=ve.degreesToRadian(n),(b=ve.radianToDirection(p)).normalize();for(var x=1;x<i;++x)t[x].force=b.multiplyByScaler(t[x].acceleration).add(o),t[x].lastPosition=new Ie(t[x].position.x,t[x].position.y),m=t[x].delay*u*30,A=t[x].position.substract(t[x-1].position),y=ve.directionToRadian(t[x].lastGravity,b)/l,A.x=ve.cos(y)*A.x-A.y*ve.sin(y),A.y=ve.sin(y)*A.x+A.y*ve.cos(y),t[x].position=t[x-1].position.add(A),v=t[x].velocity.multiplyByScaler(m),M=t[x].force.multiplyByScaler(m).multiplyByScaler(m),t[x].position=t[x].position.add(v).add(M),(S=t[x].position.substract(t[x-1].position)).normalize(),t[x].position=t[x-1].position.add(S.multiplyByScaler(t[x].radius)),ve.abs(t[x].position.x)<s&&(t[x].position.x=0),0!=m&&(t[x].velocity=t[x].position.substract(t[x].lastPosition),t[x].velocity=t[x].velocity.divisionByScalar(m),t[x].velocity=t[x].velocity.multiplyByScaler(t[x].mobility)),t[x].force=new Ie(0,0),t[x].lastGravity=new Ie(b.x,b.y)}function updateOutputParameterValue(t,i,r,n,o){var s,u;(s=n*o.getScale(o.translationScale,o.angleScale))<i?(s<o.valueBelowMinimum&&(o.valueBelowMinimum=s),s=i):s>r&&(s>o.valueExceededMaximum&&(o.valueExceededMaximum=s),s=r),(u=o.weight/100)>=1||(s=t[0]*(1-u)+s*u),t[0]=s}function normalizeParameterValue(t,i,r,n,o,s,u,l){var p=0,m=ve.max(r,i);m<t&&(t=m);var y=ve.min(r,i);y>t&&(t=y);var b=ve.min(o,s),A=ve.max(o,s),v=u,M=getDefaultValue(y,m),S=t-M;switch(function sign(t){var i=0;return t>0?i=1:t<0&&(i=-1),i}(S)){case 1:var x=A-v;0!=(w=m-M)&&(p=S*(x/w),p+=v);break;case-1:var w;x=b-v;0!=(w=y-M)&&(p=S*(x/w),p+=v);break;case 0:p=v}return l?p:-1*p}t.Options=n}(be||(be={})),function(t){var i=function(){function CubismBreath(){this._currentTime=0}return CubismBreath.create=function(){return new CubismBreath},CubismBreath.delete=function(t){null!=t&&(t=null)},CubismBreath.prototype.setParameters=function(t){this._breathParameters=t},CubismBreath.prototype.getParameters=function(){return this._breathParameters},CubismBreath.prototype.updateParameters=function(t,i){this._currentTime+=i;for(var r=2*this._currentTime*3.14159,n=0;n<this._breathParameters.getSize();++n){var o=this._breathParameters.at(n);t.addParameterValueById(o.parameterId,o.offset+o.peak*Math.sin(r/o.cycle),o.weight)}},CubismBreath}();t.CubismBreath=i;var r=function r(t,i,n,o,s){this.parameterId=null==t?null:t,this.offset=null==i?0:i,this.peak=null==n?0:n,this.cycle=null==o?0:o,this.weight=null==s?0:s};t.BreathParameterData=r}(Ce||(Ce={}));var ke,Ee,Te=l.csmVector;!function(t){var i,r=function(){function CubismEyeBlink(t){if(this._blinkingState=i.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new Te,null!=t)for(var r=0;r<t.getEyeBlinkParameterCount();++r)this._parameterIds.pushBack(t.getEyeBlinkParameterId(r))}return CubismEyeBlink.create=function(t){return void 0===t&&(t=null),new CubismEyeBlink(t)},CubismEyeBlink.delete=function(t){null!=t&&(t=null)},CubismEyeBlink.prototype.setBlinkingInterval=function(t){this._blinkingIntervalSeconds=t},CubismEyeBlink.prototype.setBlinkingSetting=function(t,i,r){this._closingSeconds=t,this._closedSeconds=i,this._openingSeconds=r},CubismEyeBlink.prototype.setParameterIds=function(t){this._parameterIds=t},CubismEyeBlink.prototype.getParameterIds=function(){return this._parameterIds},CubismEyeBlink.prototype.updateParameters=function(t,r){var n;this._userTimeSeconds+=r;var o=0;switch(this._blinkingState){case i.EyeState_Closing:(o=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds)>=1&&(o=1,this._blinkingState=i.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),n=1-o;break;case i.EyeState_Closed:(o=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds)>=1&&(this._blinkingState=i.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),n=0;break;case i.EyeState_Opening:(o=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds)>=1&&(o=1,this._blinkingState=i.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),n=o;break;case i.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=i.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),n=1;break;case i.EyeState_First:default:this._blinkingState=i.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),n=1}CubismEyeBlink.CloseIfZero||(n=-n);for(var s=0;s<this._parameterIds.getSize();++s)t.setParameterValueById(this._parameterIds.at(s),n)},CubismEyeBlink.prototype.determinNextBlinkingTiming=function(){var t=Math.random();return this._userTimeSeconds+t*(2*this._blinkingIntervalSeconds-1)},CubismEyeBlink.CloseIfZero=!0,CubismEyeBlink}();t.CubismEyeBlink=r,function(t){t[t.EyeState_First=0]="EyeState_First",t[t.EyeState_Interval=1]="EyeState_Interval",t[t.EyeState_Closing=2]="EyeState_Closing",t[t.EyeState_Closed=3]="EyeState_Closed",t[t.EyeState_Opening=4]="EyeState_Opening"}(i=t.EyeState||(t.EyeState={}))}(ke||(ke={})),function(t){var i=function(){function csmRect(t,i,r,n){this.x=t,this.y=i,this.width=r,this.height=n}return csmRect.prototype.getCenterX=function(){return this.x+.5*this.width},csmRect.prototype.getCenterY=function(){return this.y+.5*this.height},csmRect.prototype.getRight=function(){return this.x+this.width},csmRect.prototype.getBottom=function(){return this.y+this.height},csmRect.prototype.setRect=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},csmRect.prototype.expand=function(t,i){this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i},csmRect}();t.csmRect=i}(Ee||(Ee={}));var Fe,Le=function(){var extendStatics=function(t,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},extendStatics(t,i)};return function(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),Re=T.Constant,De=w.CubismMatrix44,Ne=Ee.csmRect,Ue=u.csmMap,Oe=l.csmVector,Xe=I.CubismRenderer,Ge=I.CubismBlendMode,ze=I.CubismTextureColor;!function(t){var i,r,n,o=function(){function CubismClippingManager_WebGL(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new Oe,this._clippingContextListForDraw=new Oe,this._channelColors=new Oe,this._tmpBoundsOnModel=new Ne,this._tmpMatrix=new De,this._tmpMatrixForMask=new De,this._tmpMatrixForDraw=new De,this._maskTexture=null;var t=new ze;t.R=1,t.G=0,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new ze).R=0,t.G=1,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new ze).R=0,t.G=0,t.B=1,t.A=0,this._channelColors.pushBack(t),(t=new ze).R=0,t.G=0,t.B=0,t.A=1,this._channelColors.pushBack(t)}return CubismClippingManager_WebGL.prototype.getChannelFlagAsColor=function(t){return this._channelColors.at(t)},CubismClippingManager_WebGL.prototype.getMaskRenderTexture=function(){var t=0;if(this._maskTexture&&0!=this._maskTexture.texture&&(this._maskTexture.frameNo=this._currentFrameNo,t=this._maskTexture.texture),0==t){var i=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),t=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n),this._maskTexture=new s(this._currentFrameNo,t)}return t},CubismClippingManager_WebGL.prototype.setGL=function(t){this.gl=t},CubismClippingManager_WebGL.prototype.calcClippedDrawTotalBounds=function(t,i){for(var r=Number.MAX_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE,u=i._clippedDrawableIndexList.length,l=0;l<u;l++){for(var p=i._clippedDrawableIndexList[l],m=t.getDrawableVertexCount(p),y=t.getDrawableVertices(p),b=Number.MAX_VALUE,A=Number.MAX_VALUE,v=Number.MIN_VALUE,M=Number.MIN_VALUE,S=m*Re.vertexStep,x=Re.vertexOffset;x<S;x+=Re.vertexStep){var w=y[x],P=y[x+1];w<b&&(b=w),w>v&&(v=w),P<A&&(A=P),P>M&&(M=P)}if(b!=Number.MAX_VALUE)if(b<r&&(r=b),A<n&&(n=A),v>o&&(o=v),M>s&&(s=M),r==Number.MAX_VALUE)i._allClippedDrawRect.x=0,i._allClippedDrawRect.y=0,i._allClippedDrawRect.width=0,i._allClippedDrawRect.height=0,i._isUsing=!1;else{i._isUsing=!0;var V=o-r,I=s-n;i._allClippedDrawRect.x=r,i._allClippedDrawRect.y=n,i._allClippedDrawRect.width=V,i._allClippedDrawRect.height=I}}},CubismClippingManager_WebGL.prototype.release=function(){for(var t=0;t<this._clippingContextListForMask.getSize();t++)this._clippingContextListForMask.at(t)&&(this._clippingContextListForMask.at(t).release(),this._clippingContextListForMask.set(t,void 0)),this._clippingContextListForMask.set(t,null);this._clippingContextListForMask=null;for(t=0;t<this._clippingContextListForDraw.getSize();t++)this._clippingContextListForDraw.set(t,null);this._clippingContextListForDraw=null,this._maskTexture&&(this.gl.deleteFramebuffer(this._maskTexture.texture),this._maskTexture=null);for(t=0;t<this._channelColors.getSize();t++)this._channelColors.set(t,null);this._channelColors=null,this.gl.deleteTexture(this._colorBuffer),this._colorBuffer=null},CubismClippingManager_WebGL.prototype.initialize=function(t,i,r,n){for(var o=0;o<i;o++)if(n[o]<=0)this._clippingContextListForDraw.pushBack(null);else{var s=this.findSameClip(r[o],n[o]);null==s&&(s=new u(this,r[o],n[o]),this._clippingContextListForMask.pushBack(s)),s.addClippedDrawable(o),this._clippingContextListForDraw.pushBack(s)}},CubismClippingManager_WebGL.prototype.setupClippingContext=function(t,i){this._currentFrameNo++;for(var o=0,s=0;s<this._clippingContextListForMask.getSize();s++){var u=this._clippingContextListForMask.at(s);this.calcClippedDrawTotalBounds(t,u),u._isUsing&&o++}if(o>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture();i.getMvpMatrix();i.preDraw(),this.setupLayoutBounds(o),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(s=0;s<this._clippingContextListForMask.getSize();s++){var l=this._clippingContextListForMask.at(s),p=l._allClippedDrawRect,m=l._layoutBounds;this._tmpBoundsOnModel.setRect(p),this._tmpBoundsOnModel.expand(.05*p.width,.05*p.height);var y=m.width/this._tmpBoundsOnModel.width,b=m.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(m.x,m.y),this._tmpMatrix.scaleRelative(y,b),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(m.x,m.y),this._tmpMatrix.scaleRelative(y,b),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),l._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),l._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());for(var A=l._clippingIdCount,v=0;v<A;v++){var M=l._clippingIdList[v];t.getDrawableDynamicFlagVertexPositionsDidChange(M)&&(i.setIsCulling(0!=t.getDrawableCulling(M)),i.setClippingContextBufferForMask(l),i.drawMesh(t.getDrawableTextureIndices(M),t.getDrawableVertexIndexCount(M),t.getDrawableVertexCount(M),t.getDrawableVertexIndices(M),t.getDrawableVertices(M),t.getDrawableVertexUvs(M),t.getDrawableOpacity(M),Ge.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n),i.setClippingContextBufferForMask(null),this.gl.viewport(r[0],r[1],r[2],r[3])}},CubismClippingManager_WebGL.prototype.findSameClip=function(t,i){for(var r=0;r<this._clippingContextListForMask.getSize();r++){var n=this._clippingContextListForMask.at(r),o=n._clippingIdCount;if(o==i){for(var s=0,u=0;u<o;u++)for(var l=n._clippingIdList[u],p=0;p<o;p++)if(t[p]==l){s++;break}if(s==o)return n}}return null},CubismClippingManager_WebGL.prototype.setupLayoutBounds=function(t){var i=t/4,r=t%4;i=~~i,r=~~r;for(var n=0,o=0;o<4;o++){var s=i+(o<r?1:0);if(0==s);else if(1==s){var u=this._clippingContextListForMask.at(n++);u._layoutChannelNo=o,u._layoutBounds.x=0,u._layoutBounds.y=0,u._layoutBounds.width=1,u._layoutBounds.height=1}else if(2==s)for(var l=0;l<s;l++){p=~~(p=l%2),(y=this._clippingContextListForMask.at(n++))._layoutChannelNo=o,y._layoutBounds.x=.5*p,y._layoutBounds.y=0,y._layoutBounds.width=.5,y._layoutBounds.height=1}else if(s<=4)for(l=0;l<s;l++){p=~~(p=l%2),m=~~(m=l/2),(y=this._clippingContextListForMask.at(n++))._layoutChannelNo=o,y._layoutBounds.x=.5*p,y._layoutBounds.y=.5*m,y._layoutBounds.width=.5,y._layoutBounds.height=.5}else if(s<=9)for(l=0;l<s;l++){var p,m,y;p=~~(p=l%3),m=~~(m=l/3),(y=this._clippingContextListForMask.at(n++))._layoutChannelNo=o,y._layoutBounds.x=p/3,y._layoutBounds.y=m/3,y._layoutBounds.width=1/3,y._layoutBounds.height=1/3}else CubismLogError("not supported mask count : {0}",s)}},CubismClippingManager_WebGL.prototype.getColorBuffer=function(){return this._colorBuffer},CubismClippingManager_WebGL.prototype.getClippingContextListForDraw=function(){return this._clippingContextListForDraw},CubismClippingManager_WebGL.prototype.setClippingMaskBufferSize=function(t){this._clippingMaskBufferSize=t},CubismClippingManager_WebGL.prototype.getClippingMaskBufferSize=function(){return this._clippingMaskBufferSize},CubismClippingManager_WebGL}();t.CubismClippingManager_WebGL=o;var s=function s(t,i){this.frameNo=t,this.texture=i};t.CubismRenderTextureResource=s;var u=function(){function CubismClippingContext(t,i,r){this._owner=t,this._clippingIdList=i,this._clippingIdCount=r,this._allClippedDrawRect=new Ne,this._layoutBounds=new Ne,this._clippedDrawableIndexList=new Array,this._matrixForMask=new De,this._matrixForDraw=new De}return CubismClippingContext.prototype.release=function(){null!=this._layoutBounds&&(this._layoutBounds=null),null!=this._allClippedDrawRect&&(this._allClippedDrawRect=null),null!=this._clippedDrawableIndexList&&(this._clippedDrawableIndexList=null)},CubismClippingContext.prototype.addClippedDrawable=function(t){this._clippedDrawableIndexList.push(t)},CubismClippingContext.prototype.getClippingManager=function(){return this._owner},CubismClippingContext.prototype.setGl=function(t){this._owner.setGL(t)},CubismClippingContext}();t.CubismClippingContext=u;var l=function(){function CubismShader_WebGL(){this._shaderSets=new Oe}return CubismShader_WebGL.getInstance=function(){return null==i?i=new CubismShader_WebGL:i},CubismShader_WebGL.deleteInstance=function(){i&&(i.release(),i=null)},CubismShader_WebGL.prototype.release=function(){this.releaseShaderProgram()},CubismShader_WebGL.prototype.setupShaderProgram=function(t,i,r,n,o,s,u,l,y,b,A,v,M){var S,x,w,P;if(A||CubismLogError("NoPremultipliedAlpha is not allowed"),0==this._shaderSets.getSize()&&this.generateShaders(),null!=t.getClippingContextBufferForMask()){var V=this._shaderSets.at(p.ShaderNames_SetupMask);this.gl.useProgram(V.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(V.samplerTexture0Location,0),null==u.vertex&&(u.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(V.attributePositionLocation),this.gl.vertexAttribPointer(V.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==u.uv&&(u.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(V.attributeTexCoordLocation),this.gl.vertexAttribPointer(V.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);var I=t.getClippingContextBufferForMask()._layoutChannelNo,E=t.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(I);this.gl.uniform4f(V.uniformChannelFlagLocation,E.R,E.G,E.B,E.A),this.gl.uniformMatrix4fv(V.uniformClipMatrixLocation,!1,t.getClippingContextBufferForMask()._matrixForMask.getArray());var T=t.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(V.uniformBaseColorLocation,2*T.x-1,2*T.y-1,2*T.getRight()-1,2*T.getBottom()-1),S=this.gl.ZERO,x=this.gl.ONE_MINUS_SRC_COLOR,w=this.gl.ZERO,P=this.gl.ONE_MINUS_SRC_ALPHA}else{var F=null!=t.getClippingContextBufferForDraw(),L=F?M?2:1:0;V=new m;switch(y){case Ge.CubismBlendMode_Normal:default:V=this._shaderSets.at(p.ShaderNames_NormalPremultipliedAlpha+L),S=this.gl.ONE,x=this.gl.ONE_MINUS_SRC_ALPHA,w=this.gl.ONE,P=this.gl.ONE_MINUS_SRC_ALPHA;break;case Ge.CubismBlendMode_Additive:V=this._shaderSets.at(p.ShaderNames_AddPremultipliedAlpha+L),S=this.gl.ONE,x=this.gl.ONE,w=this.gl.ZERO,P=this.gl.ONE;break;case Ge.CubismBlendMode_Multiplicative:V=this._shaderSets.at(p.ShaderNames_MultPremultipliedAlpha+L),S=this.gl.DST_COLOR,x=this.gl.ONE_MINUS_SRC_ALPHA,w=this.gl.ZERO,P=this.gl.ONE}if(this.gl.useProgram(V.shaderProgram),null==u.vertex&&(u.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(V.attributePositionLocation),this.gl.vertexAttribPointer(V.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==u.uv&&(u.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(V.attributeTexCoordLocation),this.gl.vertexAttribPointer(V.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),F){this.gl.activeTexture(this.gl.TEXTURE1);var R=t.getClippingContextBufferForDraw().getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,R),this.gl.uniform1i(V.samplerTexture1Location,1),this.gl.uniformMatrix4fv(V.uniformClipMatrixLocation,!1,t.getClippingContextBufferForDraw()._matrixForDraw.getArray());I=t.getClippingContextBufferForDraw()._layoutChannelNo,E=t.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(I);this.gl.uniform4f(V.uniformChannelFlagLocation,E.R,E.G,E.B,E.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(V.samplerTexture0Location,0),this.gl.uniformMatrix4fv(V.uniformMatrixLocation,!1,v.getArray()),this.gl.uniform4f(V.uniformBaseColorLocation,b.R,b.G,b.B,b.A)}null==u.index&&(u.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,u.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(S,x,w,P)},CubismShader_WebGL.prototype.releaseShaderProgram=function(){for(var t=0;t<this._shaderSets.getSize();t++)this.gl.deleteProgram(this._shaderSets.at(t).shaderProgram),this._shaderSets.at(t).shaderProgram=0,this._shaderSets.set(t,void 0),this._shaderSets.set(t,null)},CubismShader_WebGL.prototype.generateShaders=function(){for(var i=0;i<10;i++)this._shaderSets.pushBack(new m);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcSetupMask,t.fragmentShaderSrcsetupMask),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(t.vertexShaderSrc,t.fragmentShaderSrcPremultipliedAlpha),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcMasked,t.fragmentShaderSrcMaskPremultipliedAlpha),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcMasked,t.fragmentShaderSrcMaskInvertedPremultipliedAlpha),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor")},CubismShader_WebGL.prototype.loadShaderProgram=function(t,i){var r=this.gl.createProgram(),n=this.compileShaderSource(this.gl.VERTEX_SHADER,t);if(!n)return CubismLogError("Vertex shader compile error!"),0;var o=this.compileShaderSource(this.gl.FRAGMENT_SHADER,i);return o?(this.gl.attachShader(r,n),this.gl.attachShader(r,o),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.gl.deleteShader(n),this.gl.deleteShader(o),r):(CubismLogError("Failed to link program: {0}",r),this.gl.deleteShader(n),n=0,this.gl.deleteShader(o),o=0,r&&(this.gl.deleteProgram(r),r=0),0)):(CubismLogError("Vertex shader compile error!"),0)},CubismShader_WebGL.prototype.compileShaderSource=function(t,i){var r=i,n=this.gl.createShader(t);if(this.gl.shaderSource(n,r),this.gl.compileShader(n),!n){var o=this.gl.getShaderInfoLog(n);CubismLogError("Shader compile log: {0} ",o)}return this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:(this.gl.deleteShader(n),null)},CubismShader_WebGL.prototype.setGl=function(t){this.gl=t},CubismShader_WebGL}();t.CubismShader_WebGL=l;var p,m=function m(){};t.CubismShaderSet=m,function(t){t[t.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",t[t.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",t[t.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",t[t.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",t[t.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",t[t.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted"}(p=t.ShaderNames||(t.ShaderNames={})),t.vertexShaderSrcSetupMask="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.fragmentShaderSrcsetupMask="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",t.vertexShaderSrc="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.vertexShaderSrcMasked="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.fragmentShaderSrcPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",t.fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",t.fragmentShaderSrcMaskInvertedPremultipliedAlpha="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";var y=function(t){function CubismRenderer_WebGL(){var i=t.call(this)||this;return i._clippingContextBufferForMask=null,i._clippingContextBufferForDraw=null,i._clippingManager=new o,i.firstDraw=!0,i._textures=new Ue,i._sortedDrawableIndexList=new Oe,i._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},i._textures.prepareCapacity(32,!0),i}return Le(CubismRenderer_WebGL,t),CubismRenderer_WebGL.prototype.initialize=function(i){i.isUsingMasking()&&(this._clippingManager=new o,this._clippingManager.initialize(i,i.getDrawableCount(),i.getDrawableMasks(),i.getDrawableMaskCounts())),this._sortedDrawableIndexList.resize(i.getDrawableCount(),0),t.prototype.initialize.call(this,i)},CubismRenderer_WebGL.prototype.bindTexture=function(t,i){this._textures.setValue(t,i)},CubismRenderer_WebGL.prototype.getBindedTextures=function(){return this._textures},CubismRenderer_WebGL.prototype.setClippingMaskBufferSize=function(t){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new o,this._clippingManager.setClippingMaskBufferSize(t),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())},CubismRenderer_WebGL.prototype.getClippingMaskBufferSize=function(){return this._clippingManager.getClippingMaskBufferSize()},CubismRenderer_WebGL.prototype.release=function(){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null},CubismRenderer_WebGL.prototype.doDrawModel=function(){null!=this._clippingManager&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();for(var t=this.getModel().getDrawableCount(),i=this.getModel().getDrawableRenderOrders(),r=0;r<t;++r){var n=i[r];this._sortedDrawableIndexList.set(n,r)}for(r=0;r<t;++r){var o=this._sortedDrawableIndexList.at(r);this.getModel().getDrawableDynamicFlagIsVisible(o)&&(this.setClippingContextBufferForDraw(null!=this._clippingManager?this._clippingManager.getClippingContextListForDraw().at(o):null),this.setIsCulling(this.getModel().getDrawableCulling(o)),this.drawMesh(this.getModel().getDrawableTextureIndices(o),this.getModel().getDrawableVertexIndexCount(o),this.getModel().getDrawableVertexCount(o),this.getModel().getDrawableVertexIndices(o),this.getModel().getDrawableVertices(o),this.getModel().getDrawableVertexUvs(o),this.getModel().getDrawableOpacity(o),this.getModel().getDrawableBlendMode(o),this.getModel().getDrawableInvertedMaskBit(o)))}},CubismRenderer_WebGL.prototype.drawMesh=function(t,i,r,n,o,s,u,p,m){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);var y,b=this.getModelColor();null==this.getClippingContextBufferForMask()&&(b.A*=u,this.isPremultipliedAlpha()&&(b.R*=b.A,b.G*=b.A,b.B*=b.A)),y=null!=this._textures.getValue(t)?this._textures.getValue(t):null,l.getInstance().setupShaderProgram(this,y,r,o,n,s,this._bufferData,u,p,b,this.isPremultipliedAlpha(),this.getMvpMatrix(),m),this.gl.drawElements(this.gl.TRIANGLES,i,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)},CubismRenderer_WebGL.doStaticRelease=function(){l.deleteInstance()},CubismRenderer_WebGL.prototype.setRenderState=function(t,i){n=t,r=i},CubismRenderer_WebGL.prototype.preDraw=function(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)},CubismRenderer_WebGL.prototype.setClippingContextBufferForMask=function(t){this._clippingContextBufferForMask=t},CubismRenderer_WebGL.prototype.getClippingContextBufferForMask=function(){return this._clippingContextBufferForMask},CubismRenderer_WebGL.prototype.setClippingContextBufferForDraw=function(t){this._clippingContextBufferForDraw=t},CubismRenderer_WebGL.prototype.getClippingContextBufferForDraw=function(){return this._clippingContextBufferForDraw},CubismRenderer_WebGL.prototype.startUp=function(t){this.gl=t,this._clippingManager.setGL(t),l.getInstance().setGl(t)},CubismRenderer_WebGL}(Xe);t.CubismRenderer_WebGL=y,Xe.staticRelease=function(){y.doStaticRelease()}}(Fe||(Fe={}));var Je,Ye,je=Fe.CubismRenderer_WebGL,We=ke.CubismEyeBlink,He=Ce.CubismBreath,Qe=T.Constant,qe=be.CubismPhysics,Ze=se.CubismModelUserData,Ke=te.CubismPose,$e=Ht.CubismExpressionMotion,ti=Ft.CubismMotion,ei=xt.CubismMoc,ii=mt.CubismModelMatrix,ri=pt.CubismTargetPoint,ni=ht.CubismMotionManager;!function(t){var i=function(){function CubismUserModel(){this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new ni,this._motionManager.setEventCallback(CubismUserModel.cubismDefaultMotionEventCallback,this),this._expressionManager=new ni,this._dragManager=new ri}return CubismUserModel.prototype.isInitialized=function(){return this._initialized},CubismUserModel.prototype.setInitialized=function(t){this._initialized=t},CubismUserModel.prototype.isUpdating=function(){return this._updating},CubismUserModel.prototype.setUpdating=function(t){this._updating=t},CubismUserModel.prototype.setDragging=function(t,i){this._dragManager.set(t,i)},CubismUserModel.prototype.setAcceleration=function(t,i,r){this._accelerationX=t,this._accelerationY=i,this._accelerationZ=r},CubismUserModel.prototype.getModelMatrix=function(){return this._modelMatrix},CubismUserModel.prototype.setOpacity=function(t){this._opacity=t},CubismUserModel.prototype.getOpacity=function(){return this._opacity},CubismUserModel.prototype.loadModel=function(t){this._moc=ei.create(t),this._model=this._moc.createModel(),this._model.saveParameters(),null!=this._moc&&null!=this._model?this._modelMatrix=new ii(this._model.getCanvasWidth(),this._model.getCanvasHeight()):CubismLogError("Failed to CreateModel().")},CubismUserModel.prototype.loadMotion=function(t,i,r){return ti.create(t,i)},CubismUserModel.prototype.loadExpression=function(t,i,r){return $e.create(t,i)},CubismUserModel.prototype.loadPose=function(t,i){this._pose=Ke.create(t,i)},CubismUserModel.prototype.loadUserData=function(t,i){this._modelUserData=Ze.create(t,i)},CubismUserModel.prototype.loadPhysics=function(t,i){this._physics=qe.create(t,i)},CubismUserModel.prototype.isHit=function(t,i,r){var n=this._model.getDrawableIndex(t);if(n<0)return{hit:!1,area:0};for(var o=this._model.getDrawableVertexCount(n),s=this._model.getDrawableVertices(n),u=s[0],l=s[0],p=s[1],m=s[1],y=1;y<o;++y){var b=s[Qe.vertexOffset+y*Qe.vertexStep],A=s[Qe.vertexOffset+y*Qe.vertexStep+1];b<u&&(u=b),b>l&&(l=b),A<p&&(p=A),A>m&&(m=A)}var v=this._modelMatrix.invertTransformX(i),M=this._modelMatrix.invertTransformY(r);return{hit:u<=v&&v<=l&&p<=M&&M<=m,area:Math.abs(u-l)*Math.abs(m-p)}},CubismUserModel.prototype.getModel=function(){return this._model},CubismUserModel.prototype.getRenderer=function(){return this._renderer},CubismUserModel.prototype.createRenderer=function(){this._renderer&&this.deleteRenderer(),this._renderer=new je,this._renderer.initialize(this._model)},CubismUserModel.prototype.deleteRenderer=function(){null!=this._renderer&&(this._renderer.release(),this._renderer=null)},CubismUserModel.prototype.motionEventFired=function(t){CubismLogInfo("{0}",t.s)},CubismUserModel.cubismDefaultMotionEventCallback=function(t,i,r){null!=r&&r.motionEventFired(i)},CubismUserModel.prototype.release=function(){null!=this._motionManager&&(this._motionManager.release(),this._motionManager=null),null!=this._expressionManager&&(this._expressionManager.release(),this._expressionManager=null),null!=this._moc&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,Ke.delete(this._pose),We.delete(this._eyeBlink),He.delete(this._breath),this._dragManager=null,qe.delete(this._physics),Ze.delete(this._modelUserData),this.deleteRenderer()},CubismUserModel}();t.CubismUserModel=i}(Je||(Je={})),function(t){var i=function i(){};t.ICubismModelSetting=i}(Ye||(Ye={}));var ai,oi,si,ui=function(){var extendStatics=function(t,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},extendStatics(t,i)};return function(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),li=l.csmVector,ci=T.CubismFramework,hi=m.CubismJson,gi=Ye.ICubismModelSetting;!function(t){var i,r="FileReferences",n="UserData",o="Name",s="File",u="Ids",l="Sound",p="FadeInTime",m="FadeOutTime",y="LipSync",b="EyeBlink";!function(t){t[t.FrequestNode_Groups=0]="FrequestNode_Groups",t[t.FrequestNode_Moc=1]="FrequestNode_Moc",t[t.FrequestNode_Motions=2]="FrequestNode_Motions",t[t.FrequestNode_Expressions=3]="FrequestNode_Expressions",t[t.FrequestNode_Textures=4]="FrequestNode_Textures",t[t.FrequestNode_Physics=5]="FrequestNode_Physics",t[t.FrequestNode_Pose=6]="FrequestNode_Pose",t[t.FrequestNode_HitAreas=7]="FrequestNode_HitAreas"}(i||(i={}));var A=function(t){function CubismModelSettingJson(i,n){var o=t.call(this)||this;return o._json=hi.create(i,n),o._json&&(o._jsonValue=new li,o._jsonValue.pushBack(o._json.getRoot().getValueByString("Groups")),o._jsonValue.pushBack(o._json.getRoot().getValueByString(r).getValueByString("Moc")),o._jsonValue.pushBack(o._json.getRoot().getValueByString(r).getValueByString("Motions")),o._jsonValue.pushBack(o._json.getRoot().getValueByString(r).getValueByString("Expressions")),o._jsonValue.pushBack(o._json.getRoot().getValueByString(r).getValueByString("Textures")),o._jsonValue.pushBack(o._json.getRoot().getValueByString(r).getValueByString("Physics")),o._jsonValue.pushBack(o._json.getRoot().getValueByString(r).getValueByString("Pose")),o._jsonValue.pushBack(o._json.getRoot().getValueByString("HitAreas"))),o}return ui(CubismModelSettingJson,t),CubismModelSettingJson.prototype.release=function(){hi.delete(this._json),this._jsonValue=null},CubismModelSettingJson.prototype.GetJson=function(){return this._json},CubismModelSettingJson.prototype.getModelFileName=function(){return this.isExistModelFile()?this._jsonValue.at(i.FrequestNode_Moc).getRawString():""},CubismModelSettingJson.prototype.getTextureCount=function(){return this.isExistTextureFiles()?this._jsonValue.at(i.FrequestNode_Textures).getSize():0},CubismModelSettingJson.prototype.getTextureDirectory=function(){return this._jsonValue.at(i.FrequestNode_Textures).getRawString()},CubismModelSettingJson.prototype.getTextureFileName=function(t){return this._jsonValue.at(i.FrequestNode_Textures).getValueByIndex(t).getRawString()},CubismModelSettingJson.prototype.getHitAreasCount=function(){return this.isExistHitAreas()?this._jsonValue.at(i.FrequestNode_HitAreas).getSize():0},CubismModelSettingJson.prototype.getHitAreaId=function(t){return ci.getIdManager().getId(this._jsonValue.at(i.FrequestNode_HitAreas).getValueByIndex(t).getValueByString("Id").getRawString())},CubismModelSettingJson.prototype.getHitAreaName=function(t){return this._jsonValue.at(i.FrequestNode_HitAreas).getValueByIndex(t).getValueByString(o).getRawString()},CubismModelSettingJson.prototype.getPhysicsFileName=function(){return this.isExistPhysicsFile()?this._jsonValue.at(i.FrequestNode_Physics).getRawString():""},CubismModelSettingJson.prototype.getPoseFileName=function(){return this.isExistPoseFile()?this._jsonValue.at(i.FrequestNode_Pose).getRawString():""},CubismModelSettingJson.prototype.getExpressionCount=function(){return this.isExistExpressionFile()?this._jsonValue.at(i.FrequestNode_Expressions).getSize():0},CubismModelSettingJson.prototype.getExpressionName=function(t){return this._jsonValue.at(i.FrequestNode_Expressions).getValueByIndex(t).getValueByString(o).getRawString()},CubismModelSettingJson.prototype.getExpressionFileName=function(t){return this._jsonValue.at(i.FrequestNode_Expressions).getValueByIndex(t).getValueByString(s).getRawString()},CubismModelSettingJson.prototype.getMotionGroupCount=function(){return this.isExistMotionGroups()?this._jsonValue.at(i.FrequestNode_Motions).getKeys().getSize():0},CubismModelSettingJson.prototype.getMotionGroupName=function(t){return this.isExistMotionGroups()?this._jsonValue.at(i.FrequestNode_Motions).getKeys().at(t):null},CubismModelSettingJson.prototype.getMotionCount=function(t){return this.isExistMotionGroupName(t)?this._jsonValue.at(i.FrequestNode_Motions).getValueByString(t).getSize():0},CubismModelSettingJson.prototype.getMotionFileName=function(t,r){return this.isExistMotionGroupName(t)?this._jsonValue.at(i.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString(s).getRawString():""},CubismModelSettingJson.prototype.getMotionSoundFileName=function(t,r){return this.isExistMotionSoundFile(t,r)?this._jsonValue.at(i.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString(l).getRawString():""},CubismModelSettingJson.prototype.getMotionFadeInTimeValue=function(t,r){return this.isExistMotionFadeIn(t,r)?this._jsonValue.at(i.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString(p).toFloat():-1},CubismModelSettingJson.prototype.getMotionFadeOutTimeValue=function(t,r){return this.isExistMotionFadeOut(t,r)?this._jsonValue.at(i.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString(m).toFloat():-1},CubismModelSettingJson.prototype.getUserDataFile=function(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(r).getValueByString(n).getRawString():""},CubismModelSettingJson.prototype.getLayoutMap=function(t){var i=this._json.getRoot().getValueByString("Layout").getMap();if(null==i)return!1;for(var r=!1,n=i.begin();n.notEqual(i.end());n.preIncrement())t.setValue(n.ptr().first,n.ptr().second.toFloat()),r=!0;return r},CubismModelSettingJson.prototype.getEyeBlinkParameterCount=function(){if(!this.isExistEyeBlinkParameters())return 0;for(var t=0,r=0;r<this._jsonValue.at(i.FrequestNode_Groups).getSize();r++){var n=this._jsonValue.at(i.FrequestNode_Groups).getValueByIndex(r);if(!n.isNull()&&!n.isError()&&n.getValueByString(o).getRawString()==b){t=n.getValueByString(u).getVector().getSize();break}}return t},CubismModelSettingJson.prototype.getEyeBlinkParameterId=function(t){if(!this.isExistEyeBlinkParameters())return null;for(var r=0;r<this._jsonValue.at(i.FrequestNode_Groups).getSize();r++){var n=this._jsonValue.at(i.FrequestNode_Groups).getValueByIndex(r);if(!n.isNull()&&!n.isError()&&n.getValueByString(o).getRawString()==b)return ci.getIdManager().getId(n.getValueByString(u).getValueByIndex(t).getRawString())}return null},CubismModelSettingJson.prototype.getLipSyncParameterCount=function(){if(!this.isExistLipSyncParameters())return 0;for(var t=0,r=0;r<this._jsonValue.at(i.FrequestNode_Groups).getSize();r++){var n=this._jsonValue.at(i.FrequestNode_Groups).getValueByIndex(r);if(!n.isNull()&&!n.isError()&&n.getValueByString(o).getRawString()==y){t=n.getValueByString(u).getVector().getSize();break}}return t},CubismModelSettingJson.prototype.getLipSyncParameterId=function(t){if(!this.isExistLipSyncParameters())return null;for(var r=0;r<this._jsonValue.at(i.FrequestNode_Groups).getSize();r++){var n=this._jsonValue.at(i.FrequestNode_Groups).getValueByIndex(r);if(!n.isNull()&&!n.isError()&&n.getValueByString(o).getRawString()==y)return ci.getIdManager().getId(n.getValueByString(u).getValueByIndex(t).getRawString())}return null},CubismModelSettingJson.prototype.isExistModelFile=function(){var t=this._jsonValue.at(i.FrequestNode_Moc);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistTextureFiles=function(){var t=this._jsonValue.at(i.FrequestNode_Textures);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistHitAreas=function(){var t=this._jsonValue.at(i.FrequestNode_HitAreas);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistPhysicsFile=function(){var t=this._jsonValue.at(i.FrequestNode_Physics);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistPoseFile=function(){var t=this._jsonValue.at(i.FrequestNode_Pose);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistExpressionFile=function(){var t=this._jsonValue.at(i.FrequestNode_Expressions);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistMotionGroups=function(){var t=this._jsonValue.at(i.FrequestNode_Motions);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistMotionGroupName=function(t){var r=this._jsonValue.at(i.FrequestNode_Motions).getValueByString(t);return!r.isNull()&&!r.isError()},CubismModelSettingJson.prototype.isExistMotionSoundFile=function(t,r){var n=this._jsonValue.at(i.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString(l);return!n.isNull()&&!n.isError()},CubismModelSettingJson.prototype.isExistMotionFadeIn=function(t,r){var n=this._jsonValue.at(i.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString(p);return!n.isNull()&&!n.isError()},CubismModelSettingJson.prototype.isExistMotionFadeOut=function(t,r){var n=this._jsonValue.at(i.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString(m);return!n.isNull()&&!n.isError()},CubismModelSettingJson.prototype.isExistUserDataFile=function(){var t=this._json.getRoot().getValueByString(r).getValueByString(n);return!t.isNull()&&!t.isError()},CubismModelSettingJson.prototype.isExistEyeBlinkParameters=function(){if(this._jsonValue.at(i.FrequestNode_Groups).isNull()||this._jsonValue.at(i.FrequestNode_Groups).isError())return!1;for(var t=0;t<this._jsonValue.at(i.FrequestNode_Groups).getSize();++t)if(this._jsonValue.at(i.FrequestNode_Groups).getValueByIndex(t).getValueByString(o).getRawString()==b)return!0;return!1},CubismModelSettingJson.prototype.isExistLipSyncParameters=function(){if(this._jsonValue.at(i.FrequestNode_Groups).isNull()||this._jsonValue.at(i.FrequestNode_Groups).isError())return!1;for(var t=0;t<this._jsonValue.at(i.FrequestNode_Groups).getSize();++t)if(this._jsonValue.at(i.FrequestNode_Groups).getValueByIndex(t).getValueByString(o).getRawString()==y)return!0;return!1},CubismModelSettingJson}(gi);t.CubismModelSettingJson=A}(ai||(ai={})),function(t){t.HitAreaPrefix="HitArea",t.HitAreaHead="Head",t.HitAreaBody="Body",t.PartsIdCore="Parts01Core",t.PartsArmPrefix="Parts01Arm_",t.PartsArmLPrefix="Parts01ArmL_",t.PartsArmRPrefix="Parts01ArmR_",t.ParamAngleX="ParamAngleX",t.ParamAngleY="ParamAngleY",t.ParamAngleZ="ParamAngleZ",t.ParamEyeLOpen="ParamEyeLOpen",t.ParamEyeLSmile="ParamEyeLSmile",t.ParamEyeROpen="ParamEyeROpen",t.ParamEyeRSmile="ParamEyeRSmile",t.ParamEyeBallX="ParamEyeBallX",t.ParamEyeBallY="ParamEyeBallY",t.ParamEyeBallForm="ParamEyeBallForm",t.ParamBrowLY="ParamBrowLY",t.ParamBrowRY="ParamBrowRY",t.ParamBrowLX="ParamBrowLX",t.ParamBrowRX="ParamBrowRX",t.ParamBrowLAngle="ParamBrowLAngle",t.ParamBrowRAngle="ParamBrowRAngle",t.ParamBrowLForm="ParamBrowLForm",t.ParamBrowRForm="ParamBrowRForm",t.ParamMouthForm="ParamMouthForm",t.ParamMouthOpenY="ParamMouthOpenY",t.ParamCheek="ParamCheek",t.ParamBodyAngleX="ParamBodyAngleX",t.ParamBodyAngleY="ParamBodyAngleY",t.ParamBodyAngleZ="ParamBodyAngleZ",t.ParamBreath="ParamBreath",t.ParamArmLA="ParamArmLA",t.ParamArmRA="ParamArmRA",t.ParamArmLB="ParamArmLB",t.ParamArmRB="ParamArmRB",t.ParamHandL="ParamHandL",t.ParamHandR="ParamHandR",t.ParamHairFront="ParamHairFront",t.ParamHairSide="ParamHairSide",t.ParamHairBack="ParamHairBack",t.ParamHairFluffy="ParamHairFluffy",t.ParamShoulderY="ParamShoulderY",t.ParamBustX="ParamBustX",t.ParamBustY="ParamBustY",t.ParamBaseX="ParamBaseX",t.ParamBaseY="ParamBaseY",t.ParamNONE="NONE:"}(oi||(oi={})),function(t){var i=function(){function CubismString(){}return CubismString.getFormatedString=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=t;return n.replace(/\{(\d+)\}/g,(function(t,r){return i[r]}))},CubismString.isStartWith=function(t,i){for(var r=0,n=0;"\0"!=i[n];)if("\0"==t[r]||t[r++]!=i[n++])return!1;return!1},CubismString.stringToFloat=function(t,i,r,n){var o=r,s=!1,u=!1,l=0,p=parseInt(t[o]);for(p<0&&(s=!0,o++);o<i;o++){var m=t[o];if(!(0<=parseInt(m)&&parseInt(m)<=9)){if("."==m){u=!0,o++;break}break}l=10*l+(parseInt(m)-0)}if(u)for(var y=.1;o<i&&(0<=(p=255&parseFloat(t[o]))&&p<=9)&&(l+=y*(p-0),y*=.1,p);o++);return o==r?(n[0]=-1,0):(s&&(l=-l),n[0]=o,l)},CubismString}();t.CubismString=i}(si||(si={}));var fi,pi=function(){var extendStatics=function(t,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},extendStatics(t,i)};return function(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),Model_awaiter=function(t,i,r,n){return new(r||(r=Promise))((function(o,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n.throw(t))}catch(t){s(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof r?t:new r((function(i){i(t)}))}(t.value).then(fulfilled,rejected)}step((n=n.apply(t,i||[])).next())}))},Model_generator=function(t,i){var r,n,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(s){return function(l){return function step(s){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,n=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=i.call(t,u)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},di=ut.InvalidMotionQueueEntryHandleValue,mi=si.CubismString,_i=u.csmMap,yi=l.csmVector,bi=Ce.CubismBreath,Ci=Ce.BreathParameterData,Ai=ke.CubismEyeBlink,vi=rt.ACubismMotion,Mi=T.CubismFramework,Si=Je.CubismUserModel,xi=ai.CubismModelSettingJson,wi=oi,Bi=w.CubismMatrix44;!function(t){t[t.LoadAssets=0]="LoadAssets",t[t.LoadModel=1]="LoadModel",t[t.WaitLoadModel=2]="WaitLoadModel",t[t.LoadExpression=3]="LoadExpression",t[t.WaitLoadExpression=4]="WaitLoadExpression",t[t.LoadPhysics=5]="LoadPhysics",t[t.WaitLoadPhysics=6]="WaitLoadPhysics",t[t.LoadPose=7]="LoadPose",t[t.WaitLoadPose=8]="WaitLoadPose",t[t.SetupEyeBlink=9]="SetupEyeBlink",t[t.SetupBreath=10]="SetupBreath",t[t.LoadUserData=11]="LoadUserData",t[t.WaitLoadUserData=12]="WaitLoadUserData",t[t.SetupEyeBlinkIds=13]="SetupEyeBlinkIds",t[t.SetupLipSyncIds=14]="SetupLipSyncIds",t[t.SetupLayout=15]="SetupLayout",t[t.LoadMotion=16]="LoadMotion",t[t.WaitLoadMotion=17]="WaitLoadMotion",t[t.CompleteInitialize=18]="CompleteInitialize",t[t.CompleteSetupModel=19]="CompleteSetupModel",t[t.LoadTexture=20]="LoadTexture",t[t.WaitLoadTexture=21]="WaitLoadTexture",t[t.CompleteSetup=22]="CompleteSetup"}(fi||(fi={}));var Pi,Vi=function(t){function Model(i,r,n){var o=t.call(this)||this;return o._setting=i,o._textureManager=r,o._webgl=n,o._viewMatrix=new Bi,o.s_currentFrame=0,o.s_lastFrame=0,o.s_deltaTime=0,o._modelSetting=null,o._userTimeSeconds=0,o._eyeBlinkIds=new yi,o._lipSyncIds=new yi,o._motions=new _i,o._expressions=new _i,o._hitArea=new yi,o._userArea=new yi,o._idParamAngleX=Mi.getIdManager().getId(wi.ParamAngleX),o._idParamAngleY=Mi.getIdManager().getId(wi.ParamAngleY),o._idParamAngleZ=Mi.getIdManager().getId(wi.ParamAngleZ),o._idParamEyeBallX=Mi.getIdManager().getId(wi.ParamEyeBallX),o._idParamEyeBallY=Mi.getIdManager().getId(wi.ParamEyeBallY),o._idParamBodyAngleX=Mi.getIdManager().getId(wi.ParamBodyAngleX),o._state=fi.LoadAssets,o._expressionCount=0,o._textureCount=0,o.loadAssets(o._setting.modelBuffer),o}return pi(Model,t),Model.prototype.loadAssets=function(t){return Model_awaiter(this,void 0,void 0,(function(){var i,r;return Model_generator(this,(function(n){return i=t.byteLength,r=new xi(t,i),this._state=fi.LoadModel,this.setupModel(r),[2]}))}))},Model.prototype.setupModel=function(t){return Model_awaiter(this,void 0,void 0,(function(){var i,r,o,s,u,l,p,m,y,b,A,v,M,S,x,w,P,V,I,E,T,F;return Model_generator(this,(function(L){switch(L.label){case 0:return this._updating=!0,this._initialized=!1,this._modelSetting=t,""==this._modelSetting.getModelFileName()?[3,20]:(this._state=fi.WaitLoadModel,i=this._modelSetting.getModelFileName(),i=this._setting.baseUrl+i,[4,n.getArraybuffer(i)]);case 1:if(r=L.sent(),this.loadModel(r),this._state=fi.LoadExpression,!(this._modelSetting.getExpressionCount()>0))return[3,5];this._state=fi.WaitLoadExpression,o=this._modelSetting.getExpressionCount(),T=0,L.label=2;case 2:return T<o?(s=this._modelSetting.getExpressionName(T),u=this._modelSetting.getExpressionFileName(T),u=this._setting.baseUrl+u,[4,n.getArraybuffer(u)]):[3,5];case 3:l=L.sent(),p=l.byteLength,m=this.loadExpression(l,p,s),null!=this._expressions.getValue(s)&&(vi.delete(this._expressions.getValue(s)),this._expressions.setValue(s,null)),this._expressions.setValue(s,m),this._expressionCount++,L.label=4;case 4:return T++,[3,2];case 5:return this._state=fi.LoadPhysics,""==this._modelSetting.getPhysicsFileName()?[3,7]:(this._state=fi.WaitLoadPhysics,y=this._modelSetting.getPhysicsFileName(),y=this._setting.baseUrl+y,[4,n.getArraybuffer(y)]);case 6:b=L.sent(),A=b.byteLength,this.loadPhysics(b,A),L.label=7;case 7:return this._state=fi.LoadPose,""==this._modelSetting.getPoseFileName()?[3,9]:(this._state=fi.WaitLoadPose,v=this._modelSetting.getPoseFileName(),v=this._setting.baseUrl+v,[4,n.getArraybuffer(v)]);case 8:M=L.sent(),S=M.byteLength,this.loadPose(M,S),L.label=9;case 9:return this._state=fi.SetupEyeBlink,this._modelSetting.getEyeBlinkParameterCount()>0&&(this._eyeBlink=Ai.create(this._modelSetting)),this._state=fi.SetupBreath,this._breath=bi.create(),(x=new yi).pushBack(new Ci(this._idParamAngleX,0,15,6.5345,.5)),x.pushBack(new Ci(this._idParamAngleY,0,8,3.5345,.5)),x.pushBack(new Ci(this._idParamAngleZ,0,10,5.5345,.5)),x.pushBack(new Ci(this._idParamBodyAngleX,0,4,15.5345,.5)),x.pushBack(new Ci(Mi.getIdManager().getId(wi.ParamBreath),0,.5,3.2345,.5)),this._breath.setParameters(x),this._state=fi.LoadUserData,""==this._modelSetting.getUserDataFile()?[3,11]:(this._state=fi.WaitLoadUserData,w=this._modelSetting.getUserDataFile(),w=this._setting.baseUrl+w,[4,n.getArraybuffer(w)]);case 10:P=L.sent(),V=P.byteLength,this.loadUserData(P,V),L.label=11;case 11:for(this._state=fi.SetupEyeBlinkIds,I=this._modelSetting.getEyeBlinkParameterCount(),T=0;T<I;++T)this._eyeBlinkIds.pushBack(this._modelSetting.getEyeBlinkParameterId(T));for(this._state=fi.SetupLipSyncIds,E=this._modelSetting.getLipSyncParameterCount(),T=0;T<E;++T)this._lipSyncIds.pushBack(this._modelSetting.getLipSyncParameterId(T));switch(this._state=fi.SetupLayout,F=new _i,this._modelSetting.getLayoutMap(F),this._modelMatrix.setupFromLayout(F),this._setting.motionLoadMode){case"greedy":return[3,12];case"textures_first":return[3,15]}return[3,17];case 12:return this._state=fi.LoadMotion,this._state=fi.WaitLoadMotion,[4,this.setupMotion()];case 13:return L.sent(),[4,this.setupTextures()];case 14:return L.sent(),this._state=fi.CompleteSetup,[3,19];case 15:return[4,this.setupTextures()];case 16:return L.sent(),this._state=fi.CompleteSetup,this.setupMotion(),[3,19];case 17:return[4,this.setupTextures()];case 18:L.sent(),this._state=fi.CompleteSetup,L.label=19;case 19:return[3,20];case 20:return[2]}}))}))},Model.prototype.setupMotion=function(){return Model_awaiter(this,void 0,void 0,(function(){var t,i,r,n,o,s=this;return Model_generator(this,(function(u){switch(u.label){case 0:for(this._model.saveParameters(),t=this._modelSetting.getMotionGroupCount(),i=[],r=0;r<t;r++)for(n=this._modelSetting.getMotionGroupName(r),o=0;o<this._modelSetting.getMotionCount(n);o++)i.push(this.registerMotion(n,o));return[4,Promise.all(i).then((function(){s._motionManager.stopAllMotions()}))];case 1:return u.sent(),[2]}}))}))},Model.prototype.setupTextures=function(){return Model_awaiter(this,void 0,void 0,(function(){var t,i,r,n,o;return Model_generator(this,(function(s){switch(s.label){case 0:t=!0,this._state=fi.LoadTexture,this._updating=!1,this._initialized=!0,this.createRenderer(),this._state=fi.WaitLoadTexture,i=this._modelSetting.getTextureCount(),r=0,s.label=1;case 1:return r<i?""==this._modelSetting.getTextureFileName(r)?(console.log("getTextureFileName null"),[3,3]):(n=this._modelSetting.getTextureFileName(r),n=this._setting.baseUrl+n,[4,this._textureManager.createTextureFromPngFile(n,t)]):[3,4];case 2:o=s.sent(),this.getRenderer().bindTexture(r,o.id),this._textureCount++,this.getRenderer().setIsPremultipliedAlpha(t),this.getRenderer().startUp(this._webgl.gl),s.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},Model.prototype.reloadRenderer=function(){this.deleteRenderer(),this.createRenderer(),this.setupTextures()},Model.prototype.registerMotion=function(t,r){return Model_awaiter(this,void 0,void 0,(function(){var n,o=this;return Model_generator(this,(function(s){return n=this._modelSetting.getMotionFileName(t,r),i.log("register motion: "+n+" => ["+t+"_"+r+"]",!0),[2,this.preLoadMotion(n).then((function(s){var u=mi.getFormatedString("{0}_{1}",t,r);i.log("load motion complete: "+n+" => ["+t+"_"+r+"]",!0);var l=s.byteLength,p=o.loadMotion(s,l,u),m=o._modelSetting.getMotionFadeInTimeValue(t,r);return m>=0&&p.setFadeInTime(m),(m=o._modelSetting.getMotionFadeOutTimeValue(t,r))>=0&&p.setFadeOutTime(m),p.setEffectIds(o._eyeBlinkIds,o._lipSyncIds),null!=o._motions.getValue(u)&&vi.delete(o._motions.getValue(u)),o._motions.setValue(u,p),i.log("motion parse complete: "+n+" => ["+t+"_"+r+"]",!0),p}))]}))}))},Model.prototype.update=function(){if(this._state==fi.CompleteSetup){var t=this.s_deltaTime;this._userTimeSeconds+=t,this._dragManager.update(t),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY();var i=!1;if(this._model.loadParameters(),this._motionManager.isFinished()?this.startRandomMotion(this._setting.idle,this._setting.Priority.Idle):i=this._motionManager.updateMotion(this._model,t),this._model.saveParameters(),i||null!=this._eyeBlink&&this._eyeBlink.updateParameters(this._model,t),null!=this._expressionManager&&this._expressionManager.updateMotion(this._model,t),this._model.addParameterValueById(this._idParamAngleX,30*this._dragX),this._model.addParameterValueById(this._idParamAngleY,30*this._dragY),this._model.addParameterValueById(this._idParamAngleZ,this._dragX*this._dragY*-30),this._model.addParameterValueById(this._idParamBodyAngleX,10*this._dragX),this._model.addParameterValueById(this._idParamEyeBallX,this._dragX),this._model.addParameterValueById(this._idParamEyeBallY,this._dragY),null!=this._breath&&this._breath.updateParameters(this._model,t),null!=this._physics&&this._physics.evaluate(this._model,t),this._lipsync)for(var r=0;r<this._lipSyncIds.getSize();++r)this._model.addParameterValueById(this._lipSyncIds.at(r),0,.8);null!=this._pose&&this._pose.updateParameters(this._model,t),this._model.update()}},Model.prototype.startMotion=function(t,r,n){var o=this;if(n==this._setting.Priority.Force)this._motionManager.setReservePriority(n);else if(!this._motionManager.reserveMotion(n))return i.log("can't start motion.",!0),di;this._modelSetting.getMotionFileName(t,r);var s=mi.getFormatedString("{0}_{1}",t,r),u=this._motions.getValue(s);if(null!=u)return i.log("start motion: ["+t+"_"+r+"]",!0),this._motionManager.startMotionPriority(u,!1,n);this.registerMotion(t,r).then((function(s){i.log("start motion: ["+t+"_"+r+"]",!0),o._motionManager.startMotionPriority(s,!1,n)}))},Model.prototype.startRandomMotion=function(t,i){if(0==this._modelSetting.getMotionCount(t))return di;var r=Math.floor(Math.random()*this._modelSetting.getMotionCount(t));return this.startMotion(t,r,i)},Model.prototype.setExpression=function(t){var r=this._expressions.getValue(t);i.log("expression: ["+t+"]",!0),null!=r?this._expressionManager.startMotionPriority(r,!1,this._setting.Priority.Force):i.log("expression["+t+"] is null",!0)},Model.prototype.setRandomExpression=function(){if(0!=this._expressions.getSize())for(var t=Math.floor(Math.random()*this._expressions.getSize()),i=0;i<this._expressions.getSize();i++)if(i==t){var r=this._expressions._keyValues[i].first;return void this.setExpression(r)}},Model.prototype.motionEventFired=function(t){CubismLogInfo("{0} is fired on LAppModel!!",t.s)},Model.prototype.getHitList=function(t,i){for(var r=[],n=0,o=this.getDrawableIds();n<o.length;n++){var s=o[n],u=Mi.getIdManager().getId(s),l=this.isHit(u,t,i);l.hit&&r.push({cubismIdHandle:u,area:l.area,id:s})}return r.sort((function(t,i){return t.area-i.area})),r},Model.prototype.preLoadMotionGroup=function(t,r){return Model_awaiter(this,void 0,void 0,(function(){var n,o,s,u,l,p;return Model_generator(this,(function(m){switch(m.label){case 0:n=0,m.label=1;case 1:return n<this._modelSetting.getMotionCount(t)?(o=mi.getFormatedString("{0}_{1}",t,n),s=this._modelSetting.getMotionFileName(t,n),s=this._setting.baseUrl+s,i.log("load motion: "+s+" => ["+t+"_"+n+"]",!0),l=(u=r).push,p={name:o,group:t,i:n},[4,fetch(s)]):[3,5];case 2:return[4,m.sent().arrayBuffer()];case 3:l.apply(u,[(p.buffer=m.sent(),p)]),m.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},Model.prototype.preLoadMotion=function(t){return Model_awaiter(this,void 0,void 0,(function(){return Model_generator(this,(function(i){switch(i.label){case 0:return t=this._setting.baseUrl+t,[4,fetch(t)];case 1:return[4,i.sent().arrayBuffer()];case 2:return[2,i.sent()]}}))}))},Model.prototype.releaseMotions=function(){this._motions.clear()},Model.prototype.releaseExpressions=function(){this._expressions.clear()},Model.prototype.doDraw=function(){if(null!=this._model){var t=[0,0,this._setting.canvas.width,this._setting.canvas.height];this.getRenderer().setRenderState(this._webgl.frameBuffer,t),this.getRenderer().drawModel()}},Model.prototype.draw=function(t){null!=this._model&&this._state==fi.CompleteSetup&&(t.multiplyByMatrix(this._modelMatrix),this.getRenderer().setMvpMatrix(t),this.doDraw())},Model.prototype.updateTime=function(){this.s_currentFrame=Date.now(),this.s_deltaTime=(this.s_currentFrame-this.s_lastFrame)/1e3,this.s_lastFrame=this.s_currentFrame},Model.prototype.onUpdate=function(){var t,i,r=new Bi;t=this._setting.canvas.width,i=this._setting.canvas.height,r.scale(1,t/i),null!=this._viewMatrix&&r.multiplyByMatrix(this._viewMatrix),this.update(),this.draw(r)},Model.prototype.getDrawableIds=function(){return this._model.getModel().drawables.ids},Model}(Si),Ii=function(){var extendStatics=function(t,i){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},extendStatics(t,i)};return function(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),ki=w.CubismMatrix44;!function(t){var i=function(t){function CubismViewMatrix(){var i=t.call(this)||this;return i._screenLeft=0,i._screenRight=0,i._screenTop=0,i._screenBottom=0,i._maxLeft=0,i._maxRight=0,i._maxTop=0,i._maxBottom=0,i._maxScale=0,i._minScale=0,i}return Ii(CubismViewMatrix,t),CubismViewMatrix.prototype.adjustTranslate=function(t,i){this._tr[0]*this._maxLeft+(this._tr[12]+t)>this._screenLeft&&(t=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+t)<this._screenRight&&(t=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+i)<this._screenTop&&(i=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+i)>this._screenBottom&&(i=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);var r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1]);ki.multiply(r,this._tr,this._tr)},CubismViewMatrix.prototype.adjustScale=function(t,i,r){var n=this.getMaxScale(),o=this.getMinScale(),s=r*this._tr[0];s<o?this._tr[0]>0&&(r=o/this._tr[0]):s>n&&this._tr[0]>0&&(r=n/this._tr[0]);var u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1]),l=new Float32Array([r,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-t,-i,0,1]);ki.multiply(p,this._tr,this._tr),ki.multiply(l,this._tr,this._tr),ki.multiply(u,this._tr,this._tr)},CubismViewMatrix.prototype.setScreenRect=function(t,i,r,n){this._screenLeft=t,this._screenRight=i,this._screenBottom=r,this._screenTop=n},CubismViewMatrix.prototype.setMaxScreenRect=function(t,i,r,n){this._maxLeft=t,this._maxRight=i,this._maxTop=n,this._maxBottom=r},CubismViewMatrix.prototype.setMaxScale=function(t){this._maxScale=t},CubismViewMatrix.prototype.setMinScale=function(t){this._minScale=t},CubismViewMatrix.prototype.getMaxScale=function(){return this._maxScale},CubismViewMatrix.prototype.getMinScale=function(){return this._minScale},CubismViewMatrix.prototype.isMaxScale=function(){return this.getScaleX()>=this._maxScale},CubismViewMatrix.prototype.isMinScale=function(){return this.getScaleX()<=this._minScale},CubismViewMatrix.prototype.getScreenLeft=function(){return this._screenLeft},CubismViewMatrix.prototype.getScreenRight=function(){return this._screenRight},CubismViewMatrix.prototype.getScreenBottom=function(){return this._screenBottom},CubismViewMatrix.prototype.getScreenTop=function(){return this._screenTop},CubismViewMatrix.prototype.getMaxLeft=function(){return this._maxLeft},CubismViewMatrix.prototype.getMaxRight=function(){return this._maxRight},CubismViewMatrix.prototype.getMaxBottom=function(){return this._maxBottom},CubismViewMatrix.prototype.getMaxTop=function(){return this._maxTop},CubismViewMatrix}(ki);t.CubismViewMatrix=i}(Pi||(Pi={}));var Ei=Pi.CubismViewMatrix,Ti=w.CubismMatrix44,Fi=function(){function TouchManager(t,i,r){var n,o;this._captured=!1,this._coordinateManager=new Li,this._deviceToScreen=new Ti,this._viewMatrix=new Ei,this._setting=t,this._view=i,this._model=r,n=t.canvas.width;var s=(o=t.canvas.height)/n,u=t.view.VIEW_LOGICAL_LEFT,l=t.view.VIEW_LOGICAL_RIGHT,p=-s,m=s;this._viewMatrix.setScreenRect(u,l,p,m);var y=Math.abs(u-l);this._deviceToScreen.scaleRelative(y/n,-y/n),this._deviceToScreen.translateRelative(.5*-n,.5*-o),this._viewMatrix.setMaxScale(t.view.VIEW_MAX_SCALE),this._viewMatrix.setMinScale(t.view.VIEW_MIN_SCALE),this._viewMatrix.setMaxScreenRect(t.view.VIEW_LOGICAL_MAX_LEFT,t.view.VIEW_LOGICAL_MAX_RIGHT,t.view.VIEW_LOGICAL_MAX_BOTTOM,t.view.VIEW_LOGICAL_MAX_TOP),this.bindEvent()}return TouchManager.prototype.bindEvent=function(){var t=this;"ontouchend"in this._setting.canvas?(this._setting.canvas.ontouchstart=function(i){t.onTouchBegan(i)},this._setting.canvas.ontouchmove=function(i){t.onTouchMoved(i)},this._setting.canvas.ontouchend=function(i){t.onTouchEnded(i)},this._setting.canvas.ontouchcancel=function(i){t.onTouchCancel(i)}):(this._setting.canvas.onmousedown=function(i){t.onClickBegan(i)},this._setting.canvas.onmousemove=function(i){t.onMouseMoved(i)},this._setting.canvas.onmouseup=function(i){t.onClickEnded(i)})},TouchManager.prototype.onClickBegan=function(t){this._captured=!0;var i=t.pageX,r=t.pageY;this.onTouchesBegan(i,r)},TouchManager.prototype.onMouseMoved=function(t){if(this._captured){var i=t.target.getBoundingClientRect(),r=t.clientX-i.left,n=t.clientY-i.top;this.onTouchesMoved(r,n)}},TouchManager.prototype.onClickEnded=function(t){this._captured=!1;var i=t.target.getBoundingClientRect(),r=t.clientX-i.left,n=t.clientY-i.top;this.onTouchesEnded(r,n)},TouchManager.prototype.onTouchBegan=function(t){this._captured=!0;var i=t.changedTouches[0].pageX,r=t.changedTouches[0].pageY;this.onTouchesBegan(i,r)},TouchManager.prototype.onTouchMoved=function(t){if(this._captured){var i=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-i.left,n=t.changedTouches[0].clientY-i.top;this.onTouchesMoved(r,n)}},TouchManager.prototype.onTouchEnded=function(t){this._captured=!1;var i=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-i.left,n=t.changedTouches[0].clientY-i.top;this.onTouchesEnded(r,n)},TouchManager.prototype.onTouchCancel=function(t){this._captured=!1;var i=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-i.left,n=t.changedTouches[0].clientY-i.top;this.onTouchesEnded(r,n)},TouchManager.prototype.onTouchesBegan=function(t,i){this._coordinateManager.touchesBegan(t,i)},TouchManager.prototype.onTouchesMoved=function(t,i){var r=this.transformViewX(this._coordinateManager.getX()),n=this.transformViewY(this._coordinateManager.getY());this._coordinateManager.touchesMoved(t,i),this._model.setDragging(r,n)},TouchManager.prototype.onTouchesEnded=function(t,i){this._model.setDragging(0,0);var r=this._deviceToScreen.transformX(this._coordinateManager.getX()),n=this._deviceToScreen.transformY(this._coordinateManager.getY());this.onTap(r,n)},TouchManager.prototype.transformViewX=function(t){var i=this._deviceToScreen.transformX(t);return this._viewMatrix.invertTransformX(i)},TouchManager.prototype.transformViewY=function(t){var i=this._deviceToScreen.transformY(t);return this._viewMatrix.invertTransformY(i)},TouchManager.prototype.transformScreenX=function(t){return this._deviceToScreen.transformX(t)},TouchManager.prototype.transformScreenY=function(t){return this._deviceToScreen.transformY(t)},TouchManager.prototype.onTap=function(t,r){i.log("onTap x: "+t+" y: "+r,!0);for(var o=0,s=this._model.getHitList(t,r);o<s.length;o++){var u=s[o];if(i.log("Hit drawId : "+u.id,!0),this._setting.binding[u.id])return void this._model.startRandomMotion(n.getRandomItem(this._setting.binding[u.id].motion),2);this._setting.debug&&i.log("Hit drawId "+u.id+" not found binding",!0)}},TouchManager}(),Li=function(){function CoordinateManager(){this._startX=0,this._startY=0,this._lastX=0,this._lastY=0,this._lastX1=0,this._lastY1=0,this._lastX2=0,this._lastY2=0,this._lastTouchDistance=0,this._deltaX=0,this._deltaY=0,this._scale=1,this._touchSingle=!1,this._flipAvailable=!1}return CoordinateManager.prototype.getCenterX=function(){return this._lastX},CoordinateManager.prototype.getCenterY=function(){return this._lastY},CoordinateManager.prototype.getDeltaX=function(){return this._deltaX},CoordinateManager.prototype.getDeltaY=function(){return this._deltaY},CoordinateManager.prototype.getStartX=function(){return this._startX},CoordinateManager.prototype.getStartY=function(){return this._startY},CoordinateManager.prototype.getScale=function(){return this._scale},CoordinateManager.prototype.getX=function(){return this._lastX},CoordinateManager.prototype.getY=function(){return this._lastY},CoordinateManager.prototype.getX1=function(){return this._lastX1},CoordinateManager.prototype.getY1=function(){return this._lastY1},CoordinateManager.prototype.getX2=function(){return this._lastX2},CoordinateManager.prototype.getY2=function(){return this._lastY2},CoordinateManager.prototype.isSingleTouch=function(){return this._touchSingle},CoordinateManager.prototype.isFlickAvailable=function(){return this._flipAvailable},CoordinateManager.prototype.disableFlick=function(){this._flipAvailable=!1},CoordinateManager.prototype.touchesBegan=function(t,i){this._lastX=t,this._lastY=i,this._startX=t,this._startY=i,this._lastTouchDistance=-1,this._flipAvailable=!0,this._touchSingle=!0},CoordinateManager.prototype.touchesMoved=function(t,i){this._lastX=t,this._lastY=i,this._lastTouchDistance=-1,this._touchSingle=!0},CoordinateManager.prototype.getFlickDistance=function(){return this.calculateDistance(this._startX,this._startY,this._lastX,this._lastY)},CoordinateManager.prototype.calculateDistance=function(t,i,r,n){return Math.sqrt((t-r)*(t-r)+(i-n)*(i-n))},CoordinateManager.prototype.calculateMovingAmount=function(t,i){if(t>0!=i>0)return 0;var r=t>0?1:-1,n=Math.abs(t),o=Math.abs(i);return r*(n<o?n:o)},CoordinateManager}(),Ri=w.CubismMatrix44,Di=T.CubismFramework,Ni=function(){function CubismSDK(t){this._cubismOption=new G,this._webgl=new K(t.canvas),this._view=new tt(this._webgl),this._textureManager=new Q(this._webgl),this._cubismOption.logFunction=i.log,this._cubismOption.loggingLevel=0,Di.startUp(this._cubismOption),Di.initialize();new Ri;this._model=new Vi(t,this._textureManager,this._webgl),this._touchManage=new Fi(t,this._view,this._model),this.loop()}return CubismSDK.prototype.loop=function(){var t=this;this._model.updateTime(),this._webgl.gl.clearColor(0,0,0,0),this._webgl.gl.enable(this._webgl.gl.DEPTH_TEST),this._webgl.gl.depthFunc(this._webgl.gl.LEQUAL),this._webgl.gl.clear(this._webgl.gl.COLOR_BUFFER_BIT|this._webgl.gl.DEPTH_BUFFER_BIT),this._webgl.gl.clearDepth(1),this._webgl.gl.enable(this._webgl.gl.BLEND),this._webgl.gl.blendFunc(this._webgl.gl.SRC_ALPHA,this._webgl.gl.ONE_MINUS_SRC_ALPHA),this._view.render(),this._model.onUpdate(),requestAnimationFrame((function(){t.loop()}))},CubismSDK}(),Ui=function(){function ModelInfo(t,i){this._setting=t,this._cubismSDK=i}return Object.defineProperty(ModelInfo.prototype,"HitAreasList",{get:function(){return this._cubismSDK._model.getDrawableIds()},enumerable:!1,configurable:!0}),ModelInfo}();const Oi=function(){function Live2dHelper(t,i){var r=this;this.setting=new o,this.setting.init(t,i).then((function(){r.load()})),this.setting.canvas._Live2dHelper=this}return Live2dHelper.prototype.load=function(){this.cubismSDK=new Ni(this.setting),this.modelInfo=new Ui(this.setting,this.cubismSDK)},Live2dHelper}()})(),r=r.default})()));
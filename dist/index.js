!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Live2dHelper=e():t.Live2dHelper=e()}(window,(function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e,r){(function(e,i,n){var o;!function(o){var a=function(){function t(){}return t.getVersion=function(){return y.ccall("csmGetVersion","number",[],[])},t.getLatestMocVersion=function(){return y.ccall("csmGetLatestMocVersion","number",[],[])},t.getMocVersion=function(t){return y.ccall("csmGetMocVersion","number",["number"],[t])},t.getSizeofModel=function(t){return y.ccall("csmGetSizeofModel","number",["number"],[t])},t.reviveMocInPlace=function(t,e){return y.ccall("csmReviveMocInPlace","number",["number","number"],[t,e])},t.initializeModelInPlace=function(t,e,r){return y.ccall("csmInitializeModelInPlace","number",["number","number","number"],[t,e,r])},t.getParameterCount=function(t){return y.ccall("csmGetParameterCount","number",["number"],[t])},t.getParameterIds=function(t){return y.ccall("csmGetParameterIds","number",["number"],[t])},t.getParameterMinimumValues=function(t){return y.ccall("csmGetParameterMinimumValues","number",["number"],[t])},t.getParameterMaximumValues=function(t){return y.ccall("csmGetParameterMaximumValues","number",["number"],[t])},t.getParameterDefaultValues=function(t){return y.ccall("csmGetParameterDefaultValues","number",["number"],[t])},t.getParameterValues=function(t){return y.ccall("csmGetParameterValues","number",["number"],[t])},t.getPartCount=function(t){return y.ccall("csmGetPartCount","number",["number"],[t])},t.getPartIds=function(t){return y.ccall("csmGetPartIds","number",["number"],[t])},t.getPartOpacities=function(t){return y.ccall("csmGetPartOpacities","number",["number"],[t])},t.getPartParentPartIndices=function(t){return y.ccall("csmGetPartParentPartIndices","number",["number"],[t])},t.getDrawableCount=function(t){return y.ccall("csmGetDrawableCount","number",["number"],[t])},t.getDrawableIds=function(t){return y.ccall("csmGetDrawableIds","number",["number"],[t])},t.getDrawableConstantFlags=function(t){return y.ccall("csmGetDrawableConstantFlags","number",["number"],[t])},t.getDrawableDynamicFlags=function(t){return y.ccall("csmGetDrawableDynamicFlags","number",["number"],[t])},t.getDrawableTextureIndices=function(t){return y.ccall("csmGetDrawableTextureIndices","number",["number"],[t])},t.getDrawableDrawOrders=function(t){return y.ccall("csmGetDrawableDrawOrders","number",["number"],[t])},t.getDrawableRenderOrders=function(t){return y.ccall("csmGetDrawableRenderOrders","number",["number"],[t])},t.getDrawableOpacities=function(t){return y.ccall("csmGetDrawableOpacities","number",["number"],[t])},t.getDrawableMaskCounts=function(t){return y.ccall("csmGetDrawableMaskCounts","number",["number"],[t])},t.getDrawableMasks=function(t){return y.ccall("csmGetDrawableMasks","number",["number"],[t])},t.getDrawableVertexCounts=function(t){return y.ccall("csmGetDrawableVertexCounts","number",["number"],[t])},t.getDrawableVertexPositions=function(t){return y.ccall("csmGetDrawableVertexPositions","number",["number"],[t])},t.getDrawableVertexUvs=function(t){return y.ccall("csmGetDrawableVertexUvs","number",["number"],[t])},t.getDrawableIndexCounts=function(t){return y.ccall("csmGetDrawableIndexCounts","number",["number"],[t])},t.getDrawableIndices=function(t){return y.ccall("csmGetDrawableIndices","number",["number"],[t])},t.mallocMoc=function(t){return y.ccall("csmMallocMoc","number",["number"],[t])},t.mallocModelAndInitialize=function(t){return y.ccall("csmMallocModelAndInitialize","number",["number"],[t])},t.malloc=function(t){return y.ccall("csmMalloc","number",["number"],[t])},t.setLogFunction=function(t){y.ccall("csmSetLogFunction",null,["number"],[t])},t.updateModel=function(t){y.ccall("csmUpdateModel",null,["number"],[t])},t.readCanvasInfo=function(t,e,r,i){y.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[t,e,r,i])},t.resetDrawableDynamicFlags=function(t){y.ccall("csmResetDrawableDynamicFlags",null,["number"],[t])},t.free=function(t){y.ccall("csmFree",null,["number"],[t])},t}(),s=function(){function t(){}return t.csmGetVersion=function(){return a.getVersion()},t.csmGetLatestMocVersion=function(){return a.getLatestMocVersion()},t.csmGetMocVersion=function(t){return a.getMocVersion(t._ptr)},t}();o.Version=s;var u=function(){function t(){}return t.csmSetLogFunction=function(e){t.logFunction=e;var r=y.addFunction(t.wrapLogFunction,"vi");a.setLogFunction(r)},t.csmGetLogFunction=function(){return t.logFunction},t.wrapLogFunction=function(e){var r=y.UTF8ToString(e);t.logFunction(r)},t}();o.Logging=u;var l=function(){function t(t){var e=a.mallocMoc(t.byteLength);e&&(new Uint8Array(y.HEAPU8.buffer,e,t.byteLength).set(new Uint8Array(t)),this._ptr=a.reviveMocInPlace(e,t.byteLength),this._ptr||a.free(e))}return t.fromArrayBuffer=function(e){if(!e)return null;var r=new t(e);return r._ptr?r:null},t.prototype._release=function(){a.free(this._ptr),this._ptr=0},t}();o.Moc=l;var h=function(){function t(t){this._ptr=a.mallocModelAndInitialize(t._ptr),this._ptr&&(this.parameters=new f(this._ptr),this.parts=new p(this._ptr),this.drawables=new g(this._ptr),this.canvasinfo=new c(this._ptr))}return t.fromMoc=function(e){var r=new t(e);return r._ptr?r:null},t.prototype.update=function(){a.updateModel(this._ptr)},t.prototype.release=function(){a.free(this._ptr),this._ptr=0},t}();o.Model=h;var c=function(t){if(t){var e=new Float32Array(2),r=e.length*e.BYTES_PER_ELEMENT,i=a.malloc(r),n=new Uint8Array(y.HEAPU8.buffer,i,r);n.set(new Uint8Array(e.buffer));var o=new Float32Array(2),s=o.length*o.BYTES_PER_ELEMENT,u=a.malloc(s),l=new Uint8Array(y.HEAPU8.buffer,u,s);l.set(new Uint8Array(o.buffer));var h=new Float32Array(1),c=h.length*h.BYTES_PER_ELEMENT,f=a.malloc(c),p=new Uint8Array(y.HEAPU8.buffer,f,c);p.set(new Uint8Array(h.buffer)),a.readCanvasInfo(t,n.byteOffset,l.byteOffset,p.byteOffset),e=new Float32Array(n.buffer,n.byteOffset,n.length),o=new Float32Array(l.buffer,l.byteOffset,l.length),h=new Float32Array(p.buffer,p.byteOffset,p.length),this.CanvasWidth=e[0],this.CanvasHeight=e[1],this.CanvasOriginX=o[0],this.CanvasOriginY=o[1],this.PixelsPerUnit=h[0],a.free(n.byteOffset),a.free(l.byteOffset),a.free(p.byteOffset)}};o.CanvasInfo=c;var f=function(t){var e=0;this.count=a.getParameterCount(t),e=a.getParameterCount(t),this.ids=new Array(e);for(var r=new Uint32Array(y.HEAPU32.buffer,a.getParameterIds(t),e),i=0;i<r.length;i++)this.ids[i]=y.UTF8ToString(r[i]);e=a.getParameterCount(t),this.minimumValues=new Float32Array(y.HEAPF32.buffer,a.getParameterMinimumValues(t),e),e=a.getParameterCount(t),this.maximumValues=new Float32Array(y.HEAPF32.buffer,a.getParameterMaximumValues(t),e),e=a.getParameterCount(t),this.defaultValues=new Float32Array(y.HEAPF32.buffer,a.getParameterDefaultValues(t),e),e=a.getParameterCount(t),this.values=new Float32Array(y.HEAPF32.buffer,a.getParameterValues(t),e)};o.Parameters=f;var p=function(t){var e=0;this.count=a.getPartCount(t),e=a.getPartCount(t),this.ids=new Array(e);for(var r=new Uint32Array(y.HEAPU32.buffer,a.getPartIds(t),e),i=0;i<r.length;i++)this.ids[i]=y.UTF8ToString(r[i]);e=a.getPartCount(t),this.opacities=new Float32Array(y.HEAPF32.buffer,a.getPartOpacities(t),e),e=a.getPartCount(t),this.parentIndices=new Int32Array(y.HEAP32.buffer,a.getPartParentPartIndices(t),e)};o.Parts=p;var g=function(){function t(t){this._modelPtr=t;var e=0,r=null;this.count=a.getDrawableCount(t),e=a.getDrawableCount(t),this.ids=new Array(e);for(var i=new Uint32Array(y.HEAPU32.buffer,a.getDrawableIds(t),e),n=0;n<i.length;n++)this.ids[n]=y.UTF8ToString(i[n]);e=a.getDrawableCount(t),this.constantFlags=new Uint8Array(y.HEAPU8.buffer,a.getDrawableConstantFlags(t),e),e=a.getDrawableCount(t),this.dynamicFlags=new Uint8Array(y.HEAPU8.buffer,a.getDrawableDynamicFlags(t),e),e=a.getDrawableCount(t),this.textureIndices=new Int32Array(y.HEAP32.buffer,a.getDrawableTextureIndices(t),e),e=a.getDrawableCount(t),this.drawOrders=new Int32Array(y.HEAP32.buffer,a.getDrawableDrawOrders(t),e),e=a.getDrawableCount(t),this.renderOrders=new Int32Array(y.HEAP32.buffer,a.getDrawableRenderOrders(t),e),e=a.getDrawableCount(t),this.opacities=new Float32Array(y.HEAPF32.buffer,a.getDrawableOpacities(t),e),e=a.getDrawableCount(t),this.maskCounts=new Int32Array(y.HEAP32.buffer,a.getDrawableMaskCounts(t),e),e=a.getDrawableCount(t),this.vertexCounts=new Int32Array(y.HEAP32.buffer,a.getDrawableVertexCounts(t),e),e=a.getDrawableCount(t),this.indexCounts=new Int32Array(y.HEAP32.buffer,a.getDrawableIndexCounts(t),e),e=a.getDrawableCount(t),r=new Int32Array(y.HEAP32.buffer,a.getDrawableMaskCounts(t),e),this.masks=new Array(e);var o=new Uint32Array(y.HEAPU32.buffer,a.getDrawableMasks(t),e);for(n=0;n<o.length;n++)this.masks[n]=new Int32Array(y.HEAP32.buffer,o[n],r[n]);e=a.getDrawableCount(t),r=new Int32Array(y.HEAP32.buffer,a.getDrawableVertexCounts(t),e),this.vertexPositions=new Array(e);var s=new Uint32Array(y.HEAPU32.buffer,a.getDrawableVertexPositions(t),e);for(n=0;n<s.length;n++)this.vertexPositions[n]=new Float32Array(y.HEAPF32.buffer,s[n],2*r[n]);e=a.getDrawableCount(t),r=new Int32Array(y.HEAP32.buffer,a.getDrawableVertexCounts(t),e),this.vertexUvs=new Array(e);var u=new Uint32Array(y.HEAPU32.buffer,a.getDrawableVertexUvs(t),e);for(n=0;n<u.length;n++)this.vertexUvs[n]=new Float32Array(y.HEAPF32.buffer,u[n],2*r[n]);e=a.getDrawableCount(t),r=new Int32Array(y.HEAP32.buffer,a.getDrawableIndexCounts(t),e),this.indices=new Array(e);var l=new Uint32Array(y.HEAPU32.buffer,a.getDrawableIndices(t),e);for(n=0;n<l.length;n++)this.indices[n]=new Uint16Array(y.HEAPU16.buffer,l[n],r[n])}return t.prototype.resetDynamicFlags=function(){a.resetDrawableDynamicFlags(this._modelPtr)},t}();o.Drawables=g;var d=function(){function t(){}return t.hasBlendAdditiveBit=function(t){return 1==(1&t)},t.hasBlendMultiplicativeBit=function(t){return 2==(2&t)},t.hasIsDoubleSidedBit=function(t){return 4==(4&t)},t.hasIsInvertedMaskBit=function(t){return 8==(8&t)},t.hasIsVisibleBit=function(t){return 1==(1&t)},t.hasVisibilityDidChangeBit=function(t){return 2==(2&t)},t.hasOpacityDidChangeBit=function(t){return 4==(4&t)},t.hasDrawOrderDidChangeBit=function(t){return 8==(8&t)},t.hasRenderOrderDidChangeBit=function(t){return 16==(16&t)},t.hasVertexPositionsDidChangeBit=function(t){return 32==(32&t)},t}();o.Utils=d;var m,_=(m="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){var o;t=t||{},o=o||(void 0!==t?t:{});var a,s={};for(a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);var u,l,h,c;l="object"==typeof window,h="function"==typeof importScripts,c="object"==typeof e&&"object"==typeof e.versions&&"string"==typeof e.versions.node&&!l&&!h,u=!l&&!c&&!h;var f,p,g,d,_="";c?(_=i+"/",f=function(t,e){var i;return(i=it(t))?e?i:i.toString():(g=g||r(7),t=(d=d||r(8)).normalize(t),g.readFileSync(t,e?null:"utf8"))},p=function(t){return(t=f(t,!0)).buffer||(t=new Uint8Array(t)),M(t.buffer),t},1<e.argv.length&&e.argv[1].replace(/\\/g,"/"),e.argv.slice(2),e.on("uncaughtException",(function(t){throw t})),e.on("unhandledRejection",Q),o.inspect=function(){return"[Emscripten Module object]"}):u?("undefined"!=typeof read&&(f=function(t){var e=it(t);return e?et(e):read(t)}),p=function(t){var e;return(e=it(t))?e:"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(M("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(l||h)&&(h?_=self.location.href:document.currentScript&&(_=document.currentScript.src),m&&(_=m),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):"",f=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){if(t=it(t))return et(t);throw e}},h&&(p=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}catch(e){if(t=it(t))return t;throw e}}));var y,b=o.print||console.log.bind(console),v=o.printErr||console.warn.bind(console);for(a in s)s.hasOwnProperty(a)&&(o[a]=s[a]);function A(){return{exports:function(t,e,r){var i=new ArrayBuffer(8),o=new Int32Array(i),a=new Float32Array(i),s=new Float64Array(i);function u(t){return o[t]}function l(t,e){o[t]=e}function h(){return s[0]}function c(t){s[0]=t}function f(t){a[0]=t}function p(){return a[0]}var g,d,m,_,y,b,v,A,S,w,x,C,B,M,P,I,V,E,k,T,R,F,D,L,U,N,O,z=(g=e.buffer,d=new Uint8Array(g),function(t,e){var r,i;if(void 0===n)for(r=atob(e),i=0;i<r.length;i++)d[t+i]=r.charCodeAt(i);else for(r=n.from(e,"base64"),i=0;i<r.length;i++)d[t+i]=r[i]});return z(1024,"CgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAE1PQzMAW0NTTV0gW0VdJXM6ICVzCgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgAlcwoAICAAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIENvcnJ1cHRlZCAgbW9jMyBmaWxlLgoAImFkZHJlc3MiIGlzIG51bGwuAFtDU01dIFtXXVJvdGF0aW9uRGVmb3JtZXI6IE5vdCBmb3VuZCB0cmFuc2Zvcm1lZCBEaXJlY3Rpb24uCgAlMDJYIABbQ1NNXSBbRV1jc21SZXZpdmVNb2NJblBsYWNlIGlzIGZhaWxlZC4gVGhlIENvcmUgdW5zdXBwb3J0IGxhdGVyIHRoYW4gbW9jMyB2ZXI6WyVkXS4gVGhpcyBtb2MzIHZlciBpcyBbJWRdLgoAImFkZHJlc3MiIGFsaWdubWVudCBpcyBpbnZhbGlkLgBbQ1NNXSBbRV1VcGRhdGVEZWZvcm1lckhpZXJhcmNoeSgpOiBVbmtub3duIERlZm9ybWVyIFR5cGUuCgBbQ1NNXSBbRV1jc21HZXRNb2NWZXJzaW9uIGlzIGZhaWxlZC4gQ29ycnVwdGVkIG1vYzMgZmlsZS4KACJzaXplIiBpcyBpbnZhbGlkLgBMaXZlMkQgQ3ViaXNtIFNESyBDb3JlIFZlcnNpb24gJWQuJWQuJWQAIm1vZGVsIiBpcyBpbnZhbGlkLgBjc21HZXRNb2NWZXJzaW9uAGNzbVJldml2ZU1vY0luUGxhY2UAY3NtUmVhZENhbnZhc0luZm8AIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AY3NtR2V0U2l6ZW9mTW9kZWwAIm1vYyIgaXMgaW52YWxpZC4AY3NtSW5pdGlhbGl6ZU1vZGVsSW5QbGFjZQAic2l6ZSIgaXMgaW52YWxpZABjc21VcGRhdGVNb2RlbABjc21HZXRQYXJhbWV0ZXJDb3VudABjc21HZXRQYXJhbWV0ZXJJZHMAY3NtR2V0UGFyYW1ldGVyTWluaW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJNYXhpbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlckRlZmF1bHRWYWx1ZXMAY3NtR2V0UGFyYW1ldGVyVmFsdWVzAGNzbUdldFBhcnRDb3VudABjc21HZXRQYXJ0SWRzAGNzbUdldFBhcnRPcGFjaXRpZXMAY3NtR2V0UGFydFBhcmVudFBhcnRJbmRpY2VzAGNzbUdldERyYXdhYmxlQ291bnQAY3NtR2V0RHJhd2FibGVJZHMAY3NtR2V0RHJhd2FibGVDb25zdGFudEZsYWdzAGNzbUdldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldERyYXdhYmxlVGV4dHVyZUluZGljZXMAY3NtR2V0RHJhd2FibGVEcmF3T3JkZXJzAGNzbUdldERyYXdhYmxlUmVuZGVyT3JkZXJzAGNzbUdldERyYXdhYmxlT3BhY2l0aWVzAGNzbUdldERyYXdhYmxlTWFza0NvdW50cwBjc21HZXREcmF3YWJsZU1hc2tzAGNzbUdldERyYXdhYmxlVmVydGV4Q291bnRzAGNzbUdldERyYXdhYmxlVmVydGV4UG9zaXRpb25zAGNzbUdldERyYXdhYmxlVmVydGV4VXZzAGNzbUdldERyYXdhYmxlSW5kZXhDb3VudHMAY3NtR2V0RHJhd2FibGVJbmRpY2VzAGNzbVJlc2V0RHJhd2FibGVEeW5hbWljRmxhZ3M="),z(2572,"Cw=="),z(2611,"//////8="),z(2680,"GBgAAC0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAAL"),z(2736,"EQAPChEREQMKBwABEwkLCwAACQYLAAALAAYRAAAAERER"),z(2785,"Cw=="),z(2794,"EQAKChEREQAKAAACAAkLAAAACQALAAAL"),z(2843,"DA=="),z(2855,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),z(2901,"Dg=="),z(2913,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),z(2959,"EA=="),z(2971,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),z(3026,"EgAAABISEgAAAAAAAAk="),z(3075,"Cw=="),z(3087,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),z(3133,"DA=="),z(3145,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGLTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAu"),z(3232,"AwAAAAQAAAAEAAAABgAAAIP5ogBETm4A/CkVANFXJwDdNPUAYtvAADyZlQBBkEMAY1H+ALveqwC3YcUAOm4kANJNQgBJBuAACeouAByS0QDrHf4AKbEcAOg+pwD1NYIARLsuAJzphAC0JnAAQX5fANaROQBTgzkAnPQ5AItfhAAo+b0A+B87AN7/lwAPmAUAES/vAApaiwBtH20Az342AAnLJwBGT7cAnmY/AC3qXwC6J3UA5evHAD178QD3OQcAklKKAPtr6gAfsV8ACF2NADADVgB7/EYA8KtrACC8zwA29JoA46kdAF5hkQAIG+YAhZllAKAUXwCNQGgAgNj/ACdzTQAGBjEAylYVAMmocwB74mAAa4zAABnERwDNZ8MACejcAFmDKgCLdsQAphyWAESv3QAZV9EApT4FAAUH/wAzfj8AwjLoAJhP3gC7fTIAJj3DAB5r7wCf+F4ANR86AH/yygDxhx0AfJAhAGokfADVbvoAMC13ABU7QwC1FMYAwxmdAK3EwgAsTUEADABdAIZ9RgDjcS0Am8aaADNiAAC00nwAtKeXADdV1QDXPvYAoxAYAE12/ABknSoAcNerAGN8+AB6sFcAFxXnAMBJVgA71tkAp4Q4ACQjywDWincAWlQjAAAfuQDxChsAGc7fAJ8x/wBmHmoAmVdhAKz7RwB+f9gAImW3ADLoiQDmv2AA78TNAGw2CQBdP9QAFt7XAFg73gDem5IA0iIoACiG6ADiWE0AxsoyAAjjFgDgfcsAF8BQAPMdpwAY4FsALhM0AIMSYgCDSAEA9Y5bAK2wfwAe6fIASEpDABBn0wCq3dgArl9CAGphzgAKKKQA05m0AAam8gBcd38Ao8KDAGE8iACKc3gAr4xaAG/XvQAtpmMA9L/LAI2B7wAmwWcAVcpFAMrZNgAoqNIAwmGNABLJdwAEJhQAEkabAMRZxADIxUQATbKRAAAX8wDUQ60AKUnlAP3VEAAAvvwAHpTMAHDO7gATPvUA7PGAALPnwwDH+CgAkwWUAMFxPgAuCbMAC0XzAIgSnACrIHsALrWfAEeSwgB7Mi8ADFVtAHKnkABr5x8AMcuWAHkWSgBBeeIA9N+JAOiUlwDi5oQAmTGXAIjtawBfXzYAu/0OAEiatABnpGwAcXJCAI1dMgCfFbgAvOUJAI0xJQD3dDkAMAUcAA0MAQBLCGgALO5YAEeqkAB05wIAvdYkAPd9pgBuSHIAnxbvAI6UpgC0kfYA0VNRAM8K8gAgmDMA9Ut+ALJjaADdPl8AQF0DAIWJfwBVUikAN2TAAG3YEAAySDIAW0x1AE5x1ABFVG4ACwnBACr1aQAUZtUAJwedAF0EUAC0O9sA6nbFAIf5FwBJa30AHSe6AJZpKQDGzKwArRRUAJDiagCI2YkALHJQAASkvgB3B5QA8zBwAAD8JwDqcagAZsJJAGTgPQCX3YMAoz+XAEOU/QANhowAMUHeAJI5nQDdcIwAF7fnAAjfOwAVNysAXICgAFqAkwAQEZIAD+jYAGyArwDb/0sAOJAPAFkYdgBipRUAYcu7AMeJuQAQQL0A0vIEAEl1JwDrtvYA2yK7AAoUqgCJJi8AZIN2AAk7MwAOlBoAUTqqAB2jwgCv7a4AXCYSAG3CTQAtepwAwFaXAAM/gwAJ8PYAK0CMAG0xmQA5tAcADCAVANjDWwD1ksQAxq1LAE7KpQCnN80A5qk2AKuSlADdQmgAGWPeAHaM7wBoi1IA/Ns3AK6hqwDfFTEAAK6hAAz72gBkTWYA7QW3ACllMABXVr8AR/86AGr5uQB1vvMAKJPfAKuAMABmjPYABMsVAPoiBgDZ5B0APbOkAFcbjwA2zQkATkLpABO+pAAzI7UA8KoaAE9lqADSwaUACz8PAFt4zQAj+XYAe4sEAIkXcgDGplMAb27iAO/rAACbSlgAxNq3AKpmugB2z88A0QIdALHxLQCMmcEAw613AIZI2gD3XaAAxoD0AKzwLwDd7JoAP1y8ANDebQCQxx8AKtu2AKMlOgAAr5oArVOTALZXBAApLbQAS4B+ANoHpwB2qg4Ae1mhABYSKgDcty0A+uX9AInb/gCJvv0A5HZsAAap/AA+gHAAhW4VAP2H/wAoPgcAYWczACoYhgBNveoAs+evAI9tbgCVZzkAMb9bAITXSAAw3xYAxy1DACVhNQDJcM4AMMu4AL9s/QCkAKIABWzkAFrdoAAhb0cAYhLSALlchABwYUkAa1bgAJlSAQBQVTcAHtW3ADPxxAATbl8AXTDkAIUuqQAdssMAoTI2AAi3pADqsdQAFvchAI9p5AAn/3cADAOAAI1ALQBPzaAAIKWZALOi0wAvXQoAtPlCABHaywB9vtAAm9vBAKsXvQDKooEACGpcAC5VFwAnAFUAfxTwAOEHhgAUC2QAlkGNAIe+3gDa/SoAayW2AHuJNAAF8/4Aub+eAGhqTwBKKqgAT8RaAC34vADXWpgA9MeVAA1NjQAgOqYApFdfABQ/sQCAOJUAzCABAHHdhgDJ3rYAv2D1AE1lEQABB2sAjLCsALLA0ABRVUgAHvsOAJVywwCjBjsAwEA1AAbcewDgRcwATin6ANbKyADo80EAfGTeAJtk2ADZvjEApJfDAHdY1ABp48UA8NoTALo6PABGGEYAVXVfANK99QBuksYArC5dAA5E7QAcPkIAYcSHACn96QDn1vMAInzKAG+RNQAI4MUA/9eNAG5q4gCw/cYAkwjBAHxddABrrbIAzW6dAD5yewDGEWoA98+pAClz3wC1yboAtwBRAOKyDQB0uiQA5X1gAHTYigANFSwAgRgMAH5mlAABKRYAn3p2AP39vgBWRe8A2X42AOzZEwCLurkAxJf8ADGoJwDxbsMAlMU2ANioVgC0qLUAz8wOABKJLQBvVzQALFaJAJnO4wDWILkAa16qAD4qnAARX8wA/QtKAOH0+wCOO20A4oYsAOnUhAD8tKkA7+7RAC41yQAvOWEAOCFEABvZyACB/AoA+0pqAC8c2ABTtIQATpmMAFQizAAqVdwAwMbWAAsZlgAacLgAaZVkACZaYAA/Uu4AfxEPAPS1EQD8y/UANLwtADS87gDoXcwA3V5gAGeOmwCSM+8AyRe4AGFYmwDhV7wAUYPGANg+EADdcUgALRzdAK8YoQAhLEYAWfPXANl6mACeVMAAT4b6AFYG/ADlea4AiSI2ADitIgBnk9wAVeiqAIImOADK55sAUQ2kAJkzsQCp1w4AaQVIAGWy8AB/iKcAiEyXAPnRNgAhkrMAe4JKAJjPIQBAn9wA3EdVAOF0OgBn60IA/p3fAF7UXwB7Z6QAuqx6AFX2ogAriCMAQbpVAFluCAAhKoYAOUeDAInj5gDlntQASftAAP9W6QAcD8oAxVmKAJT6KwDTwcUAD8XPANtargBHxYYAhUNiACGGOwAseZQAEGGHACpMewCALBoAQ78SAIgmkAB4PIkAqMTkAOXbewDEOsIAJvTqAPdnigANkr8AZaMrAD2TsQC9fAsApFHcACfdYwBp4d0AmpQZAKgplQBozigACe20AESfIABOmMoAcIJjAH58IwAPuTIAp/WOABRW5wAh8QgAtZ0qAG9+TQClGVEAtfmrAILf1gCW3WEAFjYCAMQ6nwCDoqEAcu1tADmNegCCuKkAazJcAEYnWwAANO0A0gB3APz0VQABWU0A4HGA"),z(6019,"QPsh+T8AAAAALUR0PgAAAICYRvg8AAAAYFHMeDsAAACAgxvwOQAAAEAgJXo4AAAAgCKC4zYAAAAAHfNpNThj7T7aD0k/Xph7P9oPyT9pN6wxaCEiM7QPFDNoIaIz2w9JP9sPSb/kyxZA5MsWwAAAAAAAAACA2w9JQNsPScAAAIA/AADAPwAAAADcz9E1AAAAAADAFT8="),z(6168,"BQ=="),z(6180,"DA=="),z(6204,"DQAAAA4AAADIGQAAAAQ="),z(6228,"AQ=="),z(6243,"Cv////8="),z(6500,"9B0="),m={Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,Math:Math},_=t,y=e.buffer,b=_.memory,v=r,A=new m.Int8Array(y),S=new m.Int16Array(y),w=new m.Int32Array(y),x=new m.Uint8Array(y),C=new m.Uint16Array(y),B=new m.Uint32Array(y),M=new m.Float32Array(y),P=new m.Float64Array(y),I=m.Math.imul,V=m.Math.fround,E=m.Math.abs,k=m.Math.clz32,T=m.Math.min,m.Math.max,R=m.Math.floor,m.Math.ceil,m.Math.sqrt,_.abort,m.NaN,F=m.Infinity,D=_.a,L=_.b,U=_.c,N=5251088,O=0,v[1]=function(t,e,r,i){t|=0,e|=0,r|=0,i|=0;var n,o=0,a=V(0),s=V(0),u=0,l=V(0),h=V(0),c=V(0),f=0,p=V(0),g=V(0),d=V(0),m=V(0),_=V(0),y=V(0),b=V(0),v=V(0),A=V(0),S=V(0),x=V(0),C=V(0),B=V(0),k=V(0),T=0,R=0,F=V(0),D=V(0),L=0,U=0,O=V(0),z=V(0),G=0,X=0,j=0,H=0,W=0,Q=0,q=0,J=0,Z=0,K=V(0),$=V(0),tt=V(0),et=V(0),rt=V(0),it=V(0),nt=V(0),ot=0,at=0;if(N=n=N-32|0,1<=(0|i))for(W=(T=w[t+4>>2])+-1|0,Q=(U=w[t>>2])+-1|0,q=X=(f=w[t+20>>2])+(T<<3)|0,J=j=((G=I(U,R=T+1|0))<<3)+f|0,Z=H=(T+G<<3)+f|0,O=V(0|U),z=V(0|T),ot=w[t+8>>2],t=0;;){c=M[4+(o=(L=t<<3)+e|0)>>2],s=V(c*O),p=M[o>>2],a=V(p*z),o=c>=V(1);t:if(c<V(0)^1&&!(o|p>=V(1)|p<V(0)))o=V(E(y=s))<V(2147483648)?~~s:-2147483648,h=V(y-V(0|o)),u=V(E(s=a))<V(2147483648)?~~a:-2147483648,l=V(s-V(0|u)),o=u+I(o,R)|0,s=ot?(a=V(V(1)-h),s=V(V(1)-l),u=(o<<3)+f|0,o=(o+R<<3)+f|0,M[r+L>>2]=V(V(V(a*V(s*M[u>>2]))+V(a*V(l*M[u+8>>2])))+V(h*V(s*M[o>>2])))+V(h*V(l*M[o+8>>2])),a=V(V(V(a*V(s*M[u+4>>2]))+V(a*V(l*M[u+12>>2])))+V(h*V(s*M[o+4>>2]))),V(h*V(l*M[o+12>>2]))):V(l+h)<=V(1)?(a=V(V(V(1)-l)-h),u=(o<<3)+f|0,o=(o+R<<3)+f|0,M[r+L>>2]=V(V(a*M[u>>2])+V(l*M[u+8>>2]))+V(h*M[o>>2]),a=V(V(a*M[u+4>>2])+V(l*M[u+12>>2])),V(h*M[o+4>>2])):(a=V(V(l+V(-1))+h),u=(o+R<<3)+f|0,s=V(V(1)-l),c=V(V(1)-h),o=(o<<3)+f|0,M[r+L>>2]=V(V(a*M[u+8>>2])+V(s*M[u>>2]))+V(c*M[o+8>>2]),a=V(V(a*M[u+12>>2])+V(s*M[u+4>>2])),V(c*M[o+12>>2]));else{if(at||(y=M[Z+4>>2],K=M[f+4>>2],g=V(y-K),$=M[q+4>>2],tt=M[J+4>>2],d=V($-tt),b=V(V(g-d)*V(.5)),et=M[H>>2],rt=M[f>>2],m=V(et-rt),it=M[X>>2],nt=M[j>>2],_=V(it-nt),v=V(V(m-_)*V(.5)),d=V(V(d+g)*V(.5)),_=V(V(_+m)*V(.5)),at=1,g=V(V(V(V(V(K+$)+tt)+y)*V(.25))-V(g*V(.5))),m=V(V(V(V(V(rt+it)+nt)+et)*V(.25))-V(m*V(.5)))),!(c<V(3)^1|p>V(-2)^1|p<V(3)^1|c>V(-2)^1)){e:if(p<=V(0)){if(c<=V(0)){h=V(V(c+V(2))*V(.5)),l=V(V(p+V(2))*V(.5)),a=V(b+b),F=V(g-a),s=V(v+v),D=V(m-s),B=V(g-V(d+d)),A=V(B-a),k=V(m-V(_+_)),S=V(k-s),x=M[f+4>>2],C=M[f>>2];break e}if(o){a=V(b*V(3)),s=V(g-V(d+d)),B=V(a+s),A=V(v*V(3)),S=V(m-V(_+_)),k=V(A+S),h=V(V(c+V(-1))*V(.5)),l=V(V(p+V(2))*V(.5)),x=V(a+g),C=V(A+m),A=V(b+s),S=V(v+S),F=M[J+4>>2],D=M[j>>2];break e}a=V(g-V(d+d)),o=Q,u=V(E(s))<V(2147483648)?~~s:-2147483648,h=V(0|(o=(0|u)==(0|U)?o:u)),l=V(h/O),A=V(V(l*b)+a),y=V(l*v),l=V(m-V(_+_)),S=V(y+l),c=V(V(0|(u=o+1|0))/O),B=V(V(c*b)+a),k=V(V(c*v)+l),l=V(V(p+V(2))*V(.5)),h=V(s-h),o=(I(o,R)<<3)+f|0,F=M[o+4>>2],D=M[o>>2],o=(I(u,R)<<3)+f|0,x=M[o+4>>2],C=M[o>>2]}else if(p>=V(1)){if(c<=V(0)){h=V(V(c+V(2))*V(.5)),l=V(V(p+V(-1))*V(.5)),a=V(b+b),A=V(V(d+g)-a),s=V(v+v),S=V(V(_+m)-s),x=V(V(d*V(3))+g),F=V(x-a),C=V(V(_*V(3))+m),D=V(C-s),B=M[q+4>>2],k=M[X>>2];break e}if(o){a=V(b*V(3)),B=V(a+V(d+g)),s=V(v*V(3)),k=V(s+V(_+m)),y=a,a=V(V(d*V(3))+g),x=V(y+a),y=s,s=V(V(_*V(3))+m),C=V(y+s),h=V(V(c+V(-1))*V(.5)),l=V(V(p+V(-1))*V(.5)),F=V(b+a),D=V(v+s),A=M[Z+4>>2],S=M[H>>2];break e}a=V(V(d*V(3))+g),o=Q,u=V(E(s))<V(2147483648)?~~s:-2147483648,h=V(0|(o=(0|u)==(0|U)?o:u)),l=V(h/O),F=V(V(l*b)+a),y=V(l*v),l=V(V(_*V(3))+m),D=V(y+l),c=V(V(0|(u=o+1|0))/O),x=V(V(c*b)+a),C=V(V(c*v)+l),l=V(V(p+V(-1))*V(.5)),h=V(s-h),o=(I(o,R)+T<<3)+f|0,A=M[o+4>>2],S=M[o>>2],o=(I(u,R)+T<<3)+f|0,B=M[o+4>>2],k=M[o>>2]}else c<=V(0)?(h=V(V(c+V(2))*V(.5)),o=W,u=V(E(s=a))<V(2147483648)?~~a:-2147483648,a=V(0|(o=(0|u)==(0|T)?o:u)),l=V(s-a),a=V(a/z),s=V(b+b),A=V(V(V(a*d)+g)-s),y=V(V(a*_)+m),a=V(v+v),S=V(y-a),c=V(V(0|(u=o+1|0))/z),F=V(V(V(c*d)+g)-s),D=V(V(V(c*_)+m)-a),B=M[4+(o=(o<<3)+f|0)>>2],k=M[o>>2],x=M[4+(o=(u<<3)+f|0)>>2],C=M[o>>2]):o?(y=s=V(b*V(3)),o=W,u=V(E(a))<V(2147483648)?~~a:-2147483648,l=V(0|(o=(0|u)==(0|T)?o:u)),h=V(l/z),B=V(y+V(V(h*d)+g)),p=V(v*V(3)),k=V(p+V(V(h*_)+m)),y=s,s=V(V(0|(u=o+1|0))/z),x=V(y+V(V(s*d)+g)),C=V(p+V(V(s*_)+m)),h=V(V(c+V(-1))*V(.5)),l=V(a-l),A=M[4+(o=(o+G<<3)+f|0)>>2],S=M[o>>2],F=M[4+(o=(u+G<<3)+f|0)>>2],D=M[o>>2]):(P[16+n>>3]=c,w[n>>2]=t,P[8+n>>3]=p,Y(4,1104,n));if(V(l+h)<=V(1)){M[r+L>>2]=V(S+V(V(D-S)*l))+V(V(k-S)*h),a=V(A+V(V(F-A)*l)),s=V(V(B-A)*h);break t}a=V(V(1)-l),s=V(V(1)-h),M[r+L>>2]=V(C+V(V(k-C)*a))+V(V(D-C)*s),a=V(x+V(V(B-x)*a)),s=V(V(F-x)*s);break t}M[r+L>>2]=V(c*v)+V(V(p*_)+m),a=V(c*b),s=V(V(p*d)+g)}if(M[4+(r+L|0)>>2]=a+s,(0|i)==(0|(t=t+1|0)))break}N=32+n|0},v[2]=function(t,e,r){t|=0,e|=0;var i,n,o,a=0;if(n=w[140+(r|=0)>>2],o=w[r+136>>2],i=w[t+24>>2],-1==(0|(a=w[t+4>>2])))return w[(t=e<<2)+o>>2]=w[i+16>>2],void(w[t+n>>2]=1065353216);r=w[r+4>>2]+(a<<5)|0,a=w[i+20>>2],v[w[r+20>>2]](w[r+24>>2],a,a,w[i+12>>2]),e<<=2,t=w[t+4>>2]<<2,M[e+o>>2]=M[i+16>>2]*M[t+o>>2],w[e+n>>2]=w[t+n>>2]},v[3]=function(t,e,r,i){t|=0,e|=0,r|=0,i|=0;var n,o=V(0),a=V(0),s=V(0),l=V(0),h=0,c=V(0),p=0,g=V(0),d=V(0),m=V(0);if(h=w[t+28>>2],a=function(t){var e,r=V(0),i=0,n=0,o=0;N=e=N-16|0,f(t);t:if((i=2147483647&(n=u(0)))>>>0<=1061752794){if(r=V(1),i>>>0<964689920)break t;r=W(+t)}else if(i>>>0<=1081824209){if(o=+t,1075235812<=i>>>0){r=V(-W(((0|n)<0?3.141592653589793:-3.141592653589793)+o));break t}if((0|n)<=-1){r=H(o+1.5707963267948966);break t}r=H(1.5707963267948966-o)}else if(i>>>0<=1088565717){if(1085271520<=i>>>0){r=W(+t+((0|n)<0?6.283185307179586:-6.283185307179586));break t}if((0|n)<=-1){r=H(-4.71238898038469-t);break t}r=H(t-4.71238898038469)}else if(r=V(t-t),!(2139095040<=i>>>0))if((i=3&nt(t,8+e|0))>>>0<=2){switch(i-1|0){default:r=W(P[8+e>>3]);break t;case 0:r=H(-P[8+e>>3]);break t;case 1:}r=V(-W(P[8+e>>3]))}else r=H(P[8+e>>3]);return N=16+e|0,r}(o=V(V(V(M[t>>2]+M[t+20>>2])*V(3.1415927410125732))/V(180))),s=M[t+8>>2],n=w[t+24>>2],o=function(t){var e,r=0,i=0,n=0;N=e=N-16|0,f(t);t:if((r=2147483647&(n=u(0)))>>>0<=1061752794){if(r>>>0<964689920)break t;t=H(+t)}else if(r>>>0<=1081824209){if(i=+t,r>>>0<=1075235811){if((0|n)<=-1){t=V(-W(i+1.5707963267948966));break t}t=W(i+-1.5707963267948966);break t}t=H(-(((0|n)<0?3.141592653589793:-3.141592653589793)+i))}else if(r>>>0<=1088565717){if(i=+t,r>>>0<=1085271519){if((0|n)<=-1){t=W(i+4.71238898038469);break t}t=V(-W(i+-4.71238898038469));break t}t=H(((0|n)<0?6.283185307179586:-6.283185307179586)+i)}else if(2139095040<=r>>>0)t=V(t-t);else if((r=3&nt(t,8+e|0))>>>0<=2){switch(r-1|0){default:t=H(P[8+e>>3]);break t;case 0:t=W(P[8+e>>3]);break t;case 1:}t=H(-P[8+e>>3])}else t=V(-W(P[8+e>>3]));return N=16+e|0,t}(o),0<(0|i))for(a=V(s*a),c=V(h?-1:1),d=V(a*c),l=V(n?-1:1),m=V(l*V(s*o)),a=V(l*a),s=V(V(s*V(-o))*c),o=M[t+16>>2],c=M[t+12>>2];h=(t=p<<3)+r|0,l=M[(t=t+e|0)>>2],g=M[t+4>>2],M[h+4>>2]=o+V(V(m*l)+V(d*g)),M[h>>2]=c+V(V(a*l)+V(s*g)),(0|(p=p+1|0))!=(0|i););},v[4]=function(t,e,r){t|=0,e|=0,r|=0;var i,n,o,a,s,u=0,l=V(0),h=V(0),c=0,f=V(0),p=V(0),g=V(0),d=V(0);if(N=i=N+-64|0,o=w[r+140>>2],a=w[r+136>>2],n=w[t+24>>2],-1!=(0|(s=w[t+4>>2]))){u=w[r+4>>2],c=w[n+12>>2],w[24+i>>2]=c,r=w[n+16>>2],w[28+i>>2]=r,w[16+i>>2]=0,p=1==w[8+(u=u+(s<<5)|0)>>2]?V(-10):V(-.10000000149011612),M[20+i>>2]=p,w[60+i>>2]=r,w[56+i>>2]=c,v[w[u+20>>2]](w[u+24>>2],56+i|0,48+i|0,1),f=V(1),c=9;t:{for(;;){if(r=c,g=V(f*V(0)),M[32+i>>2]=g+M[56+i>>2],d=V(p*f),M[36+i>>2]=d+M[60+i>>2],v[w[u+20>>2]](w[u+24>>2],32+i|0,40+i|0,1),h=V(M[44+i>>2]-M[52+i>>2]),M[44+i>>2]=h,l=V(M[40+i>>2]-M[48+i>>2]),M[40+i>>2]=l,h!=V(0)||l!=V(0)){r=w[44+i>>2],w[8+i>>2]=w[40+i>>2],w[12+i>>2]=r;break t}if(M[32+i>>2]=M[56+i>>2]-g,M[36+i>>2]=M[60+i>>2]-d,v[w[u+20>>2]](w[u+24>>2],32+i|0,40+i|0,1),h=V(M[40+i>>2]-M[48+i>>2]),M[40+i>>2]=h,l=V(M[44+i>>2]-M[52+i>>2]),(M[44+i>>2]=l)!=V(0)||h!=V(0)){M[12+i>>2]=-l,M[8+i>>2]=-h;break t}if(c=r+-1|0,f=V(f*V(.10000000149011612)),!r)break}Y(3,1265,0)}l=function(t,e){var r=V(0);if((r=V(yt(M[4+t>>2],M[t>>2])-yt(M[4+e>>2],M[e>>2])))<V(-3.1415927410125732))for(;(r=V(r+V(6.2831854820251465)))<V(-3.1415927410125732););if(r>V(3.1415927410125732))for(;(r=V(r+V(-6.2831854820251465)))>V(3.1415927410125732););return r}(16+i|0,8+i|0),v[w[u+20>>2]](w[u+24>>2],24+i|0,24+i|0,1),w[n+12>>2]=w[24+i>>2],w[n+16>>2]=w[28+i>>2],M[n+20>>2]=M[n+20>>2]+V(V(l*V(-180))/V(3.1415927410125732)),e<<=2,t=w[t+4>>2]<<2,M[e+a>>2]=M[n+4>>2]*M[t+a>>2],l=V(M[n+8>>2]*M[t+o>>2]),M[e+o>>2]=l,M[n+8>>2]=l}else w[(t=e<<2)+a>>2]=w[n+4>>2],w[t+o>>2]=w[n+8>>2];N=64+i|0},v[5]=function(t){t|=0;var e,r,i=0,n=0,o=0,a=0,s=0,u=V(0),l=0,h=0,c=0,f=0,p=0,g=0,d=0,m=0,_=0,y=0,b=0;if(c=w[t+248>>2],r=w[t+204>>2],e=w[t+200>>2],!((0|(s=w[t+220>>2]))<1)){for(l=w[t+236>>2],a=w[t+216>>2],o=w[t+224>>2];M[(n=i<<2)+l>>2]=M[n+o>>2]*M[n+a>>2],(0|s)!=(0|(i=i+1|0)););if(!((0|s)<1))for(l=w[t+240>>2],a=w[t+216>>2],o=w[t+228>>2],i=0;M[(n=i<<2)+l>>2]=M[n+o>>2]*M[n+a>>2],(0|s)!=(0|(i=i+1|0)););}if(1<=(0|e))for(m=w[t+208>>2],s=l=0;;){if(w[c>>2]){f=(o=w[(n=l<<2)+w[t+212>>2]>>2])+s|0;t:{if((0|o)<=0)w[n+w[t+276>>2]>>2]=0;else{for(a=w[t+236>>2],u=V(0),i=s;u=V(u+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|f););if(M[n+w[t+276>>2]>>2]=u,!((0|o)<1)){for(a=w[t+240>>2],u=V(0),i=s;u=V(u+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|f););break t}}u=V(0)}if(i=n+w[t+268>>2]|0,u=V(u+V(.0010000000474974513)),a=V(E(u))<V(2147483648)?~~u:-2147483648,w[i>>2]=a,a=(i=w[12+((l<<4)+r|0)>>2])<<1,p=w[n+w[t+272>>2]>>2],(i=(0|i)<1)||Q(p,0,(1<(0|a)?a:1)<<2),!(i|(0|o)<1))for(g=w[t+244>>2],_=w[t+216>>2],y=w[t+232>>2],n=s;;){for(h=(i=n<<2)+_|0,b=w[i+y>>2],o=i=0;M[g+(d=o<<2)>>2]=M[b+d>>2]*M[h>>2],(0|(o=o+1|0))<(0|a););for(;M[(h=(o=i<<2)+p|0)>>2]=M[o+g>>2]+M[h>>2],(0|(i=i+1|0))<(0|a););if(!((0|(n=n+1|0))<(0|f)))break}}if(c=c+4|0,s=w[(l<<2)+m>>2]+s|0,(0|e)==(0|(l=l+1|0)))break}},v[6]=function(t){t|=0;var e,r,i=0,n=0,o=0,a=0,s=0,u=0,l=V(0),h=0,c=0,f=0,p=0,g=0,d=0,m=0,_=0,y=0,b=0;if(c=w[t+172>>2],e=w[t- -64>>2],r=w[t+68>>2],1<=(0|(o=w[t+92>>2])))for(s=w[t+104>>2],u=w[t+88>>2],n=w[t+96>>2];M[(a=i<<2)+s>>2]=M[n+a>>2]*M[u+a>>2],(0|o)!=(0|(i=i+1|0)););if(1<=(0|e))for(d=w[t+80>>2],a=s=0;;){if(w[c>>2]){if(f=(i=w[w[t+84>>2]+(s<<2)>>2])+a|0,o=(0|i)<1)l=V(0);else for(u=w[t+104>>2],l=V(0),i=a;l=V(l+M[u+(i<<2)>>2]),(0|(i=i+1|0))<(0|f););if(i=I(s,24)+r|0,M[i+16>>2]=l,u=(n=w[i+12>>2])<<1,(n=(0|n)<1)||Q(w[i+20>>2],0,(1<(0|u)?u:1)<<2),!(n|o))for(m=w[i+20>>2],p=w[t+108>>2],_=w[t+88>>2],y=w[t+100>>2],o=a;;){for(h=(i=o<<2)+_|0,b=w[i+y>>2],n=i=0;M[(g=n<<2)+p>>2]=M[b+g>>2]*M[h>>2],(0|(n=n+1|0))<(0|u););for(;M[(h=(n=i<<2)+m|0)>>2]=M[n+p>>2]+M[h>>2],(0|(i=i+1|0))<(0|u););if(!((0|(o=o+1|0))<(0|f)))break}}if(c=c+4|0,a=w[(s<<2)+d>>2]+a|0,(0|e)==(0|(s=s+1|0)))break}},v[7]=function(t){t|=0;var e,r=0,i=V(0),n=0,o=0,a=0,s=0,u=0,l=0,h=0;if(u=w[t+36>>2],e=w[t+4>>2],1<=(0|(o=w[t+24>>2])))for(l=w[t+32>>2],h=w[t+20>>2],n=w[t+28>>2];M[(a=r<<2)+l>>2]=M[n+a>>2]*M[a+h>>2],(0|o)!=(0|(r=r+1|0)););if(1<=(0|e))for(a=w[t+12>>2],n=0;;){if(w[u>>2]){if((0|(r=w[(o=s<<2)+w[t+16>>2]>>2]))<1)i=V(0);else for(l=r+n|0,h=w[t+32>>2],i=V(0),r=n;i=V(i+M[h+(r<<2)>>2]),(0|(r=r+1|0))<(0|l););r=o+w[t+44>>2]|0,i=V(i+V(.0010000000474974513)),V(E(i))<V(2147483648)?w[r>>2]=~~i:w[r>>2]=-2147483648}if(u=u+4|0,n=w[a+(s<<2)>>2]+n|0,(0|e)==(0|(s=s+1|0)))break}},v[8]=function(t){t|=0;var e,r,i=0,n=0,o=V(0),a=0,s=0,u=0,l=0,h=0,c=0,f=0;if(f=w[t+176>>2],r=w[t+72>>2],e=w[t+76>>2],!((0|(u=w[t+124>>2]))<1)){for(l=w[t+148>>2],a=w[t+120>>2],s=w[t+128>>2];M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););if(!((0|u)<1)){for(l=w[t+152>>2],a=w[t+120>>2],s=w[t+132>>2],i=0;M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););if(!((0|u)<1)){for(l=w[t+156>>2],a=w[t+120>>2],s=w[t+136>>2],i=0;M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););if(!((0|u)<1)){for(l=w[t+160>>2],a=w[t+120>>2],s=w[t+140>>2],i=0;M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););if(!((0|u)<1))for(l=w[t+164>>2],a=w[t+120>>2],s=w[t+144>>2],i=0;M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););}}}}if(1<=(0|r))for(l=w[t+112>>2],s=0;;){if(w[f>>2]){t:{e:{r:{i:{if((0|(n=w[w[t+116>>2]+(h<<2)>>2]))<=0)w[4+((h<<5)+e|0)>>2]=0;else{for(c=n+s|0,a=w[t+148>>2],o=V(0),i=s;o=V(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|c););if(M[4+(u=(h<<5)+e|0)>>2]=o,!(n=(0|n)<1)){for(a=w[t+152>>2],o=V(0),i=s;o=V(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|c););if(M[u+20>>2]=o,n)break i;for(a=w[t+156>>2],o=V(0),i=s;o=V(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|c););if(M[u+12>>2]=o,n)break r;for(a=w[t+160>>2],o=V(0),i=s;o=V(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|c););if(M[u+16>>2]=o,n)break e;for(a=w[t+164>>2],o=V(0),i=s;o=V(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|c););break t}}w[20+((h<<5)+e|0)>>2]=0}w[12+((h<<5)+e|0)>>2]=0}w[16+((h<<5)+e|0)>>2]=0}o=V(0)}M[8+((h<<5)+e|0)>>2]=o}if(f=f+4|0,s=w[l+(h<<2)>>2]+s|0,(0|r)==(0|(h=h+1|0)))break}},v[9]=function(t){t|=0;var e,r=0,i=0,n=0,o=0,a=0,s=V(0),u=0,l=0,h=0,c=0;if(e=w[t+340>>2],1<=(0|(n=w[t+360>>2])))for(u=w[t+368>>2],l=w[t+356>>2],i=w[t+364>>2];M[(o=r<<2)+u>>2]=M[i+o>>2]*M[o+l>>2],(0|n)!=(0|(r=r+1|0)););if(1<=(0|e))for(h=w[t+348>>2],c=w[t+344>>2],o=w[t+352>>2],i=0;;){if((0|(r=w[(n=a<<2)+o>>2]))<1)s=V(0);else for(u=r+i|0,l=w[t+368>>2],s=V(0),r=i;s=V(s+M[l+(r<<2)>>2]),(0|(r=r+1|0))<(0|u););if(M[20+(I(a,24)+c|0)>>2]=s,i=w[n+h>>2]+i|0,(0|e)==(0|(a=a+1|0)))break}},v[10]=function(t){var e=0,r=0,i=0,n=0,o=0,a=0,s=0;if(!(w[380+(t|=0)>>2]||(0|(e=w[t+200>>2]))<1))for(a=(r=w[t+204>>2])+(e<<4)|0,e=w[t+248>>2],n=w[t+272>>2];;){if(w[e>>2]&&(t=1,!((0|(i=w[r+12>>2]))<1)))for(i<<=1,s=w[n>>2];M[(o=(t<<2)+s|0)>>2]=-M[o>>2],(0|(t=t+2|0))<(0|i););if(n=n+4|0,e=e+4|0,!((r=r+16|0)>>>0<a>>>0))break}},v[11]=function(t,e,r){e|=0,r|=0;var i,n=0;return K(i=w[20+(t|=0)>>2],e,n=r>>>0<(n=w[t+16>>2]-i|0)>>>0?r:n),w[t+20>>2]=n+w[t+20>>2],0|r},v[12]=function(t){return 0},v[13]=function(t,e,r){e|=0,r|=0;var i,n=0,o=0,a=0,s=0,u=0;for(N=i=N-32|0,n=w[28+(t|=0)>>2],w[16+i>>2]=n,a=w[t+20>>2],w[28+i>>2]=r,w[24+i>>2]=e,e=a-n|0,a=(w[20+i>>2]=e)+r|0,s=2,e=16+i|0;;){t:{if((o=(n=0)|U(w[t+60>>2],0|e,0|s,12+i|0))&&(w[1906]=o,n=-1),(0|(n=n?w[12+i>>2]=-1:w[12+i>>2]))!=(0|a)){if(-1<(0|n))break t;w[t+28>>2]=0,w[t+16>>2]=0,w[t+20>>2]=0,w[t>>2]=32|w[t>>2],2!=((t=0)|s)&&(t=r-w[e+4>>2]|0)}else e=w[t+44>>2],w[t+28>>2]=e,w[t+20>>2]=e,w[t+16>>2]=e+w[t+48>>2],t=r;return N=32+i|0,0|t}o=n-((u=(o=w[e+4>>2])>>>0<n>>>0)?o:0)|0,w[(e=u?e+8|0:e)>>2]=o+w[e>>2],w[e+4>>2]=w[e+4>>2]-o,a=a-n|0,s=s-u|0}},v[14]=function(t,e,r,i){return O=0},v[15]=function(t,e,r,i,n,o){t|=0,e=+e,r|=0,i|=0,n|=0,o|=0;var a,s,f,p=0,g=0,d=0,m=0,_=0,y=0,b=0,v=0,S=0,C=0,B=0,M=0,P=0,V=0,k=0,T=0,R=0;if(w[44+(N=a=N-560|0)>>2]=0,c(+e),p=0|u(1),f=4294967295<u(0)>>>0?0:1,s=(0|p)<-1||(0|p)<=-1&&f?(c(+(e=-e)),p=0|u(1),u(0),k=1,3184):2048&n?(k=1,3187):(k=1&n)?3190:3185,2146435072!=(2146435072&p))if(e=function t(e,r){var i,n,o=0;if(c(+e),o=0|u(1),i=0|u(0),2047!=(0|(o=(n=o)>>>20&2047))){if(!o)return o=r,r=0==e?0:(e=t(0x10000000000000000*e,r),w[r>>2]+-64|0),w[o>>2]=r,e;w[r>>2]=o+-1022,l(0,0|i),l(1,-2146435073&n|1071644672),e=+h()}return e}(e,44+a|0),0!=(e+=e)&&(w[44+a>>2]=w[44+a>>2]+-1),M=16+a|0,97!=(0|(T=32|o))){for(p=(0|i)<0,0!=e?(m=w[44+a>>2]+-28|0,w[44+a>>2]=m,e*=268435456):m=w[44+a>>2],b=p?6:i,d=C=(0|m)<0?48+a|0:336+a|0;p=e<4294967296&0<=e?~~e>>>0:0,d=(i=d)+4|0,0!=(e=1e9*(e-((w[i>>2]=p)>>>0))););if((0|m)<1)p=d,g=C;else for(g=C;;){if(S=(0|m)<29?m:29,!((p=d+-4|0)>>>0<g>>>0)){for(i=S,v=0;y=0,R=v,v=w[(B=p)>>2],_=31&i,_=32<=(63&i)>>>0?(m=v<<_,0):(m=(1<<_)-1&v>>>32-_,v<<_),y=m+y|0,y=(v=R+_|0)>>>0<_>>>0?y+1|0:y,R=B,B=Ct(v=Bt(_=v,y,1e9),O,1e9),w[R>>2]=_-B,g>>>0<=(p=p+-4|0)>>>0;);(i=v)&&(w[(g=g+-4|0)>>2]=i)}for(;g>>>0<(p=d)>>>0&&!w[(d=p+-4|0)>>2];);if(m=w[44+a>>2]-S|0,d=p,!(0<(0|(w[44+a>>2]=m))))break}if((0|m)<=-1)for(V=1+((b+25|0)/9|0)|0,S=102==(0|T);;){if(v=(0|m)<-9?9:0-m|0,p>>>0<=g>>>0)g=w[g>>2]?g:g+4|0;else{for(B=1e9>>>v,_=-1<<v^-1,m=0,d=g;i=w[d>>2],w[d>>2]=(i>>>v)+m,m=I(B,i&_),(d=d+4|0)>>>0<p>>>0;);g=w[g>>2]?g:g+4|0,m&&(w[p>>2]=m,p=p+4|0)}if(m=v+w[44+a>>2]|0,p=(0|V)<p-(i=S?C:g)>>2?i+(V<<2)|0:p,!((0|(w[44+a>>2]=m))<0))break}if(!(p>>>(d=0)<=g>>>0||(d=I(C-g>>2,9),m=10,(i=w[g>>2])>>>0<10)))for(;d=d+1|0,(m=I(m,10))>>>0<=i>>>0;);if((0|(i=(b-(102==(0|T)?0:d)|0)-(103==(0|T)&0!=(0|b))|0))<(I(p-C>>2,9)+-9|0)){if(y=(C+((i=(0|(_=i+9216|0))/9|0)<<2)|0)-4092|0,m=10,(0|(i=1+(_-I(i,9)|0)|0))<=8)for(;m=I(m,10),9!=(0|(i=i+1|0)););if(V=y+4|0,((S=(B=w[y>>2])-I(m,_=(B>>>0)/(m>>>0)|0)|0)||(0|V)!=(0|p))&&(P=S>>>0<(i=m>>>1)>>>0?.5:(0|p)==(0|V)&&(0|i)==(0|S)?1:1.5,e=1&_?9007199254740994:9007199254740992,!k|45!=x[0|s]||(P=-P,e=-e),i=B-S|0,w[y>>2]=i,e+P!=e)){if(i=i+m|0,1e9<=(w[y>>2]=i)>>>0)for(;(y=y+-4|(w[y>>2]=0))>>>0<g>>>0&&(w[(g=g+-4|0)>>2]=0),i=w[y>>2]+1|0,999999999<(w[y>>2]=i)>>>0;);if(d=I(C-g>>2,9),m=10,!((i=w[g>>2])>>>0<10))for(;d=d+1|0,(m=I(m,10))>>>0<=i>>>0;);}p=(i=y+4|0)>>>0<p>>>0?i:p}t:{for(;;){if((S=p)>>>(B=0)<=g>>>0)break t;if(w[(p=S+-4|0)>>2])break}B=1}if(103==(0|T)){if(b=((i=(0|d)<(0|(p=b||1))&-5<(0|d))?-1^d:-1)+p|0,o=(i?-1:-2)+o|0,!(_=8&n)){if(p=9,B&&(_=w[S+-4>>2])&&!((_>>>(p=0))%(i=10)))for(;p=p+1|0,!((_>>>0)%((i=I(i,10))>>>0)););i=I(S-C>>2,9)+-9|0,b=102!=(32|o)?((_=0)|b)<(0|(i=0<(0|(i=(i+d|0)-p|0))?i:0))?b:i:((_=0)|b)<(0|(i=0<(0|(i=i-p|0))?i:0))?b:i}}else _=8&n;if(y=0!=(0|(m=b|_)),i=t,R=r,p=0<(0|d)?d:0,102!=(0|(v=32|o))){if((M-(p=Z((p=d>>31)+d^p,0,M))|0)<=1)for(;A[0|(p=p+-1|0)]=48,(M-p|0)<2;);A[0|(V=p+-2|0)]=o,A[p+-1|0]=(0|d)<0?45:43,p=M-V|0}if(j(i,32,R,y=1+(p+(y+(b+k|0)|0)|0)|0,n),X(t,s,k),j(t,48,r,y,65536^n),102!=(0|v)){t:if(!((0|b)<0))for(o=B?S:g+4|0,i=16+a|8,C=16+a|9,d=g;;){(0|C)==(0|(p=Z(w[d>>2],0,C)))&&(A[24+a|0]=48,p=i);e:if((0|g)==(0|d))X(t,p,1),p=p+1|0,(0|b)<1&&!_||X(t,3219,1);else{if(p>>>0<=16+a>>>0)break e;for(;A[0|(p=p+-1|0)]=48,16+a>>>0<p>>>0;);}if(X(t,v=p,(0|(p=C-p|0))<(0|b)?p:b),b=b-p|0,o>>>0<=(d=d+4|0)>>>0)break t;if(!(-1<(0|b)))break}j(t,48,b+18|0,18,0),X(t,V,M-V|0)}else{for(i=16+a|8,d=16+a|9,g=o=C>>>0<g>>>0?C:g;;){p=Z(w[g>>2],0,d);t:if((0|o)==(0|g))(0|p)==(0|d)&&(A[24+a|0]=48,p=i);else{if(p>>>0<=16+a>>>0)break t;for(;A[0|(p=p+-1|0)]=48,16+a>>>0<p>>>0;);}if(X(t,p,d-p|0),!((g=g+4|0)>>>0<=C>>>0))break}m&&X(t,3219,1);t:if(!((0|b)<1|S>>>0<=g>>>0))for(;;){if(16+a>>>0<(p=Z(w[g>>2],0,d))>>>0)for(;A[0|(p=p+-1|0)]=48,16+a>>>0<p>>>0;);if(X(t,p,(0|b)<9?b:9),b=b+-9|0,S>>>0<=(g=g+4|0)>>>0)break t;if(!(0<(0|b)))break}j(t,48,b+9|0,9,0)}}else{if(B=(C=32&o)?9+s|0:s,!(11<i>>>0)&&(p=12-i|0)){for(P=8;P*=16,p=p+-1|0;);e=45!=x[0|B]?e+P-P:-(P+(-e-P))}for((0|M)==(0|(p=Z((d=(p=w[44+a>>2])>>31)^p+d,0,M)))&&(A[15+a|0]=48,p=15+a|0),_=2|k,d=w[44+a>>2],A[0|(S=p+-2|0)]=o+15,A[p+-1|0]=(0|d)<0?45:43,p=8&n,g=16+a|0;o=g,v=C,d=E(e)<2147483648?~~e:-2147483648,A[0|g]=v|x[d+3168|0],1!=((g=o+1|0)-(16+a|0)|0)|(0==(e=16*(e-(0|d)))?!(p|0<(0|i)):0)||(A[o+1|0]=46,g=o+2|0),0!=e;);j(t,32,r,y=(o=!i|(0|i)<=((g-a|0)-18|0)?((M-(16+a|0)|0)-S|0)+g|0:2+((i+M|0)-S|0)|0)+_|0,n),X(t,B,_),j(t,48,r,y,65536^n),X(t,16+a|0,i=g-(16+a|0)|0),j(t,48,o-((p=i)+(i=M-S|0)|0)|0,0,0),X(t,S,i)}else j(t,32,r,y=k+3|0,-65537&n),X(t,s,k),i=o>>>5&1,X(t,e!=e?i?3211:3215:i?3203:3207,3);return j(t,32,r,y,8192^n),N=560+a|0,0|((0|y)<(0|r)?r:y)},v[16]=function(t,e){var r,i,n;t|=0,e=w[(r=e|=0)>>2]+15&-16,w[r>>2]=e+16,i=t,n=function(t,e,r,i){var n,o,a,s,u=0,c=0,f=0;N=n=N-32|0,u=(o=u=2147483647&i)-1006698496|0,(c=f=r)>>>0<0&&(u=u+1|0),a=c,c=u,u=o-1140785152|0,(s=f)>>>0<0&&(u=u+1|0);t:if((0|u)==(0|c)&a>>>0<s>>>0|c>>>0<u>>>0){if(u=i<<4|r>>>28,r=r<<4|e>>>28,134217728==(0|(f=e&=268435455))&1<=t>>>0|134217728<e>>>0){u=u+1073741824|0,(t=r+1|0)>>>0<1&&(u=u+1|0),c=t;break t}if(u=u-(((c=r)>>>0<0)+-1073741824|0)|0,t|134217728^f)break t;(t=c+(1&c)|0)>>>0<c>>>0&&(u=u+1|0),c=t}else(!f&2147418112==(0|o)?!(t|e):2147418112==(0|o)&f>>>0<0|o>>>0<2147418112)?(u=2146435072,1140785151==((c=0)|o)&4294967295<f>>>0|1140785151<o>>>0||(f=o>>>16)>>>(u=0)<15249||(function(t,e,r,i,n,o){var a=0,s=0,u=0,l=0;e:if(64&o)e=31&(r=o-64|0),e=32<=(63&r)>>>0?(r=0,n>>>e):(r=n>>>e,((1<<e)-1&n)<<32-e|i>>>e),n=i=0;else{if(!o)break e;s=n,u=i,a=31&(l=64-o|0),l=32<=(63&l)>>>0?(s=u<<a,0):(s=(1<<a)-1&u>>>32-a|s<<a,u<<a),u=e,e=31&(a=o),e=32<=(63&a)>>>0?(a=0,r>>>e):(a=r>>>e,((1<<e)-1&r)<<32-e|u>>>e),e|=l,r=a|s,a=i,i=31&o,i=32<=(63&o)>>>0?(s=0,n>>>i):(s=n>>>i,((1<<i)-1&n)<<32-i|a>>>i),n=s}w[t>>2]=e,w[4+t>>2]=r,w[8+t>>2]=i,w[12+t>>2]=n}(n,t,e,r,u=65535&i|65536,15361-f|0),function(t,e,r,i,n,o){var a=0,s=0,u=0,l=0;64&o?(i=e,e=31&(n=o+-64|0),32<=(63&n)>>>0?(n=i<<e,i=0):(n=(1<<e)-1&i>>>32-e|r<<e,i<<=e),r=e=0):o&&(a=i,i=31&(u=o),l=32<=(63&o)>>>0?(s=a<<i,0):(s=(1<<i)-1&a>>>32-i|n<<i,a<<i),i=r,a=e,n=31&(o=64-o|0),32<=(63&o)>>>0?(o=0,i>>>=n):(o=i>>>n,i=((1<<n)-1&i)<<32-n|a>>>n),i|=l,n=o|s,o=e,e=31&u,e=32<=(63&u)>>>0?(s=o<<e,0):(s=(1<<e)-1&o>>>32-e|r<<e,o<<e),r=s),w[t>>2]=e,w[4+t>>2]=r,w[8+t>>2]=i,w[12+t>>2]=n}(16+n|0,t,e,r,u,f+-15233|0),r=w[4+n>>2],t=w[8+n>>2],u=w[12+n>>2]<<4|t>>>28,c=t<<4|r>>>28,134217728==(0|(r=t=268435455&r))&1<=(e=w[n>>2]|0!=(w[16+n>>2]|w[24+n>>2])|0!=(w[20+n>>2]|w[28+n>>2]))>>>0|134217728<t>>>0?((t=c+1|0)>>>0<1&&(u=u+1|0),c=t):e|134217728^r||((t=c+(1&c)|0)>>>0<c>>>0&&(u=u+1|0),c=t))):(c=r<<4|e>>>28,u=524287&(u=i<<4|r>>>28)|2146959360);return N=32+n|0,l(0,0|c),l(1,-2147483648&i|u),+h()}(w[e>>2],w[e+4>>2],w[e+8>>2],w[e+12>>2]),P[i>>3]=n},{d:function(){},e:function(){return 67108864},f:function(){return 3},g:function(t,e){return e|=0,N=e=N-16|0,t=(t|=0)?ot(t)?(Y(4,1533,0),0):x[t+4|0]:(w[e+4>>2]=1246,w[e>>2]=1671,Y(4,1087,e),0),N=e+16|0,0|t},h:function(t){t|=0,w[1641]=t},i:function(t,e){var r;return e|=0,N=r=N-48|0,t=(t|=0)?(t+63&-64)==(0|t)?(e+63&-64)==(0|e)&&e?function(t){var e,r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0,h=0,c=0;if(w[24+(N=e=N-32|0)>>2]=0,w[16+e>>2]=4,function(t){var e;ht(16+(N=e=N-272|0)|0,1611,w[12+e>>2]=t),function(t){var e;w[(N=e=N-16|0)>>2]=t,function(t,e){var r;lt(t,1176,w[12+(N=r=N-16|0)>>2]=e,0,0),N=16+r|0}(w[670],e),N=16+e|0}(16+e|0),N=272+e|0}(16+e|(w[20+e>>2]=0)),ot(t))Y(4,1183,0),t=0;else if(4<=(i=x[t+4|0])>>>0)w[4+e>>2]=i,w[e>>2]=3,Y(4,1332,e),t=0;else{for(1!=(0|(o=!x[t+5|0]))&&(q(t+4|0,1),G(t- -64|0,4,160),A[t+5|0]=0),r=t- -64|0,n=102,i=t+704|0;w[i>>2]=w[r>>2]+t,i=i+4|0,r=r+4|0,n=n+-1|0;);if(1!=(0|o)&&(i=x[t+4|0],G(w[t+704>>2],4,32),q(w[t+708>>2],4),q(w[t+708>>2]+4|0,4),q(w[t+708>>2]+8|0,4),q(w[t+708>>2]+12|0,4),q(w[t+708>>2]+16|0,4),q(w[t+708>>2]+20|0,1),G(w[t+720>>2],4,w[w[t+704>>2]>>2]),G(w[t+724>>2],4,w[w[t+704>>2]>>2]),G(w[t+728>>2],4,w[w[t+704>>2]>>2]),G(w[t+732>>2],4,w[w[t+704>>2]>>2]),G(w[t+736>>2],4,w[w[t+704>>2]>>2]),G(w[t+740>>2],4,w[w[t+704>>2]>>2]),G(w[t+752>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+756>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+760>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+764>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+768>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+772>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+776>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+780>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+784>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+788>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+792>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+796>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+800>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+804>>2],4,w[w[t+704>>2]+12>>2]),G(w[t+808>>2],4,w[w[t+704>>2]+12>>2]),G(w[t+812>>2],4,w[w[t+704>>2]+12>>2]),G(w[t+816>>2],4,w[w[t+704>>2]+12>>2]),G(w[t+840>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+844>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+848>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+852>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+856>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+860>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+864>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+868>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+872>>2],1,w[w[t+704>>2]+16>>2]),G(w[t+876>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+880>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+884>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+888>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+892>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+896>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+908>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+912>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+916>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+920>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+924>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+928>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+932>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+936>>2],4,w[w[t+704>>2]+24>>2]),G(w[t+940>>2],4,w[w[t+704>>2]+28>>2]),G(w[t+944>>2],4,w[w[t+704>>2]+28>>2]),G(w[t+948>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+952>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+956>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+960>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+964>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+968>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+972>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+976>>2],4,w[w[t+704>>2]+36>>2]),G(w[t+980>>2],4,w[w[t+704>>2]+36>>2]),G(w[t+984>>2],4,w[w[t+704>>2]+36>>2]),G(w[t+988>>2],4,w[w[t+704>>2]+40>>2]),G(w[t+992>>2],4,w[w[t+704>>2]+44>>2]),G(w[t+996>>2],4,w[w[t+704>>2]+48>>2]),G(w[t+1e3>>2],4,w[w[t+704>>2]+48>>2]),G(w[t+1004>>2],4,w[w[t+704>>2]+52>>2]),G(w[t+1008>>2],4,w[w[t+704>>2]+52>>2]),G(w[t+1012>>2],4,w[w[t+704>>2]+56>>2]),G(w[t+1016>>2],4,w[w[t+704>>2]+60>>2]),G(w[t+1020>>2],2,w[w[t+704>>2]+64>>2]),G(w[t+1024>>2],4,w[w[t+704>>2]+68>>2]),G(w[t+1028>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1032>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1036>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1040>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1044>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1048>>2],4,w[w[t+704>>2]+76>>2]),G(w[t+1052>>2],4,w[w[t+704>>2]+76>>2]),G(w[t+1056>>2],4,w[w[t+704>>2]+76>>2]),G(w[t+1068>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1072>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1076>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1080>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1084>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1088>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1092>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1096>>2],4,w[w[t+704>>2]+84>>2]),G(w[t+1100>>2],2,w[w[t+704>>2]+84>>2]),G(w[t+1104>>2],4,w[w[t+704>>2]+88>>2]),i>>>0<2||G(w[t+1108>>2],4,w[w[t+704>>2]+8>>2])),w[1643]=5,w[1642]=6,w[1644]=7,w[1645]=8,w[1646]=9,w[1647]=10,r=w[t+704>>2],1<=w[r>>2])for(i=0;w[w[t+712>>2]+(i<<2)>>2]=w[t+716>>2]+(i<<6),i=i+1|0,r=w[t+704>>2],(0|i)<w[r>>2];);if(1<=w[r+4>>2])for(i=0;w[w[t+744>>2]+(i<<2)>>2]=w[t+748>>2]+(i<<6),i=i+1|0,r=w[t+704>>2],(0|i)<w[r+4>>2];);if(1<=w[r+16>>2])for(i=0;w[(r=i<<2)+w[t+820>>2]>>2]=w[t+836>>2]+(i<<6),w[r+w[t+824>>2]>>2]=w[t+1016>>2]+(w[r+w[t+880>>2]>>2]<<2),w[r+w[t+828>>2]>>2]=w[t+1020>>2]+(w[r+w[t+884>>2]>>2]<<1),w[r+w[t+832>>2]>>2]=w[t+1024>>2]+(w[r+w[t+892>>2]>>2]<<2),i=i+1|0,r=w[t+704>>2],(0|i)<w[r+16>>2];);if(1<=w[r+20>>2])for(i=0;w[w[t+900>>2]+(i<<2)>>2]=w[t+904>>2]+(i<<6),i=i+1|0,r=w[t+704>>2],(0|i)<w[r+20>>2];);if(1<=w[r+80>>2])for(i=0;w[w[t+1060>>2]+(i<<2)>>2]=w[t+1064>>2]+(i<<6),i=i+1|0,r=w[t+704>>2],(0|i)<w[r+80>>2];);if(!(1&A[w[t+708>>2]+20|0]||(0|(o=w[r+16>>2]))<1)){for(s=w[t+888>>2],u=w[t+884>>2],a=w[t+1020>>2],i=0;;){if(0<(0|(l=w[(r=i<<2)+s>>2]+-1|0)))for(h=a+(w[r+u>>2]<<1)|0,r=0;c=C[(n=(r<<1)+h|0)>>1],S[n>>1]=C[n+4>>1],S[n+4>>1]=c,(0|(r=r+3|0))<(0|l););if((0|o)==(0|(i=i+1|0)))break}for(i=w[t+876>>2],s=w[t+880>>2],u=w[t+1016>>2],n=0;;){if(1<=(0|(a=w[(r=n<<2)+i>>2])))for(a=(r=u+(w[r+s>>2]<<2)|0)+(a<<3)|0,r=r+4|0;M[r>>2]=V(1)-M[r>>2],(r=r+8|0)>>>0<a>>>0;);if((0|o)==(0|(n=n+1|0)))break}}}return N=32+e|0,t}(t):(w[20+r>>2]=1592,w[16+r>>2]=1688,Y(4,1087,16+r|0),0):(w[36+r>>2]=1441,w[32+r>>2]=1688,Y(4,1087,32+r|0),0):(w[4+r>>2]=1246,w[r>>2]=1688,Y(4,1087,r),0),N=48+r|0,0|t},j:function(t,e,r,i){var n;e|=0,r|=0,i|=0,N=n=N+-64|0,(t|=0)?e?r?i?(t=w[w[t>>2]+708>>2],w[e>>2]=w[t+12>>2],w[e+4>>2]=w[t+16>>2],w[r>>2]=w[t+4>>2],w[r+4>>2]=w[t+8>>2],w[i>>2]=w[t>>2]):(w[52+n>>2]=1782,w[48+n>>2]=1708,Y(4,1087,48+n|0)):(w[36+n>>2]=1753,w[32+n>>2]=1708,Y(4,1087,32+n|0)):(w[20+n>>2]=1726,w[16+n>>2]=1708,Y(4,1087,16+n|0)):(w[4+n>>2]=1651,w[n>>2]=1708,Y(4,1087,n)),N=64+n|0},k:gt,l:pt,m:function(t){var e;N=e=N-16|0,(t|=0)?ct(t):(w[4+e>>2]=1651,w[e>>2]=1890,Y(4,1087,e)),N=16+e|0},n:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+292>>2]:(w[4+e>>2]=1651,w[e>>2]=1905,Y(4,1087,e),-1),N=16+e|0,0|t},o:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+900>>2]:(w[4+e>>2]=1651,w[e>>2]=1926,Y(4,1087,e),0),N=16+e|0,0|t},p:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+912>>2]:(w[4+e>>2]=1651,w[e>>2]=1945,Y(4,1087,e),0),N=16+e|0,0|t},q:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+908>>2]:(w[4+e>>2]=1651,w[e>>2]=1974,Y(4,1087,e),0),N=16+e|0,0|t},r:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+916>>2]:(w[4+e>>2]=1651,w[e>>2]=2003,Y(4,1087,e),0),N=16+e|0,0|t},s:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+300>>2]:(w[4+e>>2]=1651,w[e>>2]=2032,Y(4,1087,e),0),N=16+e|0,0|t},t:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+4>>2]:(w[4+e>>2]=1651,w[e>>2]=2054,Y(4,1087,e),-1),N=16+e|0,0|t},u:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+712>>2]:(w[4+e>>2]=1651,w[e>>2]=2070,Y(4,1087,e),0),N=16+e|0,0|t},v:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+52>>2]:(w[4+e>>2]=1651,w[e>>2]=2084,Y(4,1087,e),0),N=16+e|0,0|t},w:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+740>>2]:(w[4+e>>2]=1651,w[e>>2]=2104,Y(4,1087,e),0),N=16+e|0,0|t},x:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+200>>2]:(w[4+e>>2]=1651,w[e>>2]=2132,Y(4,1087,e),-1),N=16+e|0,0|t},y:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+820>>2]:(w[4+e>>2]=1651,w[e>>2]=2152,Y(4,1087,e),0),N=16+e|0,0|t},z:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+872>>2]:(w[4+e>>2]=1651,w[e>>2]=2170,Y(4,1087,e),0),N=16+e|0,0|t},A:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+260>>2]:(w[4+e>>2]=1651,w[e>>2]=2198,Y(4,1087,e),0),N=16+e|0,0|t},B:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+868>>2]:(w[4+e>>2]=1651,w[e>>2]=2225,Y(4,1087,e),0),N=16+e|0,0|t},C:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+268>>2]:(w[4+e>>2]=1651,w[e>>2]=2254,Y(4,1087,e),0),N=16+e|0,0|t},D:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+264>>2]:(w[4+e>>2]=1651,w[e>>2]=2279,Y(4,1087,e),0),N=16+e|0,0|t},E:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+276>>2]:(w[4+e>>2]=1651,w[e>>2]=2306,Y(4,1087,e),0),N=16+e|0,0|t},F:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+896>>2]:(w[4+e>>2]=1651,w[e>>2]=2330,Y(4,1087,e),0),N=16+e|0,0|t},G:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+832>>2]:(w[4+e>>2]=1651,w[e>>2]=2355,Y(4,1087,e),0),N=16+e|0,0|t},H:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+876>>2]:(w[4+e>>2]=1651,w[e>>2]=2375,Y(4,1087,e),0),N=16+e|0,0|t},I:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[t+272>>2]:(w[4+e>>2]=1651,w[e>>2]=2402,Y(4,1087,e),0),N=16+e|0,0|t},J:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+824>>2]:(w[4+e>>2]=1651,w[e>>2]=2432,Y(4,1087,e),0),N=16+e|0,0|t},K:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+888>>2]:(w[4+e>>2]=1651,w[e>>2]=2456,Y(4,1087,e),0),N=16+e|0,0|t},L:function(t){var e;return N=e=N-16|0,t=(t|=0)?w[w[t>>2]+828>>2]:(w[4+e>>2]=1651,w[e>>2]=2482,Y(4,1087,e),0),N=16+e|0,0|t},M:function(t){var e;N=e=N-16|0,(t|=0)?w[t+256>>2]=1:(w[4+e>>2]=1651,w[e>>2]=2504,Y(4,1087,e)),N=16+e|0},N:function(t){var e;return mt(12+(N=e=N-16|0)|0,64,t|=0),N=16+e|0,w[12+e>>2]},O:function(t){var e,r=0,i=0;return N=e=N-16|0,(t|=0)&&(mt(12+e|0,16,i=gt(t))||(r=pt(t,w[12+e>>2],i))||(_t(w[12+e>>2]),r=0)),N=16+e|0,0|r},P:function(t){return 0|rt(t|=0)},Q:function(t){_t(t|=0)},R:function(){return 0|N},S:function(t){return 0|(N=N-(t|=0)&-16)},T:function(t){N=t|=0},U:function(t){return 0|function(t){t|=0;var e=0|Pt(),r=e+t|0;if(e<r&&r<65536){var i=new ArrayBuffer(I(r,65536)),n=new m.Int8Array(i);n.set(A),A=n,A=new m.Int8Array(i),S=new m.Int16Array(i),w=new m.Int32Array(i),x=new m.Uint8Array(i),C=new m.Uint16Array(i),B=new m.Uint32Array(i),M=new m.Float32Array(i),P=new m.Float64Array(i),y=i,b.buffer=i}return e}(0|(t|=0))},V:function(t,e){e|=0,v[t|=0](e)}};function G(t,e,r){var i=0,n=0,o=0;if(r)for(;;){if(r=r+-1|0,t>>>0<(i=(n=t+e|0)-1|0)>>>0)for(;o=x[0|t],A[0|t]=x[0|i],A[0|i]=o,(t=t+1|0)>>>0<(i=i+-1|0)>>>0;);if(t=n,!r)break}}function Y(t,e,r){var i;N=i=N-272|0,B[1640]>t>>>0||(t=w[1641])&&(ht(16+i|0,e,w[12+i>>2]=r),v[t](16+i|0)),N=272+i|0}function X(t,e,r){32&x[0|t]||function(t,e,r){var i=0,n=0,o=0;t:{if(!(i=w[r+16>>2])){if(function(t){var e=0;return e=x[t+74|0],A[t+74|0]=e+-1|e,8&(e=w[t>>2])?(w[t>>2]=32|e,-1):(w[t+4>>2]=0,w[t+8>>2]=0,e=w[t+44>>2],w[t+28>>2]=e,w[t+20>>2]=e,w[t+16>>2]=e+w[t+48>>2],0)}(r))break t;i=w[r+16>>2]}if(i-(o=w[r+20>>2])>>>0<e>>>0)return v[w[r+36>>2]](r,t,e);e:if(!(A[r+75|0]<0)){for(i=e;;){if(!(n=i))break e;if(10==x[(i=n+-1|0)+t|0])break}if(v[w[r+36>>2]](r,t,n)>>>0<n>>>0)break t;e=e-n|0,t=t+n|0,o=w[r+20>>2]}K(o,t,e),w[r+20>>2]=w[r+20>>2]+e}}(e,r,t)}function j(t,e,r,i,n){var o,a=0,s=0;if(N=o=N-256|0,!(73728&n|(0|r)<=(0|i))){if(Q(o,e,(a=(n=r-i|0)>>>0<256)?n:256),e=t,s=o,!a){for(r=r-i|0;X(t,o,256),255<(n=n+-256|0)>>>0;);n=255&r}X(e,s,n)}N=256+o|0}function H(t){var e,r;return V((e=t*t)*e*(r=e*t)*(2718311493989822e-21*e-.00019839334836096632)+(r*(.008333329385889463*e-.16666666641626524)+t))}function W(t){var e;return V(-.499999997251031*(t*=t)+1+.04166662332373906*(e=t*t)+t*e*(2439044879627741e-20*t-.001388676377460993))}function Q(t,e,r){var i=0,n=0,o=0,a=0;if(r&&(A[(i=t+r|0)-1|0]=e,A[0|t]=e,!(r>>>0<3||(A[i+-2|0]=e,A[t+1|0]=e,A[i+-3|0]=e,A[t+2|0]=e,r>>>0<7||(A[i+-4|0]=e,A[t+3|0]=e,r>>>0<9||(n=(i=0-t&3)+t|0,e=I(255&e,16843009),w[n>>2]=e,w[(i=(r=r-i&-4)+n|0)-4>>2]=e,r>>>0<9||(w[n+8>>2]=e,w[n+4>>2]=e,w[i+-8>>2]=e,w[i+-12>>2]=e,r>>>0<25||(w[n+24>>2]=e,w[n+20>>2]=e,w[n+16>>2]=e,w[n+12>>2]=e,w[i+-16>>2]=e,w[i+-20>>2]=e,w[i+-24>>2]=e,w[i+-28>>2]=e,(r=r-(a=4&n|24)|0)>>>0<32))))))))for(o=i=e,e=n+a|0;w[e+24>>2]=o,w[e+28>>2]=i,w[e+16>>2]=o,w[e+20>>2]=i,w[e+8>>2]=o,w[e+12>>2]=i,w[e>>2]=o,w[e+4>>2]=i,e=e+32|0,31<(r=r+-32|0)>>>0;);return t}function q(t,e){var r=0;if(t>>>0<(e=(t+e|0)-1|0)>>>0)for(;r=x[0|t],A[0|t]=x[0|e],A[0|e]=r,(t=t+1|0)>>>0<(e=e+-1|0)>>>0;);}function J(t){var e,r;return e=Pt(),(t=(r=w[2052])+t|0)>>>0<=e<<16>>>0||L(0|t)?(w[2052]=t,r):(w[1906]=48,-1)}function Z(t,e,r){var i=0,n=0,o=0;if(1==(0|e)&t>>>0<0|e>>>0<1)i=t;else for(;n=Ct(i=Bt(t,e,10),o=n=O,10),A[0|(r=r+-1|0)]=t-n|48,n=9==(0|e)&4294967295<t>>>0|9<e>>>0,t=i,e=o,n;);if(i)for(;t=(i>>>0)/10|0,A[0|(r=r+-1|0)]=i-I(t,10)|48,e=9<i>>>0,i=t,e;);return r}function K(t,e,r){var i,n=0;if(8192<=r>>>0)D(0|t,0|e,0|r);else{i=t+r|0;t:if(3&(t^e))if(i>>>0<4)r=t;else if((n=i-4|0)>>>0<t>>>0)r=t;else for(r=t;A[0|r]=x[0|e],A[r+1|0]=x[e+1|0],A[r+2|0]=x[e+2|0],A[r+3|0]=x[e+3|0],e=e+4|0,(r=r+4|0)>>>0<=n>>>0;);else{e:if((0|r)<1)r=t;else if(3&t)for(r=t;;){if(A[0|r]=x[0|e],e=e+1|0,i>>>0<=(r=r+1|0)>>>0)break e;if(!(3&r))break}else r=t;if(!((t=-4&i)>>>0<64||(n=t+-64|0)>>>0<r>>>0))for(;w[r>>2]=w[e>>2],w[r+4>>2]=w[e+4>>2],w[r+8>>2]=w[e+8>>2],w[r+12>>2]=w[e+12>>2],w[r+16>>2]=w[e+16>>2],w[r+20>>2]=w[e+20>>2],w[r+24>>2]=w[e+24>>2],w[r+28>>2]=w[e+28>>2],w[r+32>>2]=w[e+32>>2],w[r+36>>2]=w[e+36>>2],w[r+40>>2]=w[e+40>>2],w[r+44>>2]=w[e+44>>2],w[r+48>>2]=w[e+48>>2],w[r+52>>2]=w[e+52>>2],w[r+56>>2]=w[e+56>>2],w[r+60>>2]=w[e+60>>2],e=e- -64|0,(r=r- -64|0)>>>0<=n>>>0;);if(t>>>0<=r>>>0)break t;for(;w[r>>2]=w[e>>2],e=e+4|0,(r=r+4|0)>>>0<t>>>0;);}if(r>>>0<i>>>0)for(;A[0|r]=x[0|e],e=e+1|0,(0|i)!=(0|(r=r+1|0)););}}function $(t){return t+-48>>>0<10}function tt(t,e){var r=0;t:if(1024<=(0|e)){if(t*=898846567431158e293,(0|(r=e+-1023|0))<1024){e=r;break t}t*=898846567431158e293,e=((0|e)<3069?e:3069)+-2046|0}else-1023<(0|e)||(t*=22250738585072014e-324,e=-1023<(0|(r=e+1022|0))?r:(t*=22250738585072014e-324,(-3066<(0|e)?e:-3066)+2044|0));return l(0,0),l(1,e+1023<<20),t*h()}function et(t,e,r,i,n,o,a){var s,u,l,h=0,c=0,f=0,p=0,g=0,d=0,m=0,_=0,y=0,b=0,C=0,B=0;w[76+(N=s=N-80|0)>>2]=e,l=55+s|0,u=56+s|0,e=0;t:{e:{r:for(;;){(0|y)<0||(y=(2147483647-y|0)<(0|e)?(w[1906]=61,-1):e+y|0);i:{n:{o:{a:{s:{u:{l:{h:{c:{f:{p:{g:{d:{if(p=w[76+s>>2],f=x[0|(e=p)]){for(;;){m:{_:{y:if(h=255&f){if(37!=(0|h))break _;for(f=e;;){if(37!=x[e+1|0])break y;if(h=e+2|0,w[76+s>>2]=h,f=f+1|0,c=x[e+2|0],e=h,37!=(0|c))break}}else f=e;if(e=f-p|0,t&&X(t,p,e),e)continue r;b=-1,f=1,g=!$(A[w[76+(h=s)>>2]+1|0]),e=w[76+s>>2],g|36!=x[e+2|0]||(b=A[e+1|0]+-48|0,C=1,f=3),e=f+e|0,w[h+76>>2]=e;y:if(31<(c=(m=A[(f=0)|e])+-32|0)>>>0)h=e;else if(h=e,75913&(c=1<<c))for(;;){if(h=e+1|0,w[76+s>>2]=h,f|=c,31<(c=(m=A[e+1|0])+-32|0)>>>0)break y;if(e=h,!(75913&(c=1<<c)))break}y:if(42!=(0|m)){if((0|(_=ut(76+s|0)))<0)break e;e=w[76+s>>2]}else{if(g=s,$(A[h+1|0])&&(e=w[76+s>>2],36==x[e+2|0]))w[((A[e+1|0]<<2)+n|0)-192>>2]=10,_=w[((A[e+1|0]<<3)+i|0)-384>>2],C=1,e=e+3|0;else{if(C)break e;_=C=0,t&&(e=w[r>>2],w[r>>2]=e+4,_=w[e>>2]),e=w[76+s>>2]+1|0}if(w[g+76>>2]=e,-1<(0|_))break y;_=0-_|0,f|=8192}c=-1;y:if(46==x[0|e])if(42!=x[e+1|0])w[76+s>>2]=e+1,c=ut(76+s|0),e=w[76+s>>2];else{if($(A[e+2|0])&&(e=w[76+s>>2],36==x[e+3|0])){w[((A[e+2|0]<<2)+n|0)-192>>2]=10,c=w[((A[e+2|0]<<3)+i|0)-384>>2],e=e+4|0,w[76+s>>2]=e;break y}if(C)break e;c=t?(e=w[r>>2],w[r>>2]=e+4,w[e>>2]):0,e=w[76+s>>2]+2|0,w[76+s>>2]=e}for(h=0;;){if(B=h,d=-1,57<A[0|e]+-65>>>0)break t;if(m=e+1|0,w[76+s>>2]=m,h=A[0|e],e=m,!((h=x[2639+(h+I(B,58)|0)|0])+-1>>>0<8))break}if(!h)break t;y:{b:{v:{if(19==(0|h)){if((0|b)<=-1)break v;break t}if((0|b)<0)break b;w[(b<<2)+n>>2]=h,h=w[4+(e=(b<<3)+i|0)>>2],w[64+s>>2]=w[e>>2],w[68+s>>2]=h}if(e=0,!t)continue r;break y}if(!t)break i;st(64+s|0,h,r,a),m=w[76+s>>2]}if(g=-65537&f,f=8192&f?g:f,b=2684,h=u,e=A[m+-1|(d=0)],(m=(e=B&&3==(15&e)?-33&e:e)+-88|0)>>>0<=32)break m;y:{b:{v:{A:{if(6<(g=e+-65|0)>>>0){if(83!=(0|e))break n;if(!c)break A;h=w[64+s>>2];break b}switch(g-1|0){case 1:break v;case 0:case 2:break n;default:break d}}j(t,32,_,e=0,f);break y}w[12+s>>2]=0,w[8+s>>2]=w[64+s>>2],w[64+s>>2]=8+s,c=-1,h=8+s|0}e=0;b:{for(;;){if(!(p=w[h>>2]))break b;if((g=(0|(p=at(4+s|0,p)))<0)|c-e>>>0<p>>>0)break;if(h=h+4|0,!((e=e+p|0)>>>0<c>>>0))break b}if(d=-1,g)break t}if(j(t,32,_,e,f),e)for(c=0,h=w[64+s>>2];;){if(!(p=w[h>>2]))break y;if((0|e)<(0|(c=(p=at(4+s|0,p))+c|0)))break y;if(X(t,4+s|0,p),h=h+4|0,!(c>>>0<e>>>0))break}else e=0}j(t,32,_,e,8192^f),e=(0|e)<(0|_)?_:e;continue r}h=e+1|0,w[76+s>>2]=h,f=x[e+1|0],e=h;continue}break}switch(m-1|0){case 28:break s;case 21:break u;case 23:break h;case 22:break c;case 11:case 16:break f;case 10:break p;case 26:break g;case 8:case 12:case 13:case 14:break d;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 9:case 15:case 17:case 18:case 19:case 20:case 24:case 25:case 27:case 29:case 30:break n;default:break l}}if(d=y,t)break t;if(!C)break i;for(e=1;;){if(t=w[(e<<2)+n>>2]){if(st((e<<3)+i|0,t,r,a),10!=(0|(e=e+(d=1)|0)))continue;break t}break}if(d=1,9<e>>>0)break t;if(d=-1,w[(e<<2)+n>>2])break t;for(;!w[((e=e+1|0)<<2)+n>>2]&&10!=(0|e););d=e>>>0<10?-1:1;break t}e=0|v[o](t,P[64+s>>3],_,c,f,e);continue}h=(e=vt(p=(e=w[64+s>>2])||2694,c))||c+p|0,f=g,c=e?e-p|0:c;break n}A[55+s|0]=w[64+s>>2],c=1,p=l,f=g;break n}if(e=g=w[68+s>>2],p=w[64+s>>2],(0|e)<-1||(0|e)<=-1&&!(4294967295<p>>>0)){e=0-(e+(0<p>>>0)|0)|0,p=0-p|0,w[64+s>>2]=p,w[68+s>>2]=e,d=1,b=2684;break a}if(2048&f){d=1,b=2685;break a}b=(d=1&f)?2686:2684;break a}if(p=St(w[64+s>>2],w[68+s>>2],u),!(8&f))break o;c=(0|(e=u-p|0))<(0|c)?c:e+1|0;break o}c=8<c>>>0?c:8,f|=8,e=120}if(p=At(w[64+s>>2],w[68+s>>2],u,32&e),!(8&f)|!(w[64+s>>2]|w[68+s>>2]))break o;b=2684+(e>>>4)|0,d=2;break o}if(7<(h=255&B)>>>(e=0))continue;switch(h-1|0){default:case 0:w[w[64+s>>2]>>2]=y;continue;case 1:h=w[64+s>>2],w[h>>2]=y,w[h+4>>2]=y>>31;continue;case 2:S[w[64+s>>2]>>1]=y;continue;case 3:A[w[64+s>>2]]=y;continue;case 5:w[w[64+s>>2]>>2]=y;continue;case 4:continue;case 6:}h=w[64+s>>2],w[h>>2]=y,w[h+4>>2]=y>>31;continue}p=w[64+s>>2],e=w[68+s>>2],b=2684}p=Z(p,e,u)}f=-1<(0|c)?-65537&f:f,c=!!((g=e=w[68+s>>2])|(m=w[64+s>>2]))|c?(0|(e=!(g|m)+(u-p|0)|0))<(0|c)?c:e:(p=u,0)}j(t,32,e=(0|_)<(0|(h=(c=(0|c)<(0|(g=h-p|0))?g:c)+d|0))?h:_,h,f),X(t,b,d),j(t,48,e,h,65536^f),j(t,48,c,g,0),X(t,p,g),j(t,32,e,h,8192^f);continue}break}d=0;break t}d=-1}return N=80+s|0,d}function rt(t){var e,r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0,h=0,c=0,f=0,p=0;N=e=N-16|0;t:{e:{r:{i:{n:{o:{a:{s:{u:{l:{h:{if(t>>>0<=244){if(3&(r=(a=w[1923])>>>(t=(s=t>>>0<11?16:t+11&-8)>>>3))){t=(r=w[7740+(o=(i=t+(1&(-1^r))|0)<<3)>>2])+8|0,(0|(n=w[r+8>>2]))!=(0|(o=o+7732|0))?(w[n+12>>2]=o,w[o+8>>2]=n):(f=7692,p=Mt(i)&a,w[f>>2]=p),i<<=3,w[r+4>>2]=3|i,w[4+(r=r+i|0)>>2]=1|w[r+4>>2];break t}if(s>>>0<=(l=w[1925])>>>0)break h;if(r){i=r=(t=(0-(t=(0-(i=2<<t)|i)&r<<t)&t)-1|0)>>>12&16,i|=r=(t>>>=r)>>>5&8,i|=r=(t>>>=r)>>>2&4,r=w[7740+(n=(i=((i|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)|0)<<3)>>2],(0|(t=w[r+8>>2]))!=(0|(n=n+7732|0))?(w[t+12>>2]=n,w[n+8>>2]=t):(a=Mt(i)&a,w[1923]=a),t=r+8|0,w[r+4>>2]=3|s,o=(i<<=3)-s|0,w[4+(u=r+s|0)>>2]=1|o,w[r+i>>2]=o,l&&(r=7732+((i=l>>>3)<<3)|0,n=w[1928],i=(i=1<<i)&a?w[r+8>>2]:(w[1923]=i|a,r),w[r+8>>2]=n,w[i+12>>2]=n,w[n+12>>2]=r,w[n+8>>2]=i),w[1928]=u,w[1925]=o;break t}if(!(c=w[1924]))break h;for(i=r=(t=(c&0-c)-1|0)>>>12&16,i|=r=(t>>>=r)>>>5&8,i|=r=(t>>>=r)>>>2&4,r=w[7996+(((i|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)<<2)>>2],n=(-8&w[r+4>>2])-s|0,i=r;t=(t=w[i+16>>2])||w[i+20>>2];)n=(i=(o=(-8&w[t+4>>2])-s|0)>>>0<n>>>0)?o:n,r=i?t:r,i=t;if(h=w[r+24>>2],(0|(o=w[r+12>>2]))!=(0|r)){t=w[r+8>>2],w[t+12>>2]=o,w[o+8>>2]=t;break e}if(!(t=w[(i=r+20|0)>>2])){if(!(t=w[r+16>>2]))break l;i=r+16|0}for(;u=i,(t=w[(i=(o=t)+20|0)>>2])||(i=o+16|0,t=w[o+16>>2]););w[u>>2]=0;break e}if(s=-1,!(4294967231<t>>>0)&&(s=-8&(r=t+11|0),l=w[1924])){i=0-s|0,a=0,(r>>>=8)&&(a=31,16777215<s>>>0||(a=28+((t=((a=(r<<=n=r+1048320>>>16&8)<<(t=r+520192>>>16&4))<<(r=a+245760>>>16&2)>>>15)-(r|t|n)|0)<<1|s>>>t+21&1)|0));c:{f:{if(n=w[7996+(a<<2)>>2])for(r=s<<(31==(0|a)?0:25-(a>>>1)|0),t=0;;){if(!(i>>>0<=(u=(-8&w[n+4>>2])-s|0)>>>0||(o=n,i=u))){i=0,t=n;break f}if(u=w[n+20>>2],n=w[16+((r>>>29&4)+n|0)>>2],t=u?(0|u)==(0|n)?t:u:t,r<<=0!=(0|n),!n)break}else t=0;if(!(t|o)){if(!(t=(0-(t=2<<a)|t)&l))break h;n=r=(t=(t&0-t)-1|0)>>>12&16,n|=r=(t>>>=r)>>>5&8,n|=r=(t>>>=r)>>>2&4,t=w[7996+(((n|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)<<2)>>2]}if(!t)break c}for(;i=(r=(n=(-8&w[t+4>>2])-s|0)>>>0<i>>>0)?n:i,o=r?t:o,t=(r=w[t+16>>2])||w[t+20>>2];);}if(!(!o|i>>>0>=w[1925]-s>>>0)){if(u=w[o+24>>2],(0|o)!=(0|(r=w[o+12>>2]))){t=w[o+8>>2],w[t+12>>2]=r,w[r+8>>2]=t;break r}if(!(t=w[(n=o+20|0)>>2])){if(!(t=w[o+16>>2]))break u;n=o+16|0}for(;a=n,(t=w[(n=(r=t)+20|0)>>2])||(n=r+16|0,t=w[r+16>>2]););w[a>>2]=0;break r}}}if(s>>>0<=(r=w[1925])>>>0){t=w[1928],16<=(i=r-s|0)>>>0?(w[1925]=i,n=t+s|0,w[1928]=n,w[n+4>>2]=1|i,w[t+r>>2]=i,w[t+4>>2]=3|s):(w[1928]=0,w[1925]=0,w[t+4>>2]=3|r,w[4+(r=t+r|0)>>2]=1|w[r+4>>2]),t=t+8|0;break t}if(s>>>0<(n=w[1926])>>>0){r=n-s|0,w[1926]=r,i=(t=w[1929])+s|0,w[1929]=i,w[i+4>>2]=1|r,w[t+4>>2]=3|s,t=t+8|0;break t}if((i=(a=(i=o=s+47|(t=0))+(r=w[2041]?w[2043]:(w[2044]=-1,w[2045]=-1,w[2042]=4096,w[2043]=4096,w[2041]=12+e&-16^1431655768,w[2046]=0,w[2034]=0,4096))|0)&(u=0-r|0))>>>0<=s>>>0)break t;if((r=w[2033])&&(h=(l=w[2031])+i|0)>>>0<=l>>>0|r>>>0<h>>>0)break t;if(4&x[8136])break o;h:{c:{if(r=w[1929])for(t=8140;;){if((l=w[t>>2])+w[t+4>>2]>>>0>r>>>0&&l>>>0<=r>>>0)break c;if(!(t=w[t+8>>2]))break}if(-1==(0|(r=J(0))))break a;if(a=i,(n=(t=w[2042])+-1|0)&r&&(a=(i-r|0)+(r+n&0-t)|0),a>>>0<=s>>>0|2147483646<a>>>0)break a;if((t=w[2033])&&(u=(n=w[2031])+a|0)>>>0<=n>>>0|t>>>0<u>>>0)break a;if((0|r)!=(0|(t=J(a))))break h;break n}if(2147483646<(a=u&a-n)>>>0)break a;if((0|(r=J(a)))==(w[t>>2]+w[t+4>>2]|0))break s;t=r}if(!(s+48>>>0<=a>>>0|2147483646<a>>>0|-1==(0|(r=t)))){if(2147483646<(t=(t=w[2043])+(o-a|0)&0-t)>>>0)break n;if(-1!=(0|J(t))){a=t+a|0;break n}J(0-a|0);break a}if(-1!=(0|r))break n;break a}o=0;break e}r=0;break r}if(-1!=(0|r))break n}w[2034]=4|w[2034]}if(2147483646<i>>>0)break i;if(r=J(i),(t=J(0))>>>0<=r>>>0|-1==(0|r)|-1==(0|t))break i;if((a=t-r|0)>>>0<=s+40>>>0)break i}t=w[2031]+a|0,(w[2031]=t)>>>0>B[2032]&&(w[2032]=t);n:{o:{a:{if(i=w[1929]){for(t=8140;;){if(((n=w[t>>2])+(o=w[t+4>>2])|0)==(0|r))break a;if(!(t=w[t+8>>2]))break}break o}for((t=w[1927])>>>0<=r>>>0&&t||(w[1927]=r),t=0,w[2036]=a,w[2035]=r,w[1931]=-1,w[1932]=w[2041],w[2038]=0;n=7732+(i=t<<3)|0,w[i+7740>>2]=n,w[i+7744>>2]=n,32!=(0|(t=t+1|0)););n=(t=a+-40|0)-(i=r+8&7?-8-r&7:0)|0,w[1926]=n,i=r+i|0,w[1929]=i,w[i+4>>2]=1|n,w[4+(t+r|0)>>2]=40,w[1930]=w[2045];break n}if(!(8&x[t+12|0]|r>>>0<=i>>>0|i>>>0<n>>>0)){w[t+4>>2]=o+a,r=(t=i+8&7?-8-i&7:0)+i|0,w[1929]=r,t=(n=w[1926]+a|0)-t|0,w[1926]=t,w[r+4>>2]=1|t,w[4+(i+n|0)>>2]=40,w[1930]=w[2045];break n}}r>>>0<(o=w[1927])>>>0&&(w[1927]=r,o=0),n=r+a|0,t=8140;o:{a:{s:{u:{l:{h:{for(;(0|n)!=w[t>>2];)if(!(t=w[t+8>>2]))break h;if(!(8&x[t+12|0]))break l}for(t=8140;;){if((n=w[t>>2])>>>0<=i>>>0&&i>>>0<(o=n+w[t+4>>2]|0)>>>0)break u;t=w[t+8>>2]}}if(w[t>>2]=r,w[t+4>>2]=w[t+4>>2]+a,w[4+(h=(r+8&7?-8-r&7:0)+r|0)>>2]=3|s,t=((r=n+(n+8&7?-8-n&7:0)|0)-h|0)-s|0,u=s+h|0,(0|r)==(0|i)){w[1929]=u,t=w[1926]+t|0,w[1926]=t,w[u+4>>2]=1|t;break a}if(w[1928]==(0|r)){w[1928]=u,t=w[1925]+t|0,w[1925]=t,w[u+4>>2]=1|t,w[t+u>>2]=t;break a}if(1==(3&(i=w[r+4>>2]))){c=-8&i;l:if(i>>>0<=255){if(o=i>>>3,i=w[r+8>>2],(0|(n=w[r+12>>2]))==(0|i)){f=7692,p=w[1923]&Mt(o),w[f>>2]=p;break l}w[i+12>>2]=n,w[n+8>>2]=i}else{if(l=w[r+24>>2],(0|(a=w[r+12>>2]))==(0|r))if((s=w[(n=r+20|0)>>2])||(s=w[(n=r+16|0)>>2])){for(;i=n,(s=w[(n=(a=s)+20|0)>>2])||(n=a+16|0,s=w[a+16>>2]););w[i>>2]=0}else a=0;else i=w[r+8>>2],w[i+12>>2]=a,w[a+8>>2]=i;if(l){i=w[r+28>>2];h:{if(w[(n=7996+(i<<2)|0)>>2]==(0|r)){if(w[n>>2]=a)break h;f=7696,p=w[1924]&Mt(i),w[f>>2]=p;break l}if(!(w[l+(w[l+16>>2]==(0|r)?16:20)>>2]=a))break l}w[a+24>>2]=l,(i=w[r+16>>2])&&(w[a+16>>2]=i,w[i+24>>2]=a),(i=w[r+20>>2])&&(w[a+20>>2]=i,w[i+24>>2]=a)}}r=r+c|0,t=t+c|0}if(w[r+4>>2]=-2&w[r+4>>2],w[u+4>>2]=1|t,(w[t+u>>2]=t)>>>0<=255){t=7732+((r=t>>>3)<<3)|0,r=(i=w[1923])&(r=1<<r)?w[t+8>>2]:(w[1923]=r|i,t),w[t+8>>2]=u,w[r+12>>2]=u,w[u+12>>2]=t,w[u+8>>2]=r;break a}if(r=0,(n=t>>>8)&&(r=31,16777215<t>>>0||(r=28+((r=((s=(n<<=o=n+1048320>>>16&8)<<(r=n+520192>>>16&4))<<(n=s+245760>>>16&2)>>>15)-(n|r|o)|0)<<1|t>>>r+21&1)|0)),w[(i=u)+28>>2]=r,w[u+16>>2]=0,i=7996+(r<<2)|(w[u+20>>2]=0),(n=w[1924])&(o=1<<r)){for(n=t<<(31==(0|r)?0:25-(r>>>1)|0),r=w[i>>2];;){if((-8&w[(i=r)+4>>2])==(0|t))break s;if(r=n>>>29,n<<=1,!(r=w[16+(o=(4&r)+i|0)>>2]))break}w[o+16>>2]=u}else w[1924]=n|o,w[i>>2]=u;w[u+24>>2]=i,w[u+12>>2]=u,w[u+8>>2]=u;break a}for(u=(t=a+-40|0)-(n=r+8&7?-8-r&7:0)|0,w[1926]=u,n=r+n|0,w[1929]=n,w[n+4>>2]=1|u,w[4+(t+r|0)>>2]=40,w[1930]=w[2045],w[(n=(t=(o+(o+-39&7?39-o&7:0)|0)-47|0)>>>0<i+16>>>0?i:t)+4>>2]=27,t=w[2038],w[n+16>>2]=w[2037],w[n+20>>2]=t,t=w[2036],w[n+8>>2]=w[2035],w[n+12>>2]=t,w[2037]=n+8,w[2036]=a,w[2035]=r,t=n+24|(w[2038]=0);w[t+4>>2]=7,r=t+8|0,t=t+4|0,r>>>0<o>>>0;);if((0|i)==(0|n))break n;if(w[n+4>>2]=-2&w[n+4>>2],o=n-i|0,w[i+4>>2]=1|o,(w[n>>2]=o)>>>0<=255){t=7732+((r=o>>>3)<<3)|0,r=(n=w[1923])&(r=1<<r)?w[t+8>>2]:(w[1923]=r|n,t),w[t+8>>2]=i,w[r+12>>2]=i,w[i+12>>2]=t,w[i+8>>2]=r;break n}if(w[i+16>>2]=0,t=w[i+20>>2]=0,(n=o>>>8)&&(t=31,16777215<o>>>0||(t=28+((t=((u=(n<<=a=n+1048320>>>16&8)<<(t=n+520192>>>16&4))<<(n=u+245760>>>16&2)>>>15)-(n|t|a)|0)<<1|o>>>t+21&1)|0)),r=7996+((w[(r=i)+28>>2]=t)<<2)|0,(n=w[1924])&(a=1<<t)){for(t=o<<(31==(0|t)?0:25-(t>>>1)|0),r=w[r>>2];;){if((0|o)==(-8&w[(n=r)+4>>2]))break o;if(r=t>>>29,t<<=1,!(r=w[16+(a=n+(4&r)|0)>>2]))break}w[a+16>>2]=i,w[i+24>>2]=n}else w[1924]=n|a,w[r>>2]=i,w[i+24>>2]=r;w[i+12>>2]=i,w[i+8>>2]=i;break n}t=w[i+8>>2],w[t+12>>2]=u,w[i+8>>2]=u,w[u+24>>2]=0,w[u+12>>2]=i,w[u+8>>2]=t}t=h+8|0;break t}t=w[n+8>>2],w[t+12>>2]=i,w[n+8>>2]=i,w[i+24>>2]=0,w[i+12>>2]=n,w[i+8>>2]=t}if(!((t=w[1926])>>>0<=s>>>0)){r=t-s|0,w[1926]=r,i=(t=w[1929])+s|0,w[1929]=i,w[i+4>>2]=1|r,w[t+4>>2]=3|s,t=t+8|0;break t}}w[1906]=48,t=0;break t}r:if(u){t=w[o+28>>2];i:{if(w[(n=7996+(t<<2)|0)>>2]==(0|o)){if(w[n>>2]=r)break i;l=Mt(t)&l,w[1924]=l;break r}if(!(w[u+(w[u+16>>2]==(0|o)?16:20)>>2]=r))break r}w[r+24>>2]=u,(t=w[o+16>>2])&&(w[r+16>>2]=t,w[t+24>>2]=r),(t=w[o+20>>2])&&(w[r+20>>2]=t,w[t+24>>2]=r)}r:if(i>>>0<=15)t=i+s|0,w[o+4>>2]=3|t,w[4+(t=t+o|0)>>2]=1|w[t+4>>2];else if(w[o+4>>2]=3|s,w[4+(n=o+s|0)>>2]=1|i,(w[i+n>>2]=i)>>>0<=255)t=7732+((r=i>>>3)<<3)|0,r=(i=w[1923])&(r=1<<r)?w[t+8>>2]:(w[1923]=r|i,t),w[t+8>>2]=n,w[r+12>>2]=n,w[n+12>>2]=t,w[n+8>>2]=r;else{t=0,(s=i>>>8)&&(t=31,16777215<i>>>0||(t=28+((t=((u=(s<<=a=s+1048320>>>16&8)<<(t=s+520192>>>16&4))<<(s=u+245760>>>16&2)>>>15)-(s|t|a)|0)<<1|i>>>t+21&1)|0)),w[(r=n)+28>>2]=t,w[n+16>>2]=0,r=7996+(t<<2)|(w[n+20>>2]=0);i:{if((s=1<<t)&l){for(t=i<<(31==(0|t)?0:25-(t>>>1)|0),s=w[r>>2];;){if((-8&w[(r=s)+4>>2])==(0|i))break i;if(s=t>>>29,t<<=1,!(s=w[16+(a=(4&s)+r|0)>>2]))break}w[a+16>>2]=n}else w[1924]=s|l,w[r>>2]=n;w[n+24>>2]=r,w[n+12>>2]=n,w[n+8>>2]=n;break r}t=w[r+8>>2],w[t+12>>2]=n,w[r+8>>2]=n,w[n+24>>2]=0,w[n+12>>2]=r,w[n+8>>2]=t}t=o+8|0;break t}e:if(h){t=w[r+28>>2];r:{if(w[(i=7996+(t<<2)|0)>>2]==(0|r)){if(w[i>>2]=o)break r;f=7696,p=Mt(t)&c,w[f>>2]=p;break e}if(!(w[h+(w[h+16>>2]==(0|r)?16:20)>>2]=o))break e}w[o+24>>2]=h,(t=w[r+16>>2])&&(w[o+16>>2]=t,w[t+24>>2]=o),(t=w[r+20>>2])&&(w[o+20>>2]=t,w[t+24>>2]=o)}n>>>0<=15?(t=n+s|0,w[r+4>>2]=3|t,w[4+(t=t+r|0)>>2]=1|w[t+4>>2]):(w[r+4>>2]=3|s,w[4+(s=r+s|0)>>2]=1|n,w[n+s>>2]=n,l&&(t=7732+((i=l>>>3)<<3)|0,o=w[1928],i=(i=1<<i)&a?w[t+8>>2]:(w[1923]=i|a,t),w[t+8>>2]=o,w[i+12>>2]=o,w[o+12>>2]=t,w[o+8>>2]=i),w[1928]=s,w[1925]=n),t=r+8|0}return N=16+e|0,t}function it(t){var e=0,r=V(0),i=0,n=0,o=V(0),a=V(0);f(t);t:{if(1283457024<=(e=2147483647&(n=u(0)))>>>0){if(2139095040<e>>>0)break t;return V((0|n)<0?-1.570796251296997:1.570796251296997)}e:{if(e>>>0<=1054867455){if(i=-1,964689920<=e>>>0)break e;break t}if(t=V(E(t)),e>>>0<=1066926079){if(e>>>0<=1060110335){t=V(V(V(t+t)+V(-1))/V(t+V(2))),i=0;break e}t=V(V(t+V(-1))/V(t+V(1))),i=1}else i=e>>>0<=1075576831?(t=V(V(t+V(-1.5))/V(V(t*V(1.5))+V(1))),2):(t=V(V(-1)/t),3)}if(e=i,o=V(t*t),r=V(o*o),a=V(r*V(V(r*V(-.106480173766613))+V(-.19999158382415771))),r=V(o*V(V(r*V(V(r*V(.06168760731816292))+V(.14253635704517365)))+V(.333333283662796))),(0|e)<=-1)return V(t-V(t*V(a+r)));t=V(M[6080+(e<<=2)>>2]-V(V(V(t*V(a+r))-M[e+6096>>2])-t)),t=(0|n)<0?V(-t):t}return t}function nt(t,e){var r,i=0,n=0,o=0,a=0,s=0;N=r=N-16|0,f(t);t:if((i=2147483647&(o=u(0)))>>>0<=1305022426){if(n=.6366197723675814*(a=+t)+6755399441055744-6755399441055744,P[e>>3]=a+-1.5707963109016418*n+-1.5893254773528196e-8*n,E(n)<2147483648){i=~~n;break t}i=-2147483648}else 2139095040<=i>>>0?(P[e>>3]=V(t-t),i=0):(i=((s=i)>>>23)-150|0,P[8+r>>3]=(l(0,s-(i<<23)|0),p()),i=bt(8+r|0,r,i),n=P[r>>3],(0|o)<=-1?(P[e>>3]=-n,i=0-i|0):P[e>>3]=n);return N=16+r|0,i}function ot(t){var e=0,r=0,i=0,n=0,o=0;i=4,r=1082;t:if(e=x[0|t]){for(;!((0|(n=x[0|r]))!=(0|e)||!(i=i+-1|0)|!n);)if(r=r+1|0,e=x[t+1|0],t=t+1|0,!e)break t;o=e}return(255&o)-x[0|r]|0}function at(t,e){return t?function(t,e){t:{if(t){if(e>>>0<=127)break t;if(w[w[1625]>>2]){if(e>>>0<=2047)return A[t+1|0]=63&e|128,A[0|t]=e>>>6|192,2;if(!(57344!=(-8192&e)&&55296<=e>>>0))return A[t+2|0]=63&e|128,A[0|t]=e>>>12|224,A[t+1|0]=e>>>6&63|128,3;if(e+-65536>>>0<=1048575)return A[t+3|0]=63&e|128,A[0|t]=e>>>18|240,A[t+2|0]=e>>>6&63|128,A[t+1|0]=e>>>12&63|128,4}else if(57216==(-128&e))break t;w[1906]=25,t=-1}else t=1;return t}return A[0|t]=e,1}(t,e):0}function st(t,e,r,i){t:{if(!(20<e>>>0||9<(e=e+-9|0)>>>0)){switch(e-1|0){default:return e=w[r>>2],w[r>>2]=e+4,void(w[t>>2]=w[e>>2]);case 0:return e=w[r>>2],w[r>>2]=e+4,e=w[e>>2],w[t>>2]=e,void(w[t+4>>2]=e>>31);case 1:return e=w[r>>2],w[r>>2]=e+4,w[t>>2]=w[e>>2],void(w[t+4>>2]=0);case 3:return e=w[r>>2],w[r>>2]=e+4,e=S[e>>1],w[t>>2]=e,void(w[t+4>>2]=e>>31);case 4:return e=w[r>>2],w[r>>2]=e+4,w[t>>2]=C[e>>1],void(w[t+4>>2]=0);case 5:return e=w[r>>2],w[r>>2]=e+4,e=A[0|e],w[t>>2]=e,void(w[t+4>>2]=e>>31);case 6:return e=w[r>>2],w[r>>2]=e+4,w[t>>2]=x[0|e],void(w[t+4>>2]=0);case 2:case 7:break t;case 8:}v[i](t,r)}return}e=w[r>>2]+7&-8,w[r>>2]=e+8,r=w[e+4>>2],w[t>>2]=w[e>>2],w[t+4>>2]=r}function ut(t){var e=0,r=0,i=0;if($(A[w[t>>2]]))for(;e=w[t>>2],i=A[0|e],w[t>>2]=e+1,r=(I(r,10)+i|0)-48|0,$(A[e+1|0]););return r}function lt(t,e,r,i,n){var o,a=0,s=0;w[204+(N=o=N-208|0)>>2]=r,Q(160+o|(r=0),0,40),w[200+o>>2]=w[204+o>>2],(0|et(0,e,200+o|0,80+o|0,160+o|0,i,n))<0||(r=0<=w[t+76>>2]?1:r,a=w[t>>2],A[t+74|0]<=0&&(w[t>>2]=-33&a),s=32&a,w[t+48>>2]?et(t,e,200+o|0,80+o|0,160+o|0,i,n):(w[t+48>>2]=80,w[t+16>>2]=80+o,w[t+28>>2]=o,w[t+20>>2]=o,a=w[t+44>>2],et(t,e,200+(w[t+44>>2]=o)|0,80+o|0,160+o|0,i,n),a&&(v[w[t+36>>2]](t,0,0),w[t+48>>2]=0,w[t+44>>2]=a,w[t+28>>2]=0,w[t+16>>2]=0,w[t+20>>2]=0)),w[t>>2]=w[t>>2]|s),N=208+o|0}function ht(t,e,r){var i,n=0;K(8+(N=i=N-160|0)|0,2536,144),w[52+i>>2]=t,n=(n=-2-(w[28+i>>2]=t)|0)>>>0<256?n:256,t=t+(w[56+i>>2]=n)|0,w[36+i>>2]=t,w[24+i>>2]=t,lt(8+i|0,e,r,15,16),n&&(t=w[28+i>>2],A[t-((0|t)==w[24+i>>2])|0]=0),N=160+i|0}function ct(t){var e=0,r=0,i=0,n=0,o=0,a=0,s=0,u=V(0),l=0,h=0,c=0,f=0,p=0,g=0,d=0,m=V(0),_=0,y=V(0),b=0,S=0,B=V(0),P=V(0),k=V(0),F=0,D=0,L=0,U=0,N=0,O=0,z=0;if(w[t+256>>2]&&(e=w[t+200>>2]<<2,K(w[t+280>>2],w[t+264>>2],e),K(w[t+284>>2],w[t+268>>2],e),K(w[t+288>>2],w[t+276>>2],e)),!((0|(o=w[t+292>>2]))<1)){for(l=(s=w[t+296>>2])+I(o,40)|0,i=w[t+300>>2],e=s;k=M[i>>2],(y=M[e+32>>2])==(u=(r=w[e+12>>2])?(B=M[e>>2],u=V(k-B),k=M[e+8>>2],m=V(u/k),u=V(R(m)),n=V(E(u))<V(2147483648)?~~u:-2147483648,V(B+V(k*V(m-V(0|n))))):(m=M[e>>2],u=M[e+4>>2],k<m?m:u<k?u:k))?w[e+36>>2]=0:(M[e+32>>2]=u,w[e+36>>2]=1),r||(M[i>>2]=u),i=i+4|0,(e=e+40|0)>>>0<l>>>0;);if(!((0|o)<1))for(_=w[t+308>>2],d=w[t+376>>2];;){t:if(!((0|(r=w[s+28>>2]))<1))if(h=(e=_+I(w[s+24>>2],28)|0)+I(r,28)|0,k=M[s+20>>2],P=M[s+16>>2],y=M[s+32>>2],d)for(;;){B=V(o=0);e:{r:{i:{if((0|(a=w[e>>2]))<1)i=n=0;else if(r=w[e+4>>2],m=M[r>>2],u=V(m-P),1!=(0|a)){if(y<u){n=1,i=0;break r}if(n=0,y<V(P+m))i=0;else{if(i=1,u=M[r+4>>2],!(y<V(P+u)))for(;;){if((0|a)==(0|(i=i+1|0)))break i;if(m=u,u=M[r+(i<<2)>>2],y<V(P+u))break}V(u-P)<y||(i=i+-1|0,(u=V(u-m))<k||(B=V(V(y-m)/u)))}}else n=y<V(P+m)^1|u<y^1,i=0;if(n)break r;if(g=a=1,!w[e+16>>2])break r;break e}i=a+-1|0,n=1}g=(a=(u=M[e+12>>2])!=B)&(B==V(0)|u==V(0))|w[e+8>>2]!=(0|i),o=n}if(w[e+20>>2]=g,w[e+24>>2]=a,M[e+12>>2]=B,w[e+16>>2]=o,w[e+8>>2]=i,!((e=e+28|0)>>>0<h>>>0))break}else{if(!w[s+36>>2])for(;;)if(w[e+20>>2]=0,!((e=e+28|(w[e+24>>2]=0))>>>0<h>>>0))break t;for(;;){B=V(o=0);e:{r:{i:{n:if(!(((n=0)|(i=w[(r=e)>>2]))<1)){if(f=w[e+4>>2],m=M[f>>2],u=V(m-P),1!=(0|i)){if(!(y<u)){if(n=0,y<V(P+m))break n;a=1;o:if(u=M[f+4>>2],!(y<V(P+u))){for(i=i+-1|0;m=u,(0|i)!=(0|a);)if(u=M[f+((a=a+1|0)<<2)>>2],y<V(P+u))break o;n=1;break r}if(n=0,V(u-P)<y){i=a;break i}if(i=a+-1|0,(u=V(u-m))<k)break i;B=V(V(y-m)/u);break i}n=1,i=0;break r}n=y<V(P+m)^1|u<y^1}i=0}if(!n&&(f=a=1,w[e+16>>2]))break e}o=n,f=(a=(u=M[e+12>>2])!=B)&(B==V(0)|u==V(0))|w[e+8>>2]!=(0|i)}if(w[r+20>>2]=f,w[e+24>>2]=a,M[e+12>>2]=B,w[e+16>>2]=o,w[e+8>>2]=i,!((e=e+28|0)>>>0<h>>>0))break}}if(!((s=s+40|0)>>>0<l>>>0))break}}if(1<=(0|(e=w[t+312>>2])))for(f=(c=w[t+316>>2])+I(e,36)|0,l=w[t+376>>2];;){N=(r=w[c+12>>2])+((s=w[c>>2])<<2)|0,b=w[t+308>>2],e=r;t:{if(!(s=((a=n=o=0)|s)<1))for(;;){if(i=b+I(w[e>>2],28)|0,w[i+16>>2]){g=1,S=U=0;break t}if(o=o||w[i+24>>2],a=a||w[i+20>>2],n=(M[i+12>>2]!=V(0))+n|0,!((e=e+4|0)>>>0<N>>>0))break}if(g=0,(S=l?1:a)|(U=l?1:o)&&(L=1<<n,w[c+8>>2]=L,31!=(0|n))){for(o=w[c+20>>2],i=(e=w[c+16>>2])+(a=L<<2)|0,F=Q(p=e,0,4+((h=-1^e)+((e=e+4|0)>>>0<i>>>0?i:e)|0)&-4),a=o+a|0,e=o;w[e>>2]=1065353216,(e=e+4|0)>>>0<a>>>0;);if(!s)if(a=s=1,n)for(;;){if(p=b+I(w[r>>2],28)|0,n=w[p+8>>2],h=I(n,s),e=0,(u=M[p+12>>2])==V(0))for(;w[(n=F+(e<<2)|0)>>2]=h+w[n>>2],(0|L)!=(0|(e=e+1|0)););else{for(w[F>>2]=h+w[F>>2],M[o>>2]=V(V(1)-u)*M[o>>2],_=I(n+(e=1)|0,s);u=M[p+12>>2],i=e&a,w[(n=(d=e<<2)+F|0)>>2]=w[n>>2]+(i?_:h),M[(n=o+d|0)>>2]=(i?u:V(V(1)-u))*M[n>>2],(0|L)!=(0|(e=e+1|0)););a<<=1}if(s=I(w[p>>2],s),!((r=r+4|0)>>>0<N>>>0))break}else for(;;){if(i=b+I(w[r>>2],28)|0,a=I(w[i+8>>2],s),e=0,(u=M[i+12>>2])==V(0))for(;w[(n=F+(e<<2)|0)>>2]=a+w[n>>2],(0|L)!=(0|(e=e+1|0)););else w[F>>2]=a+w[F>>2],M[o>>2]=V(V(1)-u)*M[o>>2];if(s=I(w[i>>2],s),!((r=r+4|0)>>>0<N>>>0))break}}}if(w[c+32>>2]=g,w[c+24>>2]=S,w[c+28>>2]=U,!((c=c+36|0)>>>0<f>>>0))break}if(!((0|(n=w[t+4>>2]))<=0)){for(r=(e=w[t+52>>2])+(n<<2)|0;u=M[e>>2],M[e>>2]=u<V(0)?V(0):V(T(u,V(1))),(e=e+4|0)>>>0<r>>>0;);if(!((0|n)<1)){for(s=(e=w[t+8>>2])+(n<<3)|0,h=w[t+316>>2],o=w[t+40>>2],i=a=w[t+36>>2];n=0,w[e+4>>2]&&(r=w[e>>2],!w[a+(r<<2)>>2]&&-1!=(0|r)||(n=!w[32+(h+I(w[o>>2],36)|0)>>2])),w[i>>2]=n,o=o+4|0,i=i+4|0,(e=e+8|0)>>>0<s>>>0;);if(!((0|(l=w[t+4>>2]))<1))for(f=w[t>>2],_=w[f+724>>2],r=w[t+40>>2],a=s=0;;){if(p=h+I(w[r>>2],36)|0,(w[p+28>>2]||w[p+24>>2])&&(w[(o=s<<2)+w[t+16>>2]>>2]=w[p+8>>2],w[p+24>>2]&&!((0|(n=w[p+8>>2]))<1)))for(d=(e=w[p+16>>2])+(n<<2)|0,o=w[o+_>>2],i=w[t+28>>2]+(a<<2)|0,n=w[f+936>>2];w[i>>2]=w[n+(o+w[e>>2]<<2)>>2],i=i+4|0,(e=e+4|0)>>>0<d>>>0;);if(w[p+28>>2]&&!((0|(n=w[p+8>>2]))<1))for(n=(e=w[p+20>>2])+(n<<2)|0,i=w[t+20>>2]+(a<<2)|0;w[i>>2]=w[e>>2],i=i+4|0,(e=e+4|0)>>>0<n>>>0;);if(r=r+4|0,a=w[p+4>>2]+a|0,(0|l)==(0|(s=s+1|0)))break}}}if(v[w[1644]](t),O=w[t+316>>2],1<=(0|(r=w[t+56>>2]))){for(l=(e=w[t+60>>2])+(r<<5)|0,f=w[t+176>>2],_=w[t+172>>2],d=w[t+36>>2],n=w[t+180>>2],o=i=w[t+168>>2];;){a=o,r=0,w[e+28>>2]&&(-1!=(0|(s=w[e>>2]))&&(r=0,!w[d+(s<<2)>>2])||-1!=(0|(s=w[e+4>>2]))&&(r=0,!w[i+(s<<2)>>2])||(r=!w[32+(I(w[n>>2],36)+O|0)>>2])),w[a>>2]=r;t:if((a=w[e+8>>2])>>>0<=1){if(a-1){w[_+(w[e+12>>2]<<2)>>2]=r;break t}w[f+(w[e+12>>2]<<2)>>2]=r}else Y(4,1473,0);if(n=n+4|0,o=o+4|0,!((e=e+32|0)>>>0<l>>>0))break}O=w[t+316>>2]}if(s=w[t>>2],1<=(0|(l=w[t- -64>>2]))){for(f=w[s+988>>2],_=w[s+784>>2],g=w[t+184>>2],c=r=0;;){if(h=I(w[g>>2],36)+O|0,(w[h+28>>2]||w[h+24>>2])&&(w[(o=r<<2)+w[t+84>>2]>>2]=w[h+8>>2],w[h+24>>2]&&!((0|(n=w[h+8>>2]))<1)))for(d=(e=w[h+16>>2])+(n<<2)|0,a=w[o+_>>2],i=(n=c<<2)+w[t+100>>2]|0,o=n+w[t+96>>2]|0;n=a+w[e>>2]<<2,w[i>>2]=f+(w[n+w[s+944>>2]>>2]<<2),w[o>>2]=w[n+w[s+940>>2]>>2],o=o+4|0,i=i+4|0,(e=e+4|0)>>>0<d>>>0;);if(w[h+28>>2]&&!((0|(n=w[h+8>>2]))<1))for(n=(e=w[h+20>>2])+(n<<2)|0,i=w[t+88>>2]+(c<<2)|0;w[i>>2]=w[e>>2],i=i+4|0,(e=e+4|0)>>>0<n>>>0;);if(g=g+4|0,c=w[h+4>>2]+c|0,(0|l)==(0|(r=r+1|0)))break}O=w[t+316>>2],s=w[t>>2]}if(1<=(0|(L=w[t+72>>2])))for(N=w[t+76>>2],b=w[s+808>>2],U=w[t+188>>2],S=c=0;;){if(D=I(w[U>>2],36)+O|0,(w[D+28>>2]||w[D+24>>2])&&(w[(r=c<<2)+w[t+116>>2]>>2]=w[D+8>>2],w[D+24>>2])){if(e=w[D+16>>2],F=w[r+b>>2],1<=(0|(r=w[D+8>>2])))for(p=e+(r<<2)|0,i=(r=S<<2)+w[t+132>>2]|0,o=r+w[t+136>>2]|0,n=r+w[t+140>>2]|0,a=r+w[t+144>>2]|0,g=r+w[t+128>>2]|0,h=w[s+948>>2],l=w[s+964>>2],f=w[s+960>>2],_=w[s+956>>2],d=w[s+952>>2],r=e;z=F+w[r>>2]<<2,w[i>>2]=w[z+d>>2],w[o>>2]=w[_+z>>2],w[n>>2]=w[f+z>>2],w[a>>2]=w[l+z>>2],w[g>>2]=w[h+z>>2],g=g+4|0,a=a+4|0,n=n+4|0,o=o+4|0,i=i+4|0,(r=r+4|0)>>>0<p>>>0;);r=N+(c<<5)|0,e=F+w[e>>2]<<2,w[r+24>>2]=w[e+w[s+968>>2]>>2],w[r+28>>2]=w[e+w[s+972>>2]>>2]}if(w[D+28>>2]&&!((0|(r=w[D+8>>2]))<1))for(r=(e=w[D+20>>2])+(r<<2)|0,i=w[t+120>>2]+(S<<2)|0;w[i>>2]=w[e>>2],i=i+4|0,(e=e+4|0)>>>0<r>>>0;);if(U=U+4|0,S=w[D+4>>2]+S|0,(0|L)==(0|(c=c+1|0)))break}if(v[w[1642]](t),v[w[1645]](t),!((0|(r=w[t+200>>2]))<1)){for(d=(e=w[t+204>>2])+(r<<4)|0,s=w[t+168>>2],a=w[t+36>>2],h=w[t+316>>2],o=w[t+252>>2],i=w[t+248>>2];n=0,w[e+8>>2]&&(r=w[e>>2],!w[a+(r<<2)>>2]&&-1!=(0|r)||(r=w[e+4>>2],!w[s+(r<<2)>>2]&&-1!=(0|r)||(n=!w[32+(h+I(w[o>>2],36)|0)>>2]))),w[i>>2]=n,o=o+4|0,i=i+4|0,(e=e+16|0)>>>0<d>>>0;);if(!((0|(f=w[t+200>>2]))<1))for(p=w[t>>2],_=w[p+988>>2],d=w[p+844>>2],r=w[t+252>>2],g=c=0;;){if(b=h+I(w[r>>2],36)|0,(w[b+28>>2]||w[b+24>>2])&&(w[(o=c<<2)+w[t+212>>2]>>2]=w[b+8>>2],w[b+24>>2]&&!((0|(n=w[b+8>>2]))<1)))for(s=(e=w[b+16>>2])+(n<<2)|0,a=w[o+d>>2],i=(n=g<<2)+w[t+232>>2]|0,o=n+w[t+224>>2]|0,n=n+w[t+228>>2]|0;l=a+w[e>>2]<<2,w[i>>2]=_+(w[l+w[p+984>>2]>>2]<<2),w[o>>2]=w[l+w[p+976>>2]>>2],w[n>>2]=w[l+w[p+980>>2]>>2],n=n+4|0,o=o+4|0,i=i+4|0,(e=e+4|0)>>>0<s>>>0;);if(w[b+28>>2]&&!((0|(n=w[b+8>>2]))<1))for(n=(e=w[b+20>>2])+(n<<2)|0,i=w[t+216>>2]+(g<<2)|0;w[i>>2]=w[e>>2],i=i+4|0,(e=e+4|0)>>>0<n>>>0;);if(r=r+4|0,g=w[b+4>>2]+g|0,(0|f)==(0|(c=c+1|0)))break}}if(v[w[1643]](t),function(t){var e,r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0,h=0,c=0,f=0,p=0;if(1<=(0|(e=w[t+340>>2])))for(h=w[t+316>>2],l=w[t>>2],c=w[l+1072>>2],a=w[t+372>>2];;){if(n=I(w[a>>2],36)+h|0,(w[n+28>>2]||w[n+24>>2])&&(w[(r=s<<2)+w[t+352>>2]>>2]=w[n+8>>2],w[n+24>>2]&&!((0|(o=w[n+8>>2]))<1)))for(o=(i=w[n+16>>2])+(o<<2)|0,f=w[r+c>>2],r=w[t+364>>2]+(u<<2)|0,p=w[l+1104>>2];w[r>>2]=w[(w[i>>2]+f<<2)+p>>2],r=r+4|0,(i=i+4|0)>>>0<o>>>0;);if(w[n+28>>2]&&!((0|(r=w[n+8>>2]))<1))for(o=(i=w[n+20>>2])+(r<<2)|0,r=w[t+356>>2]+(u<<2)|0;w[r>>2]=w[i>>2],r=r+4|0,(i=i+4|0)>>>0<o>>>0;);if(a=a+4|0,u=w[n+4>>2]+u|0,(0|e)==(0|(s=s+1|0)))break}}(t),v[w[1646]](t),r=w[t+48>>2],1<=(0|(e=w[t+4>>2])))for(s=(o=w[t+8>>2])+(e<<3)|0,n=w[t+52>>2],i=w[t+36>>2],e=r;w[i>>2]&&(u=M[n>>2],M[e>>2]=u,-1!=(0|(a=w[o>>2]))&&(M[e>>2]=u*M[(a<<2)+r>>2])),e=e+4|0,n=n+4|0,i=i+4|0,(o=o+8|0)>>>0<s>>>0;);if(1<=(0|(n=w[t+56>>2]))){for(r=t+56|0,e=w[t+60>>2],i=w[t+168>>2],o=0;w[i>>2]&&v[w[e+16>>2]](e,o,r),i=i+4|0,e=e+32|0,(0|n)!=(0|(o=o+1|0)););r=w[t+48>>2]}if(1<=(0|(n=w[t+200>>2])))for(f=(e=w[t+204>>2])+(n<<4)|0,_=w[t+192>>2],d=w[t+60>>2],o=w[t+248>>2],i=w[t+276>>2],n=w[t+272>>2];w[o>>2]&&(-1!=(0|(a=w[e>>2]))&&(M[i>>2]=M[(a<<2)+r>>2]*M[i>>2]),-1!=(0|(a=w[e+4>>2]))&&(M[i>>2]=M[_+(a<<2)>>2]*M[i>>2],s=d+(a<<5)|0,a=w[n>>2],v[w[s+20>>2]](w[s+24>>2],a,a,w[e+12>>2]))),n=n+4|0,i=i+4|0,o=o+4|0,(e=e+16|0)>>>0<f>>>0;);if(function(t){var e=0,r=0,i=0,n=0,o=V(0),a=V(0),s=V(0),u=V(0),l=V(0),h=0,c=0,f=0,p=0,g=0,d=V(0),m=0,_=0,y=V(0),b=0;if(1<=(0|(i=w[t+340>>2])))for(b=(e=w[t+344>>2])+I(i,24)|0,i=w[t+272>>2];;){if((t=0)<(0|(h=w[e+8>>2])))for(c=w[i+(w[e+4>>2]<<2)>>2],f=w[i+(w[e>>2]<<2)>>2],o=M[e+20>>2],p=w[e+16>>2],g=w[e+12>>2];d=M[((r=1|t)<<2)+g>>2],n=C[(t<<1)+p>>1]<<3&262136,a=M[(m=(4|n)+f|0)>>2],r=C[(r<<1)+p>>1]<<3&262136,s=M[(_=(4|r)+c|0)>>2],u=M[(n=n+f|0)>>2],y=M[(t<<2)+g>>2],l=M[(r=r+c|0)>>2],M[n>>2]=u+V(o*V(y*V(l-u))),M[m>>2]=a+V(o*V(y*V(s-a))),M[r>>2]=l+V(o*V(d*V(u-l))),M[_>>2]=s+V(o*V(d*V(a-s))),(0|(t=t+2|0))<(0|h););if(!((e=e+24|0)>>>0<b>>>0))break}}(t),v[w[1647]](t),g=w[t+248>>2],c=w[t+268>>2],1<=(0|(h=w[t+320>>2]))){for(f=(n=w[t+324>>2])+I(h,28)|0,_=w[t+44>>2],d=w[t+36>>2],r=n;;){if(1<=(0|(i=w[r+4>>2])))for(s=r+20|0,a=w[r+12>>2],e=0;l=w[4+(o=a+(e<<4)|0)>>2]<<2,o=1==w[(p=o)>>2],w[p+12>>2]=w[(w[l+(o?d:g)>>2]?l+(o?_:c)|0:s)>>2],(0|i)!=(0|(e=e+1|0)););if(!((r=r+28|0)>>>0<f>>>0))break}for(_=w[t+264>>2],S=0;;){if(l=n+I(S,28)|0,!(w[(f=l)+24>>2]<1)){for(o=w[t+328>>2],e=0;w[o+(e<<2)>>2]=-1,(0|(e=e+1|0))<(0|(r=w[f+24>>2])););if(!((0|r)<1))for(r=w[t+336>>2],e=0;w[r+(e<<2)>>2]=-1,(0|(e=e+1|0))<w[f+24>>2];);}if(!(w[l+4>>2]<1)){for(d=w[t+332>>2],e=0;w[d+(e<<2)>>2]=-1,(0|(e=e+1|0))<(0|(r=w[l+4>>2])););if(!((0|r)<1))for(i=w[l+12>>2],s=w[t+336>>2],e=0;a=w[12+(i+(e<<4)|0)>>2]-w[l+20>>2]<<2,r=-1!=(0|(r=w[(o=a+s|0)>>2]))?d+(r<<2)|0:a+w[t+328>>2]|0,w[r>>2]=e,(0|(e=(w[o>>2]=e)+1|0))<w[l+4>>2];);}if(1<=(0|(o=w[f+24>>2])))for(i=w[l+8>>2],d=w[t+328>>2],s=0;;){if(-1!=(0|(e=w[d+(s<<2)>>2]))){for(a=w[t+332>>2],o=w[l+12>>2];i=(r=1!=w[(r=o+(e<<4)|0)>>2]?(w[_+(w[r+4>>2]<<2)>>2]=i,1):(r=n+I(w[r+8>>2],28)|0,w[r+8>>2]=i,w[r>>2]))+i|0,(0|e)<(0|(r=w[a+(e<<2)>>2]))&&-1!=(0|(e=r)););o=w[f+24>>2]}if(!((0|(s=s+1|0))<(0|o)))break}if((0|h)==(0|(S=S+1|0)))break}}a=w[t+200>>2];t:{if(w[t+376>>2]){if(e=0,((w[t+256>>2]=0)|a)<1)break t;for(;;){if(i=62,o=w[t+260>>2]+e|0,!w[(r=e<<2)+g>>2]|M[r+w[t+276>>2]>>2]==V(0)||(i=63),A[0|o]=i,(0|a)==(0|(e=e+1|0)))break t;g=w[t+248>>2]}}if(!w[t+256>>2]){if((0|a)<1)break t;for(e=0;;){if(!w[(r=e<<2)+g>>2]|M[r+w[t+276>>2]>>2]==V(0)?(r=w[t+260>>2]+e|0,A[0|r]=254&x[0|r]):(r=w[t+260>>2]+e|0,A[0|r]=1|x[0|r]),(0|a)==(0|(e=e+1|0)))break t;g=w[t+248>>2]}}if(!(((w[t+256>>2]=0)|a)<1))for(i=0;;){if(u=M[(o=i<<2)+w[t+276>>2]>>2],n=w[o+g>>2],e=u!=V(0)&0!=(0|n),r=w[t+260>>2]+i|0,e=(0|e)==(1&A[0|r])?e:2|e,e=u!=M[o+w[t+288>>2]>>2]?4|e:e,e=w[o+c>>2]==w[o+w[t+284>>2]>>2]?e:8|e,e=w[o+w[t+264>>2]>>2]==w[o+w[t+280>>2]>>2]?e:16|e,A[0|r]=n?32|e:e,(0|a)==(0|(i=i+1|0)))break t;c=w[t+268>>2],g=w[t+248>>2]}}w[t+376>>2]=0}function ft(t,e,r){var i=0,n=0,o=0,a=0,s=0,u=0,l=0,h=0,c=0,f=0,p=0;if(w[e>>2]=384,n=w[t>>2],1<=(0|(a=w[n>>2]))){for(u=w[t+16>>2],l=w[t+296>>2];o=(1<<w[l+(w[u+(i<<2)>>2]<<2)>>2])+o|0,(0|a)!=(0|(i=i+1|0)););i=o<<2}if(w[e+4>>2]=a<<3,w[e+8>>2]=w[n>>2]<<2,w[e+12>>2]=w[n>>2]<<2,w[e+16>>2]=w[n>>2]<<2,w[e+20>>2]=w[n>>2]<<2,w[e+24>>2]=w[n>>2]<<2,o=w[n>>2],w[e+40>>2]=i,w[e+36>>2]=i,w[e+32>>2]=i,w[e+28>>2]=o<<2,1<=((o=i=0)|(l=w[n+8>>2]))){for(c=w[t+296>>2],f=w[t+88>>2],h=w[t+76>>2],a=0;i=(0|i)<(0|(u=w[(p=o<<2)+f>>2]))?u:i,s=(15+(u<<3)&-16)+s|0,a=(1<<w[c+(w[h+p>>2]<<2)>>2])+a|0,(0|l)!=(0|(o=o+1|0)););o=i<<3,i=a<<2}if(w[e+44>>2]=w[n+4>>2]<<5,w[e+48>>2]=I(w[n+8>>2],24),w[e+52>>2]=w[n+12>>2]<<5,w[e+56>>2]=w[n+4>>2]<<2,w[e+60>>2]=w[n+8>>2]<<2,w[e+64>>2]=w[n+12>>2]<<2,w[e+68>>2]=w[n+4>>2]<<2,a=w[n+4>>2],w[e+76>>2]=s,w[e+72>>2]=a<<2,w[e+80>>2]=w[n+8>>2]<<2,a=w[n+8>>2],w[e+104>>2]=o,w[e+100>>2]=i,w[e+96>>2]=i,w[e+92>>2]=i,w[e+88>>2]=i,w[e+84>>2]=a<<2,1<=((i=s=0)|(a=w[n+12>>2]))){for(u=w[t+296>>2],l=w[t+100>>2],o=0;o=(1<<w[u+(w[l+(i<<2)>>2]<<2)>>2])+o|0,(0|a)!=(0|(i=i+1|0)););i=o<<2}if(w[e+108>>2]=a<<2,o=w[n+12>>2],w[e+156>>2]=i,w[e+152>>2]=i,w[e+148>>2]=i,w[e+144>>2]=i,w[e+140>>2]=i,w[e+136>>2]=i,w[e+132>>2]=i,w[e+128>>2]=i,w[e+124>>2]=i,w[e+120>>2]=i,w[e+116>>2]=i,w[e+112>>2]=o<<2,1<=((o=i=0)|(u=w[n+16>>2]))){for(c=w[t+136>>2],f=w[t+296>>2],h=w[t+172>>2],a=0;i=(0|i)<(0|(l=w[(p=o<<2)+h>>2]))?l:i,s=(15+(l<<3)&-16)+s|0,a=(1<<w[f+(w[c+p>>2]<<2)>>2])+a|0,(0|u)!=(0|(o=o+1|0)););o=i<<3,i=a<<2}if(w[e+160>>2]=u<<4,w[e+164>>2]=w[n+16>>2]<<2,w[e+168>>2]=w[n+16>>2],w[e+172>>2]=w[n+16>>2]<<2,w[e+176>>2]=w[n+16>>2]<<2,a=w[n+16>>2],w[e+184>>2]=s,w[e+180>>2]=a<<2,w[e+188>>2]=w[n+16>>2]<<2,w[e+192>>2]=w[n+16>>2]<<2,w[e+196>>2]=w[n+16>>2]<<2,w[e+200>>2]=w[n+16>>2]<<2,w[e+204>>2]=w[n+16>>2]<<2,a=w[n+16>>2],w[e+236>>2]=o,w[e+232>>2]=i,w[e+228>>2]=i,w[e+224>>2]=i,w[e+220>>2]=i,w[e+216>>2]=i,w[e+212>>2]=i,w[e+208>>2]=a<<2,w[e+240>>2]=I(w[n+20>>2],40),w[e+244>>2]=w[n+20>>2]<<2,w[e+248>>2]=I(w[n+52>>2],28),1<=((i=a=0)|(s=w[n+48>>2]))){for(u=w[t+296>>2],o=0;o=(1<<w[u+(i<<2)>>2])+o|0,(0|s)!=(0|(i=i+1|0)););i=o<<2}if(w[e+260>>2]=i,w[e+256>>2]=i,w[e+252>>2]=I(s,36),w[e+264>>2]=I(w[n+72>>2],28),1<=((i=0)|(u=w[n+72>>2]))){for(l=w[t+340>>2],c=w[t+336>>2],f=w[t+328>>2],o=0;o=(0|(h=w[(s=a<<2)+c>>2]-w[s+l>>2]|0))<(0|o)?o:h+1|0,i=(0|i)<(0|(s=w[s+f>>2]))?s:i,(0|u)!=(0|(a=a+1|0)););a=o<<2,i<<=2}if(o=w[n+76>>2],w[e+280>>2]=a,w[e+276>>2]=i,w[e+272>>2]=a,w[e+268>>2]=o<<4,1<=((i=0)|(a=w[n+80>>2]))){for(s=w[t+364>>2],t=w[t+296>>2],o=0;o=(1<<w[t+(w[s+(i<<2)>>2]<<2)>>2])+o|0,(0|a)!=(0|(i=i+1|0)););i=o<<2}for(w[e+284>>2]=I(a,24),w[e+288>>2]=w[n+80>>2]<<2,t=w[n+80>>2],w[e+304>>2]=i,w[e+300>>2]=i,w[e+296>>2]=i,w[e>>2]=0,w[e+292>>2]=t<<2,i=384,o=1;i=((n=w[(t=(o<<2)+e|0)>>2])+15&-16)+(w[t>>2]=i)|0,77!=(0|(o=o+1|0)););w[r>>2]=i}function pt(t,e,r){var i;e|=0,N=i=N+-64|0;t:{if(t|=0)if(e)if((e+15&-16)==(0|e)){if(e=function(t,e,r){var i,n=0,o=0,a=0,s=0,u=0,l=0,h=0,c=0,f=0,p=0,g=0,d=0,m=0,_=0,y=0,b=0,v=0,S=V(0);if(Q(16+(N=i=N-336|0)|0,0,308),ft(t+704|0,16+i|0,12+i|0),(o=w[12+i>>2])>>>0<=r>>>0){if(n=(e=Q(e,r=0,o))+w[16+i>>2]|0,w[n+8>>2]=e+w[20+i>>2],w[n+36>>2]=e+w[24+i>>2],w[n+44>>2]=e+w[28+i>>2],w[n+48>>2]=e+w[32+i>>2],w[n+52>>2]=e+w[36+i>>2],w[n+12>>2]=e+w[40+i>>2],w[n+16>>2]=e+w[44+i>>2],w[n+20>>2]=e+w[48+i>>2],w[n+28>>2]=e+w[52+i>>2],w[n+32>>2]=e+w[56+i>>2],o=w[t+704>>2],w[n+60>>2]=e+w[60+i>>2],l=e+w[64+i>>2]|0,w[n+68>>2]=l,w[n+76>>2]=e+w[68+i>>2],w[n+168>>2]=e+w[72+i>>2],w[n+172>>2]=e+w[76+i>>2],w[n+176>>2]=e+w[80+i>>2],w[n+192>>2]=e+w[84+i>>2],w[n+196>>2]=e+w[88+i>>2],1<=(0|(o=w[o+8>>2])))for(a=e+w[92+i>>2]|0,h=w[t+792>>2];w[20+(l+I(r,24)|0)>>2]=a,a=(15+(w[h+(r<<2)>>2]<<3)&-16)+a|0,(0|o)!=(0|(r=r+1|0)););if(w[n+80>>2]=e+w[96+i>>2],w[n+84>>2]=e+w[100+i>>2],w[n+88>>2]=e+w[104+i>>2],w[n+96>>2]=e+w[108+i>>2],w[n+100>>2]=e+w[112+i>>2],w[n+104>>2]=e+w[116+i>>2],w[n+108>>2]=e+w[120+i>>2],w[n+112>>2]=e+w[124+i>>2],w[n+116>>2]=e+w[128+i>>2],w[n+120>>2]=e+w[132+i>>2],w[n+128>>2]=e+w[136+i>>2],w[n+132>>2]=e+w[140+i>>2],w[n+136>>2]=e+w[144+i>>2],w[n+140>>2]=e+w[148+i>>2],w[n+144>>2]=e+w[152+i>>2],w[n+148>>2]=e+w[156+i>>2],w[n+152>>2]=e+w[160+i>>2],w[n+156>>2]=e+w[164+i>>2],w[n+160>>2]=e+w[168+i>>2],w[n+164>>2]=e+w[172+i>>2],r=w[t+704>>2],w[n+204>>2]=e+w[176+i>>2],w[n+248>>2]=e+w[180+i>>2],w[n+260>>2]=e+w[184+i>>2],w[n+264>>2]=e+w[188+i>>2],w[n+268>>2]=e+w[192+i>>2],o=e+w[196+i>>2]|0,w[n+272>>2]=o,!((0|(l=w[r+16>>2]))<1)&&(a=e+w[200+i>>2]|0,w[o>>2]=a,(r=1)!=(0|l)))for(o=0;a=(15+(w[w[t+876>>2]+(o<<2)>>2]<<3)&-16)+a|0,w[w[n+272>>2]+(r<<2)>>2]=a,(0|l)!=(0|(r=(o=r)+1|0)););if(w[n+276>>2]=e+w[204+i>>2],w[n+280>>2]=e+w[208+i>>2],w[n+284>>2]=e+w[212+i>>2],w[n+288>>2]=e+w[216+i>>2],w[n+208>>2]=e+w[220+i>>2],w[n+212>>2]=e+w[224+i>>2],w[n+216>>2]=e+w[228+i>>2],w[n+224>>2]=e+w[232+i>>2],w[n+228>>2]=e+w[236+i>>2],w[n+232>>2]=e+w[240+i>>2],w[n+236>>2]=e+w[244+i>>2],w[n+240>>2]=e+w[248+i>>2],w[n+244>>2]=e+w[252+i>>2],r=w[256+i>>2],u=e+w[260+i>>2]|0,w[n+300>>2]=u,c=e+r|0,w[n+296>>2]=c,p=e+w[264+i>>2]|0,w[n+308>>2]=p,r=w[t+704>>2],o=w[276+i>>2],a=w[272+i>>2],h=e+w[268+i>>2]|0,w[n+316>>2]=h,1<=(0|(l=w[r+48>>2])))for(a=e+a|0,o=e+o|0,s=w[t+1e3>>2],r=0;f=h+I(r,36)|0,w[f+20>>2]=o,w[f+16>>2]=a,o=(f=1<<w[s+(r<<2)>>2]<<2)+o|0,a=a+f|0,(0|l)!=(0|(r=r+1|0)););if(r=w[t+704>>2],o=e+w[280+i>>2]|0,w[n+324>>2]=o,1<=(0|(l=w[r+72>>2])))for(a=e+w[284+i>>2]|0,s=w[t+1032>>2],r=0;w[12+(o+I(r,28)|0)>>2]=a,a=(w[s+(r<<2)>>2]<<4)+a|0,(0|l)!=(0|(r=r+1|0)););if(w[n+328>>2]=e+w[288+i>>2],w[n+332>>2]=e+w[292+i>>2],w[n+336>>2]=e+w[296+i>>2],w[n+344>>2]=e+w[300+i>>2],w[n+348>>2]=e+w[304+i>>2],w[n+352>>2]=e+w[308+i>>2],w[n+356>>2]=e+w[312+i>>2],w[n+364>>2]=e+w[316+i>>2],r=w[320+i>>2],w[n+376>>2]=1,w[n+368>>2]=e+r,w[n+380>>2]=1&A[w[t+708>>2]+20|0],l=w[t+704>>2],o=w[l+20>>2],1<=(0|(w[n+292>>2]=o))){for(f=w[t+932>>2],g=w[t+928>>2],y=w[t+924>>2],s=w[t+916>>2],d=w[t+920>>2],b=w[t+908>>2],v=w[t+912>>2],a=o;e=c+I(a=a+-1|0,40)|0,m=(r=a<<2)+v|0,w[e>>2]=w[m>>2],_=r+b|0,w[e+4>>2]=w[_>>2],M[e+8>>2]=M[_>>2]-M[m>>2],w[e+12>>2]=w[r+d>>2],w[e+32>>2]=w[r+s>>2],S=wt(V(w[r+y>>2])),M[e+16>>2]=S,M[e+20>>2]=S*V(1.5),w[e+24>>2]=w[r+g>>2],r=w[r+f>>2],w[e+36>>2]=1,w[e+28>>2]=r,0<(0|a););for(;w[(e=(o=o+-1|0)<<2)+u>>2]=w[e+s>>2],0<(0|o););}if(r=w[l+52>>2],1<=(0|(w[n+304>>2]=r)))for(o=w[t+1004>>2],a=w[t+1012>>2],s=w[t+1008>>2];e=p+I(r=r+-1|0,28)|0,u=r<<2,w[e>>2]=w[u+s>>2],u=w[o+u>>2],w[e+20>>2]=1,w[e+24>>2]=1,w[e+12>>2]=0,w[e+4>>2]=a+(u<<2),0<(0|r););if(r=w[l+48>>2],1<=(0|(w[n+312>>2]=r)))for(o=w[t+996>>2],a=w[t+992>>2],s=w[t+1e3>>2];e=h+I(r=r+-1|0,36)|0,c=w[(u=r<<2)+s>>2],w[e>>2]=c,w[e+4>>2]=1<<c,u=w[o+u>>2],w[e+24>>2]=1,w[e+28>>2]=1,w[e+12>>2]=a+(u<<2),0<(0|r););if(a=w[l>>2],w[n+4>>2]=a,o=w[t+720>>2],w[n+40>>2]=o,(0|a)<1)r=0;else{for(s=w[t+732>>2],u=w[t+736>>2],c=w[t+740>>2],p=w[n+52>>2],f=w[n+8>>2],r=a;e=(r=r+-1|0)<<2,w[(g=f+(r<<3)|0)>>2]=w[e+c>>2],w[g+4>>2]=w[e+u>>2],M[e+p>>2]=w[e+s>>2]?V(1):V(0),0<(0|r););for(s=w[n+12>>2],r=0;e=w[4+(h+I(w[(u=(a=a+-1|0)<<2)+o>>2],36)|0)>>2],r=(w[s+u>>2]=e)+r|0,0<(0|a););}if(w[n+24>>2]=r,a=w[l+4>>2],w[n+56>>2]=a,w[n+180>>2]=w[t+752>>2],w[n+184>>2]=w[t+780>>2],w[n+188>>2]=w[t+804>>2],1<=(0|a)){for(;;){a=a+-1|0,e=w[n+60>>2]+(a<<5)|0,r=a<<2,w[e>>2]=w[r+w[t+764>>2]>>2],w[e+4>>2]=w[r+w[t+768>>2]>>2],o=w[r+w[t+772>>2]>>2],w[e+8>>2]=o,l=w[r+w[t+776>>2]>>2],w[e+12>>2]=l,w[e+28>>2]=w[r+w[t+760>>2]>>2];e:if(o>>>0<=1){if(o-1){w[e+20>>2]=1,w[e+16>>2]=2,w[e+24>>2]=w[n+68>>2]+I(l,24);break e}w[e+20>>2]=3,w[e+16>>2]=4,w[e+24>>2]=w[n+76>>2]+(l<<5)}else Y(4,1026,0);if(!(0<(0|a)))break}l=w[t+704>>2]}a=w[l+8>>2];e:if(!((0|(w[n+64>>2]=a))<1)){if(r=a+-1|0,h=w[t+792>>2],s=w[t+800>>2],u=w[t+796>>2],c=w[n+68>>2],x[t+4|0]<2)for(;;)if(e=c+I(r,24)|0,o=r<<2,w[e>>2]=w[o+u>>2],w[e+4>>2]=w[o+s>>2],o=w[o+h>>2],w[e+8>>2]=0,w[e+12>>2]=o,e=0<(0|r),r=r+-1|0,!e)break e;for(p=w[t+1108>>2];e=c+I(r,24)|0,o=r<<2,w[e>>2]=w[o+u>>2],w[e+4>>2]=w[o+s>>2],w[e+12>>2]=w[o+h>>2],w[e+8>>2]=w[o+p>>2],e=0<(0|r),r=r+-1|0,e;);}if(e=w[l+12>>2],1<=(0|(w[n+72>>2]=e)))for(o=w[t+816>>2],h=w[n+76>>2],r=e;w[h+((r=r+-1|0)<<5)>>2]=w[o+(r<<2)>>2],0<(0|r););if(1<=((o=r=0)|a)){for(h=w[n+80>>2],s=w[n+184>>2],u=w[n+316>>2];e=w[4+(u+I(w[(c=(a=a+-1|0)<<2)+s>>2],36)|0)>>2],o=(w[h+c>>2]=e)+o|0,0<(0|a););e=w[n+72>>2]}if(w[n+92>>2]=o,1<=(0|e))for(a=w[n+112>>2],h=w[n+188>>2],s=w[n+316>>2];o=w[4+(s+I(w[(u=(e=e+-1|0)<<2)+h>>2],36)|0)>>2],r=r+(w[a+u>>2]=o)|0,0<(0|e););if(w[n+124>>2]=r,o=w[l+16>>2],w[n+200>>2]=o,h=w[t+840>>2],w[n+252>>2]=h,(0|o)<1)r=0;else{for(s=w[t+856>>2],u=w[t+876>>2],c=w[t+864>>2],p=w[t+860>>2],f=w[n+204>>2],r=o;a=(r=r+-1|0)<<2,w[(e=f+(r<<4)|0)>>2]=w[a+p>>2],w[e+4>>2]=w[a+c>>2],w[e+12>>2]=w[a+u>>2],w[e+8>>2]=w[a+s>>2],0<(0|r););for(a=w[n+208>>2],s=w[n+316>>2],r=0;e=w[4+(s+I(w[(u=(o=o+-1|0)<<2)+h>>2],36)|0)>>2],r=(w[a+u>>2]=e)+r|0,0<(0|o););}if(w[n+220>>2]=r,a=w[l+72>>2],1<=(0|(w[n+320>>2]=a)))for(u=w[t+1028>>2],c=w[t+1044>>2],p=w[t+1040>>2],f=w[t+1036>>2],g=w[t+1032>>2],y=w[n+324>>2],o=0;;){if(e=y+I(o,28)|0,h=w[(r=o<<2)+g>>2],w[e+4>>2]=h,w[e>>2]=w[r+f>>2],s=w[r+p>>2],w[e+16>>2]=s,d=w[r+c>>2],w[e+20>>2]=d,w[e+8>>2]=0,w[e+24>>2]=1+(s-d|0),1<=(0|h))for(d=w[r+u>>2],b=w[e+12>>2],v=w[t+1056>>2],m=w[t+1048>>2],_=w[t+1052>>2],r=0;s=r+d<<2,w[4+(e=b+(r<<4)|0)>>2]=w[s+_>>2],w[e>>2]=w[s+m>>2],s=w[s+v>>2],w[e+12>>2]=0,w[e+8>>2]=s,(0|h)!=(0|(r=r+1|0)););if((0|a)==(0|(o=o+1|0)))break}if(e=w[l+80>>2],w[n+340>>2]=e,a=w[t+1068>>2],w[n+372>>2]=a,(0|e)<1)e=0;else{for(l=w[t+1100>>2],h=w[t+1088>>2],s=w[t+1096>>2],u=w[t+1092>>2],c=w[t+1084>>2],p=w[t+1080>>2],f=w[n+344>>2];r=f+I(e=e+-1|0,24)|0,o=e<<2,w[r>>2]=w[o+p>>2],w[r+4>>2]=w[o+c>>2],w[r+8>>2]=w[o+u>>2],o=w[o+h>>2],w[r+16>>2]=l+(o<<1),w[r+12>>2]=s+(o<<2),0<(0|e););if((0|(r=w[n+340>>2]))<1)e=0;else for(l=w[n+348>>2],h=w[n+316>>2],e=0;o=w[4+(h+I(w[(s=(r=r+-1|0)<<2)+a>>2],36)|0)>>2],e=e+(w[s+l>>2]=o)|0,0<(0|r););}w[n>>2]=t,w[n+360>>2]=e,ct(n)}return N=336+i|0,n}(t,e,r|=0))break t;w[36+i>>2]=1872,w[32+i>>2]=1846,Y(4,1087,32+i|0)}else w[52+i>>2]=1441,w[48+i>>2]=1846,Y(4,1087,48+i|0);else w[20+i>>2]=1246,w[16+i>>2]=1846,Y(4,1087,16+i|0);else w[4+i>>2]=1828,w[i>>2]=1846,Y(4,1087,i);e=0}return N=64+i|0,0|e}function gt(t){var e;return N=e=N-16|0,t=(t|=0)?function(t){var e;return Q(16+(N=e=N-336|0)|0,0,308),ft(t+704|0,16+e|0,12+e|0),N=336+e|0,w[12+e>>2]}(t):(w[4+e>>2]=1828,w[e>>2]=1810,Y(4,1087,e),0),N=16+e|0,0|t}function dt(t,e){var r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0;o=t+e|0;t:{e:if(!(1&(r=w[t+4>>2]))){if(!(3&r))break t;if(e=(r=w[t>>2])+e|0,(0|(t=t-r|0))==w[1928]){if(3==(3&(r=w[o+4>>2])))return w[1925]=e,w[o+4>>2]=-2&r,w[t+4>>2]=1|e,void(w[o>>2]=e)}else{if(r>>>0<=255){if(n=r>>>3,r=w[t+8>>2],(0|(i=w[t+12>>2]))==(0|r)){u=7692,l=w[1923]&Mt(n),w[u>>2]=l;break e}w[r+12>>2]=i,w[i+8>>2]=r;break e}if(s=w[t+24>>2],(0|(r=w[t+12>>2]))==(0|t))if((n=w[(i=t+20|0)>>2])||(n=w[(i=t+16|0)>>2])){for(;a=i,(n=w[(i=(r=n)+20|0)>>2])||(i=r+16|0,n=w[r+16>>2]););w[a>>2]=0}else r=0;else i=w[t+8>>2],w[i+12>>2]=r,w[r+8>>2]=i;if(!s)break e;i=w[t+28>>2];r:{if(w[(n=7996+(i<<2)|0)>>2]==(0|t)){if(w[n>>2]=r)break r;u=7696,l=w[1924]&Mt(i),w[u>>2]=l;break e}if(!(w[s+(w[s+16>>2]==(0|t)?16:20)>>2]=r))break e}if(w[r+24>>2]=s,(i=w[t+16>>2])&&(w[r+16>>2]=i,w[i+24>>2]=r),!(i=w[t+20>>2]))break e;w[r+20>>2]=i,w[i+24>>2]=r}}e:{if(!(2&(r=w[o+4>>2]))){if(w[1929]==(0|o)){if(w[1929]=t,e=w[1926]+e|0,w[1926]=e,w[t+4>>2]=1|e,w[1928]!=(0|t))break t;return w[1925]=0,void(w[1928]=0)}if(w[1928]==(0|o))return w[1928]=t,e=w[1925]+e|0,w[1925]=e,w[t+4>>2]=1|e,void(w[t+e>>2]=e);e=(-8&r)+e|0;r:if(r>>>0<=255){if(n=r>>>3,r=w[o+8>>2],(0|(i=w[o+12>>2]))==(0|r)){u=7692,l=w[1923]&Mt(n),w[u>>2]=l;break r}w[r+12>>2]=i,w[i+8>>2]=r}else{if(s=w[o+24>>2],(0|o)==(0|(r=w[o+12>>2])))if((n=w[(i=o+20|0)>>2])||(n=w[(i=o+16|0)>>2])){for(;a=i,(n=w[(i=(r=n)+20|0)>>2])||(i=r+16|0,n=w[r+16>>2]););w[a>>2]=0}else r=0;else i=w[o+8>>2],w[i+12>>2]=r,w[r+8>>2]=i;if(s){i=w[o+28>>2];i:{if(w[(n=7996+(i<<2)|0)>>2]==(0|o)){if(w[n>>2]=r)break i;u=7696,l=w[1924]&Mt(i),w[u>>2]=l;break r}if(!(w[s+(w[s+16>>2]==(0|o)?16:20)>>2]=r))break r}w[r+24>>2]=s,(i=w[o+16>>2])&&(w[r+16>>2]=i,w[i+24>>2]=r),(i=w[o+20>>2])&&(w[r+20>>2]=i,w[i+24>>2]=r)}}if(w[t+4>>2]=1|e,w[t+e>>2]=e,w[1928]!=(0|t))break e;return void(w[1925]=e)}w[o+4>>2]=-2&r,w[t+4>>2]=1|e,w[t+e>>2]=e}if(e>>>0<=255)return e=7732+((r=e>>>3)<<3)|0,r=(i=w[1923])&(r=1<<r)?w[e+8>>2]:(w[1923]=r|i,e),w[e+8>>2]=t,w[r+12>>2]=t,w[t+12>>2]=e,void(w[t+8>>2]=r);w[t+16>>2]=0,r=w[t+20>>2]=0,(n=e>>>8)&&(r=31,16777215<e>>>0||(r=28+((r=((o=(n<<=a=n+1048320>>>16&8)<<(r=n+520192>>>16&4))<<(n=o+245760>>>16&2)>>>15)-(n|r|a)|0)<<1|e>>>r+21&1)|0)),n=7996+((w[(i=t)+28>>2]=r)<<2)|0;e:{if((i=w[1924])&(a=1<<r)){for(i=e<<(31==(0|r)?0:25-(r>>>1)|0),r=w[n>>2];;){if((-8&w[(n=r)+4>>2])==(0|e))break e;if(r=i>>>29,i<<=1,!(r=w[16+(a=n+(4&r)|0)>>2]))break}w[a+16>>2]=t}else w[1924]=i|a,w[n>>2]=t;return w[t+24>>2]=n,w[t+12>>2]=t,void(w[t+8>>2]=t)}e=w[n+8>>2],w[e+12>>2]=t,w[n+8>>2]=t,w[t+24>>2]=0,w[t+12>>2]=n,w[t+8>>2]=e}}function mt(t,e,r){var i=0;t:{if(8!=(0|e)){if(i=28,3&e|1!=(0|function(t){for(var e=0,r=0;r=e,t;)t&=t-1,e=e+1|0;return r}(e>>>2)))break t;if(i=48,-64-e>>>0<r>>>0)break t;e=function(t,e){var r=0,i=0,n=0,o=0,a=0;if((i=t>>>0>(r=16)?t:16)+-1&i)for(;r=(t=r)<<1,t>>>0<i>>>0;);else t=i;return-64-t>>>0<=e>>>0?(w[1906]=48,0):(r=rt(12+((i=e>>>0<11?16:e+11&-8)+t|0)|0))?(e=r+-8|0,r&t+-1?(n=(-8&(a=w[(o=r+-4|0)>>2]))-(r=(t=15<(r=((t+r|0)-1&0-t)-8|0)-e>>>0?r:t+r|0)-e|0)|0,3&a?(w[t+4>>2]=n|1&w[t+4>>2]|2,w[4+(n=t+n|0)>>2]=1|w[n+4>>2],w[o>>2]=r|1&w[o>>2]|2,w[t+4>>2]=1|w[t+4>>2],dt(e,r)):(e=w[e>>2],w[t+4>>2]=n,w[t>>2]=e+r)):t=e,3&(e=w[t+4>>2])&&((r=-8&e)>>>0<=i+16>>>0||(w[t+4>>2]=i|1&e|2,e=t+i|0,i=r-i|0,w[e+4>>2]=3|i,w[4+(r=t+r|0)>>2]=1|w[r+4>>2],dt(e,i))),t+8|0):0}(16<e>>>0?e:16,r)}else e=rt(r);if(!e)return 48;w[t>>2]=e,i=0}return i}function _t(t){var e=0,r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0;t:if(t){o=(i=t+-8|0)+(t=-8&(r=w[t+-4>>2]))|0;e:if(!(1&r)){if(!(3&r))break t;if((i=i-(r=w[i>>2])|0)>>>0<B[1927])break t;if(t=t+r|0,w[1928]==(0|i)){if(3==(3&(r=w[o+4>>2])))return w[1925]=t,w[o+4>>2]=-2&r,w[i+4>>2]=1|t,void(w[t+i>>2]=t)}else{if(r>>>0<=255){if(n=w[i+8>>2],r>>>=3,(0|(e=w[i+12>>2]))==(0|n)){u=7692,l=w[1923]&Mt(r),w[u>>2]=l;break e}w[n+12>>2]=e,w[e+8>>2]=n;break e}if(s=w[i+24>>2],(0|i)==(0|(r=w[i+12>>2])))if((e=w[(n=i+20|0)>>2])||(e=w[(n=i+16|0)>>2])){for(;a=n,(e=w[(n=(r=e)+20|0)>>2])||(n=r+16|0,e=w[r+16>>2]););w[a>>2]=0}else r=0;else e=w[i+8>>2],w[e+12>>2]=r,w[r+8>>2]=e;if(!s)break e;n=w[i+28>>2];r:{if(w[(e=7996+(n<<2)|0)>>2]==(0|i)){if(w[e>>2]=r)break r;u=7696,l=w[1924]&Mt(n),w[u>>2]=l;break e}if(!(w[s+(w[s+16>>2]==(0|i)?16:20)>>2]=r))break e}if(w[r+24>>2]=s,(e=w[i+16>>2])&&(w[r+16>>2]=e,w[e+24>>2]=r),!(e=w[i+20>>2]))break e;w[r+20>>2]=e,w[e+24>>2]=r}}if(!(o>>>0<=i>>>0)&&1&(r=w[o+4>>2])){e:{if(!(2&r)){if(w[1929]==(0|o)){if(w[1929]=i,t=w[1926]+t|0,w[1926]=t,w[i+4>>2]=1|t,w[1928]!=(0|i))break t;return w[1925]=0,void(w[1928]=0)}if(w[1928]==(0|o))return w[1928]=i,t=w[1925]+t|0,w[1925]=t,w[i+4>>2]=1|t,void(w[t+i>>2]=t);t=(-8&r)+t|0;r:if(r>>>0<=255){if(r>>>=3,(0|(e=w[o+8>>2]))==(0|(n=w[o+12>>2]))){u=7692,l=w[1923]&Mt(r),w[u>>2]=l;break r}w[e+12>>2]=n,w[n+8>>2]=e}else{if(s=w[o+24>>2],(0|o)==(0|(r=w[o+12>>2])))if((e=w[(n=o+20|0)>>2])||(e=w[(n=o+16|0)>>2])){for(;a=n,(e=w[(n=(r=e)+20|0)>>2])||(n=r+16|0,e=w[r+16>>2]););w[a>>2]=0}else r=0;else e=w[o+8>>2],w[e+12>>2]=r,w[r+8>>2]=e;if(s){n=w[o+28>>2];i:{if(w[(e=7996+(n<<2)|0)>>2]==(0|o)){if(w[e>>2]=r)break i;u=7696,l=w[1924]&Mt(n),w[u>>2]=l;break r}if(!(w[s+(w[s+16>>2]==(0|o)?16:20)>>2]=r))break r}w[r+24>>2]=s,(e=w[o+16>>2])&&(w[r+16>>2]=e,w[e+24>>2]=r),(e=w[o+20>>2])&&(w[r+20>>2]=e,w[e+24>>2]=r)}}if(w[i+4>>2]=1|t,w[t+i>>2]=t,w[1928]!=(0|i))break e;return void(w[1925]=t)}w[o+4>>2]=-2&r,w[i+4>>2]=1|t,w[t+i>>2]=t}if(t>>>0<=255)return r=7732+((t>>>=3)<<3)|0,t=(e=w[1923])&(t=1<<t)?w[r+8>>2]:(w[1923]=t|e,r),w[r+8>>2]=i,w[t+12>>2]=i,w[i+12>>2]=r,void(w[i+8>>2]=t);w[i+16>>2]=0,e=w[i+20>>2]=0,(n=t>>>8)&&(e=31,16777215<t>>>0||(e=n,e<<=n=n+1048320>>>16&8,e=28+((e=((e<<=s=e+520192>>>16&4)<<(a=e+245760>>>16&2)>>>15)-(a|n|s)|0)<<1|t>>>e+21&1)|0)),a=7996+((w[(r=i)+28>>2]=e)<<2)|0;e:if((n=w[1924])&(r=1<<e)){n=t<<(31==(0|e)?0:25-(e>>>1)|0),r=w[a>>2];r:{for(;;){if((-8&w[(e=r)+4>>2])==(0|t))break r;if(r=n>>>29,n<<=1,!(r=w[16+(a=e+(4&r)|0)>>2]))break}w[a+16>>2]=i,w[i+12>>2]=i,w[i+24>>2]=e,w[i+8>>2]=i;break e}t=w[e+8>>2],w[t+12>>2]=i,w[e+8>>2]=i,w[i+24>>2]=0,w[i+12>>2]=e,w[i+8>>2]=t}else w[1924]=r|n,w[a>>2]=i,w[i+12>>2]=i,w[i+24>>2]=a,w[i+8>>2]=i;if(t=w[1931]+-1|0,!(w[1931]=t)){for(i=8148;i=(t=w[i>>2])+8|0,t;);w[1931]=-1}}}}function yt(t,e){var r,i,n=0,o=0,a=0,s=V(0);if(f(e),!((i=2147483647&(n=u(0)))>>>0<=2139095040&&(f(t),(o=2147483647&(a=u(0)))>>>0<2139095041)))return V(t+e);if(1065353216==(0|n))return it(t);n=(r=n>>>30&2)|a>>>31;t:{e:{r:{i:{if(!o){n:switch(n-2|0){case 0:break i;case 1:break n;default:break r}return V(-3.1415927410125732)}if(2139095040!=(0|i)){if(!i|!(o>>>0<=218103808+i>>>0&&2139095040!=(0|o)))break t;if(o+218103808>>>0<i>>>0&&(s=V(0),r)||(s=it(V(E(V(t/e))))),t=s,n>>>0<=2){n:switch(n-1|0){case 0:return V(-t);case 1:break n;default:break r}return V(V(3.1415927410125732)-V(t+V(8.742277657347586e-8)))}return V(V(t+V(8.742277657347586e-8))+V(-3.1415927410125732))}if(2139095040==(0|o))break e;return M[6128+(n<<2)>>2]}t=V(3.1415927410125732)}return t}return M[6112+(n<<2)>>2]}return V((0|a)<0?-1.5707963705062866:1.5707963705062866)}function bt(t,e,r){var i,n,o,a,s,u=0,l=0,h=0,c=0,f=0,p=0,g=0,d=0,m=0,_=0,y=0,b=0;if(N=i=N-560|0,g=(l=r)+I(o=0<(0|(r=(r+-3|0)/24|0))?r:0,-24)|0,0<=(0|(n=w[808])))for(l=n+1|0,r=o;P[(320+i|0)+(h<<3)>>3]=(0|r)<0?0:+w[3248+(r<<2)>>2],r=r+1|0,(0|l)!=(0|(h=h+1|0)););for(f=g+-24|0,l=0;;){for(u=r=0;u+=P[(r<<3)+t>>3]*P[(320+i|0)+(l-r<<3)>>3],1!=(0|(r=r+1|0)););if(P[(l<<3)+i>>3]=u,r=(0|l)<(0|n),l=l+1|0,!r)break}s=23-f|0,a=24-f|0,l=n;t:{for(;;){if(u=P[(l<<3)+i>>3],!(m=((r=0)|(h=l))<1))for(;p=(480+i|0)+(r<<2)|0,d=u,c=E(u*=5.960464477539063e-8)<2147483648?~~u:-2147483648,c=E(d+=-16777216*(u=+(0|c)))<2147483648?~~d:-2147483648,w[p>>2]=c,u=P[((h=h+-1|0)<<3)+i>>3]+u,(0|l)!=(0|(r=r+1|0)););u=tt(u,f),u+=-8*R(.125*u),u-=0|(p=E(u)<2147483648?~~u:-2147483648);e:{r:{i:{if(y=(0|f)<1){if(f)break i;c=w[476+((l<<2)+i|0)>>2]>>23}else _=h=(l<<2)+i|0,h=(c=w[h+476>>2])-((r=c>>a)<<a)|0,p=r+p|0,c=(w[_+476>>2]=h)>>s;if((0|c)<1)break e;break r}if(c=2,!(.5<=u)){c=0;break e}}if(h=r=0,!m)for(;;){m=w[(b=(480+i|0)+(r<<2)|0)>>2],_=16777215;r:{i:{if(!h){if(!m)break i;_=16777216,h=1}w[b>>2]=_-m;break r}h=0}if((0|l)==(0|(r=r+1|0)))break}y||1<(r=f+-1|0)>>>0||(w[476+(r=(l<<2)+i|0)>>2]=r-1?8388607&w[r+476>>2]:4194303&w[r+476>>2]),p=p+1|0,2==(0|c)&&(u=1-u,c=2,h&&(u-=tt(1,f)))}if(0!=u)break;if(!(((h=0)|(r=l))<=(0|n))){for(;h=w[(480+i|0)+((r=r+-1|0)<<2)>>2]|h,(0|n)<(0|r););if(h){for(g=f;g=g+-24|0,!w[(480+i|0)+((l=l+-1|0)<<2)>>2];);break t}}for(r=1;r=(h=r)+1|0,!w[(480+i|0)+(n-h<<2)>>2];);for(h=l+h|0;;){for(l=p=l+1|0,P[(320+i|0)+(p<<3)>>3]=w[3248+(o+l<<2)>>2],u=r=0;u+=P[(r<<3)+t>>3]*P[(320+i|0)+(p-r<<3)>>3],1!=(0|(r=r+1|0)););if(P[(l<<3)+i>>3]=u,!((0|l)<(0|h)))break}l=h}16777216<=(u=tt(u,0-f|0))?(t=(480+i|0)+(l<<2)|0,d=u,r=E(u*=5.960464477539063e-8)<2147483648?~~u:-2147483648,h=E(u=d+-16777216*(0|r))<2147483648?~~u:-2147483648,w[t>>2]=h,l=l+1|0):(r=E(u)<2147483648?~~u:-2147483648,g=f),w[(480+i|0)+(l<<2)>>2]=r}if(u=tt(1,g),!((0|l)<=-1)){for(r=l;P[(r<<3)+i>>3]=u*w[(480+i|0)+(r<<2)>>2],u*=5.960464477539063e-8,t=0<(0|r),r=r+-1|0,t;);if(!((0|l)<=-1))for(r=l;;){for(f=l-(t=r)|0,r=u=0;u+=P[6016+(r<<3)>>3]*P[(t+r<<3)+i>>3],!((0|n)<=(0|r))&&(g=r>>>0<f>>>0,r=r+1|0,g););if(P[(160+i|0)+(f<<3)>>3]=u,r=t+-1|0,!(0<(0|t)))break}}if((u=0)<=(0|l))for(;u+=P[(160+i|0)+(l<<3)>>3],t=0<(0|l),l=l+-1|0,t;);return P[e>>3]=c?-u:u,N=560+i|0,7&p}function vt(t,e){var r=0,i=0,n=0;r=0!=(0|e);t:{e:{r:{i:if(!(!e|!(3&t)))for(;;){if(!x[0|t])break r;if(t=t+1|0,r=0!=(0|(e=e+-1|0)),!e)break i;if(!(3&t))break}if(!r)break e}if(!x[0|t])break t;r:{if(4<=e>>>0){for(r=(r=e+-4|0)-(i=-4&r)|0,i=4+(t+i|0)|0;;){if((-1^(n=w[t>>2]))&n+-16843009&-2139062144)break r;if(t=t+4|0,!(3<(e=e+-4|0)>>>0))break}e=r,t=i}if(!e)break e}for(;;){if(!x[0|t])break t;if(t=t+1|0,!(e=e+-1|0))break}}return 0}return t}function At(t,e,r,i){if(t|e)for(;A[0|(r=r+-1|0)]=x[3168+(15&t)|0]|i,(t=(15&e)<<28|t>>>4)|(e>>>=4););return r}function St(t,e,r){if(t|e)for(;A[0|(r=r+-1|0)]=7&t|48,(t=(7&e)<<29|t>>>3)|(e>>>=3););return r}function wt(t){var e=V(0),r=V(0),i=0,n=0,o=V(0),a=V(0),s=V(0),h=V(0),c=0,g=V(0),d=V(0),m=0;t:{e:{if(f(t),n=2147483647&(i=u(0))){if(!(n>>>0<2139095041))return V(V(.10000000149011612)+t);if(1065353216==(0|n))return V(-1<(0|i)?.10000000149011612:10);if(2139095040==(0|n))return V(-1<(0|i)?0:-t);if(1073741824==(0|i))return V(.010000000707805157);if(1056964608==(0|i))return V(.3162277638912201);if(1291845633<=n>>>0)return V((0|i)<0?F:0);if(o=M[1537],a=V(V(1.600000023841858)-o),s=V(V(1)/V(o+V(1.600000023841858))),l(0,-4096&(f(r=V(a*s)),u(0))),e=p(),h=V(e*e),d=M[1541],o=V(s*V(V(a-V((g=e)*V(3.099609375)))-V(e*V(V(1.600000023841858)-V(V(3.099609375)-o))))),s=V(V(r+e)*o),e=V(r*r),a=V(s+V(V(e*e)*V(V(e*V(V(e*V(V(e*V(V(e*V(V(e*V(.20697501301765442))+V(.23066075146198273)))+V(.2727281153202057)))+V(.3333333432674408)))+V(.4285714328289032)))+V(.6000000238418579)))),l(0,-4096&(f(V(V(h+V(3))+a)),u(0))),e=p(),s=V(g*e),r=V(V(o*e)+V(r*V(a-V(V(e+V(-3))-h)))),l(0,-4096&(f(V(s+r)),u(0))),e=p(),o=V(e*V(.9619140625)),h=V(M[1539]+V(V(V(r-V(e-s))*V(.9617967009544373))+V(e*V(-.00011736857413779944)))),l(0,-4096&(f(V(V(d+V(o+h))+V(-4))),u(0))),r=p(),l(0,-4096&i),a=p(),e=V(r*a),t=V(V(V(h-V(V(V(r-V(-4))-d)-o))*t)+V(V(t-a)*r)),f(r=V(e+t)),1124073473<=(0|(i=u(0))))break e;r:{i:{if((n=1124073472)==(0|i)){if(!(V(t+V(4.299566569443414e-8))>V(r-e)))break i;break e}if(n=2147483647&i,!(t<=V(r-e)^1|-1021968384!=(0|i))|1125515265<=n>>>0)break t;if(n>>>0<1056964609)break r}c=(8388607&(n=(8388608>>>(n>>>23)-126)+i|0)|8388608)>>>150-(m=n>>>23&255),c=(0|i)<0?0-c|0:c,e=V(e-(l(0,n&-8388608>>m+-127),p())),f(V(t+e)),i=u(0)}l(0,-32768&i),r=p(),o=V(r*V(.693145751953125)),r=V(V(r*V(14286065379565116e-22))+V(V(t-V(r-e))*V(.6931471824645996))),t=V(o+r),e=V(t*t),e=V(t-V(e*V(V(e*V(V(e*V(V(e*V(V(e*V(4.138136944220605e-8))+V(-16533901998627698e-22)))+V(661375597701408e-19)))+V(-.0027777778450399637)))+V(.1666666716337204)))),g=V(V(t*e)/V(e+V(-2))),e=V(r-V(t-o)),t=(0|(i=0|(f(t=V(V(t-V(g-V(e+V(t*e))))+V(1))),u(0)+(c<<23))))<=8388607?function(t,e){var r=0;r:if(128<=(0|e)){if(t=V(t*V(17014118346046923e22)),(0|(r=e+-127|0))<128){e=r;break r}t=V(t*V(17014118346046923e22)),e=((0|e)<381?e:381)+-254|0}else-127<(0|e)||(t=V(t*V(11754943508222875e-54)),e=-127<(0|(r=e+126|0))?r:(t=V(t*V(11754943508222875e-54)),(-378<(0|e)?e:-378)+252|0));return V(t*(l(0,1065353216+(e<<23)|0),p()))}(t,c):(l(0,i),p()),t=V(V(1)*t)}else t=V(1);return t}return V(F)}return V(0)}function xt(t,e){var r,i;r=0|t,i=0|e,o[0]=r,o[1]=i}function Ct(t,e,r){return function(t,e,r){var i,n,o,a,s=0;return a=I(i=r>>>16,s=t>>>16),t=(65535&(s=((o=I(n=65535&r,t&=65535))>>>16)+I(s,n)|0))+I(t,i)|0,O=((a+I(e,r)|0)+(s>>>16)|0)+(t>>>16)|0,65535&o|t<<16}(t,e,r)}function Bt(t,e,r){return function(t,e,r){var i=0,n=0,o=0,a=0,s=0,u=0,l=0,h=0,c=0;t:{e:{r:{i:{n:{o:{a:{s:{u:{if(n=e){if(!(i=r))break u;break s}return xt((e=t)-I(t=(t>>>0)/(r>>>0)|0,r)|0,0),O=0,t}if(!t)break a;break o}if(!((a=i+-1|0)&i))break n;s=0-(a=(k(i)+33|0)-k(n)|0)|0;break r}return xt(0,n-I(t=(n>>>0)/0|0,0)|0),O=0,t}if((i=32-k(n)|0)>>>0<31)break i;break e}if(xt(t&a,0),1==(0|i))break t;return r=31&(i=i?31-k(i+-1^i)|0:32),t=32<=(63&i)>>>0?(n=0,e>>>r):(n=e>>>r,((1<<r)-1&e)<<32-r|t>>>r),O=n,t}a=i+1|0,s=63-i|0}if(i=e,o=31&(n=63&a),o=32<=n>>>0?(n=0,i>>>o):(n=i>>>o,((1<<o)-1&i)<<32-o|t>>>o),i=31&(s&=63),32<=s>>>0?(e=t<<i,t=0):(e=(1<<i)-1&t>>>32-i|e<<i,t<<=i),a)for((s=r+(i=-1)|0)>>>0<4294967295&&(i=0);o=(l=u=o<<1|e>>>31)-(h=r&(u=i-((n=n<<1|o>>>31)+(s>>>0<u>>>0)|0)>>31))|0,n=n-(l>>>0<h>>>0)|0,e=e<<1|t>>>31,t=c|t<<1,c=u&=1,a=a+-1|0;);return xt(o,n),O=e<<1|t>>>31,u|t<<1}xt(t,e),e=t=0}return O=e,t}(t,e,r)}function Mt(t){var e;return(-1>>>(e=31&t)&-2)<<e|(-1<<(t=0-t&31)&-2)>>>t}function Pt(){return y.byteLength/65536|0}}(nt,x,C)}}s=null,o.wasmBinary&&(y=o.wasmBinary);var S=Error,w={};y=[],"object"!=typeof w&&v("no native wasm support detected");var x,C=new function(t){var e=Array(17);return e.grow=function(){18<=e.length&&Q("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),e.push(null)},e.set=function(t,r){e[t]=r},e.get=function(t){return e[t]},e}({initial:17,maximum:18,element:"anyfunc"}),B=!1;function M(t,e){t||Q("Assertion failed: "+e)}var P,I,V,E,k="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(t,e,r){var i=e+r;for(r=e;t[r]&&!(i<=r);)++r;if(16<r-e&&t.subarray&&k)return k.decode(t.subarray(e,r));for(i="";e<r;){var n=t[e++];if(128&n){var o=63&t[e++];if(192==(224&n))i+=String.fromCharCode((31&n)<<6|o);else{var a=63&t[e++];(n=224==(240&n)?(15&n)<<12|o<<6|a:(7&n)<<18|o<<12|a<<6|63&t[e++])<65536?i+=String.fromCharCode(n):(n-=65536,i+=String.fromCharCode(55296|n>>10,56320|1023&n))}}else i+=String.fromCharCode(n)}return i}function R(t,e){return t?T(V,t,e):""}function F(t){return 0<t%65536&&(t+=65536-t%65536),t}function D(t){P=t,o.HEAP8=I=new Int8Array(t),o.HEAP16=new Int16Array(t),o.HEAP32=E=new Int32Array(t),o.HEAPU8=V=new Uint8Array(t),o.HEAPU16=new Uint16Array(t),o.HEAPU32=new Uint32Array(t),o.HEAPF32=new Float32Array(t),o.HEAPF64=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var L=o.TOTAL_MEMORY||16777216;function U(t){for(;0<t.length;){var e=t.shift();if("function"==typeof e)e();else{var r=e.X;"number"==typeof r?void 0===e.W?o.dynCall_v(r):o.dynCall_vi(r,e.W):r(void 0===e.W?null:e.W)}}}(x=o.wasmMemory?o.wasmMemory:new function(){return{buffer:new ArrayBuffer(L/65536*65536),grow:function(t){return ct(t)}}})&&(P=x.buffer),L=P.byteLength,D(P),E[2052]=5251248;var N=[],O=[],z=[],G=[];function Y(){var t=o.preRun.shift();N.unshift(t)}if(Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(t,e){var r=65535&t,i=65535&e;return r*i+((t>>>16)*i+r*(e>>>16)<<16)|0}),!Math.fround){var X=new Float32Array(1);Math.fround=function(t){return X[0]=t,X[0]}}Math.clz32||(Math.clz32=function(t){var e=32,r=t>>16;return r&&(e-=16,t=r),(r=t>>8)&&(e-=8,t=r),(r=t>>4)&&(e-=4,t=r),(r=t>>2)&&(e-=2,t=r),t>>1?e-2:e-t}),Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)});var j=0,H=null,W=null;function Q(t){throw o.onAbort&&o.onAbort(t),b(t),v(t),B=!0,new S("abort("+t+"). Build with -s ASSERTIONS=1 for more info.")}o.preloadedImages={},o.preloadedAudios={};var q="data:application/octet-stream;base64,";function J(t){return String.prototype.startsWith?t.startsWith(q):0===t.indexOf(q)}var Z="_em_module.wasm";if(!J(Z)){var K=Z;Z=o.locateFile?o.locateFile(K,_):_+K}function $(){try{if(y)return new Uint8Array(y);var t=it(Z);if(t)return t;if(p)return p(Z);throw"both async and sync fetching of the wasm failed"}catch(t){Q(t)}}O.push({X:function(){at()}});var tt=[null,[],[]];function et(t){for(var e=[],r=0;r<t.length;r++){var i=t[r];255<i&&(i&=255),e.push(String.fromCharCode(i))}return e.join("")}var rt="function"==typeof atob?atob:function(t){var e="",r=0;t=t.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++));i=i<<2|n>>4,n=(15&n)<<4|o>>2;var s=(3&o)<<6|a;e+=String.fromCharCode(i),64!==o&&(e+=String.fromCharCode(n)),64!==a&&(e+=String.fromCharCode(s))}while(r<t.length);return e};function it(t){if(J(t)){if(t=t.slice(q.length),"boolean"==typeof c&&c){try{var e=n.from(t,"base64")}catch(r){e=new n(t,"base64")}var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}else try{var i=rt(t),o=new Uint8Array(i.length);for(e=0;e<i.length;++e)o[e]=i.charCodeAt(e);r=o}catch(t){throw Error("Converting base64 string to bytes failed.")}return r}}var nt={a:function(t,e,r){V.set(V.subarray(e,e+r),t)},b:function(t){if(2147418112<t)return!1;for(var e=Math.max(I.length,16777216);e<t;)e=e<=536870912?F(2*e):Math.min(F((3*e+2147483648)/4),2147418112);t:{try{x.grow(e-P.byteLength+65535>>16),D(x.buffer);var r=1;break t}catch(t){}r=void 0}return!!r},c:function(t,e,r,i){try{for(var n=0,o=0;o<r;o++){for(var a=E[e+8*o>>2],s=E[e+(8*o+4)>>2],u=0;u<s;u++){var l=V[a+u],h=tt[t];0===l||10===l?((1===t?b:v)(T(h,0)),h.length=0):h.push(l)}n+=s}return E[i>>2]=n,0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.Y||Q(t),t.Z}},memory:x,table:C},ot=function(){function t(t){o.asm=t.exports,j--,o.monitorRunDependencies&&o.monitorRunDependencies(j),0==j&&(null!==H&&(clearInterval(H),H=null),W&&(t=W,W=null,t()))}function e(e){t(e.instance)}function r(t){return(y||!l&&!h||"function"!=typeof fetch?new Promise((function(t){t($())})):fetch(Z,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Z+"'";return t.arrayBuffer()})).catch((function(){return $()}))).then((function(){return{then:function(t){t({instance:new A})}}})).then(t,(function(t){v("failed to asynchronously prepare wasm: "+t),Q(t)}))}var i={env:nt,wasi_unstable:nt};if(j++,o.monitorRunDependencies&&o.monitorRunDependencies(j),o.instantiateWasm)try{return o.instantiateWasm(i,t)}catch(t){return v("Module.instantiateWasm callback failed with error: "+t),!1}return function(){if(y||"function"!=typeof w.instantiateStreaming||J(Z)||"function"!=typeof fetch)return r(e);fetch(Z,{credentials:"same-origin"}).then((function(t){return w.instantiateStreaming(t,i).then(e,(function(t){v("wasm streaming compile failed: "+t),v("falling back to ArrayBuffer instantiation"),r(e)}))}))}(),{}}();o.asm=ot;var at=o.___wasm_call_ctors=function(){return o.asm.d.apply(null,arguments)};o._csmGetVersion=function(){return o.asm.e.apply(null,arguments)},o._csmGetLatestMocVersion=function(){return o.asm.f.apply(null,arguments)},o._csmGetMocVersion=function(){return o.asm.g.apply(null,arguments)},o._csmSetLogFunction=function(){return o.asm.h.apply(null,arguments)},o._csmReviveMocInPlace=function(){return o.asm.i.apply(null,arguments)},o._csmReadCanvasInfo=function(){return o.asm.j.apply(null,arguments)},o._csmGetSizeofModel=function(){return o.asm.k.apply(null,arguments)},o._csmInitializeModelInPlace=function(){return o.asm.l.apply(null,arguments)},o._csmUpdateModel=function(){return o.asm.m.apply(null,arguments)},o._csmGetParameterCount=function(){return o.asm.n.apply(null,arguments)},o._csmGetParameterIds=function(){return o.asm.o.apply(null,arguments)},o._csmGetParameterMinimumValues=function(){return o.asm.p.apply(null,arguments)},o._csmGetParameterMaximumValues=function(){return o.asm.q.apply(null,arguments)},o._csmGetParameterDefaultValues=function(){return o.asm.r.apply(null,arguments)},o._csmGetParameterValues=function(){return o.asm.s.apply(null,arguments)},o._csmGetPartCount=function(){return o.asm.t.apply(null,arguments)},o._csmGetPartIds=function(){return o.asm.u.apply(null,arguments)},o._csmGetPartOpacities=function(){return o.asm.v.apply(null,arguments)},o._csmGetPartParentPartIndices=function(){return o.asm.w.apply(null,arguments)},o._csmGetDrawableCount=function(){return o.asm.x.apply(null,arguments)},o._csmGetDrawableIds=function(){return o.asm.y.apply(null,arguments)},o._csmGetDrawableConstantFlags=function(){return o.asm.z.apply(null,arguments)},o._csmGetDrawableDynamicFlags=function(){return o.asm.A.apply(null,arguments)},o._csmGetDrawableTextureIndices=function(){return o.asm.B.apply(null,arguments)},o._csmGetDrawableDrawOrders=function(){return o.asm.C.apply(null,arguments)},o._csmGetDrawableRenderOrders=function(){return o.asm.D.apply(null,arguments)},o._csmGetDrawableOpacities=function(){return o.asm.E.apply(null,arguments)},o._csmGetDrawableMaskCounts=function(){return o.asm.F.apply(null,arguments)},o._csmGetDrawableMasks=function(){return o.asm.G.apply(null,arguments)},o._csmGetDrawableVertexCounts=function(){return o.asm.H.apply(null,arguments)},o._csmGetDrawableVertexPositions=function(){return o.asm.I.apply(null,arguments)},o._csmGetDrawableVertexUvs=function(){return o.asm.J.apply(null,arguments)},o._csmGetDrawableIndexCounts=function(){return o.asm.K.apply(null,arguments)},o._csmGetDrawableIndices=function(){return o.asm.L.apply(null,arguments)},o._csmResetDrawableDynamicFlags=function(){return o.asm.M.apply(null,arguments)},o._csmMallocMoc=function(){return o.asm.N.apply(null,arguments)},o._csmMallocModelAndInitialize=function(){return o.asm.O.apply(null,arguments)},o._csmMalloc=function(){return o.asm.P.apply(null,arguments)},o._csmFree=function(){return o.asm.Q.apply(null,arguments)};var st,ut=o.stackSave=function(){return o.asm.R.apply(null,arguments)},lt=o.stackAlloc=function(){return o.asm.S.apply(null,arguments)},ht=o.stackRestore=function(){return o.asm.T.apply(null,arguments)},ct=o.__growWasmMemory=function(){return o.asm.U.apply(null,arguments)};function ft(){function t(){if(!st&&(st=!0,!B)){if(U(O),U(z),o.onRuntimeInitialized&&o.onRuntimeInitialized(),o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;){var t=o.postRun.shift();G.unshift(t)}U(G)}}if(!(0<j)){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)Y();U(N),0<j||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t())}}if(o.dynCall_vi=function(){return o.asm.V.apply(null,arguments)},o.asm=ot,o.ccall=function(t,e,r,i){var n={string:function(t){var e=0;if(null!=t&&0!==t){var r=1+(t.length<<2),i=e=lt(r),n=V;if(0<r){r=i+r-1;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),a<=127){if(r<=i)break;n[i++]=a}else{if(a<=2047){if(r<=i+1)break;n[i++]=192|a>>6}else{if(a<=65535){if(r<=i+2)break;n[i++]=224|a>>12}else{if(r<=i+3)break;n[i++]=240|a>>18,n[i++]=128|a>>12&63}n[i++]=128|a>>6&63}n[i++]=128|63&a}}n[i]=0}}return e},array:function(t){var e=lt(t.length);return I.set(t,e),e}},a=function(t){var e=o["_"+t];return M(e,"Cannot call unknown function "+t+", make sure it is exported"),e}(t),s=[];if(t=0,i)for(var u=0;u<i.length;u++){var l=n[r[u]];l?(0===t&&(t=ut()),s[u]=l(i[u])):s[u]=i[u]}return r=function(t){return"string"===e?R(t):"boolean"===e?!!t:t}(r=a.apply(null,s)),0!==t&&ht(t),r},o.UTF8ToString=R,o.addFunction=function(t,e){var r=C.length;try{C.grow(1)}catch(t){if(!t instanceof RangeError)throw t;throw"Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."}try{C.set(r,t)}catch(i){if(!i instanceof TypeError)throw i;M(void 0!==e,"Missing signature argument to addFunction"),C.set(r,t)}return r},o.then=function(t){if(st)t(o);else{var e=o.onRuntimeInitialized;o.onRuntimeInitialized=function(){e&&e(),t(o)}}return o},W=function t(){st||ft(),st||(W=t)},o.run=ft,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return ft(),t});t.exports=_;var y=_()}(o=o||{}),t.exports=o}).call(this,r(1),"/",r(2).Buffer)},function(t,e){var r,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var u,l=[],h=!1,c=-1;function f(){h&&u&&(h=!1,u.length?l=u.concat(l):c=-1,l.length&&p())}function p(){if(!h){var t=s(f);h=!0;for(var e=l.length;e;){for(u=l,l=[];++c<e;)u&&u[c].run();c=-1,e=l.length}u=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function d(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new g(t,e)),1!==l.length||h||s(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=r(4),n=r(5),o=r(6);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return l(this,t,e,r)}function l(t,e,r,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,r,i):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(e,r),n=(t=s(t,i)).write(e,r);n!==i&&(t=t.slice(0,n));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(h(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function g(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return O(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(i)return O(t).length;e=(""+e).toLowerCase(),i=!0}}function d(t,e,r){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return M(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return C(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function m(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function _(t,e,r,i,n){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=u.from(e,i)),u.isBuffer(e))return 0===e.length?-1:y(t,e,r,i,n);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,i,n){var o,a=1,s=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){var h=-1;for(o=r;o<s;o++)if(l(t,o)===l(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*a}else-1!==h&&(o-=o-h),h=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){c=!1;break}if(c)return o}return-1}function b(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function v(t,e,r,i){return G(O(e,t.length-r),t,r,i)}function A(t,e,r,i){return G(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,i)}function S(t,e,r,i){return A(t,e,r,i)}function w(t,e,r,i){return G(z(e),t,r,i)}function x(t,e,r,i){return G(function(t,e){for(var r,i,n,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),i=r>>8,n=r%256,o.push(n),o.push(i);return o}(e,t.length-r),t,r,i)}function C(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var o,a,s,u,l=t[n],h=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c<=r)switch(c){case 1:l<128&&(h=l);break;case 2:128==(192&(o=t[n+1]))&&(u=(31&l)<<6|63&o)>127&&(h=u);break;case 3:o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[n+1],a=t[n+2],s=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(h=u)}null===h?(h=65533,c=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),n+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return r}(i)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return l(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,i){return h(e),e<=0?s(t,e):void 0!==r?"string"==typeof i?s(t,e).fill(r,i):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,n=0,o=Math.min(r,i);n<o;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=u.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,n),n+=a.length}return i},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?B(this,0,t):d.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,i,n){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(i>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(i,n),h=t.slice(e,r),c=0;c<s;++c)if(l[c]!==h[c]){o=l[c],a=h[c];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return _(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return _(this,t,e,r,!1)},u.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":return A(this,t,e,r);case"latin1":case"binary":return S(this,t,e,r);case"base64":return w(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}function P(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function I(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=e;o<r;++o)n+=N(t[o]);return n}function V(t,e,r){for(var i=t.slice(e,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function E(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,r,i,n,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function T(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-r,2);n<o;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function R(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-r,4);n<o;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function F(t,e,r,i,n,o){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(t,e,r,i,o){return o||F(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function L(t,e,r,i,o){return o||F(t,0,r,8),n.write(t,e,r,i,52,8),r+8}u.prototype.slice=function(t,e){var r,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var n=e-t;r=new u(n,void 0);for(var o=0;o<n;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},u.prototype.readUInt8=function(t,e){return e||E(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||E(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||E(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var i=e,n=1,o=this[t+--i];i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||E(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||E(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||E(t,4,this.length),n.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||E(t,4,this.length),n.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||E(t,8,this.length),n.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||E(t,8,this.length),n.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||k(this,t,e,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[e]=255&t;++o<r&&(n*=256);)this[e+o]=t/n&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||k(this,t,e,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):T(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):T(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);k(this,t,e,r,n-1,-n)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);k(this,t,e,r,n-1,-n)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):T(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):T(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return D(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return D(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return L(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return L(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var n,o=i-r;if(this===t&&r<e&&e<i)for(n=o-1;n>=0;--n)t[n+e]=this[n+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=u.isBuffer(t)?t:O(new u(t,i).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function O(t,e){var r;e=e||1/0;for(var i=t.length,n=null,o=[],a=0;a<i;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}}).call(this,r(3))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],i=e[1];return 3*(r+i)/4-i},e.toByteArray=function(t){var e,r,i=l(t),a=i[0],s=i[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),h=0,c=s>0?a-4:a;for(r=0;r<c;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;2===s&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[h++]=255&e);1===s&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,o=[],a=0,s=r-n;a<s;a+=16383)o.push(h(t,a,a+16383>s?s:a+16383));1===n?(e=t[r-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)i[s]=a[s],n[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,r){for(var n,o,a=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(i[(o=n)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,i,n){var o,a,s=8*n-i-1,u=(1<<s)-1,l=u>>1,h=-7,c=r?n-1:0,f=r?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-h)-1,p>>=-h,h+=s;h>0;o=256*o+t[e+c],c+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=i;h>0;a=256*a+t[e+c],c+=f,h-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,r,i,n,o){var a,s,u,l=8*o-n-1,h=(1<<l)-1,c=h>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,g=i?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(a++,u/=2),a+c>=h?(s=0,a=h):a+c>=1?(s=(e*u-1)*Math.pow(2,n),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,n),a=0));n>=8;t[r+p]=255&s,p+=g,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;t[r+p]=255&a,p+=g,a/=256,l-=8);t[r+p-g]|=128*d}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){},function(t,e,r){(function(t){function r(t,e){for(var r=0,i=t.length-1;i>=0;i--){var n=t[i];"."===n?t.splice(i,1):".."===n?(t.splice(i,1),r++):r&&(t.splice(i,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var r=[],i=0;i<t.length;i++)e(t[i],i,t)&&r.push(t[i]);return r}e.resolve=function(){for(var e="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,n="/"===a.charAt(0))}return(n?"/":"")+(e=r(i(e.split("/"),(function(t){return!!t})),!n).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===n(t,-1);return(t=r(i(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,r){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var n=i(t.split("/")),o=i(r.split("/")),a=Math.min(n.length,o.length),s=a,u=0;u<a;u++)if(n[u]!==o[u]){s=u;break}var l=[];for(u=s;u<n.length;u++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,i=-1,n=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!n){i=o;break}}else n=!1;return-1===i?r?"/":".":r&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){var r=function(t){"string"!=typeof t&&(t+="");var e,r=0,i=-1,n=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!n){r=e+1;break}}else-1===i&&(n=!1,i=e+1);return-1===i?"":t.slice(r,i)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,r=0,i=-1,n=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===i&&(n=!1,i=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!n){r=a+1;break}}return-1===e||-1===i||0===o||1===o&&e===i-1&&e===r+1?"":t.slice(e,i)};var n="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(1))},function(t,e,r){"use strict";r.r(e);var i,n=function(){function t(){}return t.init=function(t,e,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),this.canLog=t,this.canWarn=e,this.canError=r},t.log=function(e,r){void 0===r&&(r=!1),t.canLog&&console.log("[live2d-helper] "+e)},t.warn=function(e,r){void 0===r&&(r=!1),t.canWarn&&console.warn("[live2d-helper] "+e)},t.error=function(e,r){void 0===r&&(r=!1),t.canError&&console.error("[live2d-helper] "+e)},t.canLog=!0,t.canWarn=!0,t.canError=!0,t}(),o=function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))},a=function(t,e){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=function(){function t(){}return t.xhr=function(t,e,r){return new Promise((function(i,n){var o=new XMLHttpRequest;o.open(e,t),o.responseType=r,o.onreadystatechange=function(){4===o.readyState&&(200===o.status?i(o.response):n({status:o.status,message:o.responseText}))},o.send()}))},t.getJson=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.xhr(t,"get","json")];case 1:return[2,e.sent()]}}))}))},t.getBlob=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.xhr(t,"get","blob")];case 1:return[2,e.sent()]}}))}))},t.getArraybuffer=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.xhr(t,"get","arraybuffer")];case 1:return[2,e.sent()]}}))}))},t.arrayBuffer2String=function(t){return String.fromCharCode.apply(null,new Uint8Array(t))},t.getRandomItem=function(t){return t[Math.floor(Math.random()*t.length)]},t}(),u=function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))},l=function(t,e){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(){function t(){this.model="",this.imageUrl="",this.soundUrl="",this.interval=15e3,this.width=300,this.height=300,this.layout={width:null,height:null,x:null,y:null,center_x:null,center_y:null,top:null,bottom:null,left:null,right:null},this.idle="idle",this.view={VIEW_MAX_SCALE:2,VIEW_MIN_SCALE:.8,VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:-2,VIEW_LOGICAL_MAX_TOP:2},this.initModelCallback=function(t){},this.scaling=!1,this.globalFollowPointer=!1,this.binding={},this.autoLoadAudio={canLoad:!0,callback:function(){}},this.allowSound=!0,this.Priority={None:0,Idle:1,Normal:2,Force:3}}return t.prototype.init=function(t,e){return u(this,void 0,void 0,(function(){var r,i,o,a,u,h,c,f,p,g,d,m,_,y,b,v,A,S,w,x,C;return l(this,(function(l){switch(l.label){case 0:if(("string"==typeof t||t instanceof HTMLCanvasElement)&&"string"==typeof e)if(this.baseUrl=/\/$/.test(e)?e:e+"/","string"==typeof t){if(this.canvas=document.querySelector(t),!this.canvas)throw n.error("Not Found HTMLCanvasElement"),new Error("Not Found HTMLCanvasElement")}else this.canvas=t;else{if(i=t.canvas,o=t.baseUrl,a=t.model,u=t.imageUrl,h=t.soundUrl,c=t.interval,f=t.width,p=t.height,g=t.layout,d=t.debug,m=t.idle,_=t.view,y=t.initModelCallback,b=t.scaling,v=t.globalFollowPointer,A=t.binding,S=t.autoLoadAudio,w=t.allowSound,this.canvas=i instanceof HTMLElement?i:document.querySelector(i),this.baseUrl=/\/$/.test(o)?o:o+"/",this.imageUrl=u||this.baseUrl,this.imageUrl=/\/$/.test(this.imageUrl)?this.imageUrl:this.imageUrl+"/",this.soundUrl=h||this.baseUrl,this.soundUrl=/\/$/.test(this.soundUrl)?this.soundUrl:this.soundUrl+"/",this.interval=c||15e3,this.width=isNaN(Number(f))?800:Number(f),this.height=isNaN(Number(p))?800:Number(p),this.canvas.width=this.width,this.canvas.height=this.height,this.layout=g,this.debug=d||this.debug,this.idle=m,_)for(x in this.view)_[x]&&(this.view[x]=_[x]);this.initModelCallback="function"==typeof y?y:function(t){},this.scaling="boolean"==typeof b&&b,this.globalFollowPointer="boolean"==typeof v&&v,"function"==typeof S?this.autoLoadAudio={canLoad:!0,callback:S}:"boolean"==typeof S&&(this.autoLoadAudio={canLoad:S,callback:function(){}}),this.model=a,r=A,this.allowSound="boolean"!=typeof w||w}return void 0!==this.model&&"string"!=typeof this.model?[3,2]:(this.model=this.model?this.model:this.baseUrl+"model.json",C=this,[4,s.getArraybuffer(this.model)]);case 1:return C.modelBuffer=l.sent(),this.model=JSON.parse(s.arrayBuffer2String(this.modelBuffer)),[3,3];case 2:this.model=this.model,l.label=3;case 3:if(this.initBind(r||{}),!this.canvas||!this.baseUrl)throw n.error("Not Found HTMLCanvasElement OR baseUrl"),new Error("Not Found HTMLCanvasElement OR baseUrl");return[2]}}))}))},t.prototype.initBind=function(t){var e=this;for(var r in t){var i=[],o=function(t){t.hitArea,t.motionPath,t.motionName,t.priority};"string"==typeof t[r]?i.push(t[r]):Array.isArray(t[r])?i.push.apply(i,t[r]):"function"==typeof t[r]?o=t[r]:"object"==typeof t[r]&&(Array.isArray(t[r].motion)?i.push.apply(i,t[r].motion):i.push(t[r].motion),"function"==typeof t[r].callback&&(o=t[r].callback)),this.binding[name]={motion:i,callback:o}}if(this.model.HitAreas)for(var a=JSON.parse(JSON.stringify(this.model.HitAreas)),s=function(t){var r=[];t.Motion&&("string"==typeof t.Motion?r.push(t.Motion):Array.isArray(t.Motion)&&r.push.apply(r,t.Motion)),u.binding[t.Id]?r.forEach((function(r){e.binding[t.Id].motion.includes(r)||e.binding[t.Id].motion.push(r)})):u.binding[t.Id]={motion:r,callback:function(t){t.hitArea,t.motionPath,t.motionName,t.priority}}},u=this,l=0,h=a;l<h.length;l++){s(h[l])}else n.warn("Not Found HitAreas In model.json")},t}();!function(t){var e=function(){function t(t){this.s=t}return t.prototype.append=function(t,e){return this.s+=void 0!==e?t.substr(0,e):t,this},t.prototype.expansion=function(t,e){for(var r=0;r<t;r++)this.append(e);return this},t.prototype.getBytes=function(){return encodeURIComponent(this.s).replace(/%../g,"x").length},t.prototype.getLength=function(){return this.s.length},t.prototype.isLess=function(t){return this.s<t.s},t.prototype.isGreat=function(t){return this.s>t.s},t.prototype.isEqual=function(t){return this.s==t},t.prototype.isEmpty=function(){return 0==this.s.length},t}();t.csmString=e}(i||(i={}));var c,f,p,g,d,m=function(t,e,r){!function(t,e,r){c.CubismDebug.print(t,"[CSM]"+e,r)}(t,e+"\n",r)},_=function(t){console.assert(t)},y=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},b=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},v=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]},A=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r]};y=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];m(G.LogLevel_Debug,"[D]"+t,e)},b=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];m(G.LogLevel_Info,"[I]"+t,e)},v=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];m(G.LogLevel_Warning,"[W]"+t,e)},A=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];m(G.LogLevel_Error,"[E]"+t,e)},f=c||(c={}),p=function(){function t(){}return t.print=function(t,e,r){if(!(t<D.CubismFramework.getLoggingLevel())){var i=D.CubismFramework.coreLogFunction;i&&i(e.replace(/\{(\d+)\}/g,(function(t,e){return r[e]})))}},t.dumpBytes=function(t,e,r){for(var i=0;i<r;i++)i%16==0&&i>0?this.print(t,"\n"):i%8==0&&i>0&&this.print(t,"  "),this.print(t,"{0} ",[255&e[i]]);this.print(t,"\n")},t}(),f.CubismDebug=p,function(t){var e=function(t,e){this.first=null==t?null:t,this.second=null==e?null:e};t.csmPair=e;var r=function(){function t(t){null!=t?t<1?(this._keyValues=new Array,this._dummyValue=null,this._size=0):(this._keyValues=new Array(t),this._size=t):(this._keyValues=new Array,this._dummyValue=null,this._size=0)}return t.prototype.release=function(){this.clear()},t.prototype.appendKey=function(t){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new e(t),this._size+=1},t.prototype.getValue=function(t){for(var e=-1,r=0;r<this._size;r++)if(this._keyValues[r].first==t){e=r;break}return e>=0?this._keyValues[e].second:(this.appendKey(t),this._keyValues[this._size-1].second)},t.prototype.setValue=function(t,e){for(var r=-1,i=0;i<this._size;i++)if(this._keyValues[i].first==t){r=i;break}r>=0?this._keyValues[r].second=e:(this.appendKey(t),this._keyValues[this._size-1].second=e)},t.prototype.isExist=function(t){for(var e=0;e<this._size;e++)if(this._keyValues[e].first==t)return!0;return!1},t.prototype.clear=function(){this._keyValues=void 0,this._keyValues=null,this._keyValues=new Array,this._size=0},t.prototype.getSize=function(){return this._size},t.prototype.prepareCapacity=function(e,r){e>this._keyValues.length&&(0==this._keyValues.length?(!r&&e<t.DefaultSize&&(e=t.DefaultSize),this._keyValues.length=e):(!r&&e<2*this._keyValues.length&&(e=2*this._keyValues.length),this._keyValues.length=e))},t.prototype.begin=function(){return new i(this,0)},t.prototype.end=function(){return new i(this,this._size)},t.prototype.erase=function(t){var e=t._index;return e<0||this._size<=e?t:(this._keyValues.splice(e,1),--this._size,new i(this,e))},t.prototype.dumpAsInt=function(){for(var t=0;t<this._size;t++)y("{0} ,",this._keyValues[t]),y("\n")},t.DefaultSize=10,t}();t.csmMap=r;var i=function(){function t(t,e){this._map=null!=t?t:new r,this._index=null!=e?e:0}return t.prototype.set=function(t){return this._index=t._index,this._map=t._map,this},t.prototype.preIncrement=function(){return++this._index,this},t.prototype.preDecrement=function(){return--this._index,this},t.prototype.increment=function(){var e=new t(this._map,this._index++);return this._map=e._map,this._index=e._index,this},t.prototype.decrement=function(){var e=new t(this._map,this._index);return this._map=e._map,this._index=e._index,this},t.prototype.ptr=function(){return this._map._keyValues[this._index]},t.prototype.notEqual=function(t){return this._index!=t._index||this._map!=t._map},t}();t.iterator=i}(g||(g={})),function(t){var e=function(){function t(t){void 0===t&&(t=0),t<1?(this._ptr=new Array,this._capacity=0,this._size=0):(this._ptr=new Array(t),this._capacity=t,this._size=0)}return t.prototype.at=function(t){return this._ptr[t]},t.prototype.set=function(t,e){this._ptr[t]=e},t.prototype.get=function(t){void 0===t&&(t=0);for(var e=new Array,r=t;r<this._size;r++)e.push(this._ptr[r]);return e},t.prototype.pushBack=function(e){this._size>=this._capacity&&this.prepareCapacity(0==this._capacity?t.s_defaultSize:2*this._capacity),this._ptr[this._size++]=e},t.prototype.clear=function(){this._ptr.length=0,this._size=0},t.prototype.getSize=function(){return this._size},t.prototype.assign=function(t,e){this._size<t&&this.prepareCapacity(t);for(var r=0;r<t;r++)this._ptr[r]=e;this._size=t},t.prototype.resize=function(t,e){void 0===e&&(e=null),this.updateSize(t,e,!0)},t.prototype.updateSize=function(t,e,r){if(void 0===e&&(e=null),void 0===r&&(r=!0),this._size<t)if(this.prepareCapacity(t),r)for(var i=this._size;i<t;i++)this._ptr[i]="function"==typeof e?JSON.parse(JSON.stringify(new e)):e;else for(i=this._size;i<t;i++)this._ptr[i]=e;else{var n=this._size-t;this._ptr.splice(this._size-n,n)}this._size=t},t.prototype.insert=function(t,e,r){var i=t._index,n=e._index,o=r._index,a=o-n;this.prepareCapacity(this._size+a);var s=this._size-i;if(s>0)for(var u=0;u<s;u++)this._ptr.splice(i+u,0,null);for(u=n;u<o;u++,i++)this._ptr[i]=e._vector._ptr[u];this._size=this._size+a},t.prototype.remove=function(t){return!(t<0||this._size<=t)&&(this._ptr.splice(t,1),--this._size,!0)},t.prototype.erase=function(t){var e=t._index;return e<0||this._size<=e?t:(this._ptr.splice(e,1),--this._size,new r(this,e))},t.prototype.prepareCapacity=function(t){t>this._capacity&&(0==this._capacity?(this._ptr=new Array(t),this._capacity=t):(this._ptr.length=t,this._capacity=t))},t.prototype.begin=function(){return 0==this._size?this.end():new r(this,0)},t.prototype.end=function(){return new r(this,this._size)},t.prototype.getOffset=function(e){var r=new t;return r._ptr=this.get(e),r._size=this.get(e).length,r._capacity=this.get(e).length,r},t.s_defaultSize=10,t}();t.csmVector=e;var r=function(){function t(t,e){this._vector=null!=t?t:null,this._index=null!=e?e:0}return t.prototype.set=function(t){return this._index=t._index,this._vector=t._vector,this},t.prototype.preIncrement=function(){return++this._index,this},t.prototype.preDecrement=function(){return--this._index,this},t.prototype.increment=function(){var e=new t(this._vector,this._index++);return this._vector=e._vector,this._index=e._index,this},t.prototype.decrement=function(){var e=new t(this._vector,this._index--);return this._vector=e._vector,this._index=e._index,this},t.prototype.ptr=function(){return this._vector._ptr[this._index]},t.prototype.substitution=function(t){return this._index=t._index,this._vector=t._vector,this},t.prototype.notEqual=function(t){return this._index!=t._index||this._vector!=t._vector},t}();t.iterator=r}(d||(d={}));var S,w,x=(S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),C=d.csmVector,B=g.csmMap,M=i.csmString;!function(t){var e=function(){function t(){}return t.prototype.getRawString=function(t,e){return this.getString(t,e)},t.prototype.toInt=function(t){return void 0===t&&(t=0),t},t.prototype.toFloat=function(t){return void 0===t&&(t=0),t},t.prototype.toBoolean=function(t){return void 0===t&&(t=!1),t},t.prototype.getSize=function(){return 0},t.prototype.getArray=function(t){return void 0===t&&(t=null),t},t.prototype.getVector=function(t){return t},t.prototype.getMap=function(t){return t},t.prototype.getValueByIndex=function(e){return t.errorValue.setErrorNotForClientCall("Error: type mismatch")},t.prototype.getValueByString=function(e){return t.nullValue.setErrorNotForClientCall("Error: type mismatch")},t.prototype.getKeys=function(){return t.s_dummyKeys},t.prototype.isError=function(){return!1},t.prototype.isNull=function(){return!1},t.prototype.isBool=function(){return!1},t.prototype.isFloat=function(){return!1},t.prototype.isString=function(){return!1},t.prototype.isArray=function(){return!1},t.prototype.isMap=function(){return!1},t.prototype.equals=function(t){return!1},t.prototype.isStatic=function(){return!1},t.prototype.setErrorNotForClientCall=function(t){return a.errorValue},t.staticInitializeNotForClientCall=function(){n.trueValue=new n(!0),n.falseValue=new n(!1),a.errorValue=new a("ERROR",!0),this.nullValue=new s,t.s_dummyKeys=new C},t.staticReleaseNotForClientCall=function(){n.trueValue=null,n.falseValue=null,a.errorValue=null,t.nullValue=null,t.s_dummyKeys=null,n.trueValue=null,n.falseValue=null,a.errorValue=null,t.nullValue=null,t.s_dummyKeys=null},t}();t.Value=e;var r=function(){function t(t,e){this._error=null,this._lineCount=0,this._root=null,null!=t&&this.parseBytes(t,e)}return t.create=function(e,r){var i=new t;return i.parseBytes(e,r)?i:(t.delete(i),null)},t.delete=function(t){null},t.prototype.getRoot=function(){return this._root},t.prototype.arrayBufferToString=function(t){for(var e=new Uint8Array(t),r="",i=0,n=e.length;i<n;++i)r+="%"+this.pad(e[i].toString(16));return r=decodeURIComponent(r)},t.prototype.pad=function(t){return t.length<2?"0"+t:t},t.prototype.parseBytes=function(t,e){var r=new Array(1),i=this.arrayBufferToString(t);if(this._root=this.parseValue(i,e,0,r),this._error){var n;return n="Json parse error : @line "+(this._lineCount+1)+"\n",this._root=new o(n),b("{0}",this._root.getRawString()),!1}return null!=this._root||(this._root=new a(new M(this._error),!1),!1)},t.prototype.getParseError=function(){return this._error},t.prototype.checkEndOfFile=function(){return this._root.getArray()[1].equals("EOF")},t.prototype.parseValue=function(t,e,r,a){if(this._error)return null;for(var u,l=null,h=r;h<e;h++){switch(t[h]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":var c=new Array(1);return u=z(t.slice(h),c),a[0]=t.indexOf(c[0]),new i(u);case'"':return new o(this.parseString(t,e,h+1,a));case"[":return l=this.parseArray(t,e,h+1,a);case"{":return l=this.parseObject(t,e,h+1,a);case"n":return h+3<e?(l=new s,a[0]=h+4):this._error="parse null",l;case"t":return h+3<e?(l=n.trueValue,a[0]=h+4):this._error="parse true",l;case"f":return h+4<e?(l=n.falseValue,a[0]=h+5):this._error="illegal ',' position",l;case",":return this._error="illegal ',' position",null;case"]":return a[0]=h,null;case"\n":this._lineCount++}}return this._error="illegal end of value",null},t.prototype.parseString=function(t,e,r,i){if(this._error)return null;for(var n=r,o=new M(""),a=r;n<e;n++)switch(t[n]){case'"':return i[0]=n+1,o.append(t.slice(a),n-a),o.s;case"//":if(++n-1>a&&o.append(t.slice(a),n-a),a=n+1,n<e)switch(t[n]){case"\\":o.expansion(1,"\\");break;case'"':o.expansion(1,'"');break;case"/":o.expansion(1,"/");break;case"b":o.expansion(1,"\b");break;case"f":o.expansion(1,"\f");break;case"n":o.expansion(1,"\n");break;case"r":o.expansion(1,"\r");break;case"t":o.expansion(1,"\t");break;case"u":this._error="parse string/unicord escape not supported"}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null},t.prototype.parseObject=function(t,e,r,i){if(this._error)return null;for(var n=new l,o="",a=r,s=Array(1),u=!1;a<e;a++){t:for(;a<e;a++)switch(t[a]){case'"':if(o=this.parseString(t,e,a+1,s),this._error)return null;a=s[0],u=!0;break t;case"}":return i[0]=a+1,n;case":":this._error="illegal ':' position";break;case"\n":this._lineCount++}if(!u)return this._error="key not found",null;u=!1;t:for(;a<e;a++)switch(t[a]){case":":u=!0,a++;break t;case"}":this._error="illegal '}' position";break;case"\n":this._lineCount++}if(!u)return this._error="':' not found",null;var h=this.parseValue(t,e,a,s);if(this._error)return null;a=s[0],n.put(o,h);t:for(;a<e;a++)switch(t[a]){case",":break t;case"}":return i[0]=a+1,n;case"\n":this._lineCount++}}return this._error="illegal end of perseObject",null},t.prototype.parseArray=function(t,e,r,i){if(this._error)return null;for(var n=new u,o=r,a=new Array(1);o<e;o++){var s=this.parseValue(t,e,o,a);if(this._error)return null;o=a[0],s&&n.add(s);t:for(;o<e;o++)switch(t[o]){case",":break t;case"]":return i[0]=o+1,n;case"\n":++this._lineCount}}return n=void 0,this._error="illegal end of parseObject",null},t}();t.CubismJson=r;var i=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return x(e,t),e.prototype.isFloat=function(){return!0},e.prototype.getString=function(t,e){return this._value=parseFloat("\0"),this._stringBuffer="\0",this._stringBuffer},e.prototype.toInt=function(t){return void 0===t&&(t=0),parseInt(this._value.toString())},e.prototype.toFloat=function(t){return void 0===t&&(t=0),this._value},e.prototype.equals=function(t){return"number"==typeof t&&(!Math.round(t)&&t==this._value)},e}(e);t.JsonFloat=i;var n=function(t){function e(e){var r=t.call(this)||this;return r._boolValue=e,r}return x(e,t),e.prototype.isBool=function(){return!0},e.prototype.toBoolean=function(t){return void 0===t&&(t=!1),this._boolValue},e.prototype.getString=function(t,e){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer},e.prototype.equals=function(t){return"boolean"==typeof t&&t==this._boolValue},e.prototype.isStatic=function(){return!0},e}(e);t.JsonBoolean=n;var o=function(t){function e(e){var r=t.call(this)||this;return"string"==typeof e&&(r._stringBuffer=e),e instanceof M&&(r._stringBuffer=e.s),r}return x(e,t),e.prototype.isString=function(){return!0},e.prototype.getString=function(t,e){return this._stringBuffer},e.prototype.equals=function(t){return"string"==typeof t?this._stringBuffer==t:t instanceof M&&this._stringBuffer==t.s},e}(e);t.JsonString=o;var a=function(t){function e(e,r){var i=this;return(i=t.call(this,e)||this)._isStatic=r,i}return x(e,t),e.prototype.isStatic=function(){return this._isStatic},e.prototype.setErrorNotForClientCall=function(t){return this._stringBuffer=t,this},e.prototype.isError=function(){return!0},e}(o);t.JsonError=a;var s=function(t){function e(){var e=t.call(this)||this;return e._stringBuffer="NullValue",e}return x(e,t),e.prototype.isNull=function(){return!0},e.prototype.getString=function(t,e){return this._stringBuffer},e.prototype.isStatic=function(){return!0},e}(e);t.JsonNullvalue=s;var u=function(t){function r(){var e=t.call(this)||this;return e._array=new C,e}return x(r,t),r.prototype.release=function(){for(var t=this._array.begin();t.notEqual(this._array.end());t.preIncrement()){var e=t.ptr();e&&!e.isStatic()&&(e=void 0,e=null)}},r.prototype.isArray=function(){return!0},r.prototype.getValueByIndex=function(t){if(t<0||this._array.getSize()<=t)return e.errorValue.setErrorNotForClientCall("Error: index out of bounds");var r=this._array.at(t);return null==r?e.nullValue:r},r.prototype.getValueByString=function(t){return e.errorValue.setErrorNotForClientCall("Error: type mismatch")},r.prototype.getString=function(t,e){for(var r=e+"[\n",i=this._array.begin();i.notEqual(this._array.end());i.increment()){var n=i.ptr();this._stringBuffer+=e+""+n.getString(e+" ")+"\n"}return this._stringBuffer=r+e+"]\n",this._stringBuffer},r.prototype.add=function(t){this._array.pushBack(t)},r.prototype.getVector=function(t){return void 0===t&&(t=null),this._array},r.prototype.getSize=function(){return this._array.getSize()},r}(e);t.JsonArray=u;var l=function(t){function r(){var e=t.call(this)||this;return e._map=new B,e}return x(r,t),r.prototype.release=function(){for(var t=this._map.begin();t.notEqual(this._map.end());){var e=t.ptr().second;e&&!e.isStatic()&&(e=void 0,e=null),t.preIncrement()}},r.prototype.isMap=function(){return!0},r.prototype.getValueByString=function(t){if(t instanceof M){var r=this._map.getValue(t.s);return null==r?e.nullValue:r}for(var i=this._map.begin();i.notEqual(this._map.end());i.preIncrement())if(i.ptr().first==t)return null==i.ptr().second?e.nullValue:i.ptr().second;return e.nullValue},r.prototype.getValueByIndex=function(t){return e.errorValue.setErrorNotForClientCall("Error: type mismatch")},r.prototype.getString=function(t,e){this._stringBuffer=e+"{\n";for(var r=this._map.begin();r.notEqual(this._map.end());){var i=r.ptr().first,n=r.ptr().second;this._stringBuffer+=e+" "+i+" : "+n.getString(e+"   ")+" \n",r.preIncrement()}return this._stringBuffer+=e+"}\n",this._stringBuffer},r.prototype.getMap=function(t){return this._map},r.prototype.put=function(t,e){this._map.setValue(t,e)},r.prototype.getKeys=function(){if(!this._keys){this._keys=new C;for(var t=this._map.begin();t.notEqual(this._map.end());){var e=t.ptr().first;this._keys.pushBack(e),t.preIncrement()}}return this._keys},r.prototype.getSize=function(){return this._keys.getSize()},r}(e);t.JsonMap=l}(w||(w={}));var P,I=i.csmString;!function(t){var e=function(){function t(t){this._id="string"!=typeof t?t:new I(t)}return t.prototype.getString=function(){return this._id},t.prototype.isEqual=function(e){return"string"==typeof e?this._id.isEqual(e):e instanceof I?this._id.isEqual(e.s):e instanceof t&&this._id.isEqual(e._id.s)},t.prototype.isNotEqual=function(e){return"string"==typeof e?!this._id.isEqual(e):e instanceof I?!this._id.isEqual(e.s):e instanceof t&&!this._id.isEqual(e._id.s)},t}();t.CubismId=e}(P||(P={}));var V,E,k=P.CubismId,T=d.csmVector;!function(t){var e=function(){function t(){this._ids=new T}return t.prototype.release=function(){for(var t=0;t<this._ids.getSize();++t)this._ids.set(t,void 0);this._ids=null},t.prototype.registerIds=function(t){for(var e=0;e<t.length;e++)this.registerId(t[e])},t.prototype.registerId=function(t){var e=null;return"string"!=typeof t?this.registerId(t.s):null!=(e=this.findId(t))?e:(e=new k(t),this._ids.pushBack(e),e)},t.prototype.getId=function(t){return this.registerId(t)},t.prototype.isExist=function(t){return"string"==typeof t?null!=this.findId(t):this.isExist(t.s)},t.prototype.findId=function(t){for(var e=0;e<this._ids.getSize();++e)if(this._ids.at(e).getString().isEqual(t))return this._ids.at(e);return null},t}();t.CubismIdManager=e}(V||(V={})),function(t){var e=function(){function t(){this._tr=new Float32Array(16),this.loadIdentity()}return t.multiply=function(t,e,r){for(var i=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=0;n<4;++n)for(var o=0;o<4;++o)for(var a=0;a<4;++a)i[o+4*n]+=t[a+4*n]*e[o+4*a];for(n=0;n<16;++n)r[n]=i[n]},t.prototype.loadIdentity=function(){var t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)},t.prototype.setMatrix=function(t){for(var e=0;e<16;++e)this._tr[e]=t[e]},t.prototype.getArray=function(){return this._tr},t.prototype.getScaleX=function(){return this._tr[0]},t.prototype.getScaleY=function(){return this._tr[5]},t.prototype.getTranslateX=function(){return this._tr[12]},t.prototype.getTranslateY=function(){return this._tr[13]},t.prototype.transformX=function(t){return this._tr[0]*t+this._tr[12]},t.prototype.transformY=function(t){return this._tr[5]*t+this._tr[13]},t.prototype.invertTransformX=function(t){return(t-this._tr[12])/this._tr[0]},t.prototype.invertTransformY=function(t){return(t-this._tr[13])/this._tr[5]},t.prototype.translateRelative=function(e,r){var i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,r,0,1]);t.multiply(i,this._tr,this._tr)},t.prototype.translate=function(t,e){this._tr[12]=t,this._tr[13]=e},t.prototype.translateX=function(t){this._tr[12]=t},t.prototype.translateY=function(t){this._tr[13]=t},t.prototype.scaleRelative=function(e,r){var i=new Float32Array([e,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);t.multiply(i,this._tr,this._tr)},t.prototype.scale=function(t,e){this._tr[0]=t,this._tr[5]=e},t.prototype.multiplyByMatrix=function(e){t.multiply(e.getArray(),this._tr,this._tr)},t.prototype.clone=function(){for(var e=new t,r=0;r<this._tr.length;r++)e._tr[r]=this._tr[r];return e},t}();t.CubismMatrix44=e}(E||(E={}));var R,F=E.CubismMatrix44;!function(t){var e=function(){function t(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._model=null,this._modelColor=new r,this._mvpMatrix4x4=new F,this._mvpMatrix4x4.loadIdentity()}return t.create=function(){return null},t.delete=function(t){null},t.prototype.initialize=function(t){this._model=t},t.prototype.drawModel=function(){null!=this.getModel()&&this.doDrawModel()},t.prototype.setMvpMatrix=function(t){this._mvpMatrix4x4.setMatrix(t.getArray())},t.prototype.getMvpMatrix=function(){return this._mvpMatrix4x4},t.prototype.setModelColor=function(t,e,r,i){t<0?t=0:t>1&&(t=1),e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),i<0?i=0:i>1&&(i=1),this._modelColor.R=t,this._modelColor.G=e,this._modelColor.B=r,this._modelColor.A=i},t.prototype.getModelColor=function(){return JSON.parse(JSON.stringify(this._modelColor))},t.prototype.setIsPremultipliedAlpha=function(t){this._isPremultipliedAlpha=t},t.prototype.isPremultipliedAlpha=function(){return this._isPremultipliedAlpha},t.prototype.setIsCulling=function(t){this._isCulling=t},t.prototype.isCulling=function(){return this._isCulling},t.prototype.setAnisotropy=function(t){this._anisortopy=t},t.prototype.getAnisotropy=function(){return this._anisortopy},t.prototype.getModel=function(){return this._model},t}();t.CubismRenderer=e,function(t){t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative"}(t.CubismBlendMode||(t.CubismBlendMode={}));var r=function(){this.R=1,this.G=1,this.B=1,this.A=1};t.CubismTextureColor=r}(R||(R={}));var D,L=r(0),U=w.Value,N=V.CubismIdManager,O=R.CubismRenderer;function z(t,e){for(var r=0,i=1;;i++){var n=t.slice(i-1,i);if("e"!=n&&"-"!=n&&"E"!=n){var o=t.substring(0,i),a=Number(o);if(isNaN(a))break;r=i}}var s=parseFloat(t);return isNaN(s)&&(s=NaN),e[0]=t.slice(r),s}!function(t){var e=!1,r=!1,i=null,n=null;!function(t){t.vertexOffset=0,t.vertexStep=2}(t.Constant||(t.Constant={})),t.csmDelete=function(t){t&&(t=void 0)};var o=function(){function t(){}return t.startUp=function(t){if(void 0===t&&(t=null),e)return b("CubismFramework.startUp() is already done."),e;if(null!=(i=t)&&L.Logging.csmSetLogFunction(i.logFunction),e=!0){var r=L.Version.csmGetVersion(),n=(16711680&r)>>16,o=65535&r,a=r;b("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+((4278190080&r)>>24)).slice(-2),("00"+n).slice(-2),("0000"+o).slice(-4),a)}return b("CubismFramework.startUp() is complete."),e},t.cleanUp=function(){e=!1,r=!1,i=null,n=null},t.initialize=function(){_(e),e?r?v("CubismFramework.initialize() skipped, already initialized."):(U.staticInitializeNotForClientCall(),n=new N,r=!0,b("CubismFramework.initialize() is complete.")):v("CubismFramework is not started.")},t.dispose=function(){_(e),e?r?(U.staticReleaseNotForClientCall(),n.release(),n=null,O.staticRelease(),r=!1,b("CubismFramework.dispose() is complete.")):v("CubismFramework.dispose() skipped, not initialized."):v("CubismFramework is not started.")},t.isStarted=function(){return e},t.isInitialized=function(){return r},t.coreLogFunction=function(t){L.Logging.csmGetLogFunction()&&L.Logging.csmGetLogFunction()(t)},t.getLoggingLevel=function(){return null!=i?i.loggingLevel:G.LogLevel_Off},t.getIdManager=function(){return n},t}();t.CubismFramework=o}(D||(D={}));var G,Y=function(){};!function(t){t[t.LogLevel_Verbose=0]="LogLevel_Verbose",t[t.LogLevel_Debug=1]="LogLevel_Debug",t[t.LogLevel_Info=2]="LogLevel_Info",t[t.LogLevel_Warning=3]="LogLevel_Warning",t[t.LogLevel_Error=4]="LogLevel_Error",t[t.LogLevel_Off=5]="LogLevel_Off"}(G||(G={}));var X,j=function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))},H=function(t,e){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},W=d.csmVector,Q=function(){function t(t){this._textures=new W,this.webgl=t}return t.prototype.release=function(){for(var t=this._textures.begin();t.notEqual(this._textures.end());t.preIncrement())this.webgl.gl.deleteTexture(t.ptr().id);this._textures=null},t.prototype.createTextureFromPngFile=function(t,e){return j(this,void 0,void 0,(function(){var r=this;return H(this,(function(i){return[2,new Promise((function(i,n){return j(r,void 0,void 0,(function(){var r,n,o,a,u,l=this;return H(this,(function(h){switch(h.label){case 0:for(r=this._textures.begin();r.notEqual(this._textures.end());r.preIncrement())if(r.ptr().fileName==t&&r.ptr().usePremultply==e)return i(r.ptr()),[2];return(n=new Image).onload=function(){var r=l.webgl.gl.createTexture();l.webgl.gl.bindTexture(l.webgl.gl.TEXTURE_2D,r),l.webgl.gl.texParameteri(l.webgl.gl.TEXTURE_2D,l.webgl.gl.TEXTURE_MIN_FILTER,l.webgl.gl.LINEAR_MIPMAP_LINEAR),l.webgl.gl.texParameteri(l.webgl.gl.TEXTURE_2D,l.webgl.gl.TEXTURE_MAG_FILTER,l.webgl.gl.LINEAR),e&&l.webgl.gl.pixelStorei(l.webgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),l.webgl.gl.texImage2D(l.webgl.gl.TEXTURE_2D,0,l.webgl.gl.RGBA,l.webgl.gl.RGBA,l.webgl.gl.UNSIGNED_BYTE,n),l.webgl.gl.generateMipmap(l.webgl.gl.TEXTURE_2D),l.webgl.gl.bindTexture(l.webgl.gl.TEXTURE_2D,null);var o=new q;o.fileName=t,o.width=n.width,o.height=n.height,o.id=r,o.img=n,o.usePremultply=e,l._textures.pushBack(o),i(o)},o=n,u=(a=URL).createObjectURL,[4,s.getBlob(t)];case 1:return o.src=u.apply(a,[h.sent()]),[2]}}))}))}))]}))}))},t.prototype.releaseTextures=function(){for(var t=0;t<this._textures.getSize();t++)this._textures.set(t,null);this._textures.clear()},t.prototype.releaseTextureByTexture=function(t){for(var e=0;e<this._textures.getSize();e++)if(this._textures.at(e).id==t){this._textures.set(e,null),this._textures.remove(e);break}},t.prototype.releaseTextureByFilePath=function(t){for(var e=0;e<this._textures.getSize();e++)if(this._textures.at(e).fileName==t){this._textures.set(e,null),this._textures.remove(e);break}},t}(),q=function(){this.id=null,this.width=0,this.height=0},J=function(){function t(t){this.gl=t.getContext("webgl"),this.frameBuffer=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}return t.prototype.createShader=function(){var t=this.gl.createShader(this.gl.VERTEX_SHADER);if(null==t)return null;this.gl.shaderSource(t,"precision mediump float;attribute vec3 position;attribute vec2 uv;varying vec2 vuv;void main(void){   gl_Position = vec4(position, 1.0);   vuv = uv;}"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);if(null==e)return null;this.gl.shaderSource(e,"precision mediump float;varying vec2 vuv;uniform sampler2D texture;void main(void){   gl_FragColor = texture2D(texture, vuv);}"),this.gl.compileShader(e);var r=this.gl.createProgram();return this.gl.attachShader(r,t),this.gl.attachShader(r,e),this.gl.deleteShader(t),this.gl.deleteShader(e),this.gl.linkProgram(r),this.gl.useProgram(r),r},t}(),Z=function(){function t(t){this._webgl=t}return t.prototype.render=function(){this._webgl.gl.useProgram(this._programId),this._webgl.gl.flush()},t}();!function(t){var e=function(){function t(t,e){this.x=t,this.y=e,this.x=null==t?0:t,this.y=null==e?0:e}return t.prototype.add=function(e){var r=new t(0,0);return r.x=this.x+e.x,r.y=this.y+e.y,r},t.prototype.substract=function(e){var r=new t(0,0);return r.x=this.x-e.x,r.y=this.y-e.y,r},t.prototype.multiply=function(e){var r=new t(0,0);return r.x=this.x*e.x,r.y=this.y*e.y,r},t.prototype.multiplyByScaler=function(e){return this.multiply(new t(e,e))},t.prototype.division=function(e){var r=new t(0,0);return r.x=this.x/e.x,r.y=this.y/e.y,r},t.prototype.divisionByScalar=function(e){return this.division(new t(e,e))},t.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.getDistanceWith=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.normalize=function(){var t=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/t,this.y=this.y/t},t.prototype.isEqual=function(t){return this.x==t.x&&this.y==t.y},t.prototype.isNotEqual=function(t){return!this.isEqual(t)},t}();t.CubismVector2=e}(X||(X={}));var K,$=X.CubismVector2;!function(t){var e=function(){function t(){}return t.range=function(t,e,r){return t<e?t=e:t>r&&(t=r),t},t.sin=function(t){return Math.sin(t)},t.cos=function(t){return Math.cos(t)},t.abs=function(t){return Math.abs(t)},t.sqrt=function(t){return Math.sqrt(t)},t.getEasingSine=function(t){return t<0?0:t>1?1:.5-.5*this.cos(t*Math.PI)},t.max=function(t,e){return t>e?t:e},t.min=function(t,e){return t>e?e:t},t.degreesToRadian=function(t){return t/180*Math.PI},t.radianToDegrees=function(t){return 180*t/Math.PI},t.directionToRadian=function(t,e){for(var r=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);r<-Math.PI;)r+=2*Math.PI;for(;r>Math.PI;)r-=2*Math.PI;return r},t.directionToDegrees=function(t,e){var r=this.directionToRadian(t,e),i=this.radianToDegrees(r);return e.x-t.x>0&&(i=-i),i},t.radianToDirection=function(t){var e=new $;return e.x=this.sin(t),e.y=this.cos(t),e},t}();t.CubismMath=e}(K||(K={}));var tt,et=d.csmVector,rt=K.CubismMath;!function(t){var e=function(){function t(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new et}return t.delete=function(t){t.release(),t=void 0,t=null},t.prototype.release=function(){this._weight=0},t.prototype.updateParameters=function(t,e,r){if(e.isAvailable()&&!e.isFinished()){if(!e.isStarted()){e.setIsStarted(!0),e.setStartTime(r-this._offsetSeconds),e.setFadeInStartTime(r);var i=this.getDuration();e.getEndTime()<0&&e.setEndTime(i<=0?-1:e.getStartTime()+i)}var n=this._weight;n=n*(0==this._fadeInSeconds?1:rt.getEasingSine((r-e.getFadeInStartTime())/this._fadeInSeconds))*(0==this._fadeOutSeconds||e.getEndTime()<0?1:rt.getEasingSine((e.getEndTime()-r)/this._fadeOutSeconds)),e.setState(r,n),_(0<=n&&n<=1),this.doUpdateParameters(t,r,n,e),e.getEndTime()>0&&e.getEndTime()<r&&e.setIsFinished(!0)}},t.prototype.setFadeInTime=function(t){this._fadeInSeconds=t},t.prototype.setFadeOutTime=function(t){this._fadeOutSeconds=t},t.prototype.getFadeOutTime=function(){return this._fadeOutSeconds},t.prototype.getFadeInTime=function(){return this._fadeInSeconds},t.prototype.setWeight=function(t){this._weight=t},t.prototype.getWeight=function(){return this._weight},t.prototype.getDuration=function(){return-1},t.prototype.getLoopDuration=function(){return-1},t.prototype.setOffsetTime=function(t){this._offsetSeconds=t},t.prototype.getFiredEvent=function(t,e){return this._firedEventValues},t}();t.ACubismMotion=e}(tt||(tt={}));var it,nt=tt.ACubismMotion;!function(t){var e=function(){function t(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this}return t.prototype.release=function(){this._autoDelete&&this._motion&&nt.delete(this._motion)},t.prototype.startFadeout=function(t,e){var r=e+t;(this._endTimeSeconds<0||r<this._endTimeSeconds)&&(this._endTimeSeconds=r)},t.prototype.isFinished=function(){return this._finished},t.prototype.isStarted=function(){return this._started},t.prototype.getStartTime=function(){return this._startTimeSeconds},t.prototype.getFadeInStartTime=function(){return this._fadeInStartTimeSeconds},t.prototype.getEndTime=function(){return this._endTimeSeconds},t.prototype.setStartTime=function(t){this._startTimeSeconds=t},t.prototype.setFadeInStartTime=function(t){this._fadeInStartTimeSeconds=t},t.prototype.setEndTime=function(t){this._endTimeSeconds=t},t.prototype.setIsFinished=function(t){this._finished=t},t.prototype.setIsStarted=function(t){this._started=t},t.prototype.isAvailable=function(){return this._available},t.prototype.setIsAvailable=function(t){this._available=t},t.prototype.setState=function(t,e){this._stateTimeSeconds=t,this._stateWeight=e},t.prototype.getStateTime=function(){return this._stateTimeSeconds},t.prototype.getStateWeight=function(){return this._stateWeight},t.prototype.getLastCheckEventTime=function(){return this._lastEventCheckSeconds},t.prototype.setLastCheckEventTime=function(t){this._lastEventCheckSeconds=t},t}();t.CubismMotionQueueEntry=e}(it||(it={}));var ot,at=d.csmVector,st=it.CubismMotionQueueEntry;!function(t){var e=function(){function e(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new at}return e.prototype.release=function(){for(var t=0;t<this._motions.getSize();++t)this._motions.at(t)&&(this._motions.at(t).release(),this._motions.set(t,void 0),this._motions.set(t,null));this._motions=null},e.prototype.startMotion=function(e,r,i){if(null==e)return t.InvalidMotionQueueEntryHandleValue;for(var n=null,o=0;o<this._motions.getSize();++o)null!=(n=this._motions.at(o))&&n.startFadeout(n._motion.getFadeOutTime(),i);return(n=new st)._autoDelete=r,n._motion=e,this._motions.pushBack(n),n._motionQueueEntryHandle},e.prototype.isFinished=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();if(null!=e)if(null!=e._motion){if(!e.isFinished())return!1;t.preIncrement()}else e.release(),e=void 0,e=null,t=this._motions.erase(t);else t=this._motions.erase(t)}return!0},e.prototype.isFinishedByHandle=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.increment()){var r=e.ptr();if(null!=r&&(r._motionQueueEntryHandle==t&&!r.isFinished()))return!1}return!0},e.prototype.stopAllMotions=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();null!=e?(e.release(),e=void 0,e=null,t=this._motions.erase(t)):t=this._motions.erase(t)}},e.prototype.getCubismMotionQueueEntry=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.preIncrement()){var r=e.ptr();if(null!=r&&r._motionQueueEntryHandle==t)return r}return null},e.prototype.setEventCallback=function(t,e){void 0===e&&(e=null),this._eventCallBack=t,this._eventCustomData=e},e.prototype.doUpdateMotion=function(t,e){for(var r=!1,i=this._motions.begin();i.notEqual(this._motions.end());){var n=i.ptr();if(null!=n){var o=n._motion;if(null!=o){o.updateParameters(t,n,e),r=!0;for(var a=o.getFiredEvent(n.getLastCheckEventTime()-n.getStartTime(),e-n.getStartTime()),s=0;s<a.getSize();++s)this._eventCallBack(this,a.at(s),this._eventCustomData);n.setLastCheckEventTime(e),n.isFinished()?(n.release(),n=void 0,n=null,i=this._motions.erase(i)):i.preIncrement()}else n.release(),n=void 0,n=null,i=this._motions.erase(i)}else i=this._motions.erase(i)}return r},e}();t.CubismMotionQueueManager=e,t.InvalidMotionQueueEntryHandleValue=-1}(ot||(ot={}));var ut,lt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ht=ot.CubismMotionQueueManager;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._currentPriority=0,e._reservePriority=0,e}return lt(e,t),e.prototype.getCurrentPriority=function(){return this._currentPriority},e.prototype.getReservePriority=function(){return this._reservePriority},e.prototype.setReservePriority=function(t){this._reservePriority=t},e.prototype.startMotionPriority=function(e,r,i){return i==this._reservePriority&&(this._reservePriority=0),this._currentPriority=i,t.prototype.startMotion.call(this,e,r,this._userTimeSeconds)},e.prototype.updateMotion=function(e,r){this._userTimeSeconds+=r;var i=t.prototype.doUpdateMotion.call(this,e,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),i},e.prototype.reserveMotion=function(t){return!(t<=this._reservePriority||t<=this._currentPriority)&&(this._reservePriority=t,!0)},e}(ht);t.CubismMotionManager=e}(ut||(ut={}));var ct,ft=K.CubismMath;!function(t){var e=function(){function t(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}return t.prototype.update=function(t){this._userTimeSeconds+=t;if(0!=this._lastTimeSeconds){var e=30*(this._userTimeSeconds-this._lastTimeSeconds);this._lastTimeSeconds=this._userTimeSeconds;var r=e*(4/30)/4.5,i=this._faceTargetX-this._faceX,n=this._faceTargetY-this._faceY;if(!(ft.abs(i)<=.01&&ft.abs(n)<=.01)){var o=ft.sqrt(i*i+n*n),a=4/30*n/o,s=4/30*i/o-this._faceVX,u=a-this._faceVY,l=ft.sqrt(s*s+u*u);(l<-r||l>r)&&(s*=r/l,u*=r/l),this._faceVX+=s,this._faceVY+=u;var h=.5*(ft.sqrt(r*r+16*r*o-8*r*o)-r),c=ft.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);c>h&&(this._faceVX*=h/c,this._faceVY*=h/c),this._faceX+=this._faceVX,this._faceY+=this._faceVY}}else this._lastTimeSeconds=this._userTimeSeconds},t.prototype.getX=function(){return this._faceX},t.prototype.getY=function(){return this._faceY},t.prototype.set=function(t,e){this._faceTargetX=t,this._faceTargetY=e},t}();t.CubismTargetPoint=e}(ct||(ct={}));var pt,gt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),dt=E.CubismMatrix44;!function(t){var e=function(t){function e(e,r){var i=t.call(this)||this;return i._width=void 0!==e?e:0,i._height=void 0!==r?r:0,i.setHeight(1),i}return gt(e,t),e.prototype.setWidth=function(t){var e=t/this._width,r=e;this.scale(e,r)},e.prototype.setHeight=function(t){var e=t/this._height,r=e;this.scale(e,r)},e.prototype.setPosition=function(t,e){this.translate(t,e)},e.prototype.setCenterPosition=function(t,e){this.centerX(t),this.centerY(e)},e.prototype.top=function(t){this.setY(t)},e.prototype.bottom=function(t){var e=this._height*this.getScaleY();this.translateY(t-e)},e.prototype.left=function(t){this.setX(t)},e.prototype.right=function(t){var e=this._width*this.getScaleX();this.translateX(t-e)},e.prototype.centerX=function(t){var e=this._width*this.getScaleX();this.translateX(t-e/2)},e.prototype.setX=function(t){this.translateX(t)},e.prototype.centerY=function(t){var e=this._height*this.getScaleY();this.translateY(t-e/2)},e.prototype.setY=function(t){this.translateY(t)},e.prototype.setupFromLayout=function(t){for(var e=t.begin();e.notEqual(t.end());e.preIncrement()){var r=e.ptr().first,i=e.ptr().second;"width"==r?this.setWidth(i):"height"==r&&this.setHeight(i)}for(e=t.begin();e.notEqual(t.end());e.preIncrement()){r=e.ptr().first,i=e.ptr().second;"x"==r?this.setX(i):"y"==r?this.setY(i):"center_x"==r?this.centerX(i):"center_y"==r?this.centerY(i):"top"==r?this.top(i):"bottom"==r?this.bottom(i):"left"==r?this.left(i):"right"==r&&this.right(i)}},e}(dt);t.CubismModelMatrix=e}(pt||(pt={}));var mt,_t=r(0),yt=D.CubismFramework,bt=R.CubismBlendMode,vt=d.csmVector,At=g.csmMap;!function(t){var e=function(){function t(t){this._model=t,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new vt,this._parameterIds=new vt,this._drawableIds=new vt,this._partIds=new vt,this._notExistPartId=new At,this._notExistParameterId=new At,this._notExistParameterValues=new At,this._notExistPartOpacities=new At}return t.prototype.update=function(){this._model.update(),this._model.drawables.resetDynamicFlags()},t.prototype.getCanvasWidth=function(){return null==this._model?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit},t.prototype.getCanvasHeight=function(){return null==this._model?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit},t.prototype.saveParameters=function(){for(var t=this._model.parameters.count,e=this._savedParameters.getSize(),r=0;r<t;++r)r<e?this._savedParameters.set(r,this._parameterValues[r]):this._savedParameters.pushBack(this._parameterValues[r])},t.prototype.getModel=function(){return this._model},t.prototype.getPartIndex=function(t){var e,r=this._model.parts.count;for(e=0;e<r;++e)if(t==this._partIds.at(e))return e;return this._notExistPartId.isExist(t)?this._notExistPartId.getValue(t):(e=r+this._notExistPartId.getSize(),this._notExistPartId.setValue(t,e),this._notExistPartOpacities.appendKey(e),e)},t.prototype.getPartCount=function(){return this._model.parts.count},t.prototype.setPartOpacityByIndex=function(t,e){this._notExistPartOpacities.isExist(t)?this._notExistPartOpacities.setValue(t,e):(_(0<=t&&t<this.getPartCount()),this._partOpacities[t]=e)},t.prototype.setPartOpacityById=function(t,e){var r=this.getPartIndex(t);r<0||this.setPartOpacityByIndex(r,e)},t.prototype.getPartOpacityByIndex=function(t){return this._notExistPartOpacities.isExist(t)?this._notExistPartOpacities.getValue(t):(_(0<=t&&t<this.getPartCount()),this._partOpacities[t])},t.prototype.getPartOpacityById=function(t){var e=this.getPartIndex(t);return e<0?0:this.getPartOpacityByIndex(e)},t.prototype.getParameterIndex=function(t){var e,r=this._model.parameters.count;for(e=0;e<r;++e)if(t==this._parameterIds.at(e))return e;return this._notExistParameterId.isExist(t)?this._notExistParameterId.getValue(t):(e=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(t,e),this._notExistParameterValues.appendKey(e),e)},t.prototype.getParameterCount=function(){return this._model.parameters.count},t.prototype.getParameterMaximumValue=function(t){return this._model.parameters.maximumValues[t]},t.prototype.getParameterMinimumValue=function(t){return this._model.parameters.minimumValues[t]},t.prototype.getParameterDefaultValue=function(t){return this._model.parameters.defaultValues[t]},t.prototype.getParameterValueByIndex=function(t){return this._notExistParameterValues.isExist(t)?this._notExistParameterValues.getValue(t):(_(0<=t&&t<this.getParameterCount()),this._parameterValues[t])},t.prototype.getParameterValueById=function(t){var e=this.getParameterIndex(t);return this.getParameterValueByIndex(e)},t.prototype.setParameterValueByIndex=function(t,e,r){void 0===r&&(r=1),this._notExistParameterValues.isExist(t)?this._notExistParameterValues.setValue(t,1==r?e:this._notExistParameterValues.getValue(t)*(1-r)+e*r):(_(0<=t&&t<this.getParameterCount()),this._model.parameters.maximumValues[t]<e&&(e=this._model.parameters.maximumValues[t]),this._model.parameters.minimumValues[t]>e&&(e=this._model.parameters.minimumValues[t]),this._parameterValues[t]=1==r?e:this._parameterValues[t]=this._parameterValues[t]*(1-r)+e*r)},t.prototype.setParameterValueById=function(t,e,r){void 0===r&&(r=1);var i=this.getParameterIndex(t);this.setParameterValueByIndex(i,e,r)},t.prototype.addParameterValueByIndex=function(t,e,r){void 0===r&&(r=1),this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)+e*r)},t.prototype.addParameterValueById=function(t,e,r){void 0===r&&(r=1);var i=this.getParameterIndex(t);this.addParameterValueByIndex(i,e,r)},t.prototype.multiplyParameterValueById=function(t,e,r){void 0===r&&(r=1);var i=this.getParameterIndex(t);this.multiplyParameterValueByIndex(i,e,r)},t.prototype.multiplyParameterValueByIndex=function(t,e,r){void 0===r&&(r=1),this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)*(1+(e-1)*r))},t.prototype.getDrawableIndex=function(t){for(var e=this._model.drawables.count,r=0;r<e;++r)if(this._drawableIds.at(r)==t)return r;return-1},t.prototype.getDrawableCount=function(){return this._model.drawables.count},t.prototype.getDrawableId=function(t){var e=this._model.drawables.ids;return yt.getIdManager().getId(e[t])},t.prototype.getDrawableRenderOrders=function(){return this._model.drawables.renderOrders},t.prototype.getDrawableTextureIndices=function(t){return this._model.drawables.textureIndices[t]},t.prototype.getDrawableDynamicFlagVertexPositionsDidChange=function(t){var e=this._model.drawables.dynamicFlags;return _t.Utils.hasVertexPositionsDidChangeBit(e[t])},t.prototype.getDrawableVertexIndexCount=function(t){return this._model.drawables.indexCounts[t]},t.prototype.getDrawableVertexCount=function(t){return this._model.drawables.vertexCounts[t]},t.prototype.getDrawableVertices=function(t){return this.getDrawableVertexPositions(t)},t.prototype.getDrawableVertexIndices=function(t){return this._model.drawables.indices[t]},t.prototype.getDrawableVertexPositions=function(t){return this._model.drawables.vertexPositions[t]},t.prototype.getDrawableVertexUvs=function(t){return this._model.drawables.vertexUvs[t]},t.prototype.getDrawableOpacity=function(t){return this._model.drawables.opacities[t]},t.prototype.getDrawableCulling=function(t){var e=this._model.drawables.constantFlags;return!_t.Utils.hasIsDoubleSidedBit(e[t])},t.prototype.getDrawableBlendMode=function(t){var e=this._model.drawables.constantFlags;return _t.Utils.hasBlendAdditiveBit(e[t])?bt.CubismBlendMode_Additive:_t.Utils.hasBlendMultiplicativeBit(e[t])?bt.CubismBlendMode_Multiplicative:bt.CubismBlendMode_Normal},t.prototype.getDrawableInvertedMaskBit=function(t){var e=this._model.drawables.constantFlags;return _t.Utils.hasIsInvertedMaskBit(e[t])},t.prototype.getDrawableMasks=function(){return this._model.drawables.masks},t.prototype.getDrawableMaskCounts=function(){return this._model.drawables.maskCounts},t.prototype.isUsingMasking=function(){for(var t=0;t<this._model.drawables.count;++t)if(!(this._model.drawables.maskCounts[t]<=0))return!0;return!1},t.prototype.getDrawableDynamicFlagIsVisible=function(t){var e=this._model.drawables.dynamicFlags;return _t.Utils.hasIsVisibleBit(e[t])},t.prototype.getDrawableDynamicFlagVisibilityDidChange=function(t){var e=this._model.drawables.dynamicFlags;return _t.Utils.hasVisibilityDidChangeBit(e[t])},t.prototype.getDrawableDynamicFlagOpacityDidChange=function(t){var e=this._model.drawables.dynamicFlags;return _t.Utils.hasOpacityDidChangeBit(e[t])},t.prototype.getDrawableDynamicFlagRenderOrderDidChange=function(t){var e=this._model.drawables.dynamicFlags;return _t.Utils.hasRenderOrderDidChangeBit(e[t])},t.prototype.loadParameters=function(){var t=this._model.parameters.count,e=this._savedParameters.getSize();t>e&&(t=e);for(var r=0;r<t;++r)this._parameterValues[r]=this._savedParameters.at(r)},t.prototype.initialize=function(){_(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;var t=this._model.parameters.ids,e=this._model.parameters.count;this._parameterIds.prepareCapacity(e);for(var r=0;r<e;++r)this._parameterIds.pushBack(yt.getIdManager().getId(t[r]));var i=this._model.parts.ids,n=this._model.parts.count;this._partIds.prepareCapacity(n);for(r=0;r<n;++r)this._partIds.pushBack(yt.getIdManager().getId(i[r]));var o=this._model.drawables.ids,a=this._model.drawables.count;this._drawableIds.prepareCapacity(a);for(r=0;r<a;++r)this._drawableIds.pushBack(yt.getIdManager().getId(o[r]))},t.prototype.release=function(){this._model.release(),this._model=null},t}();t.CubismModel=e}(mt||(mt={}));var St,wt=r(0),xt=mt.CubismModel;!function(t){var e=function(){function t(t){this._moc=t,this._modelCount=0}return t.create=function(e){var r=null,i=wt.Moc.fromArrayBuffer(e);return i&&(r=new t(i)),r},t.delete=function(t){t._moc._release(),t._moc=null,t=null},t.prototype.createModel=function(){var t=null,e=wt.Model.fromMoc(this._moc);return e&&((t=new xt(e)).initialize(),++this._modelCount),t},t.prototype.deleteModel=function(t){null!=t&&(t.release(),t=null,--this._modelCount)},t.prototype.release=function(){_(0==this._modelCount),this._moc._release(),this._moc=null},t}();t.CubismMoc=e}(St||(St={}));var Ct,Bt=i.csmString,Mt=D.CubismFramework,Pt=w.CubismJson;!function(t){var e="Meta",r=function(){function t(t,e){this._json=Pt.create(t,e)}return t.prototype.release=function(){Pt.delete(this._json)},t.prototype.getMotionDuration=function(){return this._json.getRoot().getValueByString(e).getValueByString("Duration").toFloat()},t.prototype.isMotionLoop=function(){return this._json.getRoot().getValueByString(e).getValueByString("Loop").toBoolean()},t.prototype.getMotionCurveCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("CurveCount").toInt()},t.prototype.getMotionFps=function(){return this._json.getRoot().getValueByString(e).getValueByString("Fps").toFloat()},t.prototype.getMotionTotalSegmentCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalSegmentCount").toInt()},t.prototype.getMotionTotalPointCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalPointCount").toInt()},t.prototype.isExistMotionFadeInTime=function(){return!this._json.getRoot().getValueByString(e).getValueByString("FadeInTime").isNull()},t.prototype.isExistMotionFadeOutTime=function(){return!this._json.getRoot().getValueByString(e).getValueByString("FadeOutTime").isNull()},t.prototype.getMotionFadeInTime=function(){return this._json.getRoot().getValueByString(e).getValueByString("FadeInTime").toFloat()},t.prototype.getMotionFadeOutTime=function(){return this._json.getRoot().getValueByString(e).getValueByString("FadeOutTime").toFloat()},t.prototype.getMotionCurveTarget=function(t){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("Target").getRawString()},t.prototype.getMotionCurveId=function(t){return Mt.getIdManager().getId(this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("Id").getRawString())},t.prototype.isExistMotionCurveFadeInTime=function(t){return!this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("FadeInTime").isNull()},t.prototype.isExistMotionCurveFadeOutTime=function(t){return!this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("FadeOutTime").isNull()},t.prototype.getMotionCurveFadeInTime=function(t){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("FadeInTime").toFloat()},t.prototype.getMotionCurveFadeOutTime=function(t){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("FadeOutTime").toFloat()},t.prototype.getMotionCurveSegmentCount=function(t){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("Segments").getVector().getSize()},t.prototype.getMotionCurveSegment=function(t,e){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("Segments").getValueByIndex(e).toFloat()},t.prototype.getEventCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("UserDataCount").toInt()},t.prototype.getTotalEventValueSize=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalUserDataSize").toInt()},t.prototype.getEventTime=function(t){return this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Time").toInt()},t.prototype.getEventValue=function(t){return new Bt(this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Value").getRawString())},t}();t.CubismMotionJson=r}(Ct||(Ct={}));var It,Vt=d.csmVector;!function(t){var e;!function(t){t[t.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",t[t.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",t[t.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity"}(e=t.CubismMotionCurveTarget||(t.CubismMotionCurveTarget={})),function(t){t[t.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",t[t.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",t[t.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",t[t.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped"}(t.CubismMotionSegmentType||(t.CubismMotionSegmentType={}));var r=function(){this.time=0,this.value=0};t.CubismMotionPoint=r;var i=function(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0};t.CubismMotionSegment=i;var n=function(){this.type=e.CubismMotionCurveTarget_Model,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0};t.CubismMotionCurve=n;var o=function(){this.fireTime=0};t.CubismMotionEvent=o;var a=function(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new Vt,this.segments=new Vt,this.points=new Vt,this.events=new Vt};t.CubismMotionData=a}(It||(It={}));var Et,kt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Tt=i.csmString,Rt=It.CubismMotionData,Ft=It.CubismMotionSegment,Dt=It.CubismMotionPoint,Lt=It.CubismMotionEvent,Ut=It.CubismMotionSegmentType,Nt=It.CubismMotionCurve,Ot=It.CubismMotionCurveTarget,zt=K.CubismMath,Gt=D.CubismFramework,Yt=tt.ACubismMotion,Xt=Ct.CubismMotionJson;!function(t){function e(t,e,r){var i=new Dt;return i.time=t.time+(e.time-t.time)*r,i.value=t.value+(e.value-t.value)*r,i}function r(t,e){var r=(e-t[0].time)/(t[1].time-t[0].time);return r<0&&(r=0),t[0].value+(t[1].value-t[0].value)*r}function i(t,r){var i=(r-t[0].time)/(t[3].time-t[0].time);i<0&&(i=0);var n=e(t[0],t[1],i),o=e(t[1],t[2],i),a=e(t[2],t[3],i),s=e(n,o,i),u=e(o,a,i);return e(s,u,i).value}function n(t,e){return t[0].value}function o(t,e){return t[1].value}function a(t,e,r){for(var i=t.curves.at(e),n=-1,o=i.baseSegmentIndex+i.segmentCount,a=0,s=i.baseSegmentIndex;s<o;++s)if(a=t.segments.at(s).basePointIndex+(t.segments.at(s).segmentType==Ut.CubismMotionSegmentType_Bezier?3:1),t.points.at(a).time>r){n=s;break}if(-1==n)return t.points.at(a).value;var u=t.segments.at(n);return u.evaluate(t.points.get(u.basePointIndex),r)}var s=function(t){function e(){var e=t.call(this)||this;return e._sourceFrameRate=30,e._loopDurationSeconds=-1,e._isLoop=!1,e._isLoopFadeIn=!0,e._lastWeight=0,e._motionData=null,e._modelCurveIdEyeBlink=null,e._modelCurveIdLipSync=null,e._eyeBlinkParameterIds=null,e._lipSyncParameterIds=null,e}return kt(e,t),e.create=function(t,r){var i=new e;return i.parse(t,r),i._sourceFrameRate=i._motionData.fps,i._loopDurationSeconds=i._motionData.duration,i},e.prototype.doUpdateParameters=function(t,e,r,i){null==this._modelCurveIdEyeBlink&&(this._modelCurveIdEyeBlink=Gt.getIdManager().getId("EyeBlink")),null==this._modelCurveIdLipSync&&(this._modelCurveIdLipSync=Gt.getIdManager().getId("LipSync"));var n=e-i.getStartTime();n<0&&(n=0);var o=Number.MAX_VALUE,s=Number.MAX_VALUE,u=0,l=0;this._eyeBlinkParameterIds.getSize()>64&&y("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>64&&y("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());var h,c,f,p=this._fadeInSeconds<=0?1:zt.getEasingSine((e-i.getFadeInStartTime())/this._fadeInSeconds),g=this._fadeOutSeconds<=0||i.getEndTime()<0?1:zt.getEasingSine((i.getEndTime()-e)/this._fadeOutSeconds),d=n;if(this._isLoop)for(;d>this._motionData.duration;)d-=this._motionData.duration;var m=this._motionData.curves;for(c=0;c<this._motionData.curveCount&&m.at(c).type==Ot.CubismMotionCurveTarget_Model;++c)h=a(this._motionData,c,d),m.at(c).id==this._modelCurveIdEyeBlink?s=h:m.at(c).id==this._modelCurveIdLipSync&&(o=h);for(;c<this._motionData.curveCount&&m.at(c).type==Ot.CubismMotionCurveTarget_Parameter;++c)if(-1!=(f=t.getParameterIndex(m.at(c).id))){var _=t.getParameterValueByIndex(f);if(h=a(this._motionData,c,d),s!=Number.MAX_VALUE)for(var b=0;b<this._eyeBlinkParameterIds.getSize()&&b<64;++b)if(this._eyeBlinkParameterIds.at(b)==m.at(c).id){h*=s,l|=1<<b;break}if(o!=Number.MAX_VALUE)for(b=0;b<this._lipSyncParameterIds.getSize()&&b<64;++b)if(this._lipSyncParameterIds.at(b)==m.at(c).id){h+=o,u|=1<<b;break}var v=void 0;if(m.at(c).fadeInTime<0&&m.at(c).fadeOutTime<0)v=_+(h-_)*r;else{var A=void 0,S=void 0;A=m.at(c).fadeInTime<0?p:0==m.at(c).fadeInTime?1:zt.getEasingSine((e-i.getFadeInStartTime())/m.at(c).fadeInTime),S=m.at(c).fadeOutTime<0?g:0==m.at(c).fadeOutTime||i.getEndTime()<0?1:zt.getEasingSine((i.getEndTime()-e)/m.at(c).fadeOutTime),v=_+(h-_)*(this._weight*A*S)}t.setParameterValueByIndex(f,v,1)}if(s!=Number.MAX_VALUE)for(b=0;b<this._eyeBlinkParameterIds.getSize()&&b<64;++b){_=t.getParameterValueById(this._eyeBlinkParameterIds.at(b));if(!(l>>b&1)){v=_+(s-_)*r;t.setParameterValueById(this._eyeBlinkParameterIds.at(b),v)}}if(o!=Number.MAX_VALUE)for(b=0;b<this._lipSyncParameterIds.getSize()&&b<64;++b){_=t.getParameterValueById(this._lipSyncParameterIds.at(b));if(!(u>>b&1)){v=_+(o-_)*r;t.setParameterValueById(this._lipSyncParameterIds.at(b),v)}}for(;c<this._motionData.curveCount&&m.at(c).type==Ot.CubismMotionCurveTarget_PartOpacity;++c)-1!=(f=t.getParameterIndex(m.at(c).id))&&(h=a(this._motionData,c,d),t.setParameterValueByIndex(f,h));n>=this._motionData.duration&&(this._isLoop?(i.setStartTime(e),this._isLoopFadeIn&&i.setFadeInStartTime(e)):i.setIsFinished(!0)),this._lastWeight=r},e.prototype.setIsLoop=function(t){this._isLoop=t},e.prototype.isLoop=function(){return this._isLoop},e.prototype.setIsLoopFadeIn=function(t){this._isLoopFadeIn=t},e.prototype.isLoopFadeIn=function(){return this._isLoopFadeIn},e.prototype.getDuration=function(){return this._isLoop?-1:this._loopDurationSeconds},e.prototype.getLoopDuration=function(){return this._loopDurationSeconds},e.prototype.setParameterFadeInTime=function(t,e){for(var r=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(t==r.at(i).id)return void(r.at(i).fadeInTime=e)},e.prototype.setParameterFadeOutTime=function(t,e){for(var r=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(t==r.at(i).id)return void(r.at(i).fadeOutTime=e)},e.prototype.getParameterFadeInTime=function(t){for(var e=this._motionData.curves,r=0;r<this._motionData.curveCount;++r)if(t==e.at(r).id)return e.at(r).fadeInTime;return-1},e.prototype.getParameterFadeOutTime=function(t){for(var e=this._motionData.curves,r=0;r<this._motionData.curveCount;++r)if(t==e.at(r).id)return e.at(r).fadeOutTime;return-1},e.prototype.setEffectIds=function(t,e){this._eyeBlinkParameterIds=t,this._lipSyncParameterIds=e},e.prototype.release=function(){this._motionData=void 0,this._motionData=null},e.prototype.parse=function(t,e){this._motionData=new Rt;var a=new Xt(t,e);this._motionData.duration=a.getMotionDuration(),this._motionData.loop=a.isMotionLoop(),this._motionData.curveCount=a.getMotionCurveCount(),this._motionData.fps=a.getMotionFps(),this._motionData.eventCount=a.getEventCount(),a.isExistMotionFadeInTime()?this._fadeInSeconds=a.getMotionFadeInTime()<0?1:a.getMotionFadeInTime():this._fadeInSeconds=1,a.isExistMotionFadeOutTime()?this._fadeOutSeconds=a.getMotionFadeOutTime()<0?1:a.getMotionFadeOutTime():this._fadeOutSeconds=1;for(var s=0,u=0,l=0;l<this._motionData.curveCount;++l){var h=new Nt;"Model"==a.getMotionCurveTarget(l)?h.type=Ot.CubismMotionCurveTarget_Model:"Parameter"==a.getMotionCurveTarget(l)?h.type=Ot.CubismMotionCurveTarget_Parameter:"PartOpacity"==a.getMotionCurveTarget(l)&&(h.type=Ot.CubismMotionCurveTarget_PartOpacity),h.id=a.getMotionCurveId(l),h.baseSegmentIndex=u,h.fadeInTime=a.isExistMotionCurveFadeInTime(l)?a.getMotionCurveFadeInTime(l):-1,h.fadeOutTime=a.isExistMotionCurveFadeOutTime(l)?a.getMotionCurveFadeOutTime(l):-1;for(var c=0;c<a.getMotionCurveSegmentCount(l);){var f=new Ft;if(0==c){var p=new Dt;f.basePointIndex=s,p.time=a.getMotionCurveSegment(l,c),p.value=a.getMotionCurveSegment(l,c+1),this._motionData.points.pushBack(p),s+=1,c+=2}else f.basePointIndex=s-1;switch(a.getMotionCurveSegment(l,c)){case Ut.CubismMotionSegmentType_Linear:p=new Dt;f.segmentType=Ut.CubismMotionSegmentType_Linear,f.evaluate=r,p.time=a.getMotionCurveSegment(l,c+1),p.value=a.getMotionCurveSegment(l,c+2),this._motionData.points.pushBack(p),s+=1,c+=3;break;case Ut.CubismMotionSegmentType_Bezier:p=void 0;f.segmentType=Ut.CubismMotionSegmentType_Bezier,f.evaluate=i,(p=new Dt).time=a.getMotionCurveSegment(l,c+1),p.value=a.getMotionCurveSegment(l,c+2),this._motionData.points.pushBack(p),(p=new Dt).time=a.getMotionCurveSegment(l,c+3),p.value=a.getMotionCurveSegment(l,c+4),this._motionData.points.pushBack(p),(p=new Dt).time=a.getMotionCurveSegment(l,c+5),p.value=a.getMotionCurveSegment(l,c+6),this._motionData.points.pushBack(p),s+=3,c+=7;break;case Ut.CubismMotionSegmentType_Stepped:p=new Dt;f.segmentType=Ut.CubismMotionSegmentType_Stepped,f.evaluate=n,p.time=a.getMotionCurveSegment(l,c+1),p.value=a.getMotionCurveSegment(l,c+2),this._motionData.points.pushBack(p),s+=1,c+=3;break;case Ut.CubismMotionSegmentType_InverseStepped:p=new Dt;f.segmentType=Ut.CubismMotionSegmentType_InverseStepped,f.evaluate=o,p.time=a.getMotionCurveSegment(l,c+1),p.value=a.getMotionCurveSegment(l,c+2),this._motionData.points.pushBack(p),s+=1,c+=3;break;default:_(0)}++h.segmentCount,++u,this._motionData.segments.pushBack(f)}this._motionData.curves.pushBack(h)}for(var g=0;g<a.getEventCount();++g){var d=new Lt;d.fireTime=a.getEventTime(g),d.value=a.getEventValue(g),this._motionData.events.pushBack(d)}a.release(),a=void 0,a=null},e.prototype.getFiredEvent=function(t,e){this._firedEventValues.updateSize(0);for(var r=0;r<this._motionData.eventCount;++r)this._motionData.events.at(r).fireTime>t&&this._motionData.events.at(r).fireTime<=e&&this._firedEventValues.pushBack(new Tt(this._motionData.events.at(r).value.s));return this._firedEventValues},e}(Yt);t.CubismMotion=s}(Et||(Et={}));var jt,Ht=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Wt=d.csmVector,Qt=D.CubismFramework,qt=w.CubismJson,Jt=tt.ACubismMotion;!function(t){var e,r=function(t){function r(){var e=t.call(this)||this;return e._parameters=new Wt,e}return Ht(r,t),r.create=function(t,n){var o=new r,a=qt.create(t,n),s=a.getRoot();o.setFadeInTime(s.getValueByString("FadeInTime").toFloat(1)),o.setFadeOutTime(s.getValueByString("FadeOutTime").toFloat(1));var u=s.getValueByString("Parameters").getSize();o._parameters.prepareCapacity(u);for(var l=0;l<u;++l){var h=s.getValueByString("Parameters").getValueByIndex(l),c=Qt.getIdManager().getId(h.getValueByString("Id").getRawString()),f=h.getValueByString("Value").toFloat(),p=void 0;p=h.getValueByString("Blend").isNull()||"Add"==h.getValueByString("Blend").getString()?e.ExpressionBlendType_Add:"Multiply"==h.getValueByString("Blend").getString()?e.ExpressionBlendType_Multiply:"Overwrite"==h.getValueByString("Blend").getString()?e.ExpressionBlendType_Overwrite:e.ExpressionBlendType_Add;var g=new i;g.parameterId=c,g.blendType=p,g.value=f,o._parameters.pushBack(g)}return qt.delete(a),o},r.prototype.doUpdateParameters=function(t,r,i,n){for(var o=0;o<this._parameters.getSize();++o){var a=this._parameters.at(o);switch(a.blendType){case e.ExpressionBlendType_Add:t.addParameterValueById(a.parameterId,a.value,i);break;case e.ExpressionBlendType_Multiply:t.multiplyParameterValueById(a.parameterId,a.value,i);break;case e.ExpressionBlendType_Overwrite:t.setParameterValueById(a.parameterId,a.value,i)}}},r}(Jt);t.CubismExpressionMotion=r,function(t){t[t.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",t[t.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",t[t.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite"}(e=t.ExpressionBlendType||(t.ExpressionBlendType={}));var i=function(){};t.ExpressionParameter=i}(jt||(jt={}));var Zt,Kt=d.csmVector,$t=D.CubismFramework,te=w.CubismJson;!function(t){var e=function(){function t(){this._fadeTimeSeconds=.5,this._lastModel=null,this._partGroups=new Kt,this._partGroupCounts=new Kt}return t.create=function(e,i){var n=new t,o=te.create(e,i),a=o.getRoot();a.getValueByString("FadeInTime").isNull()||(n._fadeTimeSeconds=a.getValueByString("FadeInTime").toFloat(.5),n._fadeTimeSeconds<=0&&(n._fadeTimeSeconds=.5));for(var s=a.getValueByString("Groups"),u=s.getSize(),l=0;l<u;++l){for(var h=s.getValueByIndex(l),c=h.getSize(),f=0,p=0;p<c;++p){var g=h.getValueByIndex(p),d=new r,m=$t.getIdManager().getId(g.getValueByString("Id").getRawString());if(d.partId=m,!g.getValueByString("Link").isNull())for(var _=g.getValueByString("Link"),y=_.getSize(),b=0;b<y;++b){var v=new r,A=$t.getIdManager().getId(_.getValueByIndex(b).getString());v.partId=A,d.link.pushBack(v)}n._partGroups.pushBack(d.clone()),++f}n._partGroupCounts.pushBack(f)}return te.delete(o),n},t.delete=function(t){null!=t&&(t=null)},t.prototype.updateParameters=function(t,e){t!=this._lastModel&&this.reset(t),this._lastModel=t,e<0&&(e=0);for(var r=0,i=0;i<this._partGroupCounts.getSize();i++){var n=this._partGroupCounts.at(i);this.doFade(t,e,r,n),r+=n}this.copyPartOpacities(t)},t.prototype.reset=function(t){for(var e=0,r=0;r<this._partGroupCounts.getSize();++r){for(var i=this._partGroupCounts.at(r),n=e;n<e+i;++n){this._partGroups.at(n).initialize(t);var o=this._partGroups.at(n).partIndex,a=this._partGroups.at(n).parameterIndex;if(!(o<0)){t.setPartOpacityByIndex(o,n==e?1:0),t.setParameterValueByIndex(a,n==e?1:0);for(var s=0;s<this._partGroups.at(n).link.getSize();++s)this._partGroups.at(n).link.at(s).initialize(t)}}e+=i}},t.prototype.copyPartOpacities=function(t){for(var e=0;e<this._partGroups.getSize();++e){var r=this._partGroups.at(e);if(0!=r.link.getSize())for(var i=this._partGroups.at(e).partIndex,n=t.getPartOpacityByIndex(i),o=0;o<r.link.getSize();++o){var a=r.link.at(o).partIndex;a<0||t.setPartOpacityByIndex(a,n)}}},t.prototype.doFade=function(t,e,r,i){for(var n=-1,o=1,a=r;a<r+i;++a){var s=this._partGroups.at(a).partIndex,u=this._partGroups.at(a).parameterIndex;if(t.getParameterValueByIndex(u)>.001){if(n>=0)break;n=a,o=t.getPartOpacityByIndex(s),(o+=e/this._fadeTimeSeconds)>1&&(o=1)}}n<0&&(n=0,o=1);for(a=r;a<r+i;++a){var l=this._partGroups.at(a).partIndex;if(n==a)t.setPartOpacityByIndex(l,o);else{var h=t.getPartOpacityByIndex(l),c=void 0;(1-(c=o<.5?-.5*o/.5+1:.5*(1-o)/.5))*(1-o)>.15&&(c=1-.15/(1-o)),h>c&&(h=c),t.setPartOpacityByIndex(l,h)}}},t}();t.CubismPose=e;var r=function(){function t(t){if(this.parameterIndex=0,this.partIndex=0,this.link=new Kt,null!=t){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement())this.link.pushBack(e.ptr().clone())}}return t.prototype.assignment=function(t){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement())this.link.pushBack(e.ptr().clone());return this},t.prototype.initialize=function(t){this.parameterIndex=t.getParameterIndex(this.partId),this.partIndex=t.getPartIndex(this.partId),t.setParameterValueByIndex(this.parameterIndex,1)},t.prototype.clone=function(){var e=new t;e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=new Kt;for(var r=this.link.begin();r.notEqual(this.link.end());r.increment())e.link.pushBack(r.ptr().clone());return e},t}();t.PartData=r}(Zt||(Zt={}));var ee,re=D.CubismFramework,ie=w.CubismJson;!function(t){var e=function(){function t(t,e){this._json=ie.create(t,e)}return t.prototype.release=function(){ie.delete(this._json)},t.prototype.getUserDataCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("UserDataCount").toInt()},t.prototype.getTotalUserDataSize=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalUserDataSize").toInt()},t.prototype.getUserDataTargetType=function(t){return this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Target").getRawString()},t.prototype.getUserDataId=function(t){return re.getIdManager().getId(this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Id").getRawString())},t.prototype.getUserDataValue=function(t){return this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Value").getRawString()},t}();t.CubismModelUserDataJson=e}(ee||(ee={}));var ne,oe=D.CubismFramework,ae=d.csmVector,se=i.csmString,ue=ee.CubismModelUserDataJson;!function(t){var e=function(){};t.CubismModelUserDataNode=e;var r=function(){function t(){this._userDataNodes=new ae,this._artMeshUserDataNode=new ae}return t.create=function(e,r){var i=new t;return i.parseUserData(e,r),i},t.delete=function(t){null!=t&&(t.release(),t=null)},t.prototype.getArtMeshUserDatas=function(){return this._artMeshUserDataNode},t.prototype.parseUserData=function(t,r){for(var i=new ue(t,r),n=oe.getIdManager().getId("ArtMesh"),o=i.getUserDataCount(),a=0;a<o;a++){var s=new e;s.targetId=i.getUserDataId(a),s.targetType=oe.getIdManager().getId(i.getUserDataTargetType(a)),s.value=new se(i.getUserDataValue(a)),this._userDataNodes.pushBack(s),s.targetType==n&&this._artMeshUserDataNode.pushBack(s)}i.release(),i=void 0},t.prototype.release=function(){for(var t=0;t<this._userDataNodes.getSize();++t)this._userDataNodes.set(t,null);this._userDataNodes=null},t}();t.CubismModelUserData=r}(ne||(ne={}));var le,he=d.csmVector,ce=X.CubismVector2;!function(t){!function(t){t[t.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter"}(t.CubismPhysicsTargetType||(t.CubismPhysicsTargetType={})),function(t){t[t.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",t[t.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",t[t.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle"}(t.CubismPhysicsSource||(t.CubismPhysicsSource={}));var e=function(){this.gravity=new ce(0,0),this.wind=new ce(0,0)};t.PhysicsJsonEffectiveForces=e;var r=function(){};t.CubismPhysicsParameter=r;var i=function(){};t.CubismPhysicsNormalization=i;var n=function(){this.initialPosition=new ce(0,0),this.position=new ce(0,0),this.lastPosition=new ce(0,0),this.lastGravity=new ce(0,0),this.force=new ce(0,0),this.velocity=new ce(0,0)};t.CubismPhysicsParticle=n;var o=function(){this.normalizationPosition=new i,this.normalizationAngle=new i};t.CubismPhysicsSubRig=o;var a=function(){this.source=new r};t.CubismPhysicsInput=a;var s=function(){this.destination=new r,this.translationScale=new ce(0,0)};t.CubismPhysicsOutput=s;var u=function(){this.settings=new he,this.inputs=new he,this.outputs=new he,this.particles=new he,this.gravity=new ce(0,0),this.wind=new ce(0,0)};t.CubismPhysicsRig=u}(le||(le={}));var fe,pe=D.CubismFramework,ge=X.CubismVector2,de=w.CubismJson;!function(t){var e="Meta",r="PhysicsSettings",i=function(){function t(t,e){this._json=de.create(t,e)}return t.prototype.release=function(){de.delete(this._json)},t.prototype.getGravity=function(){var t=new ge(0,0);return t.x=this._json.getRoot().getValueByString(e).getValueByString("EffectiveForces").getValueByString("Gravity").getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString(e).getValueByString("EffectiveForces").getValueByString("Gravity").getValueByString("Y").toFloat(),t},t.prototype.getWind=function(){var t=new ge(0,0);return t.x=this._json.getRoot().getValueByString(e).getValueByString("EffectiveForces").getValueByString("Wind").getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString(e).getValueByString("EffectiveForces").getValueByString("Wind").getValueByString("Y").toFloat(),t},t.prototype.getSubRigCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("PhysicsSettingCount").toInt()},t.prototype.getTotalInputCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalInputCount").toInt()},t.prototype.getTotalOutputCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalOutputCount").toInt()},t.prototype.getVertexCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("VertexCount").toInt()},t.prototype.getNormalizationPositionMinimumValue=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Normalization").getValueByString("Position").getValueByString("Minimum").toFloat()},t.prototype.getNormalizationPositionMaximumValue=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Normalization").getValueByString("Position").getValueByString("Maximum").toFloat()},t.prototype.getNormalizationPositionDefaultValue=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Normalization").getValueByString("Position").getValueByString("Default").toFloat()},t.prototype.getNormalizationAngleMinimumValue=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Normalization").getValueByString("Angle").getValueByString("Minimum").toFloat()},t.prototype.getNormalizationAngleMaximumValue=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Normalization").getValueByString("Angle").getValueByString("Maximum").toFloat()},t.prototype.getNormalizationAngleDefaultValue=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Normalization").getValueByString("Angle").getValueByString("Default").toFloat()},t.prototype.getInputCount=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Input").getVector().getSize()},t.prototype.getInputWeight=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Weight").toFloat()},t.prototype.getInputReflect=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Reflect").toBoolean()},t.prototype.getInputType=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Type").getRawString()},t.prototype.getInputSourceId=function(t,e){return pe.getIdManager().getId(this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Source").getValueByString("Id").getRawString())},t.prototype.getOutputCount=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Output").getVector().getSize()},t.prototype.getOutputVertexIndex=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("VertexIndex").toInt()},t.prototype.getOutputAngleScale=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Scale").toFloat()},t.prototype.getOutputWeight=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Weight").toFloat()},t.prototype.getOutputDestinationId=function(t,e){return pe.getIdManager().getId(this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Destination").getValueByString("Id").getRawString())},t.prototype.getOutputType=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Type").getRawString()},t.prototype.getOutputReflect=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Reflect").toBoolean()},t.prototype.getParticleCount=function(t){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Vertices").getVector().getSize()},t.prototype.getParticleMobility=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Mobility").toFloat()},t.prototype.getParticleDelay=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Delay").toFloat()},t.prototype.getParticleAcceleration=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Acceleration").toFloat()},t.prototype.getParticleRadius=function(t,e){return this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Radius").toInt()},t.prototype.getParticlePosition=function(t,e){var i=new ge(0,0);return i.x=this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Position").getValueByString("X").toFloat(),i.y=this._json.getRoot().getValueByString(r).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Position").getValueByString("Y").toFloat(),i},t}();t.CubismPhysicsJson=i}(fe||(fe={}));var me,_e,ye=fe.CubismPhysicsJson,be=K.CubismMath,ve=le.CubismPhysicsRig,Ae=le.CubismPhysicsSubRig,Se=le.CubismPhysicsInput,we=le.CubismPhysicsOutput,xe=le.CubismPhysicsParticle,Ce=le.CubismPhysicsSource,Be=le.CubismPhysicsTargetType,Me=X.CubismVector2;!function(t){var e=function(){function t(){this._physicsRig=null,this._options=new r,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}return t.create=function(e,r){var i=new t;return i.parse(e,r),i._physicsRig.gravity.y=0,i},t.delete=function(t){null!=t&&(t.release(),t=null)},t.prototype.evaluate=function(t,e){var r,i,n,o,a,s,u,l,h,c,f,d,m=new Me;h=t.getModel().parameters.values,c=t.getModel().parameters.maximumValues,f=t.getModel().parameters.minimumValues,d=t.getModel().parameters.defaultValues;for(var _=0;_<this._physicsRig.subRigCount;++_){r={angle:0},m.x=0,m.y=0,a=this._physicsRig.settings.at(_),s=this._physicsRig.inputs.get(a.baseInputIndex),u=this._physicsRig.outputs.get(a.baseOutputIndex),l=this._physicsRig.particles.get(a.baseParticleIndex);for(var y=0;y<a.inputCount;++y)i=s[y].weight/100,-1==s[y].sourceParameterIndex&&(s[y].sourceParameterIndex=t.getParameterIndex(s[y].source.id)),s[y].getNormalizedParameterValue(m,r,h[s[y].sourceParameterIndex],f[s[y].sourceParameterIndex],c[s[y].sourceParameterIndex],d[s[y].sourceParameterIndex],a.normalizationPosition,a.normalizationAngle,s[0].reflect,i);n=be.degreesToRadian(-r.angle),m.x=m.x*be.cos(n)-m.y*be.sin(n),m.y=m.x*be.sin(n)+m.y*be.cos(n),p(l,a.particleCount,m,r.angle,this._options.wind,.001*a.normalizationPosition.maximum,e,5);for(y=0;y<a.outputCount;++y){var b=u[y].vertexIndex;if(b<1||b>=a.particleCount)break;-1==u[y].destinationParameterIndex&&(u[y].destinationParameterIndex=t.getParameterIndex(u[y].destination.id));var v=new Me;v.x=l[b].position.x-l[b-1].position.x,v.y=l[b].position.y-l[b-1].position.y,o=u[y].getValue(v,l,b,u[y].reflect,this._options.gravity);var A=u[y].destinationParameterIndex,S=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(h.subarray(A))):h.slice(A);g(S,f[A],c[A],o,u[y]);for(var w=A,x=0;w<h.length;w++,x++)h[w]=S[x]}}},t.prototype.setOptions=function(t){this._options=t},t.prototype.getOption=function(){return this._options},t.prototype.release=function(){this._physicsRig=void 0,this._physicsRig=null},t.prototype.parse=function(t,e){this._physicsRig=new ve;var r=new ye(t,e);this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,Ae,!0),this._physicsRig.inputs.updateSize(r.getTotalInputCount(),Se,!0),this._physicsRig.outputs.updateSize(r.getTotalOutputCount(),we,!0),this._physicsRig.particles.updateSize(r.getVertexCount(),xe,!0);for(var l=0,p=0,g=0,d=0;d<this._physicsRig.settings.getSize();++d){this._physicsRig.settings.at(d).normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(d),this._physicsRig.settings.at(d).normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(d),this._physicsRig.settings.at(d).normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(d),this._physicsRig.settings.at(d).normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(d),this._physicsRig.settings.at(d).normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(d),this._physicsRig.settings.at(d).normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(d),this._physicsRig.settings.at(d).inputCount=r.getInputCount(d),this._physicsRig.settings.at(d).baseInputIndex=l;for(var m=0;m<this._physicsRig.settings.at(d).inputCount;++m)this._physicsRig.inputs.at(l+m).sourceParameterIndex=-1,this._physicsRig.inputs.at(l+m).weight=r.getInputWeight(d,m),this._physicsRig.inputs.at(l+m).reflect=r.getInputReflect(d,m),"X"==r.getInputType(d,m)?(this._physicsRig.inputs.at(l+m).type=Ce.CubismPhysicsSource_X,this._physicsRig.inputs.at(l+m).getNormalizedParameterValue=i):"Y"==r.getInputType(d,m)?(this._physicsRig.inputs.at(l+m).type=Ce.CubismPhysicsSource_Y,this._physicsRig.inputs.at(l+m).getNormalizedParameterValue=n):"Angle"==r.getInputType(d,m)&&(this._physicsRig.inputs.at(l+m).type=Ce.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(l+m).getNormalizedParameterValue=o),this._physicsRig.inputs.at(l+m).source.targetType=Be.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(l+m).source.id=r.getInputSourceId(d,m);l+=this._physicsRig.settings.at(d).inputCount,this._physicsRig.settings.at(d).outputCount=r.getOutputCount(d),this._physicsRig.settings.at(d).baseOutputIndex=p;for(m=0;m<this._physicsRig.settings.at(d).outputCount;++m)this._physicsRig.outputs.at(p+m).destinationParameterIndex=-1,this._physicsRig.outputs.at(p+m).vertexIndex=r.getOutputVertexIndex(d,m),this._physicsRig.outputs.at(p+m).angleScale=r.getOutputAngleScale(d,m),this._physicsRig.outputs.at(p+m).weight=r.getOutputWeight(d,m),this._physicsRig.outputs.at(p+m).destination.targetType=Be.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(p+m).destination.id=r.getOutputDestinationId(d,m),"X"==r.getOutputType(d,m)?(this._physicsRig.outputs.at(p+m).type=Ce.CubismPhysicsSource_X,this._physicsRig.outputs.at(p+m).getValue=a,this._physicsRig.outputs.at(p+m).getScale=h):"Y"==r.getOutputType(d,m)?(this._physicsRig.outputs.at(p+m).type=Ce.CubismPhysicsSource_Y,this._physicsRig.outputs.at(p+m).getValue=s,this._physicsRig.outputs.at(p+m).getScale=c):"Angle"==r.getOutputType(d,m)&&(this._physicsRig.outputs.at(p+m).type=Ce.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(p+m).getValue=u,this._physicsRig.outputs.at(p+m).getScale=f),this._physicsRig.outputs.at(p+m).reflect=r.getOutputReflect(d,m);p+=this._physicsRig.settings.at(d).outputCount,this._physicsRig.settings.at(d).particleCount=r.getParticleCount(d),this._physicsRig.settings.at(d).baseParticleIndex=g;for(m=0;m<this._physicsRig.settings.at(d).particleCount;++m)this._physicsRig.particles.at(g+m).mobility=r.getParticleMobility(d,m),this._physicsRig.particles.at(g+m).delay=r.getParticleDelay(d,m),this._physicsRig.particles.at(g+m).acceleration=r.getParticleAcceleration(d,m),this._physicsRig.particles.at(g+m).radius=r.getParticleRadius(d,m),this._physicsRig.particles.at(g+m).position=r.getParticlePosition(d,m);g+=this._physicsRig.settings.at(d).particleCount}this.initialize(),r.release(),r=void 0,r=null},t.prototype.initialize=function(){for(var t,e,r,i=0;i<this._physicsRig.subRigCount;++i){e=this._physicsRig.settings.at(i),(t=this._physicsRig.particles.get(e.baseParticleIndex))[0].initialPosition=new Me(0,0),t[0].lastPosition=new Me(t[0].initialPosition.x,t[0].initialPosition.y),t[0].lastGravity=new Me(0,-1),t[0].lastGravity.y*=-1,t[0].velocity=new Me(0,0),t[0].force=new Me(0,0);for(var n=1;n<e.particleCount;++n)(r=new Me(0,0)).y=t[n].radius,t[n].initialPosition=new Me(t[n-1].initialPosition.x+r.x,t[n-1].initialPosition.y+r.y),t[n].position=new Me(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastPosition=new Me(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastGravity=new Me(0,-1),t[n].lastGravity.y*=-1,t[n].velocity=new Me(0,0),t[n].force=new Me(0,0)}},t}();t.CubismPhysics=e;var r=function(){this.gravity=new Me(0,0),this.wind=new Me(0,0)};function i(t,e,r,i,n,o,a,s,u,l){t.x+=d(r,i,n,o,a.minimum,a.maximum,a.defalut,u)*l}function n(t,e,r,i,n,o,a,s,u,l){t.y+=d(r,i,n,o,a.minimum,a.maximum,a.defalut,u)*l}function o(t,e,r,i,n,o,a,s,u,l){e.angle+=d(r,i,n,o,s.minimum,s.maximum,s.defalut,u)*l}function a(t,e,r,i,n){var o=t.x;return i&&(o*=-1),o}function s(t,e,r,i,n){var o=t.y;return i&&(o*=-1),o}function u(t,e,r,i,n){var o;return n=r>=2?e[r-1].position.substract(e[r-2].position):n.multiplyByScaler(-1),o=be.directionToRadian(n,t),i&&(o*=-1),o}function l(t,e){return be.min(t,e)+function(t,e){var r=be.max(t,e),i=be.min(t,e);return be.abs(r-i)}(t,e)/2}function h(t,e){return JSON.parse(JSON.stringify(t.x))}function c(t,e){return JSON.parse(JSON.stringify(t.y))}function f(t,e){return JSON.parse(JSON.stringify(e))}function p(t,e,r,i,n,o,a,s){var u,l,h,c,f=new Me(0,0),p=new Me(0,0),g=new Me(0,0),d=new Me(0,0);t[0].position=new Me(r.x,r.y),u=be.degreesToRadian(i),(c=be.radianToDirection(u)).normalize();for(var m=1;m<e;++m)t[m].force=c.multiplyByScaler(t[m].acceleration).add(n),t[m].lastPosition=new Me(t[m].position.x,t[m].position.y),l=t[m].delay*a*30,f=t[m].position.substract(t[m-1].position),h=be.directionToRadian(t[m].lastGravity,c)/s,f.x=be.cos(h)*f.x-f.y*be.sin(h),f.y=be.sin(h)*f.x+f.y*be.cos(h),t[m].position=t[m-1].position.add(f),p=t[m].velocity.multiplyByScaler(l),g=t[m].force.multiplyByScaler(l).multiplyByScaler(l),t[m].position=t[m].position.add(p).add(g),(d=t[m].position.substract(t[m-1].position)).normalize(),t[m].position=t[m-1].position.add(d.multiplyByScaler(t[m].radius)),be.abs(t[m].position.x)<o&&(t[m].position.x=0),0!=l&&(t[m].velocity=t[m].position.substract(t[m].lastPosition),t[m].velocity=t[m].velocity.divisionByScalar(l),t[m].velocity=t[m].velocity.multiplyByScaler(t[m].mobility)),t[m].force=new Me(0,0),t[m].lastGravity=new Me(c.x,c.y)}function g(t,e,r,i,n){var o,a;(o=i*n.getScale(n.translationScale,n.angleScale))<e?(o<n.valueBelowMinimum&&(n.valueBelowMinimum=o),o=e):o>r&&(o>n.valueExceededMaximum&&(n.valueExceededMaximum=o),o=r),(a=n.weight/100)>=1?t[0]=o:(o=t[0]*(1-a)+o*a,t[0]=o)}function d(t,e,r,i,n,o,a,s){var u=0,h=be.max(r,e);h<t&&(t=h);var c=be.min(r,e);c>t&&(t=c);var f=be.min(n,o),p=be.max(n,o),g=a,d=l(c,h),m=t-d;switch(function(t){var e=0;return t>0?e=1:t<0&&(e=-1),e}(m)){case 1:var _=p-g;0!=(y=h-d)&&(u=m*(_/y),u+=g);break;case-1:var y;_=f-g;0!=(y=c-d)&&(u=m*(_/y),u+=g);break;case 0:u=g}return s?u:-1*u}t.Options=r}(me||(me={})),function(t){var e=function(){function t(){this._currentTime=0}return t.create=function(){return new t},t.delete=function(t){null!=t&&(t=null)},t.prototype.setParameters=function(t){this._breathParameters=t},t.prototype.getParameters=function(){return this._breathParameters},t.prototype.updateParameters=function(t,e){this._currentTime+=e;for(var r=2*this._currentTime*3.14159,i=0;i<this._breathParameters.getSize();++i){var n=this._breathParameters.at(i);t.addParameterValueById(n.parameterId,n.offset+n.peak*Math.sin(r/n.cycle),n.weight)}},t}();t.CubismBreath=e;var r=function(t,e,r,i,n){this.parameterId=null==t?null:t,this.offset=null==e?0:e,this.peak=null==r?0:r,this.cycle=null==i?0:i,this.weight=null==n?0:n};t.BreathParameterData=r}(_e||(_e={}));var Pe,Ie,Ve=d.csmVector;!function(t){var e,r=function(){function t(t){if(this._blinkingState=e.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new Ve,null!=t)for(var r=0;r<t.getEyeBlinkParameterCount();++r)this._parameterIds.pushBack(t.getEyeBlinkParameterId(r))}return t.create=function(e){return void 0===e&&(e=null),new t(e)},t.delete=function(t){null!=t&&(t=null)},t.prototype.setBlinkingInterval=function(t){this._blinkingIntervalSeconds=t},t.prototype.setBlinkingSetting=function(t,e,r){this._closingSeconds=t,this._closedSeconds=e,this._openingSeconds=r},t.prototype.setParameterIds=function(t){this._parameterIds=t},t.prototype.getParameterIds=function(){return this._parameterIds},t.prototype.updateParameters=function(r,i){var n;this._userTimeSeconds+=i;var o=0;switch(this._blinkingState){case e.EyeState_Closing:(o=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds)>=1&&(o=1,this._blinkingState=e.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),n=1-o;break;case e.EyeState_Closed:(o=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds)>=1&&(this._blinkingState=e.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),n=0;break;case e.EyeState_Opening:(o=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds)>=1&&(o=1,this._blinkingState=e.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),n=o;break;case e.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=e.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),n=1;break;case e.EyeState_First:default:this._blinkingState=e.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),n=1}t.CloseIfZero||(n=-n);for(var a=0;a<this._parameterIds.getSize();++a)r.setParameterValueById(this._parameterIds.at(a),n)},t.prototype.determinNextBlinkingTiming=function(){var t=Math.random();return this._userTimeSeconds+t*(2*this._blinkingIntervalSeconds-1)},t.CloseIfZero=!0,t}();t.CubismEyeBlink=r,function(t){t[t.EyeState_First=0]="EyeState_First",t[t.EyeState_Interval=1]="EyeState_Interval",t[t.EyeState_Closing=2]="EyeState_Closing",t[t.EyeState_Closed=3]="EyeState_Closed",t[t.EyeState_Opening=4]="EyeState_Opening"}(e=t.EyeState||(t.EyeState={}))}(Pe||(Pe={})),function(t){var e=function(){function t(t,e,r,i){this.x=t,this.y=e,this.width=r,this.height=i}return t.prototype.getCenterX=function(){return this.x+.5*this.width},t.prototype.getCenterY=function(){return this.y+.5*this.height},t.prototype.getRight=function(){return this.x+this.width},t.prototype.getBottom=function(){return this.y+this.height},t.prototype.setRect=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},t.prototype.expand=function(t,e){this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t}();t.csmRect=e}(Ie||(Ie={}));var Ee,ke=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Te=D.Constant,Re=E.CubismMatrix44,Fe=Ie.csmRect,De=g.csmMap,Le=d.csmVector,Ue=R.CubismRenderer,Ne=R.CubismBlendMode,Oe=R.CubismTextureColor;!function(t){var e,r,i,n=function(){function t(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new Le,this._clippingContextListForDraw=new Le,this._channelColors=new Le,this._tmpBoundsOnModel=new Fe,this._tmpMatrix=new Re,this._tmpMatrixForMask=new Re,this._tmpMatrixForDraw=new Re,this._maskTexture=null;var t=new Oe;t.R=1,t.G=0,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new Oe).R=0,t.G=1,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new Oe).R=0,t.G=0,t.B=1,t.A=0,this._channelColors.pushBack(t),(t=new Oe).R=0,t.G=0,t.B=0,t.A=1,this._channelColors.pushBack(t)}return t.prototype.getChannelFlagAsColor=function(t){return this._channelColors.at(t)},t.prototype.getMaskRenderTexture=function(){var t=0;if(this._maskTexture&&0!=this._maskTexture.texture&&(this._maskTexture.frameNo=this._currentFrameNo,t=this._maskTexture.texture),0==t){var e=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),t=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,i),this._maskTexture=new o(this._currentFrameNo,t)}return t},t.prototype.setGL=function(t){this.gl=t},t.prototype.calcClippedDrawTotalBounds=function(t,e){for(var r=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE,o=Number.MIN_VALUE,a=e._clippedDrawableIndexList.length,s=0;s<a;s++){for(var u=e._clippedDrawableIndexList[s],l=t.getDrawableVertexCount(u),h=t.getDrawableVertices(u),c=Number.MAX_VALUE,f=Number.MAX_VALUE,p=Number.MIN_VALUE,g=Number.MIN_VALUE,d=l*Te.vertexStep,m=Te.vertexOffset;m<d;m+=Te.vertexStep){var _=h[m],y=h[m+1];_<c&&(c=_),_>p&&(p=_),y<f&&(f=y),y>g&&(g=y)}if(c!=Number.MAX_VALUE)if(c<r&&(r=c),f<i&&(i=f),p>n&&(n=p),g>o&&(o=g),r==Number.MAX_VALUE)e._allClippedDrawRect.x=0,e._allClippedDrawRect.y=0,e._allClippedDrawRect.width=0,e._allClippedDrawRect.height=0,e._isUsing=!1;else{e._isUsing=!0;var b=n-r,v=o-i;e._allClippedDrawRect.x=r,e._allClippedDrawRect.y=i,e._allClippedDrawRect.width=b,e._allClippedDrawRect.height=v}}},t.prototype.release=function(){for(var t=0;t<this._clippingContextListForMask.getSize();t++)this._clippingContextListForMask.at(t)&&(this._clippingContextListForMask.at(t).release(),this._clippingContextListForMask.set(t,void 0)),this._clippingContextListForMask.set(t,null);this._clippingContextListForMask=null;for(t=0;t<this._clippingContextListForDraw.getSize();t++)this._clippingContextListForDraw.set(t,null);this._clippingContextListForDraw=null,this._maskTexture&&(this.gl.deleteFramebuffer(this._maskTexture.texture),this._maskTexture=null);for(t=0;t<this._channelColors.getSize();t++)this._channelColors.set(t,null);this._channelColors=null,this.gl.deleteTexture(this._colorBuffer),this._colorBuffer=null},t.prototype.initialize=function(t,e,r,i){for(var n=0;n<e;n++)if(i[n]<=0)this._clippingContextListForDraw.pushBack(null);else{var o=this.findSameClip(r[n],i[n]);null==o&&(o=new a(this,r[n],i[n]),this._clippingContextListForMask.pushBack(o)),o.addClippedDrawable(n),this._clippingContextListForDraw.pushBack(o)}},t.prototype.setupClippingContext=function(t,e){this._currentFrameNo++;for(var n=0,o=0;o<this._clippingContextListForMask.getSize();o++){var a=this._clippingContextListForMask.at(o);this.calcClippedDrawTotalBounds(t,a),a._isUsing&&n++}if(n>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture();e.getMvpMatrix();e.preDraw(),this.setupLayoutBounds(n),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(o=0;o<this._clippingContextListForMask.getSize();o++){var s=this._clippingContextListForMask.at(o),u=s._allClippedDrawRect,l=s._layoutBounds;this._tmpBoundsOnModel.setRect(u),this._tmpBoundsOnModel.expand(.05*u.width,.05*u.height);var h=l.width/this._tmpBoundsOnModel.width,c=l.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(h,c),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(h,c),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),s._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),s._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());for(var f=s._clippingIdCount,p=0;p<f;p++){var g=s._clippingIdList[p];t.getDrawableDynamicFlagVertexPositionsDidChange(g)&&(e.setIsCulling(0!=t.getDrawableCulling(g)),e.setClippingContextBufferForMask(s),e.drawMesh(t.getDrawableTextureIndices(g),t.getDrawableVertexIndexCount(g),t.getDrawableVertexCount(g),t.getDrawableVertexIndices(g),t.getDrawableVertices(g),t.getDrawableVertexUvs(g),t.getDrawableOpacity(g),Ne.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,i),e.setClippingContextBufferForMask(null),this.gl.viewport(r[0],r[1],r[2],r[3])}},t.prototype.findSameClip=function(t,e){for(var r=0;r<this._clippingContextListForMask.getSize();r++){var i=this._clippingContextListForMask.at(r),n=i._clippingIdCount;if(n==e){for(var o=0,a=0;a<n;a++)for(var s=i._clippingIdList[a],u=0;u<n;u++)if(t[u]==s){o++;break}if(o==n)return i}}return null},t.prototype.setupLayoutBounds=function(t){var e=t/4,r=t%4;e=~~e,r=~~r;for(var i=0,n=0;n<4;n++){var o=e+(n<r?1:0);if(0==o);else if(1==o){var a=this._clippingContextListForMask.at(i++);a._layoutChannelNo=n,a._layoutBounds.x=0,a._layoutBounds.y=0,a._layoutBounds.width=1,a._layoutBounds.height=1}else if(2==o)for(var s=0;s<o;s++){u=~~(u=s%2),(h=this._clippingContextListForMask.at(i++))._layoutChannelNo=n,h._layoutBounds.x=.5*u,h._layoutBounds.y=0,h._layoutBounds.width=.5,h._layoutBounds.height=1}else if(o<=4)for(s=0;s<o;s++){u=~~(u=s%2),l=~~(l=s/2),(h=this._clippingContextListForMask.at(i++))._layoutChannelNo=n,h._layoutBounds.x=.5*u,h._layoutBounds.y=.5*l,h._layoutBounds.width=.5,h._layoutBounds.height=.5}else if(o<=9)for(s=0;s<o;s++){var u,l,h;u=~~(u=s%3),l=~~(l=s/3),(h=this._clippingContextListForMask.at(i++))._layoutChannelNo=n,h._layoutBounds.x=u/3,h._layoutBounds.y=l/3,h._layoutBounds.width=1/3,h._layoutBounds.height=1/3}else A("not supported mask count : {0}",o)}},t.prototype.getColorBuffer=function(){return this._colorBuffer},t.prototype.getClippingContextListForDraw=function(){return this._clippingContextListForDraw},t.prototype.setClippingMaskBufferSize=function(t){this._clippingMaskBufferSize=t},t.prototype.getClippingMaskBufferSize=function(){return this._clippingMaskBufferSize},t}();t.CubismClippingManager_WebGL=n;var o=function(t,e){this.frameNo=t,this.texture=e};t.CubismRenderTextureResource=o;var a=function(){function t(t,e,r){this._owner=t,this._clippingIdList=e,this._clippingIdCount=r,this._allClippedDrawRect=new Fe,this._layoutBounds=new Fe,this._clippedDrawableIndexList=new Array,this._matrixForMask=new Re,this._matrixForDraw=new Re}return t.prototype.release=function(){null!=this._layoutBounds&&(this._layoutBounds=null),null!=this._allClippedDrawRect&&(this._allClippedDrawRect=null),null!=this._clippedDrawableIndexList&&(this._clippedDrawableIndexList=null)},t.prototype.addClippedDrawable=function(t){this._clippedDrawableIndexList.push(t)},t.prototype.getClippingManager=function(){return this._owner},t.prototype.setGl=function(t){this._owner.setGL(t)},t}();t.CubismClippingContext=a;var s=function(){function r(){this._shaderSets=new Le}return r.getInstance=function(){return null==e?e=new r:e},r.deleteInstance=function(){e&&(e.release(),e=null)},r.prototype.release=function(){this.releaseShaderProgram()},r.prototype.setupShaderProgram=function(t,e,r,i,n,o,a,s,h,c,f,p,g){var d,m,_,y;if(f||A("NoPremultipliedAlpha is not allowed"),0==this._shaderSets.getSize()&&this.generateShaders(),null!=t.getClippingContextBufferForMask()){var b=this._shaderSets.at(u.ShaderNames_SetupMask);this.gl.useProgram(b.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(b.samplerTexture0Location,0),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(b.attributePositionLocation),this.gl.vertexAttribPointer(b.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(b.attributeTexCoordLocation),this.gl.vertexAttribPointer(b.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);var v=t.getClippingContextBufferForMask()._layoutChannelNo,S=t.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(v);this.gl.uniform4f(b.uniformChannelFlagLocation,S.R,S.G,S.B,S.A),this.gl.uniformMatrix4fv(b.uniformClipMatrixLocation,!1,t.getClippingContextBufferForMask()._matrixForMask.getArray());var w=t.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(b.uniformBaseColorLocation,2*w.x-1,2*w.y-1,2*w.getRight()-1,2*w.getBottom()-1),d=this.gl.ZERO,m=this.gl.ONE_MINUS_SRC_COLOR,_=this.gl.ZERO,y=this.gl.ONE_MINUS_SRC_ALPHA}else{var x=null!=t.getClippingContextBufferForDraw(),C=x?g?2:1:0;b=new l;switch(h){case Ne.CubismBlendMode_Normal:default:b=this._shaderSets.at(u.ShaderNames_NormalPremultipliedAlpha+C),d=this.gl.ONE,m=this.gl.ONE_MINUS_SRC_ALPHA,_=this.gl.ONE,y=this.gl.ONE_MINUS_SRC_ALPHA;break;case Ne.CubismBlendMode_Additive:b=this._shaderSets.at(u.ShaderNames_AddPremultipliedAlpha+C),d=this.gl.ONE,m=this.gl.ONE,_=this.gl.ZERO,y=this.gl.ONE;break;case Ne.CubismBlendMode_Multiplicative:b=this._shaderSets.at(u.ShaderNames_MultPremultipliedAlpha+C),d=this.gl.DST_COLOR,m=this.gl.ONE_MINUS_SRC_ALPHA,_=this.gl.ZERO,y=this.gl.ONE}if(this.gl.useProgram(b.shaderProgram),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(b.attributePositionLocation),this.gl.vertexAttribPointer(b.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(b.attributeTexCoordLocation),this.gl.vertexAttribPointer(b.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),x){this.gl.activeTexture(this.gl.TEXTURE1);var B=t.getClippingContextBufferForDraw().getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,B),this.gl.uniform1i(b.samplerTexture1Location,1),this.gl.uniformMatrix4fv(b.uniformClipMatrixLocation,!1,t.getClippingContextBufferForDraw()._matrixForDraw.getArray());v=t.getClippingContextBufferForDraw()._layoutChannelNo,S=t.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(v);this.gl.uniform4f(b.uniformChannelFlagLocation,S.R,S.G,S.B,S.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(b.samplerTexture0Location,0),this.gl.uniformMatrix4fv(b.uniformMatrixLocation,!1,p.getArray()),this.gl.uniform4f(b.uniformBaseColorLocation,c.R,c.G,c.B,c.A)}null==a.index&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(d,m,_,y)},r.prototype.releaseShaderProgram=function(){for(var t=0;t<this._shaderSets.getSize();t++)this.gl.deleteProgram(this._shaderSets.at(t).shaderProgram),this._shaderSets.at(t).shaderProgram=0,this._shaderSets.set(t,void 0),this._shaderSets.set(t,null)},r.prototype.generateShaders=function(){for(var e=0;e<10;e++)this._shaderSets.pushBack(new l);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcSetupMask,t.fragmentShaderSrcsetupMask),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(t.vertexShaderSrc,t.fragmentShaderSrcPremultipliedAlpha),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcMasked,t.fragmentShaderSrcMaskPremultipliedAlpha),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcMasked,t.fragmentShaderSrcMaskInvertedPremultipliedAlpha),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor")},r.prototype.loadShaderProgram=function(t,e){var r=this.gl.createProgram(),i=this.compileShaderSource(this.gl.VERTEX_SHADER,t);if(!i)return A("Vertex shader compile error!"),0;var n=this.compileShaderSource(this.gl.FRAGMENT_SHADER,e);return n?(this.gl.attachShader(r,i),this.gl.attachShader(r,n),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.gl.deleteShader(i),this.gl.deleteShader(n),r):(A("Failed to link program: {0}",r),this.gl.deleteShader(i),i=0,this.gl.deleteShader(n),n=0,r&&(this.gl.deleteProgram(r),r=0),0)):(A("Vertex shader compile error!"),0)},r.prototype.compileShaderSource=function(t,e){var r=e,i=this.gl.createShader(t);if(this.gl.shaderSource(i,r),this.gl.compileShader(i),!i){var n=this.gl.getShaderInfoLog(i);A("Shader compile log: {0} ",n)}return this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.gl.deleteShader(i),null)},r.prototype.setGl=function(t){this.gl=t},r}();t.CubismShader_WebGL=s;var u,l=function(){};t.CubismShaderSet=l,function(t){t[t.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",t[t.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",t[t.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",t[t.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",t[t.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",t[t.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted"}(u=t.ShaderNames||(t.ShaderNames={})),t.vertexShaderSrcSetupMask="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.fragmentShaderSrcsetupMask="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",t.vertexShaderSrc="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.vertexShaderSrcMasked="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.fragmentShaderSrcPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",t.fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",t.fragmentShaderSrcMaskInvertedPremultipliedAlpha="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";var h=function(t){function e(){var e=t.call(this)||this;return e._clippingContextBufferForMask=null,e._clippingContextBufferForDraw=null,e._clippingManager=new n,e.firstDraw=!0,e._textures=new De,e._sortedDrawableIndexList=new Le,e._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},e._textures.prepareCapacity(32,!0),e}return ke(e,t),e.prototype.initialize=function(e){e.isUsingMasking()&&(this._clippingManager=new n,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts())),this._sortedDrawableIndexList.resize(e.getDrawableCount(),0),t.prototype.initialize.call(this,e)},e.prototype.bindTexture=function(t,e){this._textures.setValue(t,e)},e.prototype.getBindedTextures=function(){return this._textures},e.prototype.setClippingMaskBufferSize=function(t){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new n,this._clippingManager.setClippingMaskBufferSize(t),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())},e.prototype.getClippingMaskBufferSize=function(){return this._clippingManager.getClippingMaskBufferSize()},e.prototype.release=function(){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null},e.prototype.doDrawModel=function(){null!=this._clippingManager&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();for(var t=this.getModel().getDrawableCount(),e=this.getModel().getDrawableRenderOrders(),r=0;r<t;++r){var i=e[r];this._sortedDrawableIndexList.set(i,r)}for(r=0;r<t;++r){var n=this._sortedDrawableIndexList.at(r);this.getModel().getDrawableDynamicFlagIsVisible(n)&&(this.setClippingContextBufferForDraw(null!=this._clippingManager?this._clippingManager.getClippingContextListForDraw().at(n):null),this.setIsCulling(this.getModel().getDrawableCulling(n)),this.drawMesh(this.getModel().getDrawableTextureIndices(n),this.getModel().getDrawableVertexIndexCount(n),this.getModel().getDrawableVertexCount(n),this.getModel().getDrawableVertexIndices(n),this.getModel().getDrawableVertices(n),this.getModel().getDrawableVertexUvs(n),this.getModel().getDrawableOpacity(n),this.getModel().getDrawableBlendMode(n),this.getModel().getDrawableInvertedMaskBit(n)))}},e.prototype.drawMesh=function(t,e,r,i,n,o,a,u,l){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);var h,c=this.getModelColor();null==this.getClippingContextBufferForMask()&&(c.A*=a,this.isPremultipliedAlpha()&&(c.R*=c.A,c.G*=c.A,c.B*=c.A)),h=null!=this._textures.getValue(t)?this._textures.getValue(t):null,s.getInstance().setupShaderProgram(this,h,r,n,i,o,this._bufferData,a,u,c,this.isPremultipliedAlpha(),this.getMvpMatrix(),l),this.gl.drawElements(this.gl.TRIANGLES,e,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)},e.doStaticRelease=function(){s.deleteInstance()},e.prototype.setRenderState=function(t,e){i=t,r=e},e.prototype.preDraw=function(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)},e.prototype.setClippingContextBufferForMask=function(t){this._clippingContextBufferForMask=t},e.prototype.getClippingContextBufferForMask=function(){return this._clippingContextBufferForMask},e.prototype.setClippingContextBufferForDraw=function(t){this._clippingContextBufferForDraw=t},e.prototype.getClippingContextBufferForDraw=function(){return this._clippingContextBufferForDraw},e.prototype.startUp=function(t){this.gl=t,this._clippingManager.setGL(t),s.getInstance().setGl(t)},e}(Ue);t.CubismRenderer_WebGL=h,Ue.staticRelease=function(){h.doStaticRelease()}}(Ee||(Ee={}));var ze,Ge,Ye=Ee.CubismRenderer_WebGL,Xe=Pe.CubismEyeBlink,je=_e.CubismBreath,He=D.Constant,We=me.CubismPhysics,Qe=ne.CubismModelUserData,qe=Zt.CubismPose,Je=jt.CubismExpressionMotion,Ze=Et.CubismMotion,Ke=St.CubismMoc,$e=pt.CubismModelMatrix,tr=ct.CubismTargetPoint,er=ut.CubismMotionManager;!function(t){var e=function(){function t(){this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new er,this._motionManager.setEventCallback(t.cubismDefaultMotionEventCallback,this),this._expressionManager=new er,this._dragManager=new tr}return t.prototype.isInitialized=function(){return this._initialized},t.prototype.setInitialized=function(t){this._initialized=t},t.prototype.isUpdating=function(){return this._updating},t.prototype.setUpdating=function(t){this._updating=t},t.prototype.setDragging=function(t,e){this._dragManager.set(t,e)},t.prototype.setAcceleration=function(t,e,r){this._accelerationX=t,this._accelerationY=e,this._accelerationZ=r},t.prototype.getModelMatrix=function(){return this._modelMatrix},t.prototype.setOpacity=function(t){this._opacity=t},t.prototype.getOpacity=function(){return this._opacity},t.prototype.loadModel=function(t){this._moc=Ke.create(t),this._model=this._moc.createModel(),this._model.saveParameters(),null!=this._moc&&null!=this._model?this._modelMatrix=new $e(this._model.getCanvasWidth(),this._model.getCanvasHeight()):A("Failed to CreateModel().")},t.prototype.loadMotion=function(t,e,r){return Ze.create(t,e)},t.prototype.loadExpression=function(t,e,r){return Je.create(t,e)},t.prototype.loadPose=function(t,e){this._pose=qe.create(t,e)},t.prototype.loadUserData=function(t,e){this._modelUserData=Qe.create(t,e)},t.prototype.loadPhysics=function(t,e){this._physics=We.create(t,e)},t.prototype.isHit=function(t,e,r){var i=this._model.getDrawableIndex(t);if(i<0)return{hit:!1,area:0};for(var n=this._model.getDrawableVertexCount(i),o=this._model.getDrawableVertices(i),a=o[0],s=o[0],u=o[1],l=o[1],h=1;h<n;++h){var c=o[He.vertexOffset+h*He.vertexStep],f=o[He.vertexOffset+h*He.vertexStep+1];c<a&&(a=c),c>s&&(s=c),f<u&&(u=f),f>l&&(l=f)}var p=this._modelMatrix.invertTransformX(e),g=this._modelMatrix.invertTransformY(r);return{hit:a<=p&&p<=s&&u<=g&&g<=l,area:Math.abs(a-s)*Math.abs(l-u)}},t.prototype.getModel=function(){return this._model},t.prototype.getRenderer=function(){return this._renderer},t.prototype.createRenderer=function(){this._renderer&&this.deleteRenderer(),this._renderer=new Ye,this._renderer.initialize(this._model)},t.prototype.deleteRenderer=function(){null!=this._renderer&&(this._renderer.release(),this._renderer=null)},t.prototype.motionEventFired=function(t){b("{0}",t.s)},t.cubismDefaultMotionEventCallback=function(t,e,r){null!=r&&r.motionEventFired(e)},t.prototype.release=function(){null!=this._motionManager&&(this._motionManager.release(),this._motionManager=null),null!=this._expressionManager&&(this._expressionManager.release(),this._expressionManager=null),null!=this._moc&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,qe.delete(this._pose),Xe.delete(this._eyeBlink),je.delete(this._breath),this._dragManager=null,We.delete(this._physics),Qe.delete(this._modelUserData),this.deleteRenderer()},t}();t.CubismUserModel=e}(ze||(ze={})),function(t){var e=function(){};t.ICubismModelSetting=e}(Ge||(Ge={}));var rr,ir,nr,or=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ar=d.csmVector,sr=D.CubismFramework,ur=w.CubismJson,lr=Ge.ICubismModelSetting;!function(t){var e,r="Name";!function(t){t[t.FrequestNode_Groups=0]="FrequestNode_Groups",t[t.FrequestNode_Moc=1]="FrequestNode_Moc",t[t.FrequestNode_Motions=2]="FrequestNode_Motions",t[t.FrequestNode_Expressions=3]="FrequestNode_Expressions",t[t.FrequestNode_Textures=4]="FrequestNode_Textures",t[t.FrequestNode_Physics=5]="FrequestNode_Physics",t[t.FrequestNode_Pose=6]="FrequestNode_Pose",t[t.FrequestNode_HitAreas=7]="FrequestNode_HitAreas"}(e||(e={}));var i=function(t){function i(e,r){var i=t.call(this)||this;return i._json=ur.create(e,r),i._json&&(i._jsonValue=new ar,i._jsonValue.pushBack(i._json.getRoot().getValueByString("Groups")),i._jsonValue.pushBack(i._json.getRoot().getValueByString("FileReferences").getValueByString("Moc")),i._jsonValue.pushBack(i._json.getRoot().getValueByString("FileReferences").getValueByString("Motions")),i._jsonValue.pushBack(i._json.getRoot().getValueByString("FileReferences").getValueByString("Expressions")),i._jsonValue.pushBack(i._json.getRoot().getValueByString("FileReferences").getValueByString("Textures")),i._jsonValue.pushBack(i._json.getRoot().getValueByString("FileReferences").getValueByString("Physics")),i._jsonValue.pushBack(i._json.getRoot().getValueByString("FileReferences").getValueByString("Pose")),i._jsonValue.pushBack(i._json.getRoot().getValueByString("HitAreas"))),i}return or(i,t),i.prototype.release=function(){ur.delete(this._json),this._jsonValue=null},i.prototype.GetJson=function(){return this._json},i.prototype.getModelFileName=function(){return this.isExistModelFile()?this._jsonValue.at(e.FrequestNode_Moc).getRawString():""},i.prototype.getTextureCount=function(){return this.isExistTextureFiles()?this._jsonValue.at(e.FrequestNode_Textures).getSize():0},i.prototype.getTextureDirectory=function(){return this._jsonValue.at(e.FrequestNode_Textures).getRawString()},i.prototype.getTextureFileName=function(t){return this._jsonValue.at(e.FrequestNode_Textures).getValueByIndex(t).getRawString()},i.prototype.getHitAreasCount=function(){return this.isExistHitAreas()?this._jsonValue.at(e.FrequestNode_HitAreas).getSize():0},i.prototype.getHitAreaId=function(t){return sr.getIdManager().getId(this._jsonValue.at(e.FrequestNode_HitAreas).getValueByIndex(t).getValueByString("Id").getRawString())},i.prototype.getHitAreaName=function(t){return this._jsonValue.at(e.FrequestNode_HitAreas).getValueByIndex(t).getValueByString(r).getRawString()},i.prototype.getPhysicsFileName=function(){return this.isExistPhysicsFile()?this._jsonValue.at(e.FrequestNode_Physics).getRawString():""},i.prototype.getPoseFileName=function(){return this.isExistPoseFile()?this._jsonValue.at(e.FrequestNode_Pose).getRawString():""},i.prototype.getExpressionCount=function(){return this.isExistExpressionFile()?this._jsonValue.at(e.FrequestNode_Expressions).getSize():0},i.prototype.getExpressionName=function(t){return this._jsonValue.at(e.FrequestNode_Expressions).getValueByIndex(t).getValueByString(r).getRawString()},i.prototype.getExpressionFileName=function(t){return this._jsonValue.at(e.FrequestNode_Expressions).getValueByIndex(t).getValueByString("File").getRawString()},i.prototype.getMotionGroupCount=function(){return this.isExistMotionGroups()?this._jsonValue.at(e.FrequestNode_Motions).getKeys().getSize():0},i.prototype.getMotionGroupName=function(t){return this.isExistMotionGroups()?this._jsonValue.at(e.FrequestNode_Motions).getKeys().at(t):null},i.prototype.getMotionCount=function(t){return this.isExistMotionGroupName(t)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getSize():0},i.prototype.getMotionFileName=function(t,r){return this.isExistMotionGroupName(t)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("File").getRawString():""},i.prototype.getMotionSoundFileName=function(t,r){return this.isExistMotionSoundFile(t,r)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("Sound").getRawString():""},i.prototype.getMotionFadeInTimeValue=function(t,r){return this.isExistMotionFadeIn(t,r)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("FadeInTime").toFloat():-1},i.prototype.getMotionFadeOutTimeValue=function(t,r){return this.isExistMotionFadeOut(t,r)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("FadeOutTime").toFloat():-1},i.prototype.getUserDataFile=function(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString("FileReferences").getValueByString("UserData").getRawString():""},i.prototype.getLayoutMap=function(t){var e=this._json.getRoot().getValueByString("Layout").getMap();if(null==e)return!1;for(var r=!1,i=e.begin();i.notEqual(e.end());i.preIncrement())t.setValue(i.ptr().first,i.ptr().second.toFloat()),r=!0;return r},i.prototype.getEyeBlinkParameterCount=function(){if(!this.isExistEyeBlinkParameters())return 0;for(var t=0,i=0;i<this._jsonValue.at(e.FrequestNode_Groups).getSize();i++){var n=this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(i);if(!n.isNull()&&!n.isError()&&"EyeBlink"==n.getValueByString(r).getRawString()){t=n.getValueByString("Ids").getVector().getSize();break}}return t},i.prototype.getEyeBlinkParameterId=function(t){if(!this.isExistEyeBlinkParameters())return null;for(var i=0;i<this._jsonValue.at(e.FrequestNode_Groups).getSize();i++){var n=this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(i);if(!n.isNull()&&!n.isError()&&"EyeBlink"==n.getValueByString(r).getRawString())return sr.getIdManager().getId(n.getValueByString("Ids").getValueByIndex(t).getRawString())}return null},i.prototype.getLipSyncParameterCount=function(){if(!this.isExistLipSyncParameters())return 0;for(var t=0,i=0;i<this._jsonValue.at(e.FrequestNode_Groups).getSize();i++){var n=this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(i);if(!n.isNull()&&!n.isError()&&"LipSync"==n.getValueByString(r).getRawString()){t=n.getValueByString("Ids").getVector().getSize();break}}return t},i.prototype.getLipSyncParameterId=function(t){if(!this.isExistLipSyncParameters())return null;for(var i=0;i<this._jsonValue.at(e.FrequestNode_Groups).getSize();i++){var n=this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(i);if(!n.isNull()&&!n.isError()&&"LipSync"==n.getValueByString(r).getRawString())return sr.getIdManager().getId(n.getValueByString("Ids").getValueByIndex(t).getRawString())}return null},i.prototype.isExistModelFile=function(){var t=this._jsonValue.at(e.FrequestNode_Moc);return!t.isNull()&&!t.isError()},i.prototype.isExistTextureFiles=function(){var t=this._jsonValue.at(e.FrequestNode_Textures);return!t.isNull()&&!t.isError()},i.prototype.isExistHitAreas=function(){var t=this._jsonValue.at(e.FrequestNode_HitAreas);return!t.isNull()&&!t.isError()},i.prototype.isExistPhysicsFile=function(){var t=this._jsonValue.at(e.FrequestNode_Physics);return!t.isNull()&&!t.isError()},i.prototype.isExistPoseFile=function(){var t=this._jsonValue.at(e.FrequestNode_Pose);return!t.isNull()&&!t.isError()},i.prototype.isExistExpressionFile=function(){var t=this._jsonValue.at(e.FrequestNode_Expressions);return!t.isNull()&&!t.isError()},i.prototype.isExistMotionGroups=function(){var t=this._jsonValue.at(e.FrequestNode_Motions);return!t.isNull()&&!t.isError()},i.prototype.isExistMotionGroupName=function(t){var r=this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t);return!r.isNull()&&!r.isError()},i.prototype.isExistMotionSoundFile=function(t,r){var i=this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("Sound");return!i.isNull()&&!i.isError()},i.prototype.isExistMotionFadeIn=function(t,r){var i=this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("FadeInTime");return!i.isNull()&&!i.isError()},i.prototype.isExistMotionFadeOut=function(t,r){var i=this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("FadeOutTime");return!i.isNull()&&!i.isError()},i.prototype.isExistUserDataFile=function(){var t=this._json.getRoot().getValueByString("FileReferences").getValueByString("UserData");return!t.isNull()&&!t.isError()},i.prototype.isExistEyeBlinkParameters=function(){if(this._jsonValue.at(e.FrequestNode_Groups).isNull()||this._jsonValue.at(e.FrequestNode_Groups).isError())return!1;for(var t=0;t<this._jsonValue.at(e.FrequestNode_Groups).getSize();++t)if("EyeBlink"==this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(t).getValueByString(r).getRawString())return!0;return!1},i.prototype.isExistLipSyncParameters=function(){if(this._jsonValue.at(e.FrequestNode_Groups).isNull()||this._jsonValue.at(e.FrequestNode_Groups).isError())return!1;for(var t=0;t<this._jsonValue.at(e.FrequestNode_Groups).getSize();++t)if("LipSync"==this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(t).getValueByString(r).getRawString())return!0;return!1},i}(lr);t.CubismModelSettingJson=i}(rr||(rr={})),function(t){t.HitAreaPrefix="HitArea",t.HitAreaHead="Head",t.HitAreaBody="Body",t.PartsIdCore="Parts01Core",t.PartsArmPrefix="Parts01Arm_",t.PartsArmLPrefix="Parts01ArmL_",t.PartsArmRPrefix="Parts01ArmR_",t.ParamAngleX="ParamAngleX",t.ParamAngleY="ParamAngleY",t.ParamAngleZ="ParamAngleZ",t.ParamEyeLOpen="ParamEyeLOpen",t.ParamEyeLSmile="ParamEyeLSmile",t.ParamEyeROpen="ParamEyeROpen",t.ParamEyeRSmile="ParamEyeRSmile",t.ParamEyeBallX="ParamEyeBallX",t.ParamEyeBallY="ParamEyeBallY",t.ParamEyeBallForm="ParamEyeBallForm",t.ParamBrowLY="ParamBrowLY",t.ParamBrowRY="ParamBrowRY",t.ParamBrowLX="ParamBrowLX",t.ParamBrowRX="ParamBrowRX",t.ParamBrowLAngle="ParamBrowLAngle",t.ParamBrowRAngle="ParamBrowRAngle",t.ParamBrowLForm="ParamBrowLForm",t.ParamBrowRForm="ParamBrowRForm",t.ParamMouthForm="ParamMouthForm",t.ParamMouthOpenY="ParamMouthOpenY",t.ParamCheek="ParamCheek",t.ParamBodyAngleX="ParamBodyAngleX",t.ParamBodyAngleY="ParamBodyAngleY",t.ParamBodyAngleZ="ParamBodyAngleZ",t.ParamBreath="ParamBreath",t.ParamArmLA="ParamArmLA",t.ParamArmRA="ParamArmRA",t.ParamArmLB="ParamArmLB",t.ParamArmRB="ParamArmRB",t.ParamHandL="ParamHandL",t.ParamHandR="ParamHandR",t.ParamHairFront="ParamHairFront",t.ParamHairSide="ParamHairSide",t.ParamHairBack="ParamHairBack",t.ParamHairFluffy="ParamHairFluffy",t.ParamShoulderY="ParamShoulderY",t.ParamBustX="ParamBustX",t.ParamBustY="ParamBustY",t.ParamBaseX="ParamBaseX",t.ParamBaseY="ParamBaseY",t.ParamNONE="NONE:"}(ir||(ir={})),function(t){var e=function(){function t(){}return t.getFormatedString=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=t;return i.replace(/\{(\d+)\}/g,(function(t,r){return e[r]}))},t.isStartWith=function(t,e){for(var r=0,i=0;"\0"!=e[i];)if("\0"==t[r]||t[r++]!=e[i++])return!1;return!1},t.stringToFloat=function(t,e,r,i){var n=r,o=!1,a=!1,s=0,u=parseInt(t[n]);for(u<0&&(o=!0,n++);n<e;n++){var l=t[n];if(!(0<=parseInt(l)&&parseInt(l)<=9)){if("."==l){a=!0,n++;break}break}s=10*s+(parseInt(l)-0)}if(a)for(var h=.1;n<e&&(0<=(u=255&parseFloat(t[n]))&&u<=9)&&(s+=h*(u-0),h*=.1,u);n++);return n==r?(i[0]=-1,0):(o&&(s=-s),i[0]=n,s)},t}();t.CubismString=e}(nr||(nr={}));var hr="URLSearchParams"in self,cr="Symbol"in self&&"iterator"in Symbol,fr="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),pr="FormData"in self,gr="ArrayBuffer"in self;if(gr)var dr=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],mr=ArrayBuffer.isView||function(t){return t&&dr.indexOf(Object.prototype.toString.call(t))>-1};function _r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function yr(t){return"string"!=typeof t&&(t=String(t)),t}function br(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return cr&&(e[Symbol.iterator]=function(){return e}),e}function vr(t){this.map={},t instanceof vr?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function Ar(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function Sr(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function wr(t){var e=new FileReader,r=Sr(e);return e.readAsArrayBuffer(t),r}function xr(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function Cr(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:fr&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:pr&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:hr&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():gr&&fr&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=xr(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):gr&&(ArrayBuffer.prototype.isPrototypeOf(t)||mr(t))?this._bodyArrayBuffer=xr(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):hr&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},fr&&(this.blob=function(){var t=Ar(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Ar(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(wr)}),this.text=function(){var t,e,r,i=Ar(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=Sr(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),i=0;i<e.length;i++)r[i]=String.fromCharCode(e[i]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},pr&&(this.formData=function(){return this.text().then(Pr)}),this.json=function(){return this.text().then(JSON.parse)},this}vr.prototype.append=function(t,e){t=_r(t),e=yr(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},vr.prototype.delete=function(t){delete this.map[_r(t)]},vr.prototype.get=function(t){return t=_r(t),this.has(t)?this.map[t]:null},vr.prototype.has=function(t){return this.map.hasOwnProperty(_r(t))},vr.prototype.set=function(t,e){this.map[_r(t)]=yr(e)},vr.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},vr.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),br(t)},vr.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),br(t)},vr.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),br(t)},cr&&(vr.prototype[Symbol.iterator]=vr.prototype.entries);var Br=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Mr(t,e){var r,i,n=(e=e||{}).body;if(t instanceof Mr){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new vr(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new vr(e.headers)),this.method=(r=e.method||this.method||"GET",i=r.toUpperCase(),Br.indexOf(i)>-1?i:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function Pr(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(n))}})),e}function Ir(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new vr(e.headers),this.url=e.url||"",this._initBody(t)}Mr.prototype.clone=function(){return new Mr(this,{body:this._bodyInit})},Cr.call(Mr.prototype),Cr.call(Ir.prototype),Ir.prototype.clone=function(){return new Ir(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new vr(this.headers),url:this.url})},Ir.error=function(){var t=new Ir(null,{status:0,statusText:""});return t.type="error",t};var Vr=[301,302,303,307,308];Ir.redirect=function(t,e){if(-1===Vr.indexOf(e))throw new RangeError("Invalid status code");return new Ir(null,{status:e,headers:{location:t}})};var Er=self.DOMException;try{new Er}catch(t){(Er=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),Er.prototype.constructor=Er}function kr(t,e){return new Promise((function(r,i){var n=new Mr(t,e);if(n.signal&&n.signal.aborted)return i(new Er("Aborted","AbortError"));var o=new XMLHttpRequest;function a(){o.abort()}o.onload=function(){var t,e,i={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new vr,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();e.append(i,n)}})),e)};i.url="responseURL"in o?o.responseURL:i.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new Ir(n,i))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.onabort=function(){i(new Er("Aborted","AbortError"))},o.open(n.method,n.url,!0),"include"===n.credentials?o.withCredentials=!0:"omit"===n.credentials&&(o.withCredentials=!1),"responseType"in o&&fr&&(o.responseType="blob"),n.headers.forEach((function(t,e){o.setRequestHeader(e,t)})),n.signal&&(n.signal.addEventListener("abort",a),o.onreadystatechange=function(){4===o.readyState&&n.signal.removeEventListener("abort",a)}),o.send(void 0===n._bodyInit?null:n._bodyInit)}))}kr.polyfill=!0,self.fetch||(self.fetch=kr,self.Headers=vr,self.Request=Mr,self.Response=Ir);var Tr,Rr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Fr=function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))},Dr=function(t,e){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Lr=ot.InvalidMotionQueueEntryHandleValue,Ur=nr.CubismString,Nr=g.csmMap,Or=d.csmVector,zr=_e.CubismBreath,Gr=_e.BreathParameterData,Yr=Pe.CubismEyeBlink,Xr=tt.ACubismMotion,jr=D.CubismFramework,Hr=ze.CubismUserModel,Wr=rr.CubismModelSettingJson,Qr=ir,qr=E.CubismMatrix44;!function(t){t[t.LoadAssets=0]="LoadAssets",t[t.LoadModel=1]="LoadModel",t[t.WaitLoadModel=2]="WaitLoadModel",t[t.LoadExpression=3]="LoadExpression",t[t.WaitLoadExpression=4]="WaitLoadExpression",t[t.LoadPhysics=5]="LoadPhysics",t[t.WaitLoadPhysics=6]="WaitLoadPhysics",t[t.LoadPose=7]="LoadPose",t[t.WaitLoadPose=8]="WaitLoadPose",t[t.SetupEyeBlink=9]="SetupEyeBlink",t[t.SetupBreath=10]="SetupBreath",t[t.LoadUserData=11]="LoadUserData",t[t.WaitLoadUserData=12]="WaitLoadUserData",t[t.SetupEyeBlinkIds=13]="SetupEyeBlinkIds",t[t.SetupLipSyncIds=14]="SetupLipSyncIds",t[t.SetupLayout=15]="SetupLayout",t[t.LoadMotion=16]="LoadMotion",t[t.WaitLoadMotion=17]="WaitLoadMotion",t[t.CompleteInitialize=18]="CompleteInitialize",t[t.CompleteSetupModel=19]="CompleteSetupModel",t[t.LoadTexture=20]="LoadTexture",t[t.WaitLoadTexture=21]="WaitLoadTexture",t[t.CompleteSetup=22]="CompleteSetup"}(Tr||(Tr={}));var Jr,Zr=function(t){function e(e,r,i){var n=t.call(this)||this;return n._setting=e,n._textureManager=r,n._webgl=i,n._viewMatrix=new qr,n.s_currentFrame=0,n.s_lastFrame=0,n.s_deltaTime=0,n._modelSetting=null,n._userTimeSeconds=0,n._eyeBlinkIds=new Or,n._lipSyncIds=new Or,n._motions=new Nr,n._expressions=new Nr,n._hitArea=new Or,n._userArea=new Or,n._idParamAngleX=jr.getIdManager().getId(Qr.ParamAngleX),n._idParamAngleY=jr.getIdManager().getId(Qr.ParamAngleY),n._idParamAngleZ=jr.getIdManager().getId(Qr.ParamAngleZ),n._idParamEyeBallX=jr.getIdManager().getId(Qr.ParamEyeBallX),n._idParamEyeBallY=jr.getIdManager().getId(Qr.ParamEyeBallY),n._idParamBodyAngleX=jr.getIdManager().getId(Qr.ParamBodyAngleX),n._state=Tr.LoadAssets,n._expressionCount=0,n._textureCount=0,n._motionCount=0,n._allMotionCount=0,n.loadAssets(n._setting.modelBuffer),n}return Rr(e,t),e.prototype.loadAssets=function(t){return Fr(this,void 0,void 0,(function(){var e,r;return Dr(this,(function(i){return e=t.byteLength,r=new Wr(t,e),this._state=Tr.LoadModel,this.setupModel(r),[2]}))}))},e.prototype.setupModel=function(t){return Fr(this,void 0,void 0,(function(){var e,r,i,n,o,a,u,l,h,c,f,p,g,d,m,_,y,b,v,A,S,w,x,C;return Dr(this,(function(B){switch(B.label){case 0:return this._updating=!0,this._initialized=!1,this._modelSetting=t,""==this._modelSetting.getModelFileName()?[3,12]:(this._state=Tr.WaitLoadModel,e=this._modelSetting.getModelFileName(),e=this._setting.baseUrl+e,[4,s.getArraybuffer(e)]);case 1:if(r=B.sent(),this.loadModel(r),this._state=Tr.LoadExpression,!(this._modelSetting.getExpressionCount()>0))return[3,5];this._state=Tr.WaitLoadExpression,i=this._modelSetting.getExpressionCount(),C=0,B.label=2;case 2:return C<i?(n=this._modelSetting.getExpressionName(C),o=this._modelSetting.getExpressionFileName(C),o=this._setting.baseUrl+o,[4,s.getArraybuffer(o)]):[3,5];case 3:a=B.sent(),u=a.byteLength,l=this.loadExpression(a,u,n),null!=this._expressions.getValue(n)&&(Xr.delete(this._expressions.getValue(n)),this._expressions.setValue(n,null)),this._expressions.setValue(n,l),this._expressionCount++,B.label=4;case 4:return C++,[3,2];case 5:return this._state=Tr.LoadPhysics,""==this._modelSetting.getPhysicsFileName()?[3,7]:(this._state=Tr.WaitLoadPhysics,h=this._modelSetting.getPhysicsFileName(),h=this._setting.baseUrl+h,[4,s.getArraybuffer(h)]);case 6:c=B.sent(),f=c.byteLength,this.loadPhysics(c,f),B.label=7;case 7:return this._state=Tr.LoadPose,""==this._modelSetting.getPoseFileName()?[3,9]:(this._state=Tr.WaitLoadPose,p=this._modelSetting.getPoseFileName(),p=this._setting.baseUrl+p,[4,s.getArraybuffer(p)]);case 8:g=B.sent(),d=g.byteLength,this.loadPose(g,d),B.label=9;case 9:return this._state=Tr.SetupEyeBlink,this._modelSetting.getEyeBlinkParameterCount()>0&&(this._eyeBlink=Yr.create(this._modelSetting)),this._state=Tr.SetupBreath,this._breath=zr.create(),(m=new Or).pushBack(new Gr(this._idParamAngleX,0,15,6.5345,.5)),m.pushBack(new Gr(this._idParamAngleY,0,8,3.5345,.5)),m.pushBack(new Gr(this._idParamAngleZ,0,10,5.5345,.5)),m.pushBack(new Gr(this._idParamBodyAngleX,0,4,15.5345,.5)),m.pushBack(new Gr(jr.getIdManager().getId(Qr.ParamBreath),0,.5,3.2345,.5)),this._breath.setParameters(m),this._state=Tr.LoadUserData,""==this._modelSetting.getUserDataFile()?[3,11]:(this._state=Tr.WaitLoadUserData,_=this._modelSetting.getUserDataFile(),_=this._setting.baseUrl+_,[4,s.getArraybuffer(_)]);case 10:y=B.sent(),b=y.byteLength,this.loadUserData(y,b),B.label=11;case 11:for(this._state=Tr.SetupEyeBlinkIds,v=this._modelSetting.getEyeBlinkParameterCount(),C=0;C<v;++C)this._eyeBlinkIds.pushBack(this._modelSetting.getEyeBlinkParameterId(C));for(this._state=Tr.SetupLipSyncIds,A=this._modelSetting.getLipSyncParameterCount(),C=0;C<A;++C)this._lipSyncIds.pushBack(this._modelSetting.getLipSyncParameterId(C));for(this._state=Tr.SetupLayout,S=new Nr,this._modelSetting.getLayoutMap(S),this._modelMatrix.setupFromLayout(S),this._state=Tr.LoadMotion,this._state=Tr.WaitLoadMotion,this._model.saveParameters(),this._allMotionCount=0,this._motionCount=0,w=[],x=this._modelSetting.getMotionGroupCount(),C=0;C<x;C++)w[C]=this._modelSetting.getMotionGroupName(C),this._allMotionCount+=this._modelSetting.getMotionCount(w[C]);for(C=0;C<x;C++)this.preLoadMotionGroup(w[C]);return 0==x&&(this._state=Tr.LoadTexture,this._motionManager.stopAllMotions(),this._updating=!1,this._initialized=!0,this.createRenderer(),this.setupTextures(),this.getRenderer().startUp(this._webgl.gl)),[3,12];case 12:return[2]}}))}))},e.prototype.setupTextures=function(){return Fr(this,void 0,void 0,(function(){var t,e,r,i,n;return Dr(this,(function(o){switch(o.label){case 0:if(t=!0,this._state!=Tr.LoadTexture)return[3,5];this._state=Tr.WaitLoadTexture,e=this._modelSetting.getTextureCount(),r=0,o.label=1;case 1:return r<e?""==this._modelSetting.getTextureFileName(r)?(console.log("getTextureFileName null"),[3,3]):(i=this._modelSetting.getTextureFileName(r),i=this._setting.baseUrl+i,[4,this._textureManager.createTextureFromPngFile(i,t)]):[3,4];case 2:n=o.sent(),this.getRenderer().bindTexture(r,n.id),this._textureCount++,this.getRenderer().setIsPremultipliedAlpha(t),o.label=3;case 3:return r++,[3,1];case 4:this._state=Tr.CompleteSetup,o.label=5;case 5:return[2]}}))}))},e.prototype.reloadRenderer=function(){this.deleteRenderer(),this.createRenderer(),this.setupTextures()},e.prototype.update=function(){if(this._state==Tr.CompleteSetup){var t=this.s_deltaTime;this._userTimeSeconds+=t,this._dragManager.update(t),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY();var e=!1;if(this._model.loadParameters(),this._motionManager.isFinished()?this.startRandomMotion(this._setting.idle,this._setting.Priority.Idle):e=this._motionManager.updateMotion(this._model,t),this._model.saveParameters(),e||null!=this._eyeBlink&&this._eyeBlink.updateParameters(this._model,t),null!=this._expressionManager&&this._expressionManager.updateMotion(this._model,t),this._model.addParameterValueById(this._idParamAngleX,30*this._dragX),this._model.addParameterValueById(this._idParamAngleY,30*this._dragY),this._model.addParameterValueById(this._idParamAngleZ,this._dragX*this._dragY*-30),this._model.addParameterValueById(this._idParamBodyAngleX,10*this._dragX),this._model.addParameterValueById(this._idParamEyeBallX,this._dragX),this._model.addParameterValueById(this._idParamEyeBallY,this._dragY),null!=this._breath&&this._breath.updateParameters(this._model,t),null!=this._physics&&this._physics.evaluate(this._model,t),this._lipsync)for(var r=0;r<this._lipSyncIds.getSize();++r)this._model.addParameterValueById(this._lipSyncIds.at(r),0,.8);null!=this._pose&&this._pose.updateParameters(this._model,t),this._model.update()}},e.prototype.startMotion=function(t,e,r){var i=this;if(r==this._setting.Priority.Force)this._motionManager.setReservePriority(r);else if(!this._motionManager.reserveMotion(r))return this._debugMode&&n.log("can't start motion."),Lr;var o=this._modelSetting.getMotionFileName(t,e),a=Ur.getFormatedString("{0}_{1}",t,e),s=this._motions.getValue(a),u=!1;if(null==s){var l=o;l=this._setting.baseUrl+l,fetch(l).then((function(t){return t.arrayBuffer()})).then((function(r){var n=r,o=n.byteLength;s=i.loadMotion(n,o,null);var a=i._modelSetting.getMotionFadeInTimeValue(t,e);a>=0&&s.setFadeInTime(a),(a=i._modelSetting.getMotionFadeOutTimeValue(t,e))>=0&&s.setFadeOutTime(a),s.setEffectIds(i._eyeBlinkIds,i._lipSyncIds),u=!0}))}return n.log("start motion: ["+t+"_"+e+"]",!0),this._motionManager.startMotionPriority(s,u,r)},e.prototype.startRandomMotion=function(t,e){if(0==this._modelSetting.getMotionCount(t))return Lr;var r=Math.floor(Math.random()*this._modelSetting.getMotionCount(t));return this.startMotion(t,r,e)},e.prototype.setExpression=function(t){var e=this._expressions.getValue(t);n.log("expression: ["+t+"]",!0),null!=e?this._expressionManager.startMotionPriority(e,!1,this._setting.Priority.Force):n.log("expression["+t+"] is null",!0)},e.prototype.setRandomExpression=function(){if(0!=this._expressions.getSize())for(var t=Math.floor(Math.random()*this._expressions.getSize()),e=0;e<this._expressions.getSize();e++)if(e==t){var r=this._expressions._keyValues[e].first;return void this.setExpression(r)}},e.prototype.motionEventFired=function(t){b("{0} is fired on LAppModel!!",t.s)},e.prototype.getHitList=function(t,e){for(var r=[],i=0,n=this.getDrawableIds();i<n.length;i++){var o=n[i],a=jr.getIdManager().getId(o),s=this.isHit(a,t,e);s.hit&&r.push({cubismIdHandle:a,area:s.area,id:o})}return r.sort((function(t,e){return t.area-e.area})),r},e.prototype.preLoadMotionGroup=function(t){for(var e=this,r=function(r){var o=Ur.getFormatedString("{0}_{1}",t,r),a=i._modelSetting.getMotionFileName(t,r);a=i._setting.baseUrl+a,n.log("load motion: "+a+" => ["+t+"_"+r+"]",!0),fetch(a).then((function(t){return t.arrayBuffer()})).then((function(i){var n=i,a=n.byteLength,s=e.loadMotion(n,a,o),u=e._modelSetting.getMotionFadeInTimeValue(t,r);u>=0&&s.setFadeInTime(u),(u=e._modelSetting.getMotionFadeOutTimeValue(t,r))>=0&&s.setFadeOutTime(u),s.setEffectIds(e._eyeBlinkIds,e._lipSyncIds),null!=e._motions.getValue(o)&&Xr.delete(e._motions.getValue(o)),e._motions.setValue(o,s),e._motionCount++,e._motionCount>=e._allMotionCount&&(e._state=Tr.LoadTexture,e._motionManager.stopAllMotions(),e._updating=!1,e._initialized=!0,e.createRenderer(),e.setupTextures(),e.getRenderer().startUp(e._webgl.gl))}))},i=this,o=0;o<this._modelSetting.getMotionCount(t);o++)r(o)},e.prototype.releaseMotions=function(){this._motions.clear()},e.prototype.releaseExpressions=function(){this._expressions.clear()},e.prototype.doDraw=function(){if(null!=this._model){var t=[0,0,this._setting.canvas.width,this._setting.canvas.height];this.getRenderer().setRenderState(this._webgl.frameBuffer,t),this.getRenderer().drawModel()}},e.prototype.draw=function(t){null!=this._model&&this._state==Tr.CompleteSetup&&(t.multiplyByMatrix(this._modelMatrix),this.getRenderer().setMvpMatrix(t),this.doDraw())},e.prototype.updateTime=function(){this.s_currentFrame=Date.now(),this.s_deltaTime=(this.s_currentFrame-this.s_lastFrame)/1e3,this.s_lastFrame=this.s_currentFrame},e.prototype.onUpdate=function(){var t,e,r=new qr;t=this._setting.canvas.width,e=this._setting.canvas.height,r.scale(1,t/e),null!=this._viewMatrix&&r.multiplyByMatrix(this._viewMatrix),this.update(),this.draw(r)},e.prototype.getDrawableIds=function(){return this._model.getModel().drawables.ids},e}(Hr),Kr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$r=E.CubismMatrix44;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._screenLeft=0,e._screenRight=0,e._screenTop=0,e._screenBottom=0,e._maxLeft=0,e._maxRight=0,e._maxTop=0,e._maxBottom=0,e._maxScale=0,e._minScale=0,e}return Kr(e,t),e.prototype.adjustTranslate=function(t,e){this._tr[0]*this._maxLeft+(this._tr[12]+t)>this._screenLeft&&(t=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+t)<this._screenRight&&(t=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+e)<this._screenTop&&(e=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+e)>this._screenBottom&&(e=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);var r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]);$r.multiply(r,this._tr,this._tr)},e.prototype.adjustScale=function(t,e,r){var i=this.getMaxScale(),n=this.getMinScale(),o=r*this._tr[0];o<n?this._tr[0]>0&&(r=n/this._tr[0]):o>i&&this._tr[0]>0&&(r=i/this._tr[0]);var a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]),s=new Float32Array([r,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-t,-e,0,1]);$r.multiply(u,this._tr,this._tr),$r.multiply(s,this._tr,this._tr),$r.multiply(a,this._tr,this._tr)},e.prototype.setScreenRect=function(t,e,r,i){this._screenLeft=t,this._screenRight=e,this._screenBottom=r,this._screenTop=i},e.prototype.setMaxScreenRect=function(t,e,r,i){this._maxLeft=t,this._maxRight=e,this._maxTop=i,this._maxBottom=r},e.prototype.setMaxScale=function(t){this._maxScale=t},e.prototype.setMinScale=function(t){this._minScale=t},e.prototype.getMaxScale=function(){return this._maxScale},e.prototype.getMinScale=function(){return this._minScale},e.prototype.isMaxScale=function(){return this.getScaleX()>=this._maxScale},e.prototype.isMinScale=function(){return this.getScaleX()<=this._minScale},e.prototype.getScreenLeft=function(){return this._screenLeft},e.prototype.getScreenRight=function(){return this._screenRight},e.prototype.getScreenBottom=function(){return this._screenBottom},e.prototype.getScreenTop=function(){return this._screenTop},e.prototype.getMaxLeft=function(){return this._maxLeft},e.prototype.getMaxRight=function(){return this._maxRight},e.prototype.getMaxBottom=function(){return this._maxBottom},e.prototype.getMaxTop=function(){return this._maxTop},e}($r);t.CubismViewMatrix=e}(Jr||(Jr={}));var ti=Jr.CubismViewMatrix,ei=E.CubismMatrix44,ri=function(){function t(t,e,r){var i,n;this._captured=!1,this._coordinateManager=new ii,this._deviceToScreen=new ei,this._viewMatrix=new ti,this._setting=t,this._view=e,this._model=r,i=t.canvas.width;var o=(n=t.canvas.height)/i,a=t.view.VIEW_LOGICAL_LEFT,s=t.view.VIEW_LOGICAL_RIGHT,u=-o,l=o;this._viewMatrix.setScreenRect(a,s,u,l);var h=Math.abs(a-s);this._deviceToScreen.scaleRelative(h/i,-h/i),this._deviceToScreen.translateRelative(.5*-i,.5*-n),this._viewMatrix.setMaxScale(t.view.VIEW_MAX_SCALE),this._viewMatrix.setMinScale(t.view.VIEW_MIN_SCALE),this._viewMatrix.setMaxScreenRect(t.view.VIEW_LOGICAL_MAX_LEFT,t.view.VIEW_LOGICAL_MAX_RIGHT,t.view.VIEW_LOGICAL_MAX_BOTTOM,t.view.VIEW_LOGICAL_MAX_TOP),this.bindEvent()}return t.prototype.bindEvent=function(){var t=this;"ontouchend"in this._setting.canvas?(this._setting.canvas.ontouchstart=function(e){t.onTouchBegan(e)},this._setting.canvas.ontouchmove=function(e){t.onTouchMoved(e)},this._setting.canvas.ontouchend=function(e){t.onTouchEnded(e)},this._setting.canvas.ontouchcancel=function(e){t.onTouchCancel(e)}):(this._setting.canvas.onmousedown=function(e){t.onClickBegan(e)},this._setting.canvas.onmousemove=function(e){t.onMouseMoved(e)},this._setting.canvas.onmouseup=function(e){t.onClickEnded(e)})},t.prototype.onClickBegan=function(t){this._captured=!0;var e=t.pageX,r=t.pageY;this.onTouchesBegan(e,r)},t.prototype.onMouseMoved=function(t){if(this._captured){var e=t.target.getBoundingClientRect(),r=t.clientX-e.left,i=t.clientY-e.top;this.onTouchesMoved(r,i)}},t.prototype.onClickEnded=function(t){this._captured=!1;var e=t.target.getBoundingClientRect(),r=t.clientX-e.left,i=t.clientY-e.top;this.onTouchesEnded(r,i)},t.prototype.onTouchBegan=function(t){this._captured=!0;var e=t.changedTouches[0].pageX,r=t.changedTouches[0].pageY;this.onTouchesBegan(e,r)},t.prototype.onTouchMoved=function(t){if(this._captured){var e=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-e.left,i=t.changedTouches[0].clientY-e.top;this.onTouchesMoved(r,i)}},t.prototype.onTouchEnded=function(t){this._captured=!1;var e=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-e.left,i=t.changedTouches[0].clientY-e.top;this.onTouchesEnded(r,i)},t.prototype.onTouchCancel=function(t){this._captured=!1;var e=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-e.left,i=t.changedTouches[0].clientY-e.top;this.onTouchesEnded(r,i)},t.prototype.onTouchesBegan=function(t,e){this._coordinateManager.touchesBegan(t,e)},t.prototype.onTouchesMoved=function(t,e){var r=this.transformViewX(this._coordinateManager.getX()),i=this.transformViewY(this._coordinateManager.getY());this._coordinateManager.touchesMoved(t,e),this._model.setDragging(r,i)},t.prototype.onTouchesEnded=function(t,e){this._model.setDragging(0,0);var r=this._deviceToScreen.transformX(this._coordinateManager.getX()),i=this._deviceToScreen.transformY(this._coordinateManager.getY());this.onTap(r,i)},t.prototype.transformViewX=function(t){var e=this._deviceToScreen.transformX(t);return this._viewMatrix.invertTransformX(e)},t.prototype.transformViewY=function(t){var e=this._deviceToScreen.transformY(t);return this._viewMatrix.invertTransformY(e)},t.prototype.transformScreenX=function(t){return this._deviceToScreen.transformX(t)},t.prototype.transformScreenY=function(t){return this._deviceToScreen.transformY(t)},t.prototype.onTap=function(t,e){n.log("onTap x: "+t+" y: "+e,!0);for(var r=0,i=this._model.getHitList(t,e);r<i.length;r++){var o=i[r];if(this._setting.debug&&n.log("Hit drawId : "+o.id,!0),this._setting.binding[o.id])return void this._model.startRandomMotion(s.getRandomItem(this._setting.binding[o.id].motion),2);this._setting.debug&&n.log("Hit drawId "+o.id+" not found binding",!0)}},t}(),ii=function(){function t(){this._startX=0,this._startY=0,this._lastX=0,this._lastY=0,this._lastX1=0,this._lastY1=0,this._lastX2=0,this._lastY2=0,this._lastTouchDistance=0,this._deltaX=0,this._deltaY=0,this._scale=1,this._touchSingle=!1,this._flipAvailable=!1}return t.prototype.getCenterX=function(){return this._lastX},t.prototype.getCenterY=function(){return this._lastY},t.prototype.getDeltaX=function(){return this._deltaX},t.prototype.getDeltaY=function(){return this._deltaY},t.prototype.getStartX=function(){return this._startX},t.prototype.getStartY=function(){return this._startY},t.prototype.getScale=function(){return this._scale},t.prototype.getX=function(){return this._lastX},t.prototype.getY=function(){return this._lastY},t.prototype.getX1=function(){return this._lastX1},t.prototype.getY1=function(){return this._lastY1},t.prototype.getX2=function(){return this._lastX2},t.prototype.getY2=function(){return this._lastY2},t.prototype.isSingleTouch=function(){return this._touchSingle},t.prototype.isFlickAvailable=function(){return this._flipAvailable},t.prototype.disableFlick=function(){this._flipAvailable=!1},t.prototype.touchesBegan=function(t,e){this._lastX=t,this._lastY=e,this._startX=t,this._startY=e,this._lastTouchDistance=-1,this._flipAvailable=!0,this._touchSingle=!0},t.prototype.touchesMoved=function(t,e){this._lastX=t,this._lastY=e,this._lastTouchDistance=-1,this._touchSingle=!0},t.prototype.getFlickDistance=function(){return this.calculateDistance(this._startX,this._startY,this._lastX,this._lastY)},t.prototype.calculateDistance=function(t,e,r,i){return Math.sqrt((t-r)*(t-r)+(e-i)*(e-i))},t.prototype.calculateMovingAmount=function(t,e){if(t>0!=e>0)return 0;var r=t>0?1:-1,i=Math.abs(t),n=Math.abs(e);return r*(i<n?i:n)},t}(),ni=E.CubismMatrix44,oi=D.CubismFramework,ai=function(){function t(t){this._cubismOption=new Y,this._webgl=new J(t.canvas),this._view=new Z(this._webgl),this._textureManager=new Q(this._webgl),this._cubismOption.logFunction=n.log,this._cubismOption.loggingLevel=0,oi.startUp(this._cubismOption),oi.initialize();new ni;this._model=new Zr(t,this._textureManager,this._webgl),this._touchManage=new ri(t,this._view,this._model),this.loop()}return t.prototype.loop=function(){var t=this;this._model.updateTime(),this._webgl.gl.clearColor(0,0,0,0),this._webgl.gl.enable(this._webgl.gl.DEPTH_TEST),this._webgl.gl.depthFunc(this._webgl.gl.LEQUAL),this._webgl.gl.clear(this._webgl.gl.COLOR_BUFFER_BIT|this._webgl.gl.DEPTH_BUFFER_BIT),this._webgl.gl.clearDepth(1),this._webgl.gl.enable(this._webgl.gl.BLEND),this._webgl.gl.blendFunc(this._webgl.gl.SRC_ALPHA,this._webgl.gl.ONE_MINUS_SRC_ALPHA),this._view.render(),this._model.onUpdate(),requestAnimationFrame((function(){t.loop()}))},t}(),si=function(){function t(t,e){this._setting=t,this._cubismSDK=e}return Object.defineProperty(t.prototype,"HitAreasList",{get:function(){return this._cubismSDK._model.getDrawableIds()},enumerable:!0,configurable:!0}),t}(),ui=function(){function t(t,e){var r=this;this.setting=new h,this.setting.init(t,e).then((function(){r.load()})),this.setting.canvas._Live2dHelper=this}return t.prototype.load=function(){this.cubismSDK=new ai(this.setting),this.modelInfo=new si(this.setting,this.cubismSDK)},t}();e.default=ui}]).default}));